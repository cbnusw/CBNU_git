(this.webpackJsonp=this.webpackJsonp||[]).push([[7,21],{1406:function(t,i){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},1407:function(t,i,e){var n=e(343),o=e(223);t.exports=function(t){if(void 0===t)return 0;var i=n(t),e=o(i);if(i!==e)throw RangeError("Wrong length or index");return e}},1408:function(t,i,e){var n=e(1660);t.exports=function(t,i){var e=n(t);if(e%i)throw RangeError("Wrong offset");return e}},1622:function(t,i,e){e(1656)("Uint8",(function(t){return function(i,e,n){return t(this,i,e,n)}}))},1623:function(t,i,e){"use strict";var n=e(418),o=e(1662),r=n.aTypedArray;(0,n.exportTypedArrayMethod)("copyWithin",(function(t,i){return o.call(r(this),t,i,arguments.length>2?arguments[2]:void 0)}))},1624:function(t,i,e){"use strict";var n=e(418),o=e(493).every,r=n.aTypedArray;(0,n.exportTypedArrayMethod)("every",(function(t){return o(r(this),t,arguments.length>1?arguments[1]:void 0)}))},1625:function(t,i,e){"use strict";var n=e(418),o=e(1261),r=n.aTypedArray;(0,n.exportTypedArrayMethod)("fill",(function(t){return o.apply(r(this),arguments)}))},1626:function(t,i,e){"use strict";var n=e(418),o=e(493).filter,r=e(354),a=n.aTypedArray,s=n.aTypedArrayConstructor;(0,n.exportTypedArrayMethod)("filter",(function(t){for(var i=o(a(this),t,arguments.length>1?arguments[1]:void 0),e=r(this,this.constructor),n=0,h=i.length,c=new(s(e))(h);h>n;)c[n]=i[n++];return c}))},1627:function(t,i,e){"use strict";var n=e(418),o=e(493).find,r=n.aTypedArray;(0,n.exportTypedArrayMethod)("find",(function(t){return o(r(this),t,arguments.length>1?arguments[1]:void 0)}))},1628:function(t,i,e){"use strict";var n=e(418),o=e(493).findIndex,r=n.aTypedArray;(0,n.exportTypedArrayMethod)("findIndex",(function(t){return o(r(this),t,arguments.length>1?arguments[1]:void 0)}))},1629:function(t,i,e){"use strict";var n=e(418),o=e(493).forEach,r=n.aTypedArray;(0,n.exportTypedArrayMethod)("forEach",(function(t){o(r(this),t,arguments.length>1?arguments[1]:void 0)}))},1630:function(t,i,e){"use strict";var n=e(418),o=e(1056).includes,r=n.aTypedArray;(0,n.exportTypedArrayMethod)("includes",(function(t){return o(r(this),t,arguments.length>1?arguments[1]:void 0)}))},1631:function(t,i,e){"use strict";var n=e(418),o=e(1056).indexOf,r=n.aTypedArray;(0,n.exportTypedArrayMethod)("indexOf",(function(t){return o(r(this),t,arguments.length>1?arguments[1]:void 0)}))},1632:function(t,i,e){"use strict";var n=e(329),o=e(418),r=e(40),a=e(393)("iterator"),s=n.Uint8Array,h=r.values,c=r.keys,p=r.entries,l=o.aTypedArray,d=o.exportTypedArrayMethod,u=s&&s.prototype[a],f=!!u&&("values"==u.name||null==u.name),g=function(){return h.call(l(this))};d("entries",(function(){return p.call(l(this))})),d("keys",(function(){return c.call(l(this))})),d("values",g,!f),d(a,g,!f)},1633:function(t,i,e){"use strict";var n=e(418),o=n.aTypedArray,r=n.exportTypedArrayMethod,a=[].join;r("join",(function(t){return a.apply(o(this),arguments)}))},1634:function(t,i,e){"use strict";var n=e(418),o=e(494),r=n.aTypedArray;(0,n.exportTypedArrayMethod)("lastIndexOf",(function(t){return o.apply(r(this),arguments)}))},1635:function(t,i,e){"use strict";var n=e(418),o=e(493).map,r=e(354),a=n.aTypedArray,s=n.aTypedArrayConstructor;(0,n.exportTypedArrayMethod)("map",(function(t){return o(a(this),t,arguments.length>1?arguments[1]:void 0,(function(t,i){return new(s(r(t,t.constructor)))(i)}))}))},1636:function(t,i,e){"use strict";var n=e(418),o=e(1260).left,r=n.aTypedArray;(0,n.exportTypedArrayMethod)("reduce",(function(t){return o(r(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}))},1637:function(t,i,e){"use strict";var n=e(418),o=e(1260).right,r=n.aTypedArray;(0,n.exportTypedArrayMethod)("reduceRight",(function(t){return o(r(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}))},1638:function(t,i,e){"use strict";var n=e(418),o=n.aTypedArray,r=n.exportTypedArrayMethod,a=Math.floor;r("reverse",(function(){for(var t,i=o(this).length,e=a(i/2),n=0;n<e;)t=this[n],this[n++]=this[--i],this[i]=t;return this}))},1639:function(t,i,e){"use strict";var n=e(418),o=e(223),r=e(1408),a=e(373),s=e(239),h=n.aTypedArray;(0,n.exportTypedArrayMethod)("set",(function(t){h(this);var i=r(arguments.length>1?arguments[1]:void 0,1),e=this.length,n=a(t),s=o(n.length),c=0;if(s+i>e)throw RangeError("Wrong length");for(;c<s;)this[i+c]=n[c++]}),s((function(){new Int8Array(1).set({})})))},1640:function(t,i,e){"use strict";var n=e(418),o=e(354),r=e(239),a=n.aTypedArray,s=n.aTypedArrayConstructor,h=n.exportTypedArrayMethod,c=[].slice;h("slice",(function(t,i){for(var e=c.call(a(this),t,i),n=o(this,this.constructor),r=0,h=e.length,p=new(s(n))(h);h>r;)p[r]=e[r++];return p}),r((function(){new Int8Array(1).slice()})))},1641:function(t,i,e){"use strict";var n=e(418),o=e(493).some,r=n.aTypedArray;(0,n.exportTypedArrayMethod)("some",(function(t){return o(r(this),t,arguments.length>1?arguments[1]:void 0)}))},1642:function(t,i,e){"use strict";var n=e(418),o=n.aTypedArray,r=n.exportTypedArrayMethod,a=[].sort;r("sort",(function(t){return a.call(o(this),t)}))},1643:function(t,i,e){"use strict";var n=e(418),o=e(223),r=e(998),a=e(354),s=n.aTypedArray;(0,n.exportTypedArrayMethod)("subarray",(function(t,i){var e=s(this),n=e.length,h=r(t,n);return new(a(e,e.constructor))(e.buffer,e.byteOffset+h*e.BYTES_PER_ELEMENT,o((void 0===i?n:r(i,n))-h))}))},1644:function(t,i,e){"use strict";var n=e(329),o=e(418),r=e(239),a=n.Int8Array,s=o.aTypedArray,h=o.exportTypedArrayMethod,c=[].toLocaleString,p=[].slice,l=!!a&&r((function(){c.call(new a(1))}));h("toLocaleString",(function(){return c.apply(l?p.call(s(this)):s(this),arguments)}),r((function(){return[1,2].toLocaleString()!=new a([1,2]).toLocaleString()}))||!r((function(){a.prototype.toLocaleString.call([1,2])})))},1645:function(t,i,e){"use strict";var n=e(418).exportTypedArrayMethod,o=e(239),r=e(329).Uint8Array,a=r&&r.prototype||{},s=[].toString,h=[].join;o((function(){s.call({})}))&&(s=function(){return h.call(this)});var c=a.toString!=s;n("toString",s,c)},1656:function(t,i,e){"use strict";var n=e(108),o=e(329),r=e(391),a=e(1657),s=e(418),h=e(1658),c=e(737),p=e(832),l=e(675),d=e(223),u=e(1407),f=e(1408),g=e(1001),m=e(296),v=e(1057),y=e(271),w=e(785),b=e(1054),x=e(831).f,C=e(1661),T=e(493).forEach,B=e(1173),A=e(438),D=e(344),k=e(529),I=e(1175),M=k.get,E=k.set,$=A.f,L=D.f,R=Math.round,O=o.RangeError,W=h.ArrayBuffer,Y=h.DataView,z=s.NATIVE_ARRAY_BUFFER_VIEWS,F=s.TYPED_ARRAY_TAG,U=s.TypedArray,S=s.TypedArrayPrototype,P=s.aTypedArrayConstructor,X=s.isTypedArray,H=function(t,i){for(var e=0,n=i.length,o=new(P(t))(n);n>e;)o[e]=i[e++];return o},_=function(t,i){$(t,i,{get:function(){return M(this)[i]}})},j=function(t){var i;return t instanceof W||"ArrayBuffer"==(i=v(t))||"SharedArrayBuffer"==i},N=function(t,i){return X(t)&&"symbol"!=typeof i&&i in t&&String(+i)==String(i)},V=function(t,i){return N(t,i=g(i,!0))?p(2,t[i]):L(t,i)},G=function(t,i,e){return!(N(t,i=g(i,!0))&&y(e)&&m(e,"value"))||m(e,"get")||m(e,"set")||e.configurable||m(e,"writable")&&!e.writable||m(e,"enumerable")&&!e.enumerable?$(t,i,e):(t[i]=e.value,t)};r?(z||(D.f=V,A.f=G,_(S,"buffer"),_(S,"byteOffset"),_(S,"byteLength"),_(S,"length")),n({target:"Object",stat:!0,forced:!z},{getOwnPropertyDescriptor:V,defineProperty:G}),t.exports=function(t,i,e){var r=t.match(/\d+$/)[0]/8,s=t+(e?"Clamped":"")+"Array",h="get"+t,p="set"+t,g=o[s],m=g,v=m&&m.prototype,A={},D=function(t,i){$(t,i,{get:function(){return function(t,i){var e=M(t);return e.view[h](i*r+e.byteOffset,!0)}(this,i)},set:function(t){return function(t,i,n){var o=M(t);e&&(n=(n=R(n))<0?0:n>255?255:255&n),o.view[p](i*r+o.byteOffset,n,!0)}(this,i,t)},enumerable:!0})};z?a&&(m=i((function(t,i,e,n){return c(t,m,s),I(y(i)?j(i)?void 0!==n?new g(i,f(e,r),n):void 0!==e?new g(i,f(e,r)):new g(i):X(i)?H(m,i):C.call(m,i):new g(u(i)),t,m)})),b&&b(m,U),T(x(g),(function(t){t in m||l(m,t,g[t])})),m.prototype=v):(m=i((function(t,i,e,n){c(t,m,s);var o,a,h,p=0,l=0;if(y(i)){if(!j(i))return X(i)?H(m,i):C.call(m,i);o=i,l=f(e,r);var g=i.byteLength;if(void 0===n){if(g%r)throw O("Wrong length");if((a=g-l)<0)throw O("Wrong length")}else if((a=d(n)*r)+l>g)throw O("Wrong length");h=a/r}else h=u(i),o=new W(a=h*r);for(E(t,{buffer:o,byteOffset:l,byteLength:a,length:h,view:new Y(o)});p<h;)D(t,p++)})),b&&b(m,U),v=m.prototype=w(S)),v.constructor!==m&&l(v,"constructor",m),F&&l(v,F,s),A[s]=m,n({global:!0,forced:m!=g,sham:!z},A),"BYTES_PER_ELEMENT"in m||l(m,"BYTES_PER_ELEMENT",r),"BYTES_PER_ELEMENT"in v||l(v,"BYTES_PER_ELEMENT",r),B(s)}):t.exports=function(){}},1657:function(t,i,e){var n=e(329),o=e(239),r=e(1174),a=e(418).NATIVE_ARRAY_BUFFER_VIEWS,s=n.ArrayBuffer,h=n.Int8Array;t.exports=!a||!o((function(){h(1)}))||!o((function(){new h(-1)}))||!r((function(t){new h,new h(null),new h(1.5),new h(t)}),!0)||o((function(){return 1!==new h(new s(2),1,void 0).length}))},1658:function(t,i,e){"use strict";var n=e(329),o=e(391),r=e(1406),a=e(675),s=e(738),h=e(239),c=e(737),p=e(343),l=e(223),d=e(1407),u=e(1659),f=e(419),g=e(1054),m=e(831).f,v=e(438).f,y=e(1261),w=e(786),b=e(529),x=b.get,C=b.set,T=n.ArrayBuffer,B=T,A=n.DataView,D=A&&A.prototype,k=Object.prototype,I=n.RangeError,M=u.pack,E=u.unpack,$=function(t){return[255&t]},L=function(t){return[255&t,t>>8&255]},R=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},O=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},W=function(t){return M(t,23,4)},Y=function(t){return M(t,52,8)},z=function(t,i){v(t.prototype,i,{get:function(){return x(this)[i]}})},F=function(t,i,e,n){var o=d(e),r=x(t);if(o+i>r.byteLength)throw I("Wrong index");var a=x(r.buffer).bytes,s=o+r.byteOffset,h=a.slice(s,s+i);return n?h:h.reverse()},U=function(t,i,e,n,o,r){var a=d(e),s=x(t);if(a+i>s.byteLength)throw I("Wrong index");for(var h=x(s.buffer).bytes,c=a+s.byteOffset,p=n(+o),l=0;l<i;l++)h[c+l]=p[r?l:i-l-1]};if(r){if(!h((function(){T(1)}))||!h((function(){new T(-1)}))||h((function(){return new T,new T(1.5),new T(NaN),"ArrayBuffer"!=T.name}))){for(var S,P=(B=function(t){return c(this,B),new T(d(t))}).prototype=T.prototype,X=m(T),H=0;X.length>H;)(S=X[H++])in B||a(B,S,T[S]);P.constructor=B}g&&f(D)!==k&&g(D,k);var _=new A(new B(2)),j=D.setInt8;_.setInt8(0,2147483648),_.setInt8(1,2147483649),!_.getInt8(0)&&_.getInt8(1)||s(D,{setInt8:function(t,i){j.call(this,t,i<<24>>24)},setUint8:function(t,i){j.call(this,t,i<<24>>24)}},{unsafe:!0})}else B=function(t){c(this,B,"ArrayBuffer");var i=d(t);C(this,{bytes:y.call(new Array(i),0),byteLength:i}),o||(this.byteLength=i)},A=function(t,i,e){c(this,A,"DataView"),c(t,B,"DataView");var n=x(t).byteLength,r=p(i);if(r<0||r>n)throw I("Wrong offset");if(r+(e=void 0===e?n-r:l(e))>n)throw I("Wrong length");C(this,{buffer:t,byteLength:e,byteOffset:r}),o||(this.buffer=t,this.byteLength=e,this.byteOffset=r)},o&&(z(B,"byteLength"),z(A,"buffer"),z(A,"byteLength"),z(A,"byteOffset")),s(A.prototype,{getInt8:function(t){return F(this,1,t)[0]<<24>>24},getUint8:function(t){return F(this,1,t)[0]},getInt16:function(t){var i=F(this,2,t,arguments.length>1?arguments[1]:void 0);return(i[1]<<8|i[0])<<16>>16},getUint16:function(t){var i=F(this,2,t,arguments.length>1?arguments[1]:void 0);return i[1]<<8|i[0]},getInt32:function(t){return O(F(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return O(F(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return E(F(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return E(F(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,i){U(this,1,t,$,i)},setUint8:function(t,i){U(this,1,t,$,i)},setInt16:function(t,i){U(this,2,t,L,i,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,i){U(this,2,t,L,i,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,i){U(this,4,t,R,i,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,i){U(this,4,t,R,i,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,i){U(this,4,t,W,i,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,i){U(this,8,t,Y,i,arguments.length>2?arguments[2]:void 0)}});w(B,"ArrayBuffer"),w(A,"DataView"),t.exports={ArrayBuffer:B,DataView:A}},1659:function(t,i){var e=Math.abs,n=Math.pow,o=Math.floor,r=Math.log,a=Math.LN2;t.exports={pack:function(t,i,s){var h,c,p,l=new Array(s),d=8*s-i-1,u=(1<<d)-1,f=u>>1,g=23===i?n(2,-24)-n(2,-77):0,m=t<0||0===t&&1/t<0?1:0,v=0;for((t=e(t))!=t||t===1/0?(c=t!=t?1:0,h=u):(h=o(r(t)/a),t*(p=n(2,-h))<1&&(h--,p*=2),(t+=h+f>=1?g/p:g*n(2,1-f))*p>=2&&(h++,p/=2),h+f>=u?(c=0,h=u):h+f>=1?(c=(t*p-1)*n(2,i),h+=f):(c=t*n(2,f-1)*n(2,i),h=0));i>=8;l[v++]=255&c,c/=256,i-=8);for(h=h<<i|c,d+=i;d>0;l[v++]=255&h,h/=256,d-=8);return l[--v]|=128*m,l},unpack:function(t,i){var e,o=t.length,r=8*o-i-1,a=(1<<r)-1,s=a>>1,h=r-7,c=o-1,p=t[c--],l=127&p;for(p>>=7;h>0;l=256*l+t[c],c--,h-=8);for(e=l&(1<<-h)-1,l>>=-h,h+=i;h>0;e=256*e+t[c],c--,h-=8);if(0===l)l=1-s;else{if(l===a)return e?NaN:p?-1/0:1/0;e+=n(2,i),l-=s}return(p?-1:1)*e*n(2,l-i)}}},1660:function(t,i,e){var n=e(343);t.exports=function(t){var i=n(t);if(i<0)throw RangeError("The argument can't be less than 0");return i}},1661:function(t,i,e){var n=e(373),o=e(223),r=e(1059),a=e(1264),s=e(347),h=e(418).aTypedArrayConstructor;t.exports=function(t){var i,e,c,p,l,d,u=n(t),f=arguments.length,g=f>1?arguments[1]:void 0,m=void 0!==g,v=r(u);if(null!=v&&!a(v))for(d=(l=v.call(u)).next,u=[];!(p=d.call(l)).done;)u.push(p.value);for(m&&f>2&&(g=s(g,arguments[2],2)),e=o(u.length),c=new(h(this))(e),i=0;e>i;i++)c[i]=m?g(u[i],i):u[i];return c}},1662:function(t,i,e){"use strict";var n=e(373),o=e(998),r=e(223),a=Math.min;t.exports=[].copyWithin||function(t,i){var e=n(this),s=r(e.length),h=o(t,s),c=o(i,s),p=arguments.length>2?arguments[2]:void 0,l=a((void 0===p?s:o(p,s))-c,s-h),d=1;for(c<h&&h<c+l&&(d=-1,c+=l-1,h+=l-1);l-- >0;)c in e?e[h]=e[c]:delete e[h],h+=d,c+=d;return e}},2238:function(t,i,e){var n,o,r;
/*!
 * Cropper v2.3.0
 * https://github.com/fengyuanchen/cropper
 *
 * Copyright (c) 2014-2016 Fengyuan Chen and contributors
 * Released under the MIT license
 *
 * Date: 2016-02-22T02:13:13.332Z
 */o=[e(0)],void 0===(r="function"==typeof(n=function(t){"use strict";var i=t(window),e=t(document),n=window.location,o=window.navigator,r=window.ArrayBuffer,a=window.Uint8Array,s=window.DataView,h=window.btoa,c="cropper-hidden",p="mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",l=/e|w|s|n|se|sw|ne|nw|all|crop|move|zoom/,d=/^data\:/,u=/^data\:([^\;]+)\;base64,/,f=/^data\:image\/jpeg.*;base64,/,g=t.isFunction(t("<canvas>")[0].getContext),m=o&&/safari/i.test(o.userAgent)&&/apple computer/i.test(o.vendor),v=Number,y=Math.min,w=Math.max,b=Math.abs,x=Math.sin,C=Math.cos,T=Math.sqrt,B=Math.round,A=Math.floor,D=String.fromCharCode;function k(t){return"number"==typeof t&&!isNaN(t)}function I(t){return void 0===t}function M(t,i){var e=[];return k(i)&&e.push(i),e.slice.apply(t,e)}function E(t,i){var e=M(arguments,2);return function(){return t.apply(i,e.concat(M(arguments)))}}function $(t){return t?' crossOrigin="'+t+'"':""}function L(t){var i=[],e=t.rotate,n=t.scaleX,o=t.scaleY;return k(e)&&i.push("rotate("+e+"deg)"),k(n)&&k(o)&&i.push("scale("+n+","+o+")"),i.length?i.join(" "):"none"}function R(t,i){var e,n,o=b(t.degree)%180,r=(o>90?180-o:o)*Math.PI/180,a=x(r),s=C(r),h=t.width,c=t.height,p=t.aspectRatio;return i?n=(e=h/(s+a/p))/p:(e=h*s+c*a,n=h*a+c*s),{width:e,height:n}}function O(t){var i,e,n,o,r,a,h,c,p,l=new s(t),d=l.byteLength;if(255===l.getUint8(0)&&216===l.getUint8(1))for(c=2;c<d;){if(255===l.getUint8(c)&&225===l.getUint8(c+1)){a=c;break}c++}if(a&&(e=a+10,"Exif"===function(t,i,e){var n,o="";for(n=i,e+=i;n<e;n++)o+=D(t.getUint8(n));return o}(l,a+4,4)&&((o=18761===(r=l.getUint16(e)))||19789===r)&&42===l.getUint16(e+2,o)&&(n=l.getUint32(e+4,o))>=8&&(h=e+n)),h)for(d=l.getUint16(h,o),p=0;p<d;p++)if(c=h+12*p+2,274===l.getUint16(c,o)){c+=8,i=l.getUint16(c,o),m&&l.setUint16(c,1,o);break}return i}function W(i,e){this.$element=t(i),this.options=t.extend({},W.DEFAULTS,t.isPlainObject(e)&&e),this.isLoaded=!1,this.isBuilt=!1,this.isCompleted=!1,this.isRotated=!1,this.isCropped=!1,this.isDisabled=!1,this.isReplaced=!1,this.isLimited=!1,this.wheeling=!1,this.isImg=!1,this.originalUrl="",this.canvas=null,this.cropBox=null,this.init()}W.prototype={constructor:W,init:function(){var t,i=this.$element;if(i.is("img")){if(this.isImg=!0,this.originalUrl=t=i.attr("src"),!t)return;t=i.prop("src")}else i.is("canvas")&&g&&(t=i[0].toDataURL());this.load(t)},trigger:function(i,e){var n=t.Event(i,e);return this.$element.trigger(n),n},load:function(i){var e,n,o=this.options,s=this.$element;if(i&&(s.one("build.cropper",o.build),!this.trigger("build.cropper").isDefaultPrevented())){if(this.url=i,this.image={},!o.checkOrientation||!r)return this.clone();if(e=t.proxy(this.read,this),d.test(i))return f.test(i)?e(function(t){var i,e=t.replace(u,""),n=atob(e),o=n.length,s=new r(o),h=new a(s);for(i=0;i<o;i++)h[i]=n.charCodeAt(i);return s}(i)):this.clone();(n=new XMLHttpRequest).onerror=n.onabort=t.proxy((function(){this.clone()}),this),n.onload=function(){e(this.response)},n.open("get",i),n.responseType="arraybuffer",n.send()}},read:function(t){var i,e,n,o=this.options,r=O(t),s=this.image;if(r>1)switch(this.url=function(t){var i,e=new a(t),n=e.length,o="";for(i=0;i<n;i++)o+=D(e[i]);return"data:image/jpeg;base64,"+h(o)}(t),r){case 2:e=-1;break;case 3:i=-180;break;case 4:n=-1;break;case 5:i=90,n=-1;break;case 6:i=90;break;case 7:i=90,e=-1;break;case 8:i=-90}o.rotatable&&(s.rotate=i),o.scalable&&(s.scaleX=e,s.scaleY=n),this.clone()},clone:function(){var i,e,o=this.options,r=this.$element,a=this.url,s="";o.checkCrossOrigin&&function(t){var i=t.match(/^(https?:)\/\/([^\:\/\?#]+):?(\d*)/i);return i&&(i[1]!==n.protocol||i[2]!==n.hostname||i[3]!==n.port)}(a)&&((s=r.prop("crossOrigin"))?i=a:(s="anonymous",i=function(t){var i="timestamp="+(new Date).getTime();return t+(-1===t.indexOf("?")?"?":"&")+i}(a))),this.crossOrigin=s,this.crossOriginUrl=i,this.$clone=e=t("<img"+$(s)+' src="'+(i||a)+'">'),this.isImg?r[0].complete?this.start():r.one("load.cropper",t.proxy(this.start,this)):e.one("load.cropper",t.proxy(this.start,this)).one("error.cropper",t.proxy(this.stop,this)).addClass("cropper-hide").insertAfter(r)},start:function(){var i=this.$element,e=this.$clone;this.isImg||(e.off("error.cropper",this.stop),i=e),function(t,i){var e;if(t.naturalWidth&&!m)return i(t.naturalWidth,t.naturalHeight);(e=document.createElement("img")).onload=function(){i(this.width,this.height)},e.src=t.src}(i[0],t.proxy((function(i,e){t.extend(this.image,{naturalWidth:i,naturalHeight:e,aspectRatio:i/e}),this.isLoaded=!0,this.build()}),this))},stop:function(){this.$clone.remove(),this.$clone=null},build:function(){var i,e,n,o=this.options,r=this.$element,a=this.$clone;this.isLoaded&&(this.isBuilt&&this.unbuild(),this.$container=r.parent(),this.$cropper=i=t(W.TEMPLATE),this.$canvas=i.find(".cropper-canvas").append(a),this.$dragBox=i.find(".cropper-drag-box"),this.$cropBox=e=i.find(".cropper-crop-box"),this.$viewBox=i.find(".cropper-view-box"),this.$face=n=e.find(".cropper-face"),r.addClass(c).after(i),this.isImg||a.removeClass("cropper-hide"),this.initPreview(),this.bind(),o.aspectRatio=w(0,o.aspectRatio)||NaN,o.viewMode=w(0,y(3,B(o.viewMode)))||0,o.autoCrop?(this.isCropped=!0,o.modal&&this.$dragBox.addClass("cropper-modal")):e.addClass(c),o.guides||e.find(".cropper-dashed").addClass(c),o.center||e.find(".cropper-center").addClass(c),o.cropBoxMovable&&n.addClass("cropper-move").data("action","all"),o.highlight||n.addClass("cropper-invisible"),o.background&&i.addClass("cropper-bg"),o.cropBoxResizable||e.find(".cropper-line, .cropper-point").addClass(c),this.setDragMode(o.dragMode),this.render(),this.isBuilt=!0,this.setData(o.data),r.one("built.cropper",o.built),setTimeout(t.proxy((function(){this.trigger("built.cropper"),this.isCompleted=!0}),this),0))},unbuild:function(){this.isBuilt&&(this.isBuilt=!1,this.isCompleted=!1,this.initialImage=null,this.initialCanvas=null,this.initialCropBox=null,this.container=null,this.canvas=null,this.cropBox=null,this.unbind(),this.resetPreview(),this.$preview=null,this.$viewBox=null,this.$cropBox=null,this.$dragBox=null,this.$canvas=null,this.$container=null,this.$cropper.remove(),this.$cropper=null)},render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.isCropped&&this.renderCropBox()},initContainer:function(){var t=this.options,i=this.$element,e=this.$container,n=this.$cropper;n.addClass(c),i.removeClass(c),n.css(this.container={width:w(e.width(),v(t.minContainerWidth)||200),height:w(e.height(),v(t.minContainerHeight)||100)}),i.addClass(c),n.removeClass(c)},initCanvas:function(){var i,e=this.options.viewMode,n=this.container,o=n.width,r=n.height,a=this.image,s=a.naturalWidth,h=a.naturalHeight,c=90===b(a.rotate),p=c?h:s,l=c?s:h,d=p/l,u=o,f=r;r*d>o?3===e?u=r*d:f=o/d:3===e?f=o/d:u=r*d,(i={naturalWidth:p,naturalHeight:l,aspectRatio:d,width:u,height:f}).oldLeft=i.left=(o-u)/2,i.oldTop=i.top=(r-f)/2,this.canvas=i,this.isLimited=1===e||2===e,this.limitCanvas(!0,!0),this.initialImage=t.extend({},a),this.initialCanvas=t.extend({},i)},limitCanvas:function(t,i){var e,n,o,r,a=this.options,s=a.viewMode,h=this.container,c=h.width,p=h.height,l=this.canvas,d=l.aspectRatio,u=this.cropBox,f=this.isCropped&&u;t&&(e=v(a.minCanvasWidth)||0,n=v(a.minCanvasHeight)||0,s&&(s>1?(e=w(e,c),n=w(n,p),3===s&&(n*d>e?e=n*d:n=e/d)):e?e=w(e,f?u.width:0):n?n=w(n,f?u.height:0):f&&(e=u.width,(n=u.height)*d>e?e=n*d:n=e/d)),e&&n?n*d>e?n=e/d:e=n*d:e?n=e/d:n&&(e=n*d),l.minWidth=e,l.minHeight=n,l.maxWidth=1/0,l.maxHeight=1/0),i&&(s?(o=c-l.width,r=p-l.height,l.minLeft=y(0,o),l.minTop=y(0,r),l.maxLeft=w(0,o),l.maxTop=w(0,r),f&&this.isLimited&&(l.minLeft=y(u.left,u.left+u.width-l.width),l.minTop=y(u.top,u.top+u.height-l.height),l.maxLeft=u.left,l.maxTop=u.top,2===s&&(l.width>=c&&(l.minLeft=y(0,o),l.maxLeft=w(0,o)),l.height>=p&&(l.minTop=y(0,r),l.maxTop=w(0,r))))):(l.minLeft=-l.width,l.minTop=-l.height,l.maxLeft=c,l.maxTop=p))},renderCanvas:function(t){var i,e,n=this.canvas,o=this.image,r=o.rotate,a=o.naturalWidth,s=o.naturalHeight;this.isRotated&&(this.isRotated=!1,(i=(e=R({width:o.width,height:o.height,degree:r})).width/e.height)!==n.aspectRatio&&(n.left-=(e.width-n.width)/2,n.top-=(e.height-n.height)/2,n.width=e.width,n.height=e.height,n.aspectRatio=i,n.naturalWidth=a,n.naturalHeight=s,r%180&&(e=R({width:a,height:s,degree:r}),n.naturalWidth=e.width,n.naturalHeight=e.height),this.limitCanvas(!0,!1))),(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=y(w(n.width,n.minWidth),n.maxWidth),n.height=y(w(n.height,n.minHeight),n.maxHeight),this.limitCanvas(!1,!0),n.oldLeft=n.left=y(w(n.left,n.minLeft),n.maxLeft),n.oldTop=n.top=y(w(n.top,n.minTop),n.maxTop),this.$canvas.css({width:n.width,height:n.height,left:n.left,top:n.top}),this.renderImage(),this.isCropped&&this.isLimited&&this.limitCropBox(!0,!0),t&&this.output()},renderImage:function(i){var e,n=this.canvas,o=this.image;o.rotate&&(e=R({width:n.width,height:n.height,degree:o.rotate,aspectRatio:o.aspectRatio},!0)),t.extend(o,e?{width:e.width,height:e.height,left:(n.width-e.width)/2,top:(n.height-e.height)/2}:{width:n.width,height:n.height,left:0,top:0}),this.$clone.css({width:o.width,height:o.height,marginLeft:o.left,marginTop:o.top,transform:L(o)}),i&&this.output()},initCropBox:function(){var i=this.options,e=this.canvas,n=i.aspectRatio,o=v(i.autoCropArea)||.8,r={width:e.width,height:e.height};n&&(e.height*n>e.width?r.height=r.width/n:r.width=r.height*n),this.cropBox=r,this.limitCropBox(!0,!0),r.width=y(w(r.width,r.minWidth),r.maxWidth),r.height=y(w(r.height,r.minHeight),r.maxHeight),r.width=w(r.minWidth,r.width*o),r.height=w(r.minHeight,r.height*o),r.oldLeft=r.left=e.left+(e.width-r.width)/2,r.oldTop=r.top=e.top+(e.height-r.height)/2,this.initialCropBox=t.extend({},r)},limitCropBox:function(t,i){var e,n,o,r,a=this.options,s=a.aspectRatio,h=this.container,c=h.width,p=h.height,l=this.canvas,d=this.cropBox,u=this.isLimited;t&&(e=v(a.minCropBoxWidth)||0,n=v(a.minCropBoxHeight)||0,e=y(e,c),n=y(n,p),o=y(c,u?l.width:c),r=y(p,u?l.height:p),s&&(e&&n?n*s>e?n=e/s:e=n*s:e?n=e/s:n&&(e=n*s),r*s>o?r=o/s:o=r*s),d.minWidth=y(e,o),d.minHeight=y(n,r),d.maxWidth=o,d.maxHeight=r),i&&(u?(d.minLeft=w(0,l.left),d.minTop=w(0,l.top),d.maxLeft=y(c,l.left+l.width)-d.width,d.maxTop=y(p,l.top+l.height)-d.height):(d.minLeft=0,d.minTop=0,d.maxLeft=c-d.width,d.maxTop=p-d.height))},renderCropBox:function(){var t=this.options,i=this.container,e=i.width,n=i.height,o=this.cropBox;(o.width>o.maxWidth||o.width<o.minWidth)&&(o.left=o.oldLeft),(o.height>o.maxHeight||o.height<o.minHeight)&&(o.top=o.oldTop),o.width=y(w(o.width,o.minWidth),o.maxWidth),o.height=y(w(o.height,o.minHeight),o.maxHeight),this.limitCropBox(!1,!0),o.oldLeft=o.left=y(w(o.left,o.minLeft),o.maxLeft),o.oldTop=o.top=y(w(o.top,o.minTop),o.maxTop),t.movable&&t.cropBoxMovable&&this.$face.data("action",o.width===e&&o.height===n?"move":"all"),this.$cropBox.css({width:o.width,height:o.height,left:o.left,top:o.top}),this.isCropped&&this.isLimited&&this.limitCanvas(!0,!0),this.isDisabled||this.output()},output:function(){this.preview(),this.isCompleted?this.trigger("crop.cropper",this.getData()):this.isBuilt||this.$element.one("built.cropper",t.proxy((function(){this.trigger("crop.cropper",this.getData())}),this))},initPreview:function(){var i,e=$(this.crossOrigin),n=e?this.crossOriginUrl:this.url;this.$preview=t(this.options.preview),this.$clone2=i=t("<img"+e+' src="'+n+'">'),this.$viewBox.html(i),this.$preview.each((function(){var i=t(this);i.data("preview",{width:i.width(),height:i.height(),html:i.html()}),i.html("<img"+e+' src="'+n+'" style="display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;">')}))},resetPreview:function(){this.$preview.each((function(){var i=t(this),e=i.data("preview");i.css({width:e.width,height:e.height}).html(e.html).removeData("preview")}))},preview:function(){var i=this.image,e=this.canvas,n=this.cropBox,o=n.width,r=n.height,a=i.width,s=i.height,h=n.left-e.left-i.left,c=n.top-e.top-i.top;this.isCropped&&!this.isDisabled&&(this.$clone2.css({width:a,height:s,marginLeft:-h,marginTop:-c,transform:L(i)}),this.$preview.each((function(){var e=t(this),n=e.data("preview"),p=n.width,l=n.height,d=p,u=l,f=1;o&&(u=r*(f=p/o)),r&&u>l&&(d=o*(f=l/r),u=l),e.css({width:d,height:u}).find("img").css({width:a*f,height:s*f,marginLeft:-h*f,marginTop:-c*f,transform:L(i)})})))},bind:function(){var n=this.options,o=this.$element,r=this.$cropper;t.isFunction(n.cropstart)&&o.on("cropstart.cropper",n.cropstart),t.isFunction(n.cropmove)&&o.on("cropmove.cropper",n.cropmove),t.isFunction(n.cropend)&&o.on("cropend.cropper",n.cropend),t.isFunction(n.crop)&&o.on("crop.cropper",n.crop),t.isFunction(n.zoom)&&o.on("zoom.cropper",n.zoom),r.on("mousedown touchstart pointerdown MSPointerDown",t.proxy(this.cropStart,this)),n.zoomable&&n.zoomOnWheel&&r.on("wheel mousewheel DOMMouseScroll",t.proxy(this.wheel,this)),n.toggleDragModeOnDblclick&&r.on("dblclick",t.proxy(this.dblclick,this)),e.on("mousemove touchmove pointermove MSPointerMove",this._cropMove=E(this.cropMove,this)).on(p,this._cropEnd=E(this.cropEnd,this)),n.responsive&&i.on("resize.cropper",this._resize=E(this.resize,this))},unbind:function(){var n=this.options,o=this.$element,r=this.$cropper;t.isFunction(n.cropstart)&&o.off("cropstart.cropper",n.cropstart),t.isFunction(n.cropmove)&&o.off("cropmove.cropper",n.cropmove),t.isFunction(n.cropend)&&o.off("cropend.cropper",n.cropend),t.isFunction(n.crop)&&o.off("crop.cropper",n.crop),t.isFunction(n.zoom)&&o.off("zoom.cropper",n.zoom),r.off("mousedown touchstart pointerdown MSPointerDown",this.cropStart),n.zoomable&&n.zoomOnWheel&&r.off("wheel mousewheel DOMMouseScroll",this.wheel),n.toggleDragModeOnDblclick&&r.off("dblclick",this.dblclick),e.off("mousemove touchmove pointermove MSPointerMove",this._cropMove).off(p,this._cropEnd),n.responsive&&i.off("resize.cropper",this._resize)},resize:function(){var i,e,n,o=this.options.restore,r=this.$container,a=this.container;!this.isDisabled&&a&&(1==(n=r.width()/a.width)&&r.height()===a.height||(o&&(i=this.getCanvasData(),e=this.getCropBoxData()),this.render(),o&&(this.setCanvasData(t.each(i,(function(t,e){i[t]=e*n}))),this.setCropBoxData(t.each(e,(function(t,i){e[t]=i*n}))))))},dblclick:function(){this.isDisabled||(this.$dragBox.hasClass("cropper-crop")?this.setDragMode("move"):this.setDragMode("crop"))},wheel:function(i){var e=i.originalEvent||i,n=v(this.options.wheelZoomRatio)||.1,o=1;this.isDisabled||(i.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout(t.proxy((function(){this.wheeling=!1}),this),50),e.deltaY?o=e.deltaY>0?1:-1:e.wheelDelta?o=-e.wheelDelta/120:e.detail&&(o=e.detail>0?1:-1),this.zoom(-o*n,i)))},cropStart:function(i){var e,n,o=this.options,r=i.originalEvent,a=r&&r.touches,s=i;if(!this.isDisabled){if(a){if((e=a.length)>1){if(!o.zoomable||!o.zoomOnTouch||2!==e)return;s=a[1],this.startX2=s.pageX,this.startY2=s.pageY,n="zoom"}s=a[0]}if(n=n||t(s.target).data("action"),l.test(n)){if(this.trigger("cropstart.cropper",{originalEvent:r,action:n}).isDefaultPrevented())return;i.preventDefault(),this.action=n,this.cropping=!1,this.startX=s.pageX||r&&r.pageX,this.startY=s.pageY||r&&r.pageY,"crop"===n&&(this.cropping=!0,this.$dragBox.addClass("cropper-modal"))}}},cropMove:function(t){var i,e=this.options,n=t.originalEvent,o=n&&n.touches,r=t,a=this.action;if(!this.isDisabled){if(o){if((i=o.length)>1){if(!e.zoomable||!e.zoomOnTouch||2!==i)return;r=o[1],this.endX2=r.pageX,this.endY2=r.pageY}r=o[0]}if(a){if(this.trigger("cropmove.cropper",{originalEvent:n,action:a}).isDefaultPrevented())return;t.preventDefault(),this.endX=r.pageX||n&&n.pageX,this.endY=r.pageY||n&&n.pageY,this.change(r.shiftKey,"zoom"===a?t:null)}}},cropEnd:function(t){var i=t.originalEvent,e=this.action;this.isDisabled||e&&(t.preventDefault(),this.cropping&&(this.cropping=!1,this.$dragBox.toggleClass("cropper-modal",this.isCropped&&this.options.modal)),this.action="",this.trigger("cropend.cropper",{originalEvent:i,action:e}))},change:function(t,i){var e,n,o,r,a,s,h,p=this.options.aspectRatio,l=this.action,d=this.container,u=this.canvas,f=this.cropBox,g=f.width,m=f.height,v=f.left,w=f.top,x=v+g,C=w+m,B=0,A=0,D=d.width,k=d.height,I=!0;switch(!p&&t&&(p=g&&m?g/m:1),this.limited&&(B=f.minLeft,A=f.minTop,D=B+y(d.width,u.left+u.width),k=A+y(d.height,u.top+u.height)),n={x:this.endX-this.startX,y:this.endY-this.startY},p&&(n.X=n.y*p,n.Y=n.x/p),l){case"all":v+=n.x,w+=n.y;break;case"e":if(n.x>=0&&(x>=D||p&&(w<=A||C>=k))){I=!1;break}g+=n.x,p&&(m=g/p,w-=n.Y/2),g<0&&(l="w",g=0);break;case"n":if(n.y<=0&&(w<=A||p&&(v<=B||x>=D))){I=!1;break}m-=n.y,w+=n.y,p&&(g=m*p,v+=n.X/2),m<0&&(l="s",m=0);break;case"w":if(n.x<=0&&(v<=B||p&&(w<=A||C>=k))){I=!1;break}g-=n.x,v+=n.x,p&&(m=g/p,w+=n.Y/2),g<0&&(l="e",g=0);break;case"s":if(n.y>=0&&(C>=k||p&&(v<=B||x>=D))){I=!1;break}m+=n.y,p&&(g=m*p,v-=n.X/2),m<0&&(l="n",m=0);break;case"ne":if(p){if(n.y<=0&&(w<=A||x>=D)){I=!1;break}m-=n.y,w+=n.y,g=m*p}else n.x>=0?x<D?g+=n.x:n.y<=0&&w<=A&&(I=!1):g+=n.x,n.y<=0?w>A&&(m-=n.y,w+=n.y):(m-=n.y,w+=n.y);g<0&&m<0?(l="sw",m=0,g=0):g<0?(l="nw",g=0):m<0&&(l="se",m=0);break;case"nw":if(p){if(n.y<=0&&(w<=A||v<=B)){I=!1;break}m-=n.y,w+=n.y,g=m*p,v+=n.X}else n.x<=0?v>B?(g-=n.x,v+=n.x):n.y<=0&&w<=A&&(I=!1):(g-=n.x,v+=n.x),n.y<=0?w>A&&(m-=n.y,w+=n.y):(m-=n.y,w+=n.y);g<0&&m<0?(l="se",m=0,g=0):g<0?(l="ne",g=0):m<0&&(l="sw",m=0);break;case"sw":if(p){if(n.x<=0&&(v<=B||C>=k)){I=!1;break}g-=n.x,v+=n.x,m=g/p}else n.x<=0?v>B?(g-=n.x,v+=n.x):n.y>=0&&C>=k&&(I=!1):(g-=n.x,v+=n.x),n.y>=0?C<k&&(m+=n.y):m+=n.y;g<0&&m<0?(l="ne",m=0,g=0):g<0?(l="se",g=0):m<0&&(l="nw",m=0);break;case"se":if(p){if(n.x>=0&&(x>=D||C>=k)){I=!1;break}m=(g+=n.x)/p}else n.x>=0?x<D?g+=n.x:n.y>=0&&C>=k&&(I=!1):g+=n.x,n.y>=0?C<k&&(m+=n.y):m+=n.y;g<0&&m<0?(l="nw",m=0,g=0):g<0?(l="sw",g=0):m<0&&(l="ne",m=0);break;case"move":this.move(n.x,n.y),I=!1;break;case"zoom":this.zoom((o=b(this.startX-this.startX2),r=b(this.startY-this.startY2),a=b(this.endX-this.endX2),s=b(this.endY-this.endY2),h=T(o*o+r*r),(T(a*a+s*s)-h)/h),i),this.startX2=this.endX2,this.startY2=this.endY2,I=!1;break;case"crop":if(!n.x||!n.y){I=!1;break}e=this.$cropper.offset(),v=this.startX-e.left,w=this.startY-e.top,g=f.minWidth,m=f.minHeight,n.x>0?l=n.y>0?"se":"ne":n.x<0&&(v-=g,l=n.y>0?"sw":"nw"),n.y<0&&(w-=m),this.isCropped||(this.$cropBox.removeClass(c),this.isCropped=!0,this.limited&&this.limitCropBox(!0,!0))}I&&(f.width=g,f.height=m,f.left=v,f.top=w,this.action=l,this.renderCropBox()),this.startX=this.endX,this.startY=this.endY},crop:function(){this.isBuilt&&!this.isDisabled&&(this.isCropped||(this.isCropped=!0,this.limitCropBox(!0,!0),this.options.modal&&this.$dragBox.addClass("cropper-modal"),this.$cropBox.removeClass(c)),this.setCropBoxData(this.initialCropBox))},reset:function(){this.isBuilt&&!this.isDisabled&&(this.image=t.extend({},this.initialImage),this.canvas=t.extend({},this.initialCanvas),this.cropBox=t.extend({},this.initialCropBox),this.renderCanvas(),this.isCropped&&this.renderCropBox())},clear:function(){this.isCropped&&!this.isDisabled&&(t.extend(this.cropBox,{left:0,top:0,width:0,height:0}),this.isCropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),this.$dragBox.removeClass("cropper-modal"),this.$cropBox.addClass(c))},replace:function(t,i){!this.isDisabled&&t&&(this.isImg&&this.$element.attr("src",t),i?(this.url=t,this.$clone.attr("src",t),this.isBuilt&&this.$preview.find("img").add(this.$clone2).attr("src",t)):(this.isImg&&(this.isReplaced=!0),this.options.data=null,this.load(t)))},enable:function(){this.isBuilt&&(this.isDisabled=!1,this.$cropper.removeClass("cropper-disabled"))},disable:function(){this.isBuilt&&(this.isDisabled=!0,this.$cropper.addClass("cropper-disabled"))},destroy:function(){var t=this.$element;this.isLoaded?(this.isImg&&this.isReplaced&&t.attr("src",this.originalUrl),this.unbuild(),t.removeClass(c)):this.isImg?t.off("load.cropper",this.start):this.$clone&&this.$clone.remove(),t.removeData("cropper")},move:function(t,i){var e=this.canvas;this.moveTo(I(t)?t:e.left+v(t),I(i)?i:e.top+v(i))},moveTo:function(t,i){var e=this.canvas,n=!1;I(i)&&(i=t),t=v(t),i=v(i),this.isBuilt&&!this.isDisabled&&this.options.movable&&(k(t)&&(e.left=t,n=!0),k(i)&&(e.top=i,n=!0),n&&this.renderCanvas(!0))},zoom:function(t,i){var e=this.canvas;t=(t=v(t))<0?1/(1-t):1+t,this.zoomTo(e.width*t/e.naturalWidth,i)},zoomTo:function(i,e){var n,o,r,a,s,h,c,p,l,d=this.options,u=this.canvas,f=u.width,g=u.height,m=u.naturalWidth,y=u.naturalHeight;if((i=v(i))>=0&&this.isBuilt&&!this.isDisabled&&d.zoomable){if(o=m*i,r=y*i,e&&(n=e.originalEvent),this.trigger("zoom.cropper",{originalEvent:n,oldRatio:f/m,ratio:o/m}).isDefaultPrevented())return;n?(a=this.$cropper.offset(),s=n.touches?(h=n.touches,c=h.length,p=0,l=0,c&&(t.each(h,(function(t,i){p+=i.pageX,l+=i.pageY})),p/=c,l/=c),{pageX:p,pageY:l}):{pageX:e.pageX||n.pageX||0,pageY:e.pageY||n.pageY||0},u.left-=(o-f)*((s.pageX-a.left-u.left)/f),u.top-=(r-g)*((s.pageY-a.top-u.top)/g)):(u.left-=(o-f)/2,u.top-=(r-g)/2),u.width=o,u.height=r,this.renderCanvas(!0)}},rotate:function(t){this.rotateTo((this.image.rotate||0)+v(t))},rotateTo:function(t){k(t=v(t))&&this.isBuilt&&!this.isDisabled&&this.options.rotatable&&(this.image.rotate=t%360,this.isRotated=!0,this.renderCanvas(!0))},scale:function(t,i){var e=this.image,n=!1;I(i)&&(i=t),t=v(t),i=v(i),this.isBuilt&&!this.isDisabled&&this.options.scalable&&(k(t)&&(e.scaleX=t,n=!0),k(i)&&(e.scaleY=i,n=!0),n&&this.renderImage(!0))},scaleX:function(t){var i=this.image.scaleY;this.scale(t,k(i)?i:1)},scaleY:function(t){var i=this.image.scaleX;this.scale(k(i)?i:1,t)},getData:function(i){var e,n,o=this.options,r=this.image,a=this.canvas,s=this.cropBox;return this.isBuilt&&this.isCropped?(n={x:s.left-a.left,y:s.top-a.top,width:s.width,height:s.height},e=r.width/r.naturalWidth,t.each(n,(function(t,o){o/=e,n[t]=i?B(o):o}))):n={x:0,y:0,width:0,height:0},o.rotatable&&(n.rotate=r.rotate||0),o.scalable&&(n.scaleX=r.scaleX||1,n.scaleY=r.scaleY||1),n},setData:function(i){var e,n,o,r=this.options,a=this.image,s=this.canvas,h={};t.isFunction(i)&&(i=i.call(this.element)),this.isBuilt&&!this.isDisabled&&t.isPlainObject(i)&&(r.rotatable&&k(i.rotate)&&i.rotate!==a.rotate&&(a.rotate=i.rotate,this.isRotated=e=!0),r.scalable&&(k(i.scaleX)&&i.scaleX!==a.scaleX&&(a.scaleX=i.scaleX,n=!0),k(i.scaleY)&&i.scaleY!==a.scaleY&&(a.scaleY=i.scaleY,n=!0)),e?this.renderCanvas():n&&this.renderImage(),o=a.width/a.naturalWidth,k(i.x)&&(h.left=i.x*o+s.left),k(i.y)&&(h.top=i.y*o+s.top),k(i.width)&&(h.width=i.width*o),k(i.height)&&(h.height=i.height*o),this.setCropBoxData(h))},getContainerData:function(){return this.isBuilt?this.container:{}},getImageData:function(){return this.isLoaded?this.image:{}},getCanvasData:function(){var i=this.canvas,e={};return this.isBuilt&&t.each(["left","top","width","height","naturalWidth","naturalHeight"],(function(t,n){e[n]=i[n]})),e},setCanvasData:function(i){var e=this.canvas,n=e.aspectRatio;t.isFunction(i)&&(i=i.call(this.$element)),this.isBuilt&&!this.isDisabled&&t.isPlainObject(i)&&(k(i.left)&&(e.left=i.left),k(i.top)&&(e.top=i.top),k(i.width)?(e.width=i.width,e.height=i.width/n):k(i.height)&&(e.height=i.height,e.width=i.height*n),this.renderCanvas(!0))},getCropBoxData:function(){var t,i=this.cropBox;return this.isBuilt&&this.isCropped&&(t={left:i.left,top:i.top,width:i.width,height:i.height}),t||{}},setCropBoxData:function(i){var e,n,o=this.cropBox,r=this.options.aspectRatio;t.isFunction(i)&&(i=i.call(this.$element)),this.isBuilt&&this.isCropped&&!this.isDisabled&&t.isPlainObject(i)&&(k(i.left)&&(o.left=i.left),k(i.top)&&(o.top=i.top),k(i.width)&&(e=!0,o.width=i.width),k(i.height)&&(n=!0,o.height=i.height),r&&(e?o.height=o.width/r:n&&(o.width=o.height*r)),this.renderCropBox())},getCroppedCanvas:function(i){var e,n,o,r,a,s,h,c,p,l,d;if(this.isBuilt&&this.isCropped&&g)return t.isPlainObject(i)||(i={}),d=this.getData(),e=d.width,n=d.height,c=e/n,t.isPlainObject(i)&&(a=i.width,s=i.height,a?(s=a/c,h=a/e):s&&(a=s*c,h=s/n)),o=A(a||e),r=A(s||n),(p=t("<canvas>")[0]).width=o,p.height=r,l=p.getContext("2d"),i.fillColor&&(l.fillStyle=i.fillColor,l.fillRect(0,0,o,r)),l.drawImage.apply(l,function(){var i,o,r,a,s,c,p=function(i,e){var n,o,r,a=t("<canvas>")[0],s=a.getContext("2d"),h=0,c=0,p=e.naturalWidth,l=e.naturalHeight,d=e.rotate,u=e.scaleX,f=e.scaleY,g=k(u)&&k(f)&&(1!==u||1!==f),m=k(d)&&0!==d,v=m||g,y=p*b(u||1),w=l*b(f||1);return g&&(n=y/2,o=w/2),m&&(n=(y=(r=R({width:y,height:w,degree:d})).width)/2,o=(w=r.height)/2),a.width=y,a.height=w,v&&(h=-p/2,c=-l/2,s.save(),s.translate(n,o)),m&&s.rotate(d*Math.PI/180),g&&s.scale(u,f),s.drawImage(i,A(h),A(c),A(p),A(l)),v&&s.restore(),a}(this.$clone[0],this.image),l=p.width,u=p.height,f=this.canvas,g=[p],m=d.x+f.naturalWidth*(b(d.scaleX||1)-1)/2,v=d.y+f.naturalHeight*(b(d.scaleY||1)-1)/2;return m<=-e||m>l?m=i=r=s=0:m<=0?(r=-m,i=s=y(l,e+(m=0))):m<=l&&(r=0,i=s=y(e,l-m)),i<=0||v<=-n||v>u?v=o=a=c=0:v<=0?(a=-v,o=c=y(u,n+(v=0))):v<=u&&(a=0,o=c=y(n,u-v)),g.push(A(m),A(v),A(i),A(o)),h&&(r*=h,a*=h,s*=h,c*=h),s>0&&c>0&&g.push(A(r),A(a),A(s),A(c)),g}.call(this)),p},setAspectRatio:function(t){var i=this.options;this.isDisabled||I(t)||(i.aspectRatio=w(0,t)||NaN,this.isBuilt&&(this.initCropBox(),this.isCropped&&this.renderCropBox()))},setDragMode:function(t){var i,e,n=this.options;this.isLoaded&&!this.isDisabled&&(i="crop"===t,e=n.movable&&"move"===t,t=i||e?t:"none",this.$dragBox.data("action",t).toggleClass("cropper-crop",i).toggleClass("cropper-move",e),n.cropBoxMovable||this.$face.data("action",t).toggleClass("cropper-crop",i).toggleClass("cropper-move",e))}},W.DEFAULTS={viewMode:0,dragMode:"crop",aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,build:null,built:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},W.setDefaults=function(i){t.extend(W.DEFAULTS,i)},W.TEMPLATE='<div class="cropper-container"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-action="e"></span><span class="cropper-line line-n" data-action="n"></span><span class="cropper-line line-w" data-action="w"></span><span class="cropper-line line-s" data-action="s"></span><span class="cropper-point point-e" data-action="e"></span><span class="cropper-point point-n" data-action="n"></span><span class="cropper-point point-w" data-action="w"></span><span class="cropper-point point-s" data-action="s"></span><span class="cropper-point point-ne" data-action="ne"></span><span class="cropper-point point-nw" data-action="nw"></span><span class="cropper-point point-sw" data-action="sw"></span><span class="cropper-point point-se" data-action="se"></span></div></div>',W.other=t.fn.cropper,t.fn.cropper=function(i){var e,n=M(arguments,1);return this.each((function(){var o,r,a=t(this),s=a.data("cropper");if(!s){if(/destroy/.test(i))return;o=t.extend({},a.data(),t.isPlainObject(i)&&i),a.data("cropper",s=new W(this,o))}"string"==typeof i&&t.isFunction(r=s[i])&&(e=r.apply(s,n))})),I(e)?this:e},t.fn.cropper.Constructor=W,t.fn.cropper.setDefaults=W.setDefaults,t.fn.cropper.noConflict=function(){return t.fn.cropper=W.other,this}})?n.apply(i,o):n)||(t.exports=r)},418:function(t,i,e){"use strict";var n,o=e(1406),r=e(391),a=e(329),s=e(271),h=e(296),c=e(1057),p=e(675),l=e(356),d=e(438).f,u=e(419),f=e(1054),g=e(393),m=e(1058),v=a.Int8Array,y=v&&v.prototype,w=a.Uint8ClampedArray,b=w&&w.prototype,x=v&&u(v),C=y&&u(y),T=Object.prototype,B=T.isPrototypeOf,A=g("toStringTag"),D=m("TYPED_ARRAY_TAG"),k=o&&!!f&&"Opera"!==c(a.opera),I=!1,M={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},E=function(t){return s(t)&&h(M,c(t))};for(n in M)a[n]||(k=!1);if((!k||"function"!=typeof x||x===Function.prototype)&&(x=function(){throw TypeError("Incorrect invocation")},k))for(n in M)a[n]&&f(a[n],x);if((!k||!C||C===T)&&(C=x.prototype,k))for(n in M)a[n]&&f(a[n].prototype,C);if(k&&u(b)!==C&&f(b,C),r&&!h(C,A))for(n in I=!0,d(C,A,{get:function(){return s(this)?this[D]:void 0}}),M)a[n]&&p(a[n],D,n);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:k,TYPED_ARRAY_TAG:I&&D,aTypedArray:function(t){if(E(t))return t;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(t){if(f){if(B.call(x,t))return t}else for(var i in M)if(h(M,n)){var e=a[i];if(e&&(t===e||B.call(e,t)))return t}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(t,i,e){if(r){if(e)for(var n in M){var o=a[n];o&&h(o.prototype,t)&&delete o.prototype[t]}C[t]&&!e||l(C,t,e?i:k&&y[t]||i)}},exportTypedArrayStaticMethod:function(t,i,e){var n,o;if(r){if(f){if(e)for(n in M)(o=a[n])&&h(o,t)&&delete o[t];if(x[t]&&!e)return;try{return l(x,t,e?i:k&&v[t]||i)}catch(t){}}for(n in M)!(o=a[n])||o[t]&&!e||l(o,t,i)}},isView:function(t){var i=c(t);return"DataView"===i||h(M,i)},isTypedArray:E,TypedArray:x,TypedArrayPrototype:C}},494:function(t,i,e){"use strict";var n=e(467),o=e(343),r=e(223),a=e(546),s=e(459),h=Math.min,c=[].lastIndexOf,p=!!c&&1/[1].lastIndexOf(1,-0)<0,l=a("lastIndexOf"),d=s("indexOf",{ACCESSORS:!0,1:0}),u=p||!l||!d;t.exports=u?function(t){if(p)return c.apply(this,arguments)||0;var i=n(this),e=r(i.length),a=e-1;for(arguments.length>1&&(a=h(a,o(arguments[1]))),a<0&&(a=e+a);a>=0;a--)if(a in i&&i[a]===t)return a||0;return-1}:c},649:function(t,i,e){"use strict";e.d(i,"b",(function(){return a})),e.d(i,"a",(function(){return h}));e(30),e(42),e(35),e(72),e(430);function n(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o={name:"UTC",offset:0},r={$inputEl:null,$dropdownEl:null,onSelectTimezone:null,displayFormat:function(t){return t.name}},a=function(t){return"[UTC ".concat((i=t.offset,e=parseInt(i,10),Number.isNaN(e)||0===e?"0":"".concat(i>0?"+":"-"," ").concat(Math.abs(i/3600))),"] ").concat(t.name);var i,e},s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t&&t.length&&i&&i.length&&t.find((function(t){return t.identifier===i}))||null},h=function(){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,e=i.$dropdownEl,n=i.$inputEl,a=i.onSelectTimezone,h=i.displayFormat;!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.$dropdown=e,this.$dropdownToggle=this.$dropdown.find(".dropdown-toggle-text"),this.$input=n,this.timezoneData=this.$dropdown.data("data"),this.onSelectTimezone=a,this.displayFormat=h||r.displayFormat,this.initialTimezone=s(this.timezoneData,this.$input.val())||o,this.initDefaultTimezone(),this.initDropdown()}var i,e,h;return i=t,(e=[{key:"initDropdown",value:function(){var t=this;this.$dropdown.glDropdown({data:this.timezoneData,filterable:!0,selectable:!0,toggleLabel:this.displayFormat,search:{fields:["name"]},clicked:function(i){return t.updateInputValue(i)},text:function(t){return a(t)}}),this.setDropdownToggle(this.displayFormat(this.initialTimezone))}},{key:"initDefaultTimezone",value:function(){this.$input.val()||this.$input.val(o.name)}},{key:"setDropdownToggle",value:function(t){this.$dropdownToggle.text(t)}},{key:"updateInputValue",value:function(t){var i=t.selectedObj,e=t.e;e.preventDefault(),this.$input.val(i.identifier),this.onSelectTimezone&&this.onSelectTimezone({selectedObj:i,e:e})}}])&&n(i.prototype,e),h&&n(i,h),t}()},796:function(t,i,e){"use strict";e.r(i);e(55),e(283);var n,o,r=e(0),a=e.n(r),s=(e(42),e(40),e(18),e(91),e(67),e(1622),e(1623),e(1624),e(1625),e(1626),e(1627),e(1628),e(1629),e(1630),e(1631),e(1632),e(1633),e(1634),e(1635),e(1636),e(1637),e(1638),e(1639),e(1640),e(1641),e(1642),e(1643),e(1644),e(1645),e(540)),h=e.n(s);e(2238);function c(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}window.gl||(window.gl={}),n=/^.*[\\\/]/,o=function(){function t(i){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.filename,o=e.previewImage,r=e.modalCrop,s=e.pickImageEl,c=e.uploadImageBtn,p=e.modalCropImg,l=e.exportWidth,d=void 0===l?200:l,u=e.exportHeight,f=void 0===u?200:u,g=e.cropBoxWidth,m=void 0===g?200:g,v=e.cropBoxHeight,y=void 0===v?200:v;!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.onUploadImageBtnClick=this.onUploadImageBtnClick.bind(this),this.onModalHide=this.onModalHide.bind(this),this.onModalShow=this.onModalShow.bind(this),this.onPickImageClick=this.onPickImageClick.bind(this),this.fileInput=a()(i),this.modalCropImg=h()(this.modalCropImg)?a()(this.modalCropImg):this.modalCropImg,this.fileInput.attr("name","".concat(this.fileInput.attr("name"),"-trigger")).attr("id","".concat(this.fileInput.attr("id"),"-trigger")),this.exportWidth=d,this.exportHeight=f,this.cropBoxWidth=m,this.cropBoxHeight=y,this.form=this.fileInput.parents("form"),this.filename=n,this.previewImage=o,this.modalCrop=r,this.pickImageEl=s,this.uploadImageBtn=c,this.modalCropImg=p,this.filename=this.getElement(n),this.previewImage=this.getElement(o),this.pickImageEl=this.getElement(s),this.modalCrop=h()(r)?a()(r):r,this.uploadImageBtn=h()(c)?a()(c):c,this.modalCropImg=h()(p)?a()(p):p,this.cropActionsBtn=this.modalCrop.find("[data-method]"),this.bindEvents()}var i,e,o;return i=t,(e=[{key:"getElement",value:function(t){return a()(t,this.form)}},{key:"bindEvents",value:function(){var t=this;return this.fileInput.on("change",(function(i){t.onFileInputChange(i,this),this.value=null})),this.pickImageEl.on("click",this.onPickImageClick),this.modalCrop.on("shown.bs.modal",this.onModalShow),this.modalCrop.on("hidden.bs.modal",this.onModalHide),this.uploadImageBtn.on("click",this.onUploadImageBtnClick),this.cropActionsBtn.on("click",(function(){return t.onActionBtnClick(this)})),this.croppedImageBlob=null}},{key:"onPickImageClick",value:function(){return this.fileInput.trigger("click")}},{key:"onModalShow",value:function(){var t=this;return this.modalCropImg.cropper({viewMode:1,center:!1,aspectRatio:1,modal:!0,scalable:!1,rotatable:!0,checkOrientation:!0,zoomable:!0,dragMode:"move",guides:!1,zoomOnTouch:!1,zoomOnWheel:!1,cropBoxMovable:!1,cropBoxResizable:!1,toggleDragModeOnDblclick:!1,built:function(){var i=a()(this),e=i.cropper("getContainerData"),n=t.cropBoxWidth,o=t.cropBoxHeight;return i.cropper("setCropBoxData",{width:n,height:o,left:(e.width-n)/2,top:(e.height-o)/2})}})}},{key:"onModalHide",value:function(){return this.modalCropImg.attr("src","").cropper("destroy")}},{key:"onUploadImageBtnClick",value:function(t){return t.preventDefault(),this.setBlob(),this.setPreview(),this.modalCrop.modal("hide"),this.fileInput.val("")}},{key:"onActionBtnClick",value:function(t){var i=a()(t).data();if(this.modalCropImg.data("cropper")&&i.method)return this.modalCropImg.cropper(i.method,i.option)}},{key:"onFileInputChange",value:function(t,i){return this.readFile(i)}},{key:"readFile",value:function(t){var i=this,e=new FileReader;return e.onload=function(){return i.modalCropImg.attr("src",e.result),i.modalCrop.modal("show")},e.readAsDataURL(t.files[0])}},{key:"dataURLtoBlob",value:function(t){var i,e=0,n=atob(t.split(",")[1]),o=[];for(e=0,i=n.length;e<i;e+=1)o.push(n.charCodeAt(e));return new Blob([new Uint8Array(o)],{type:"image/png"})}},{key:"setPreview",value:function(){var t=this.fileInput.val().replace(n,"");return this.previewImage.attr("src",this.dataURL),this.filename.text(t)}},{key:"setBlob",value:function(){return this.dataURL=this.modalCropImg.cropper("getCroppedCanvas",{width:200,height:200}).toDataURL("image/png"),this.croppedImageBlob=this.dataURLtoBlob(this.dataURL)}},{key:"getBlob",value:function(){return this.croppedImageBlob}}])&&c(i.prototype,e),o&&c(i,o),t}(),a.a.fn.glCrop=function(t){return this.each((function(){return a()(this).data("glcrop",new o(this,t))}))};e(28);var p=e(11),l=e(14),d=e(16),u=e(649);function f(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var g=function(){function t(){var i=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).form;!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.onSubmitForm=this.onSubmitForm.bind(this),this.form=i||a()(".edit-user"),this.setRepoRadio(),this.bindEvents(),this.initAvatarGlCrop(),this.$inputEl=a()("#user_timezone"),this.timezoneDropdown=new u.a({$inputEl:this.$inputEl,$dropdownEl:a()(".js-timezone-dropdown"),displayFormat:function(t){return Object(u.b)(t)}})}var i,e,n;return i=t,(e=[{key:"initAvatarGlCrop",value:function(){this.avatarGlCrop=a()(".js-user-avatar-input").glCrop({filename:".js-avatar-filename",previewImage:".avatar-image .avatar",modalCrop:".modal-profile-crop",pickImageEl:".js-choose-user-avatar-button",uploadImageBtn:".js-upload-user-avatar",modalCropImg:".modal-profile-crop-image"}).data("glcrop")}},{key:"bindEvents",value:function(){a()(".js-preferences-form").on("change.preference","input[type=radio]",this.submitForm),a()(".js-group-notification-email").on("change",this.submitForm),a()("#user_notification_email").on("change",this.submitForm),a()("#user_notified_of_own_activity").on("change",this.submitForm),this.form.on("submit",this.onSubmitForm)}},{key:"submitForm",value:function(){return a()(this).parents("form").submit()}},{key:"onSubmitForm",value:function(t){return t.preventDefault(),this.saveForm()}},{key:"saveForm",value:function(){var t=this,i=this,e=new FormData(this.form.get(0)),n=this.avatarGlCrop.getBlob();null!=n&&e.append("user[avatar]",n,"avatar.png"),e.delete("user[avatar]-trigger"),Object(p.a)({method:this.form.attr("method"),url:this.form.attr("action"),data:e}).then((function(i){var e=i.data;null!=n&&t.updateHeaderAvatar(),Object(l.a)(e.message,"notice")})).then((function(){window.scrollTo(0,0),i.form.find(":input[disabled]").enable()})).catch((function(t){return Object(l.a)(t.message)}))}},{key:"updateHeaderAvatar",value:function(){a()(".header-user-avatar").attr("src",this.avatarGlCrop.dataURL)}},{key:"setRepoRadio",value:function(){var t=a()('input[name="user[multi_file]"]');Object(d.F)(this.newRepoActivated)?t.filter("[value=on]").prop("checked",!0):t.filter("[value=off]").prop("checked",!0)}}])&&f(i.prototype,e),n&&f(i,n),t}();document.addEventListener("DOMContentLoaded",(function(){a()(document).on("input.ssh_key","#key_key",(function(){var t=a()("#key_title"),i=a()(this).val().match(/^\S+ \S+ (.+)\n?$/);i&&i.length>1&&t.val(i[1]).change()})),new g}))}}]);
//# sourceMappingURL=commons~pages.profiles~pages.profiles.accounts.show~pages.profiles.index~pages.profiles.keys~pages.p~f2a26ee8.66c761d7.chunk.js.map