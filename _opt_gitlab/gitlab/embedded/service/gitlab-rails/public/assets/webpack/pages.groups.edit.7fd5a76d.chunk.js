(this.webpackJsonp=this.webpackJsonp||[]).push([[89],{1124:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var a=n(0),i=n.n(a),r=n(16);function s(){i()(document).on("click",".js-confirm-danger",(function(t){var e=i()(t.target),n=e.data("checkFieldName"),a=e.data("checkCompareValue"),s=parseInt(i()('[name="'.concat(n,'"]')).val(),10);(!n||s<a)&&(t.preventDefault(),function(t,e,n){var a=i()(".js-confirm-danger-input",e);a.val(""),i()(".js-confirm-text",e).text(n||""),e.modal("show");var s=i()(".js-confirm-danger-match",e).text(),o=i()(".js-confirm-danger-submit",e);o.disable(),a.focus(),a.off("input").on("input",(function(){Object(r.M)(i()(this).val())===s?o.enable():o.disable()})),i()(".js-confirm-danger-submit",e).off("click").on("click",(function(){return t.submit()}))}(e.closest("form"),function(t){var e=t.prev(".modal");return e.length?e:i()("#modal-confirm-danger")}(e),e.data("confirmDangerMessage")))}))}},1125:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n(42);var a=n(0),i=n.n(a);function r(t,e){var n=i()(t),a=n.find(e);a.on("change",(function(){n.find(":submit").prop("disabled",!a.val())})),a.trigger("change")}},1167:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));n(26),n(27),n(85),n(145),n(35),n(18),n(68);var a=n(20),i=n.n(a),r=n(0),s=n.n(r);function o(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.form=e,this.dirtyInputs=[],this.isDisabled=!0,this.init()}var e,n,a;return e=t,a=[{key:"initInput",value:function(e){e.dataset.isDirtySubmitInput=!0,e.dataset.dirtySubmitOriginalValue=t.inputCurrentValue(e)}},{key:"isInputCheckable",value:function(t){return"checkbox"===t.type||"radio"===t.type}},{key:"inputCurrentValue",value:function(e){return t.isInputCheckable(e)?e.checked.toString():e.value}}],(n=[{key:"init",value:function(){this.inputs=this.form.querySelectorAll("input, textarea, select"),this.submits=this.form.querySelectorAll("input[type=submit], button[type=submit]"),this.inputs.forEach(t.initInput),this.toggleSubmission(),this.registerListeners()}},{key:"registerListeners",value:function(){var e=this,n=i.a.memoize((function(){return i.a.throttle((function(t){return e.updateDirtyInput(t)}),t.THROTTLE_DURATION)})),a=function(t){n(t.target.name)(t)};this.form.addEventListener("input",a),this.form.addEventListener("change",a),s()(this.form).on("change.select2",a),this.form.addEventListener("submit",(function(t){return e.formSubmit(t)}))}},{key:"updateDirtyInput",value:function(t){var e=t.target;e.dataset.isDirtySubmitInput&&(this.updateDirtyInputs(e),this.toggleSubmission())}},{key:"updateDirtyInputs",value:function(e){var n=e.name,a=e.dataset.dirtySubmitOriginalValue!==t.inputCurrentValue(e),i=this.dirtyInputs.indexOf(n),r=-1!==i;a&&!r&&this.dirtyInputs.push(n),!a&&r&&this.dirtyInputs.splice(i,1)}},{key:"toggleSubmission",value:function(){var t=this;this.isDisabled=0===this.dirtyInputs.length,this.submits.forEach((function(e){e.disabled=t.isDisabled}))}},{key:"formSubmit",value:function(t){return this.isDisabled&&(t.preventDefault(),t.stopImmediatePropagation()),!this.isDisabled}}])&&o(e.prototype,n),a&&o(e,a),t}();u.THROTTLE_DURATION=500;var c=u;var l=function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.forms=e,this.dirtySubmits=[],this.forms.forEach((function(t){return n.dirtySubmits.push(new c(t))}))};function d(t){return new(t instanceof NodeList||t instanceof Array?l:c)(t)}},2190:function(t,e,n){n(105),n(286),t.exports=n(2504)},2504:function(t,e,n){"use strict";n.r(e);var a=n(654),i=(n(30),n(0)),r=n.n(i),s=n(1);function o(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.groupDropdown=r()(".js-groups-dropdown"),this.parentInput=r()("#new_parent_group_id"),this.data=this.groupDropdown.data("data"),this.init()}var e,n,a;return e=t,(n=[{key:"init",value:function(){this.buildDropdown()}},{key:"buildDropdown",value:function(){var t=this,e=[{id:"-1",text:Object(s.a)("No parent group")},{type:"divider"}];this.groupDropdown.glDropdown({selectable:!0,filterable:!0,toggleLabel:function(t){return t.text},search:{fields:["text"]},data:e.concat(this.data),text:function(t){return t.text},clicked:function(e){e.e.preventDefault(),t.assignSelected(e.selectedObj)}})}},{key:"assignSelected",value:function(t){this.parentInput.val(t.id),this.parentInput.change()}}])&&o(e.prototype,n),a&&o(e,a),t}(),c=n(1124),l=n(255),d=n(1125),f=n(1167),h=n(1051),p=n(706),g=n(800),m=n(73);document.addEventListener("DOMContentLoaded",(function(){Object(a.a)(),new u,Object(c.a)(),Object(l.a)(),Object(f.a)(document.querySelectorAll(".js-general-settings-form, .js-general-permissions-form")),Object(h.a)(p.a),Object(d.a)(".js-group-transfer-form","#new_parent_group_id"),Object(g.a)(),Object(m.a)()}))},255:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));n(42);var a=n(0),i=n.n(a),r=n(1);function s(t){t.find(".js-settings-toggle:not(.js-settings-toggle-trigger-only)").text(Object(r.a)("Collapse")),t.find(".settings-content").off("scroll.expandSection").scrollTop(0),t.addClass("expanded"),t.hasClass("no-animate")||t.addClass("animating").one("animationend.animateSection",(function(){return t.removeClass("animating")}))}function o(t){t.removeClass("no-animate"),t.hasClass("expanded")?function(t){t.find(".js-settings-toggle:not(.js-settings-toggle-trigger-only)").text(Object(r.a)("Expand")),t.find(".settings-content").on("scroll.expandSection",(function(){return s(t)})),t.removeClass("expanded"),t.hasClass("no-animate")||t.addClass("animating").one("animationend.animateSection",(function(){return t.removeClass("animating")}))}(t):s(t)}function u(){if(i()(".settings").each((function(t,e){var n=i()(e);n.on("click.toggleSection",".js-settings-toggle",(function(){return o(n)})),n.hasClass("expanded")||n.find(".settings-content").on("scroll.expandSection",(function(){n.removeClass("no-animate"),s(n)}))})),window.location.hash){var t=i()(window.location.hash);t.length&&t.hasClass("settings")&&s(t)}}},286:function(t,e,n){"use strict";n.r(e);var a=n(96);document.addEventListener("DOMContentLoaded",(function(){Object(a.a)(document,gon)}))},654:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n(42),n(55),n(91);var a=n(0),i=n.n(a);function r(){i()(".js-choose-avatar-button").on("click",(function(){return i()(this).closest("form").find(".js-avatar-input").click()})),i()(".js-avatar-input").on("change",(function(){var t=i()(this).closest("form"),e=i()(this).val().replace(/^.*[\\\/]/,"");return t.find(".js-avatar-filename").text(e)}))}},73:function(t,e,n){"use strict";n(30),n(35),n(18),n(64);var a=n(0),i=n.n(a),r=n(32),s=(n(65),n(69),n(55),n(67),n(71));function o(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.projectSelectInput=i()(e),this.newItemBtn=i()(".new-project-item-link"),this.resourceType=this.newItemBtn.data("type"),this.resourceLabel=this.newItemBtn.data("label"),this.formattedText=this.deriveTextVariants(),this.groupId=this.projectSelectInput.data("groupId"),this.bindEvents(),this.initLocalStorage()}var e,a,r;return e=t,(a=[{key:"bindEvents",value:function(){var t=this;this.projectSelectInput.siblings(".new-project-item-select-button").on("click",(function(e){return t.openDropdown(e)})),this.newItemBtn.on("click",(function(e){t.getProjectFromLocalStorage()||(e.preventDefault(),t.openDropdown(e))})),this.projectSelectInput.on("change",(function(){return t.selectProject()}))}},{key:"initLocalStorage",value:function(){s.a.isLocalStorageAccessSafe()&&(this.localStorageKey=["group",this.groupId,this.formattedText.localStorageItemType,"recent-project"].join("-"),this.setBtnTextFromLocalStorage())}},{key:"openDropdown",value:function(t){n.e(239).then(n.t.bind(null,428,7)).then((function(){i()(t.currentTarget).siblings(".project-item-select").select2("open")})).catch((function(){}))}},{key:"selectProject",value:function(){var t=JSON.parse(this.projectSelectInput.val()),e={url:"".concat(t.url,"/").concat(this.projectSelectInput.data("relativePath")),name:t.name};this.setNewItemBtnAttributes(e),this.setProjectInLocalStorage(e)}},{key:"setBtnTextFromLocalStorage",value:function(){var t=this.getProjectFromLocalStorage();this.setNewItemBtnAttributes(t)}},{key:"setNewItemBtnAttributes",value:function(t){t?(this.newItemBtn.attr("href",t.url),this.newItemBtn.text("".concat(this.formattedText.defaultTextPrefix," in ").concat(t.name))):this.newItemBtn.text("Select project to create ".concat(this.formattedText.presetTextSuffix))}},{key:"getProjectFromLocalStorage",value:function(){var t=localStorage.getItem(this.localStorageKey);return JSON.parse(t)}},{key:"setProjectInLocalStorage",value:function(t){var e=JSON.stringify(t);localStorage.setItem(this.localStorageKey,e)}},{key:"deriveTextVariants",value:function(){var t=this.resourceLabel;return{localStorageItemType:"new-".concat(this.resourceType.split("_").join("-").slice(0,-1)),defaultTextPrefix:t,presetTextSuffix:this.resourceType.split("_").join(" ").slice(0,-1)}}}])&&o(e.prototype,a),r&&o(e,r),t}(),c=n(1),l=function(){i()(".ajax-project-select").each((function(t,e){var n,a=this,s=i()(e).data("simpleFilter")||!1,o=i()(e).data("select2");return this.groupId=i()(e).data("groupId"),this.userId=i()(e).data("userId"),this.includeGroups=i()(e).data("includeGroups"),this.allProjects=i()(e).data("allProjects")||!1,this.orderBy=i()(e).data("orderBy")||"id",this.withIssuesEnabled=i()(e).data("withIssuesEnabled"),this.withMergeRequestsEnabled=i()(e).data("withMergeRequestsEnabled"),this.withShared=void 0===i()(e).data("withShared")||i()(e).data("withShared"),this.includeProjectsInSubgroups=i()(e).data("includeProjectsInSubgroups")||!1,this.allowClear=i()(e).data("allowClear")||!1,n=Object(c.d)("ProjectSelect|Search for project"),this.includeGroups&&(n+=Object(c.d)("ProjectSelect| or group")),i()(e).select2({placeholder:n,minimumInputLength:0,query:function(t){var e,n=function(e){var n={results:e};return t.callback(n)};return e=a.includeGroups?function(e){return r.a.groups(t.term,{},(function(t){var a=t.concat(e);return n(a)}))}:n,a.groupId?r.a.groupProjects(a.groupId,t.term,{with_issues_enabled:a.withIssuesEnabled,with_merge_requests_enabled:a.withMergeRequestsEnabled,with_shared:a.withShared,include_subgroups:a.includeProjectsInSubgroups},e):a.userId?r.a.userProjects(a.userId,t.term,{with_issues_enabled:a.withIssuesEnabled,with_merge_requests_enabled:a.withMergeRequestsEnabled,with_shared:a.withShared,include_subgroups:a.includeProjectsInSubgroups},e):r.a.projects(t.term,{order_by:a.orderBy,with_issues_enabled:a.withIssuesEnabled,with_merge_requests_enabled:a.withMergeRequestsEnabled,membership:!a.allProjects},e)},id:function(t){return s?t.id:JSON.stringify({name:t.name,url:t.web_url})},text:function(t){return t.name_with_namespace||t.name},initSelection:function(t,e){return r.a.project(t.val()).then((function(t){var n=t.data;return e(n)}))},allowClear:this.allowClear,dropdownCssClass:"ajax-project-dropdown"}),o||s?e:new u(e)}))};e.a=function(){return n.e(239).then(n.t.bind(null,428,7)).then(l).catch((function(){}))}},800:function(t,e,n){"use strict";n(30),n(28),n(85),n(18),n(64),n(55),n(91);var a=n(93),i=n.n(a),r=n(0),s=n.n(r),o=n(11),u=n(32),c=n(16),l=n(1),d=function(){window.GROUP_SELECT_PER_PAGE=20,s()(".ajax-groups-select").each((function(){var t=s()(this),e=t.data("allAvailable"),n=t.data("skipGroups")||[],a=t.data("parentId"),r=a?u.a.subgroupsPath.replace(":id",a):u.a.groupsPath;t.select2({placeholder:Object(l.a)("Search for a group"),allowClear:t.hasClass("allowClear"),multiple:t.hasClass("multiselect"),minimumInputLength:0,ajax:{url:u.a.buildUrl(r),dataType:"json",quietMillis:250,transport:function(t){o.a[t.type.toLowerCase()](t.url,{params:t.data}).then((function(e){var n=e.data||[],a=Object(c.D)(e.headers),i=(parseInt(a["X-PAGE"],10)||0)<(parseInt(a["X-TOTAL-PAGES"],10)||0);t.success({results:n,pagination:{more:i}})})).catch(t.error)},data:function(t,n){return{search:t,page:n,per_page:window.GROUP_SELECT_PER_PAGE,all_available:e}},results:function(t,e){if(t.length)return{results:[]};var a=t.length?t:t.results||[],i=!!t.pagination&&t.pagination.more,r=a.filter((function(t){return-1===n.indexOf(t.id)}));return{results:r,page:e,more:i}}},initSelection:function(t,e){var n=s()(t).val();if(""!==n)return u.a.group(n,e)},formatResult:function(t){return"<div class='group-result'> <div class='group-name'>".concat(i()(t.full_name),"</div> <div class='group-path'>").concat(t.full_path,"</div> </div>")},formatSelection:function(t){return i()(t.full_name)},dropdownCssClass:"ajax-groups-dropdown select2-infinite",escapeMarkup:function(t){return t}}),t.on("select2-loaded",(function(){var t=document.querySelector(".select2-infinite .select2-results");t.style.height="".concat(Math.floor(t.scrollHeight),"px")}))}))};e.a=function(){return n.e(239).then(n.t.bind(null,428,7)).then(d).catch((function(){}))}}},[[2190,1,0,2,18]]]);
//# sourceMappingURL=pages.groups.edit.7fd5a76d.chunk.js.map