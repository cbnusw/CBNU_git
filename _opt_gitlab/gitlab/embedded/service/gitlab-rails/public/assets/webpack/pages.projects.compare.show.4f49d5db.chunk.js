(this.webpackJsonp=this.webpackJsonp||[]).push([[145],{113:function(e,t,n){"use strict";n.r(t);var i=n(88),r=n(70),o=n(96);document.addEventListener("DOMContentLoaded",(function(){Object(o.a)(document,gon),new i.a,new r.a}))},1387:function(e,t,n){"use strict";n.r(t);var i=n(806);document.addEventListener("DOMContentLoaded",(function(){return Object(i.a)()}))},184:function(e,t,n){var i=n(108),r=n(271),o=n(215),a=n(296),s=n(344),c=n(419);i({target:"Reflect",stat:!0},{get:function e(t,n){var i,l,u=arguments.length<3?t:arguments[2];return o(t)===u?t[n]:(i=s.f(t,n))?a(i,"value")?i.value:void 0===i.get?void 0:i.get.call(u):r(l=c(t))?e(l,n,u):void 0}})},2284:function(e,t,n){n(105),n(113),n(1387),e.exports=n(2285)},2285:function(e,t,n){"use strict";n.r(t);var i=n(501),r=n(722),o=n(658);document.addEventListener("DOMContentLoaded",(function(){new i.a;Object(r.a)(document.querySelector(".navbar-gitlab").offsetHeight-16),o.a.fetch()}))},378:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s}));var i=n(484),r=n.n(i),o=function(e,t,n,i){var r=Math.floor(e.offsetTop-t);if(r<=n&&!e.classList.contains("is-stuck")){var o=i?function(){var e=document.createElement("div");return e.classList.add("sticky-placeholder"),e}():null,a=e.offsetHeight;e.classList.add("is-stuck"),i&&(e.parentNode.insertBefore(o,e.nextElementSibling),o.style.height="".concat(a-e.offsetHeight,"px"))}else r>n&&e.classList.contains("is-stuck")&&(e.classList.remove("is-stuck"),i&&e.nextElementSibling&&e.nextElementSibling.classList.contains("sticky-placeholder")&&e.nextElementSibling.remove())},a=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e&&"undefined"!=typeof CSS&&CSS.supports("(position: -webkit-sticky) or (position: sticky)")&&document.addEventListener("scroll",(function(){return o(e,window.scrollY,t,n)}),{passive:!0})},s=function(e){r.a.add(e)}},484:function(e,t,n){!function(t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r,o=!1,a=void 0!==t;a&&t.getComputedStyle?(r=n.createElement("div"),["","-webkit-","-moz-","-ms-"].some((function(e){try{r.style.position=e+"sticky"}catch(e){}return""!=r.style.position}))&&(o=!0)):o=!0;var s=!1,c="undefined"!=typeof ShadowRoot,l={top:null,left:null},u=[];function f(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}function d(e){return parseFloat(e)||0}function h(e){for(var t=0;e;)t+=e.offsetTop,e=e.offsetParent;return t}var g=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!(t instanceof HTMLElement))throw new Error("First argument must be HTMLElement");if(u.some((function(e){return e._node===t})))throw new Error("Stickyfill is already applied to this node");this._node=t,this._stickyMode=null,this._active=!1,u.push(this),this.refresh()}return i(e,[{key:"refresh",value:function(){if(!o&&!this._removed){this._active&&this._deactivate();var e=this._node,i=getComputedStyle(e),r={position:i.position,top:i.top,display:i.display,marginTop:i.marginTop,marginBottom:i.marginBottom,marginLeft:i.marginLeft,marginRight:i.marginRight,cssFloat:i.cssFloat};if(!isNaN(parseFloat(r.top))&&"table-cell"!=r.display&&"none"!=r.display){this._active=!0;var a=e.style.position;"sticky"!=i.position&&"-webkit-sticky"!=i.position||(e.style.position="static");var s=e.parentNode,l=c&&s instanceof ShadowRoot?s.host:s,u=e.getBoundingClientRect(),g=l.getBoundingClientRect(),p=getComputedStyle(l);this._parent={node:l,styles:{position:l.style.position},offsetHeight:l.offsetHeight},this._offsetToWindow={left:u.left,right:n.documentElement.clientWidth-u.right},this._offsetToParent={top:u.top-g.top-d(p.borderTopWidth),left:u.left-g.left-d(p.borderLeftWidth),right:-u.right+g.right-d(p.borderRightWidth)},this._styles={position:a,top:e.style.top,bottom:e.style.bottom,left:e.style.left,right:e.style.right,width:e.style.width,marginTop:e.style.marginTop,marginLeft:e.style.marginLeft,marginRight:e.style.marginRight};var m=d(r.top);this._limits={start:u.top+t.pageYOffset-m,end:g.top+t.pageYOffset+l.offsetHeight-d(p.borderBottomWidth)-e.offsetHeight-m-d(r.marginBottom)};var v=p.position;"absolute"!=v&&"relative"!=v&&(l.style.position="relative"),this._recalcPosition();var b=this._clone={};b.node=n.createElement("div"),f(b.node.style,{width:u.right-u.left+"px",height:u.bottom-u.top+"px",marginTop:r.marginTop,marginBottom:r.marginBottom,marginLeft:r.marginLeft,marginRight:r.marginRight,cssFloat:r.cssFloat,padding:0,border:0,borderSpacing:0,fontSize:"1em",position:"static"}),s.insertBefore(b.node,e),b.docOffsetTop=h(b.node)}}}},{key:"_recalcPosition",value:function(){if(this._active&&!this._removed){var e=l.top<=this._limits.start?"start":l.top>=this._limits.end?"end":"middle";if(this._stickyMode!=e){switch(e){case"start":f(this._node.style,{position:"absolute",left:this._offsetToParent.left+"px",right:this._offsetToParent.right+"px",top:this._offsetToParent.top+"px",bottom:"auto",width:"auto",marginLeft:0,marginRight:0,marginTop:0});break;case"middle":f(this._node.style,{position:"fixed",left:this._offsetToWindow.left+"px",right:this._offsetToWindow.right+"px",top:this._styles.top,bottom:"auto",width:"auto",marginLeft:0,marginRight:0,marginTop:0});break;case"end":f(this._node.style,{position:"absolute",left:this._offsetToParent.left+"px",right:this._offsetToParent.right+"px",top:"auto",bottom:0,width:"auto",marginLeft:0,marginRight:0})}this._stickyMode=e}}}},{key:"_fastCheck",value:function(){this._active&&!this._removed&&(Math.abs(h(this._clone.node)-this._clone.docOffsetTop)>1||Math.abs(this._parent.node.offsetHeight-this._parent.offsetHeight)>1)&&this.refresh()}},{key:"_deactivate",value:function(){var e=this;this._active&&!this._removed&&(this._clone.node.parentNode.removeChild(this._clone.node),delete this._clone,f(this._node.style,this._styles),delete this._styles,u.some((function(t){return t!==e&&t._parent&&t._parent.node===e._parent.node}))||f(this._parent.node.style,this._parent.styles),delete this._parent,this._stickyMode=null,this._active=!1,delete this._offsetToWindow,delete this._offsetToParent,delete this._limits)}},{key:"remove",value:function(){var e=this;this._deactivate(),u.some((function(t,n){if(t._node===e._node)return u.splice(n,1),!0})),this._removed=!0}}]),e}(),p={stickies:u,Sticky:g,forceSticky:function(){o=!1,m(),this.refreshAll()},addOne:function(e){if(!(e instanceof HTMLElement)){if(!e.length||!e[0])return;e=e[0]}for(var t=0;t<u.length;t++)if(u[t]._node===e)return u[t];return new g(e)},add:function(e){if(e instanceof HTMLElement&&(e=[e]),e.length){for(var t=[],n=function(n){var i=e[n];return i instanceof HTMLElement?u.some((function(e){if(e._node===i)return t.push(e),!0}))?"continue":void t.push(new g(i)):(t.push(void 0),"continue")},i=0;i<e.length;i++)n(i);return t}},refreshAll:function(){u.forEach((function(e){return e.refresh()}))},removeOne:function(e){if(!(e instanceof HTMLElement)){if(!e.length||!e[0])return;e=e[0]}u.some((function(t){if(t._node===e)return t.remove(),!0}))},remove:function(e){if(e instanceof HTMLElement&&(e=[e]),e.length)for(var t=function(t){var n=e[t];u.some((function(e){if(e._node===n)return e.remove(),!0}))},n=0;n<e.length;n++)t(n)},removeAll:function(){for(;u.length;)u[0].remove()}};function m(){if(!s){s=!0,o(),t.addEventListener("scroll",o),t.addEventListener("resize",p.refreshAll),t.addEventListener("orientationchange",p.refreshAll);var e=void 0,i=void 0,r=void 0;"hidden"in n?(i="hidden",r="visibilitychange"):"webkitHidden"in n&&(i="webkitHidden",r="webkitvisibilitychange"),r?(n[i]||a(),n.addEventListener(r,(function(){n[i]?clearInterval(e):a()}))):a()}function o(){t.pageXOffset!=l.left?(l.top=t.pageYOffset,l.left=t.pageXOffset,p.refreshAll()):t.pageYOffset!=l.top&&(l.top=t.pageYOffset,l.left=t.pageXOffset,u.forEach((function(e){return e._recalcPosition()})))}function a(){e=setInterval((function(){u.forEach((function(e){return e._fastCheck()}))}),500)}}o||m(),e.exports?e.exports=p:a&&(t.Stickyfill=p)}(window,document)},501:function(e,t,n){"use strict";n.d(t,"a",(function(){return $}));n(24),n(49),n(56),n(30),n(28),n(42),n(40),n(46),n(18),n(55),n(68),n(36),n(67),n(41);var i=n(0),r=n.n(i),o=n(11),a=n(14),s=n(1),c=n(33),l=n(51),u=n.n(l),f=".".concat("diff-line-num",", .line_content"),d={init:function(e){var t=this;this.userCanCreateNote||(this.userCanCreateNote=""===e.closest(".files").data("canCreateNote")),this.isParallelView="parallel"===u.a.get("diff_view"),this.userCanCreateNote&&e.on("mouseover",f,(function(e){return t.showButton(t.isParallelView,e)})).on("mouseleave",f,(function(e){return t.hideButton(t.isParallelView,e)}))},showButton:function(e,t){var n=this.getButtonParent(t.currentTarget,e);this.validateButtonParent(n)&&(n.classList.add("is-over"),n.nextElementSibling.classList.add("is-over"))},hideButton:function(e,t){var n=this.getButtonParent(t.currentTarget,e);n.classList.remove("is-over"),n.nextElementSibling.classList.remove("is-over")},getButtonParent:function(e,t){if(t){if(!e.classList.contains("diff-line-num"))return e.previousElementSibling}else if(!e.classList.contains("old_line"))return e.parentNode.querySelector(".".concat("old_line"));return e},validateButtonParent:function(e){return!(e.classList.contains("empty-cell")||e.classList.contains("js-unfold")||e.classList.contains("no-comment-btn")||e.parentNode.classList.contains("diff-expanded"))}},h=(n(26),n(78),n(145),n(77),n(27),n(16));function g(e,t){var n=t.x,i=t.y,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=document.createElement("button");return r.concat(["js-image-badge"]).forEach((function(e){return o.classList.add(e)})),o.setAttribute("type","button"),o.setAttribute("disabled",!0),o.dataset.noteId=e,o.style.left="".concat(n,"px"),o.style.top="".concat(i,"px"),o}function p(e,t){var n=t.x,i=t.y,r=document.createElement("button");r.classList.add("btn-transparent"),r.classList.add("comment-indicator"),r.setAttribute("type","button"),r.style.left="".concat(n,"px"),r.style.top="".concat(i,"px"),r.innerHTML=Object(h.Q)("image-comment-dark"),e.appendChild(r)}var m={x:0,y:0,width:0,height:0},v=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.noteId,i=t.discussionId;this.actual=t.actual||m,this.browser=t.browser||m,this.noteId=n,this.discussionId=i,t.imageEl&&!t.browser&&(this.browser=b.resizeCoordinatesToImageElement(t.imageEl,this.actual))};var b={addCommentIndicator:p,removeCommentIndicator:function(e){var t=e.querySelector(".comment-indicator"),n=e.querySelector("img"),i=Boolean(t),r={};return i&&(r={x:parseInt(t.style.left,10),y:parseInt(t.style.top,10),image:{width:n.width,height:n.height}},t.remove()),Object.assign({},r,{removed:i})},showCommentIndicator:function(e,t){var n=t.x,i=t.y,r=e.querySelector(".comment-indicator");r?(r.style.left="".concat(n,"px"),r.style.top="".concat(i,"px")):p(e,t)},commentIndicatorOnClick:function(e){e.stopPropagation(),e.currentTarget.closest(".diff-viewer").querySelector(".note-container .note-textarea").focus()},addImageBadge:function(e,t){var n=t.coordinate,i=t.badgeText,r=g(t.noteId,n,["badge","badge-pill"]);r.innerText=i,e.appendChild(r)},addImageCommentBadge:function(e,t){var n=t.coordinate,i=g(t.noteId,n,["image-comment-badge"]);i.innerHTML=Object(h.Q)("image-comment-dark"),e.appendChild(i)},addAvatarBadge:function(e,t){var n=t.detail,i=n.noteId,r=n.badgeNumber,o=e.querySelector("#".concat(i," .badge"));o.innerText=r,o.classList.remove("hidden")},setPositionDataAttribute:function(e,t){var n=t.x,i=t.y,r=t.width,o=t.height,a=e.dataset.position,s=Object.assign({},JSON.parse(a),{x:n,y:i,width:r,height:o});e.setAttribute("data-position",JSON.stringify(s))},updateDiscussionAvatarBadgeNumber:function(e,t){e.querySelector(".image-diff-avatar-link .badge").innerText=t},updateDiscussionBadgeNumber:function(e,t){e.querySelector(".badge").innerText=t},toggleCollapsed:function(e){var t=e.currentTarget.closest(".discussion-notes"),n=t.querySelector(".discussion-form"),i=t.classList.contains("collapsed");i?t.classList.remove("collapsed"):t.classList.add("collapsed"),n&&!i?n.style.display="none":n&&i&&(n.style.display="block")},resizeCoordinatesToImageElement:function(e,t){var n=t.x,i=t.y,r=t.width,o=t.height,a=e.width,s=e.height,c=a/r,l=s/o;return{x:Math.round(n*c),y:Math.round(i*l),width:a,height:s}},generateBadgeFromDiscussionDOM:function(e,t){var n=JSON.parse(t.dataset.position),i=t.querySelector(".note");return new v({actual:n,imageEl:e.querySelector("img"),noteId:i.id,discussionId:t.dataset.discussionId})},getTargetSelection:function(e){var t=e.currentTarget.querySelector("img"),n=e.offsetX,i=e.offsetY,r=t.width,o=t.height,a=t.naturalWidth,s=t.naturalHeight,c=a/r,l=s/o,u=Math.max(0,n)&&Math.min(n,r),f=Math.max(0,i)&&Math.min(i,o);return{browser:{x:u,y:f,width:r,height:o},actual:{x:Math.round(u*c),y:Math.round(f*l),width:a,height:s}}}};function y(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function w(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var j=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t,this.canCreateNote=Boolean(n&&n.canCreateNote),this.renderCommentBadge=Boolean(n&&n.renderCommentBadge),this.$noteContainer=r()(".note-container",this.el),this.imageBadges=[]}var t,n,i;return t=e,(n=[{key:"init",value:function(){this.imageFrameEl=this.el.querySelector(".diff-file .js-image-frame"),this.imageEl=this.imageFrameEl.querySelector("img"),this.bindEvents()}},{key:"bindEvents",value:function(){var e;this.imageClickedWrapper=this.imageClicked.bind(this),this.imageBlurredWrapper=b.removeCommentIndicator.bind(null,this.imageFrameEl),this.addBadgeWrapper=this.addBadge.bind(this),this.removeBadgeWrapper=this.removeBadge.bind(this),this.renderBadgesWrapper=this.renderBadges.bind(this),(e=this.imageEl).complete&&0!==e.naturalHeight?this.renderBadges():this.imageEl.addEventListener("load",this.renderBadgesWrapper),this.$noteContainer.on("click",".js-diff-notes-toggle",b.toggleCollapsed),r()(this.el).on("click",".comment-indicator",b.commentIndicatorOnClick),this.canCreateNote&&(this.el.addEventListener("click.imageDiff",this.imageClickedWrapper),this.el.addEventListener("blur.imageDiff",this.imageBlurredWrapper),this.el.addEventListener("addBadge.imageDiff",this.addBadgeWrapper),this.el.addEventListener("removeBadge.imageDiff",this.removeBadgeWrapper))}},{key:"imageClicked",value:function(e){var t=e.detail,n=b.getTargetSelection(t),i=t.currentTarget;b.setPositionDataAttribute(i,n.actual),b.showCommentIndicator(this.imageFrameEl,n.browser)}},{key:"renderBadges",value:function(){y(this.el.querySelectorAll(".note-container .discussion-notes .notes")).forEach(this.renderBadge.bind(this))}},{key:"renderBadge",value:function(e,t){var n=b.generateBadgeFromDiscussionDOM(this.imageFrameEl,e);this.imageBadges.push(n);var i={coordinate:n.browser,noteId:n.noteId};if(this.renderCommentBadge)b.addImageCommentBadge(this.imageFrameEl,i);else{var r=Object.assign({},i,{badgeText:t+1});b.addImageBadge(this.imageFrameEl,r)}}},{key:"addBadge",value:function(e){var t=e.detail,n=t.x,i=t.y,r=t.width,o=t.height,a=t.noteId,s=t.discussionId,c=this.imageBadges.length+1,l=new v({actual:{x:n,y:i,width:r,height:o},imageEl:this.imageFrameEl.querySelector("img"),noteId:a,discussionId:s});this.imageBadges.push(l),b.addImageBadge(this.imageFrameEl,{coordinate:l.browser,badgeText:c,noteId:a}),b.addAvatarBadge(this.el,{detail:{noteId:a,badgeNumber:c}});var u=this.el.querySelector("#discussion_".concat(s));b.updateDiscussionBadgeNumber(u,c)}},{key:"removeBadge",value:function(e){var t=this,n=e.detail.badgeNumber,i=n-1,r=this.imageFrameEl.querySelectorAll(".badge");this.imageBadges.length!==n&&this.imageBadges.forEach((function(e,n){if(n>i){var o=e.discussionId,a=n,s=t.el.querySelector("#discussion_".concat(o));r[n].innerText=a,b.updateDiscussionBadgeNumber(s,a),b.updateDiscussionAvatarBadgeNumber(s,a)}})),this.imageBadges.splice(i,1),r[i].remove()}}])&&w(t.prototype,n),i&&w(t,i),e}(),O=(n(50),n(531),n(90),n(184),{TWO_UP:"TWO_UP",SWIPE:"SWIPE",ONION_SKIN:"ONION_SKIN"});function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function E(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function I(e,t,n){return(I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=T(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var P=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),E(this,T(t).apply(this,arguments))}var n,i,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(t,e),n=t,(i=[{key:"init",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O.TWO_UP;this.imageFrameEls=(_(e={},O.TWO_UP,this.el.querySelector(".two-up .js-image-frame")),_(e,O.SWIPE,this.el.querySelector(".swipe .js-image-frame")),_(e,O.ONION_SKIN,this.el.querySelector(".onion-skin .js-image-frame")),e);var i=this.el.querySelector(".view-modes-menu");this.viewModesEls=(_(t={},O.TWO_UP,i.querySelector(".two-up")),_(t,O.SWIPE,i.querySelector(".swipe")),_(t,O.ONION_SKIN,i.querySelector(".onion-skin")),t),this.currentView=n,this.generateImageEls(),this.bindEvents()}},{key:"generateImageEls",value:function(){var e=this;this.imageEls={},Object.getOwnPropertyNames(O).forEach((function(t){e.imageEls[t]=e.imageFrameEls[t].querySelector("img")}))}},{key:"bindEvents",value:function(){I(T(t.prototype),"bindEvents",this).call(this),this.changeToViewTwoUp=this.changeView.bind(this,O.TWO_UP),this.changeToViewSwipe=this.changeView.bind(this,O.SWIPE),this.changeToViewOnionSkin=this.changeView.bind(this,O.ONION_SKIN),this.viewModesEls[O.TWO_UP].addEventListener("click",this.changeToViewTwoUp),this.viewModesEls[O.SWIPE].addEventListener("click",this.changeToViewSwipe),this.viewModesEls[O.ONION_SKIN].addEventListener("click",this.changeToViewOnionSkin)}},{key:"changeView",value:function(e){if(t=e,Boolean(Object.getOwnPropertyNames(O).find((function(e){return e===t})))){var t,n=b.removeCommentIndicator(this.imageFrameEl);this.currentView=e,k(this.imageFrameEl.querySelectorAll(".badge")).map((function(e){return e.remove()})),this.imageBadges=[],setTimeout(this.renderNewView.bind(this,n),250)}}},{key:"renderNewView",value:function(e){if(this.renderBadges(),e.removed){var t=b.resizeCoordinatesToImageElement(this.imageEl,{x:e.x,y:e.y,width:e.image.width,height:e.image.height});b.showCommentIndicator(this.imageFrameEl,t)}}},{key:"imageEl",get:function(){return this.imageEls[this.currentView]}},{key:"imageFrameEl",get:function(){return this.imageFrameEls[this.currentView]}}])&&C(n.prototype,i),r&&C(n,r),t}(j);n(91);function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function L(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var N=900,D=["two-up","swipe"],A=function(){function e(t){var n,i,o,a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o={"two-up":function(){var e=this;return r()(".two-up.view .wrap",this.file).each((function(t,n){return r()("img",n).each((function(){if(r()(this).width()>N/2)return r()(this).width(N/2)})),e.requestImageInfo(r()("img",n),(function(e,t){return r()(".image-info .meta-width",n).text("".concat(e,"px")),r()(".image-info .meta-height",n).text("".concat(t,"px")),r()(".image-info",n).removeClass("hide")}))}))},swipe:function(){var t=this,n=0,i=0;return r()(".swipe.view",this.file).each((function(o,a){var s=B(e.prepareFrames(a),2);n=s[0],i=s[1];var c=r()(".swipe-frame",a),l=r()(".swipe-wrap",a),u=r()(".swipe-bar",a);c.css({width:n+16,height:i+28}),l.css({width:n+1,height:i+2}),u.css({left:1});var f=parseInt(l.css("right").replace("px",""),10);t.initDraggable(u,f,(function(e,t){t>0&&t<c.width()-2*f&&(l.width(n+1-t),u.css("left",t))}))}))},"onion-skin":function(){var t,n,i=this;n=0,t=0;var o=r()(".drag-track",this.file).width()-r()(".dragger",this.file).width();return r()(".onion-skin.view",this.file).each((function(a,s){var c=B(e.prepareFrames(s),2);n=c[0],t=c[1];var l=r()(".onion-skin-frame",s),u=r()(".frame.added",s),f=r()(".drag-track",s),d=r()(".dragger",f);l.css({width:n+16,height:t+28}),r()(".swipe-wrap",s).css({width:n+1,height:t+2}),d.css({left:o}),u.css("opacity",1);var h=parseInt(u.css("right").replace("px",""),10);i.initDraggable(d,h,(function(e,t){var n=t/o;n>=0&&n<=1&&(d.css("left",t),u.css("opacity",n))}))}))}},(i="views")in(n=this)?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,this.file=t,this.requestImageInfo(r()(".two-up.view .frame.deleted img",this.file),(function(){return a.requestImageInfo(r()(".two-up.view .frame.added img",a.file),(function(){a.initViewModes(),r()(".two-up.view img",a.file).waitForImages((function(){a.initView("two-up")}))}))}))}var t,n,i;return t=e,i=[{key:"prepareFrames",value:function(e){var t=0,n=0;return r()(".frame",e).each((function(e,i){var o=r()(i).width(),a=r()(i).height();return t=o>t?o:t,n=a>n?a:n})).css({width:t,height:n}),[t,n]}}],(n=[{key:"initViewModes",value:function(){var e=this,t=D[0];return r()(".view-modes",this.file).removeClass("hide"),r()(".view-modes-menu",this.file).on("click","li",(function(t){if(!r()(t.currentTarget).hasClass("active"))return e.activateViewMode(t.currentTarget.className)})),this.activateViewMode(t)}},{key:"activateViewMode",value:function(e){var t=this;return r()(".view-modes-menu li",this.file).removeClass("active").filter(".".concat(e)).addClass("active"),r()(".view:visible:not(.".concat(e,")"),this.file).fadeOut(200,(function(){return r()(".view.".concat(e),t.file).fadeIn(200),t.initView(e)}))}},{key:"initView",value:function(e){return this.views[e].call(this)}},{key:"initDraggable",value:function(e,t,n){var i=!1,o=r()("body"),a=e.parent(),s=function(){i=!0,o.css("user-select","none")},c=function(){i=!1,o.css("user-select","")},l=function(e){var r=(e.pageX||e.touches[0].pageX)-(a.offset().left+t);i&&n(e,r)};e.off("mousedown").off("touchstart").on("mousedown",s).on("touchstart",s),o.off("mouseup").off("mousemove").off("touchend").off("touchmove").on("mouseup",c).on("touchend",c).on("mousemove",l).on("touchmove",l)}},{key:"requestImageInfo",value:function(e,t){var n=this,i=e.get(0);if(i)return i.complete?t.call(this,i.naturalWidth,i.naturalHeight):e.on("load",(function(){return t.call(n,i.naturalWidth,i.naturalHeight)}))}}])&&L(t.prototype,n),i&&L(t,i),e}();var F={initImageDiff:function(e,t,n){var i,r={canCreateNote:t,renderCommentBadge:n};return new A(e),e.querySelector(".diff-file .js-single-image")?(i=new j(e,r)).init():e.querySelector(".diff-file .js-replaced-image")&&(i=new P(e,r)).init(),i}},q=n(379);function M(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var W='<div class="diff-content"></div>',R='<span class="spinner"></span>',V='<div class="nothing-here-block diff-collapsed">This diff is collapsed. <button class="click-to-expand btn btn-link">Click to expand it.</button></div>',H=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.file=t,this.toggleDiff=this.toggleDiff.bind(this),this.content=r()(".diff-content",this.file),this.$toggleIcon=r()(".diff-toggle-caret",this.file),this.diffForPath=this.content.find("[data-diff-for-path]").data("diffForPath"),this.isOpen=!this.diffForPath,this.diffForPath?(this.collapsedContent=this.content,this.loadingContent=r()(W).addClass("loading").html(R).hide(),this.content=null,this.collapsedContent.after(this.loadingContent),this.$toggleIcon.addClass("fa-caret-right")):(this.collapsedContent=r()(W).html(V).hide(),this.content.after(this.collapsedContent),this.$toggleIcon.addClass("fa-caret-down")),r()(".js-file-title, .click-to-expand",this.file).on("click",(function(e){n.toggleDiff(r()(e.target))}))}var t,n,i;return t=e,(n=[{key:"toggleDiff",value:function(e,t){if(e.hasClass("js-file-title")||e.hasClass("click-to-expand")||e.hasClass("diff-toggle-caret"))if(this.isOpen=!this.isOpen,this.isOpen||this.hasError){if(!this.content)return this.$toggleIcon.addClass("fa-caret-down").removeClass("fa-caret-right"),this.getContentHTML(t);this.collapsedContent.hide(),this.content.show(),this.$toggleIcon.addClass("fa-caret-down").removeClass("fa-caret-right"),void 0!==gl.diffNotesCompileComponents&&gl.diffNotesCompileComponents()}else this.content.hide(),this.$toggleIcon.addClass("fa-caret-right").removeClass("fa-caret-down"),this.collapsedContent.show(),void 0!==gl.diffNotesCompileComponents&&gl.diffNotesCompileComponents()}},{key:"getContentHTML",value:function(e){var t=this;this.collapsedContent.hide(),this.loadingContent.show(),o.a.get(this.diffForPath).then((function(n){var i=n.data;t.loadingContent.hide(),i.html?(t.content=r()(i.html),Object(q.a)(t.content)):(t.hasError=!0,t.content=r()('<div class="nothing-here-block"><i class="fa fa-warning"></i> Could not load diff</div>')),t.collapsedContent.after(t.content),void 0!==gl.diffNotesCompileComponents&&gl.diffNotesCompileComponents();var o=r()(t.file);d.init(o);var a=o.closest(".files").is("[data-can-create-note]");F.initImageDiff(o[0],a),e&&e()})).catch((function(){Object(a.a)(Object(s.a)("An error occurred while retrieving diff"))}))}}])&&M(t.prototype,n),i&&M(t,i),e}();function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function J(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var K=!1,$=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t=r()(".files .diff-file");t.each((function(e,t){r.a.data(t,"singleFileDiff")||r.a.data(t,"singleFileDiff",new H(t))}));var n=document.getElementById("diffs");(!n||n&&n.dataset&&""!==n.dataset.isLocked)&&d.init(t);var i=r()(".files").first().get(0),o=i&&i.hasAttribute("data-can-create-note");t.each((function(e,t){return F.initImageDiff(t,o)})),K||(r()(document).on("click",".js-unfold",this.handleClickUnfold.bind(this)).on("click",".diff-line-num a",this.handleClickLineNum.bind(this)).on("mousedown","td.line_content.parallel",this.handleParallelLineDown.bind(this)),K=!0),Object(c.d)()&&this.highlightSelectedLine(),this.openAnchoredDiff()}var t,n,i;return t=e,(n=[{key:"handleClickUnfold",value:function(e){var t,n,i=r()(e.target),c=U(this.lineNumbers(i.parent()),2),l=c[0],u=c[1],f=u-l,d=i.hasClass("js-unfold-bottom"),h=!0;if(d){var g=u+1;t=g,n=g+20}else{var p=u-1;t=p-20,n=p;var m=this.lineNumbers(i.parent().prev())[1];t<=m+1&&(t=m+1,h=!1)}var v=i.parents(".diff-file"),b=v.data("blobDiffPath"),y={since:t,to:n,bottom:d,offset:f,unfold:h,view:v.data("view")};o.a.get(b,{params:y}).then((function(e){var t=e.data;return i.parent().replaceWith(t)})).catch((function(){return Object(a.a)(Object(s.a)("An error occurred while loading diff"))}))}},{key:"openAnchoredDiff",value:function(e){var t=this,n=Object(c.d)(),i=n&&n.split("_")[0];if(i){var o=r()("#".concat(i)).closest(".diff-file");if(r()(".nothing-here-block:visible",o).length){var a=r()(".js-file-title, .click-to-expand",o);o.data("singleFileDiff").toggleDiff(a,(function(){t.highlightSelectedLine(),e&&e()}))}else e&&e()}}},{key:"handleClickLineNum",value:function(e){var t=r()(e.currentTarget).attr("href");e.preventDefault(),window.history.pushState?window.history.pushState(null,null,t):window.location.hash=t,this.highlightSelectedLine()}},{key:"handleParallelLineDown",value:function(e){var t=r()(e.currentTarget),n=t.closest("table");n.removeClass("left-side-selected right-side-selected");var i=["left-side","right-side"].filter((function(e){return t.hasClass(e)}))[0];i&&n.addClass("".concat(i,"-selected"))}},{key:"diffViewType",value:function(){return r()(".inline-parallel-buttons a.active").data("viewType")}},{key:"lineNumbers",value:function(e){var t=e.find(".diff-line-num").toArray();return 2!==t.length?[0,0]:t.map((function(e){return parseInt(r()(e).data("linenumber"),10)||0}))}},{key:"highlightSelectedLine",value:function(){var e=Object(c.d)(),t=r()(".diff-file");t.find(".hll").removeClass("hll"),e&&t.find("tr#".concat(e,":not(.match) td, td#").concat(e,', td[data-line-code="').concat(e,'"]')).addClass("hll")}}])&&J(t.prototype,n),i&&J(t,i),e}()},531:function(e,t,n){var i=n(108),r=n(239),o=n(837).f;i({target:"Object",stat:!0,forced:r((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:o})},658:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n(28),n(26),n(18),n(64),n(27);var i=n(0),r=n.n(i),o=n(16),a=n(11),s=n(14),c=n(1);function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"fetch",value:function(){var e=r()(".js-signature-container");if(0===e.length)return Promise.resolve();var t=r()(".js-loading-gpg-badge");t.html('<i class="fa fa-spinner fa-spin"></i>');var n=function(){return Object(s.a)(Object(c.a)("An error occurred while loading commit signatures"))},i=e.data("signaturesPath");if(!i)return n(),Promise.reject(new Error(Object(c.a)("Missing commit signatures endpoint!")));var l=Object(o.H)(e.serialize());return a.a.get(i,{params:l}).then((function(e){e.data.signatures.forEach((function(e){t.filter('[data-commit-sha="'.concat(e.commit_sha,'"]')).replaceWith(e.html)}))})).catch(n)}}],(n=null)&&l(t.prototype,n),i&&l(t,i),e}()},70:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n(24),n(49),n(56),n(40),n(90),n(18),n(36),n(41);var i=n(8),r=n.n(i),o=n(9);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=s(this,c(t).call(this)),r.a.bind("g p",(function(){return Object(o.a)(".shortcuts-project")})),r.a.bind("g v",(function(){return Object(o.a)(".shortcuts-project-activity")})),r.a.bind("g r",(function(){return Object(o.a)(".shortcuts-project-releases")})),r.a.bind("g f",(function(){return Object(o.a)(".shortcuts-tree")})),r.a.bind("g c",(function(){return Object(o.a)(".shortcuts-commits")})),r.a.bind("g j",(function(){return Object(o.a)(".shortcuts-builds")})),r.a.bind("g n",(function(){return Object(o.a)(".shortcuts-network")})),r.a.bind("g d",(function(){return Object(o.a)(".shortcuts-repository-charts")})),r.a.bind("g i",(function(){return Object(o.a)(".shortcuts-issues")})),r.a.bind("g b",(function(){return Object(o.a)(".shortcuts-issue-boards")})),r.a.bind("g m",(function(){return Object(o.a)(".shortcuts-merge_requests")})),r.a.bind("g w",(function(){return Object(o.a)(".shortcuts-wiki")})),r.a.bind("g s",(function(){return Object(o.a)(".shortcuts-snippets")})),r.a.bind("g k",(function(){return Object(o.a)(".shortcuts-kubernetes")})),r.a.bind("g e",(function(){return Object(o.a)(".shortcuts-environments")})),r.a.bind("g l",(function(){return Object(o.a)(".shortcuts-metrics")})),r.a.bind("i",(function(){return Object(o.a)(".shortcuts-new-issue")})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),t}(n(107).a)},722:function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(378);t.a=function(e){Object(o.b)(document.querySelector(".js-diff-files-changed"),e),r()(".js-diff-stats-dropdown").glDropdown({filterable:!0,remoteFilter:!1})}},73:function(e,t,n){"use strict";n(30),n(35),n(18),n(64);var i=n(0),r=n.n(i),o=n(32),a=(n(65),n(69),n(55),n(67),n(71));function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.projectSelectInput=r()(t),this.newItemBtn=r()(".new-project-item-link"),this.resourceType=this.newItemBtn.data("type"),this.resourceLabel=this.newItemBtn.data("label"),this.formattedText=this.deriveTextVariants(),this.groupId=this.projectSelectInput.data("groupId"),this.bindEvents(),this.initLocalStorage()}var t,i,o;return t=e,(i=[{key:"bindEvents",value:function(){var e=this;this.projectSelectInput.siblings(".new-project-item-select-button").on("click",(function(t){return e.openDropdown(t)})),this.newItemBtn.on("click",(function(t){e.getProjectFromLocalStorage()||(t.preventDefault(),e.openDropdown(t))})),this.projectSelectInput.on("change",(function(){return e.selectProject()}))}},{key:"initLocalStorage",value:function(){a.a.isLocalStorageAccessSafe()&&(this.localStorageKey=["group",this.groupId,this.formattedText.localStorageItemType,"recent-project"].join("-"),this.setBtnTextFromLocalStorage())}},{key:"openDropdown",value:function(e){n.e(239).then(n.t.bind(null,428,7)).then((function(){r()(e.currentTarget).siblings(".project-item-select").select2("open")})).catch((function(){}))}},{key:"selectProject",value:function(){var e=JSON.parse(this.projectSelectInput.val()),t={url:"".concat(e.url,"/").concat(this.projectSelectInput.data("relativePath")),name:e.name};this.setNewItemBtnAttributes(t),this.setProjectInLocalStorage(t)}},{key:"setBtnTextFromLocalStorage",value:function(){var e=this.getProjectFromLocalStorage();this.setNewItemBtnAttributes(e)}},{key:"setNewItemBtnAttributes",value:function(e){e?(this.newItemBtn.attr("href",e.url),this.newItemBtn.text("".concat(this.formattedText.defaultTextPrefix," in ").concat(e.name))):this.newItemBtn.text("Select project to create ".concat(this.formattedText.presetTextSuffix))}},{key:"getProjectFromLocalStorage",value:function(){var e=localStorage.getItem(this.localStorageKey);return JSON.parse(e)}},{key:"setProjectInLocalStorage",value:function(e){var t=JSON.stringify(e);localStorage.setItem(this.localStorageKey,t)}},{key:"deriveTextVariants",value:function(){var e=this.resourceLabel;return{localStorageItemType:"new-".concat(this.resourceType.split("_").join("-").slice(0,-1)),defaultTextPrefix:e,presetTextSuffix:this.resourceType.split("_").join(" ").slice(0,-1)}}}])&&s(t.prototype,i),o&&s(t,o),e}(),l=n(1),u=function(){r()(".ajax-project-select").each((function(e,t){var n,i=this,a=r()(t).data("simpleFilter")||!1,s=r()(t).data("select2");return this.groupId=r()(t).data("groupId"),this.userId=r()(t).data("userId"),this.includeGroups=r()(t).data("includeGroups"),this.allProjects=r()(t).data("allProjects")||!1,this.orderBy=r()(t).data("orderBy")||"id",this.withIssuesEnabled=r()(t).data("withIssuesEnabled"),this.withMergeRequestsEnabled=r()(t).data("withMergeRequestsEnabled"),this.withShared=void 0===r()(t).data("withShared")||r()(t).data("withShared"),this.includeProjectsInSubgroups=r()(t).data("includeProjectsInSubgroups")||!1,this.allowClear=r()(t).data("allowClear")||!1,n=Object(l.d)("ProjectSelect|Search for project"),this.includeGroups&&(n+=Object(l.d)("ProjectSelect| or group")),r()(t).select2({placeholder:n,minimumInputLength:0,query:function(e){var t,n=function(t){var n={results:t};return e.callback(n)};return t=i.includeGroups?function(t){return o.a.groups(e.term,{},(function(e){var i=e.concat(t);return n(i)}))}:n,i.groupId?o.a.groupProjects(i.groupId,e.term,{with_issues_enabled:i.withIssuesEnabled,with_merge_requests_enabled:i.withMergeRequestsEnabled,with_shared:i.withShared,include_subgroups:i.includeProjectsInSubgroups},t):i.userId?o.a.userProjects(i.userId,e.term,{with_issues_enabled:i.withIssuesEnabled,with_merge_requests_enabled:i.withMergeRequestsEnabled,with_shared:i.withShared,include_subgroups:i.includeProjectsInSubgroups},t):o.a.projects(e.term,{order_by:i.orderBy,with_issues_enabled:i.withIssuesEnabled,with_merge_requests_enabled:i.withMergeRequestsEnabled,membership:!i.allProjects},t)},id:function(e){return a?e.id:JSON.stringify({name:e.name,url:e.web_url})},text:function(e){return e.name_with_namespace||e.name},initSelection:function(e,t){return o.a.project(e.val()).then((function(e){var n=e.data;return t(n)}))},allowClear:this.allowClear,dropdownCssClass:"ajax-project-dropdown"}),s||a?t:new c(t)}))};t.a=function(){return n.e(239).then(n.t.bind(null,428,7)).then(u).catch((function(){}))}},806:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n(42),n(55),n(91),n(89);var i=n(0),r=n.n(i),o=n(1),a=n(11),s=n(14),c=n(110);function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};r()(".js-compare-dropdown").each((function(){var n=r()(this),i=n.data("selected"),l=n.closest(".dropdown"),u=r()('input[name="'.concat(n.data("fieldName"),'"]'),l),f=r()('input[type="search"]',l);n.glDropdown({data:function(t,i){var r={ref:n.data("ref"),search:t};e&&(r.find=e),a.a.get(n.data("refsUrl"),{params:r}).then((function(t){var n=t.data;i(e?n[Object(c.b)(e)]||[]:n)})).catch((function(){return Object(s.a)(Object(o.a)("Error fetching refs"))}))},selectable:!0,filterable:!0,filterRemote:Boolean(n.data("refsUrl")),fieldName:n.data("fieldName"),filterInput:'input[type="search"]',renderRow:function(e){var t=r()("<a />").attr("href","#").addClass(e===i?"is-active":"").text(e).attr("data-ref",e);return null!=e.header?r()("<li />").addClass("dropdown-header").text(e.header):r()("<li />").append(t)},id:function(e,t){return t.attr("data-ref")},toggleLabel:function(e,t){return t.text().trim()},clicked:function(){return t(n)}}),f.on("keyup",(function(e){if(13===(e.keyCode||e.which)){var t=f.val();u.val(t),r()(".dropdown-toggle-text",n).text(t),l.removeClass("open")}})),l.on("click",".dropdown-content a",(function(e){n.prop("title",e.target.text.replace(/_+?/g,"-")),n.hasClass("has-tooltip")&&n.tooltip("_fixTitle")}))}))}},88:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));n(42),n(89);var i=n(0),r=n.n(i),o=n(51),a=n.n(o),s=n(1),c=n(33);n(28),n(78),n(40),n(46),n(129),n(35),n(77),n(18),n(36),n(41);var l=function(e){return e.reduce((function(e,t){var n=t.name,i=t.value;return Object.assign(e,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},n,i))}),{})},u=n(11),f=n(14),d=n(73);function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var g=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t=r()("ul.clone-options-dropdown"),n=r()("#project_clone"),i=r()(".js-git-clone-holder .js-clone-dropdown-label"),o=document.querySelector(".js-mobile-git-clone .js-clone-dropdown-label"),s=i.text().trim();s.length>0&&r()("a:contains('".concat(s,"')"),t).addClass("is-active"),r()("a",t).on("click",(function(e){e.preventDefault();var i=r()(e.currentTarget),a=i.attr("href"),s=i.data("cloneType");r()(".is-active",t).removeClass("is-active"),r()('a[data-clone-type="'.concat(s,'"]')).each((function(){var e=r()(this),t=e.find(".dropdown-menu-inner-title").text(),n=e.closest(".project-clone-holder").find(".js-clone-dropdown-label");e.toggleClass("is-active"),n.text(t)})),o?o.dataset.clipboardText=a:n.val(a),r()(".js-git-empty .js-clone").text(a)})),e.initRefSwitcher(),r()(".project-refs-select").on("change",(function(){return r()(this).parents("form").submit()})),r()(".hide-no-ssh-message").on("click",(function(e){return a.a.set("hide_no_ssh_message","false"),r()(this).parents(".no-ssh-key-message").remove(),e.preventDefault()})),r()(".hide-no-password-message").on("click",(function(e){return a.a.set("hide_no_password_message","false"),r()(this).parents(".no-password-message").remove(),e.preventDefault()})),r()(".hide-auto-devops-implicitly-enabled-banner").on("click",(function(e){var t=r()(this).data("project-id"),n="hide_auto_devops_implicitly_enabled_banner_".concat(t);return a.a.set(n,"false"),r()(this).parents(".auto-devops-implicitly-enabled-banner").remove(),e.preventDefault()})),e.projectSelectDropdown()}var t,n,i;return t=e,i=[{key:"projectSelectDropdown",value:function(){Object(d.a)(),r()(".project-item-select").on("click",(function(t){return e.changeProject(r()(t.currentTarget).val())}))}},{key:"changeProject",value:function(e){return window.location=e}},{key:"initRefSwitcher",value:function(){var e=document.createElement("li"),t=document.createElement("a");return t.href="#",r()(".js-project-refs-dropdown").each((function(){var n,i,o,a=r()(this),d=a.data("selected"),h=a.data("fieldName"),g=Boolean(a.data("visit")),p=a.closest("form"),m=p.attr("action"),v=Object(c.h)((n=p[0],i=new FormData(n),o=Array.from(i.keys()).map((function(e){var t=i.getAll(e);return{name:e,value:1===(t=t.filter((function(e){return e}))).length?t[0]:t}})),l(o)),m);return a.glDropdown({data:function(e,t){u.a.get(a.data("refsUrl"),{params:{ref:a.data("ref"),search:e}}).then((function(e){var n=e.data;return t(n)})).catch((function(){return Object(f.a)(Object(s.a)("An error occurred while getting projects"))}))},selectable:!0,filterable:!0,filterRemote:!0,filterByText:!0,inputFieldName:a.data("inputFieldName"),fieldName:h,renderRow:function(n){var i,r,o,a=e.cloneNode(!1),s=t.cloneNode(!1);return n===d&&(s.className="is-active"),s.textContent=n,s.dataset.ref=n,n.length>0&&g&&(s.href=Object(c.h)((o=n,(r=h)in(i={})?Object.defineProperty(i,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):i[r]=o,i),v)),a.appendChild(s),a},id:function(e,t){return t.attr("data-ref")},toggleLabel:function(e,t){return t.text().trim()},clicked:function(e){var t=e.e;g||t.preventDefault()}})}))}}],(n=null)&&h(t.prototype,n),i&&h(t,i),e}()}},[[2284,1,0,2]]]);
//# sourceMappingURL=pages.projects.compare.show.4f49d5db.chunk.js.map