(this.webpackJsonp=this.webpackJsonp||[]).push([[28],{113:function(t,e,n){"use strict";n.r(e);var a=n(88),i=n(70),o=n(96);document.addEventListener("DOMContentLoaded",(function(){Object(o.a)(document,gon),new a.a,new i.a}))},1243:function(t,e,n){"use strict";e.a={computed:{canaryCalloutProps:function(){}}}},1244:function(t,e,n){"use strict";var a=n(20),i=n.n(a),o=n(125),r=n.n(o),s=(n(28),n(42),n(46),n(35),n(77),function(t,e){return e}),l=n(16);function c(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var u=function(){function t(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.state={},this.state.environments=[],this.state.stoppedCounter=0,this.state.availableCounter=0,this.state.paginationInformation={},this.state.reviewAppDetails={},this}var e,n,a;return e=t,(n=[{key:"storeEnvironments",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=e.map((function(e){var n=t.state.environments.find((function(t){return e.latest?t.id===e.latest.id:t.id===e.id}))||{},a={};return e.size>1&&(a=Object.assign({},e,{isFolder:!0,isLoadingFolderContent:n.isLoading||!1,folderName:e.name,isOpen:n.isOpen||!1,children:n.children||[]})),e.latest?delete(a=Object.assign(a,e,e.latest)).latest:a=Object.assign(a,e),a=s(0,a)}));return this.state.environments=n,n}},{key:"setPagination",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object(l.D)(t),n=Object(l.G)(e);return this.state.paginationInformation=n,n}},{key:"setReviewAppDetails",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.state.reviewAppDetails=t,t}},{key:"storeAvailableCount",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.state.availableCounter=t,t}},{key:"storeStoppedCount",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.state.stoppedCounter=t,t}},{key:"toggleFolder",value:function(t){return this.updateEnvironmentProp(t,"isOpen",!t.isOpen)}},{key:"setfolderContent",value:function(t,e){var n=e.map((function(t){var e=t;return t.latest?delete(e=Object.assign({},t,t.latest)).latest:e=t,e.isChildren=!0,e}));return this.updateEnvironmentProp(t,"children",n)}},{key:"updateEnvironmentProp",value:function(t,e,n){var a=this.state.environments.map((function(a){var i=Object.assign({},a);return a.id===t.id&&(i[e]=n),i}));this.state.environments=a}},{key:"getOpenFolders",value:function(){return this.state.environments.filter((function(t){return t.isFolder&&t.isOpen}))}}])&&c(e.prototype,n),a&&c(e,a),t}(),d=n(159),p=n(1),m=n(14),h=n(352),f=(n(30),n(11));function v(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var b=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.environmentsEndpoint=e,this.folderResults=3}var e,n,a;return e=t,(n=[{key:"fetchEnvironments",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.scope,n=t.page,a=t.nested;return f.a.get(this.environmentsEndpoint,{params:{scope:e,page:n,nested:a}})}},{key:"postAction",value:function(t){return f.a.post(t,{})}},{key:"getFolderContent",value:function(t){return f.a.get("".concat(t,".json?per_page=").concat(this.folderResults))}}])&&v(e.prototype,n),a&&v(e,a),t}(),g=n(433),y=(n(24),n(26),n(50),n(58),n(38),n(18),n(64),n(27),n(760)),_=n(448),j=n(828),w=n(189),C=n(180),S=n(662),k=n(45),O=n(325),P=n(62),D={directives:{tooltip:n(99).a},components:{Icon:k.a,GlLoadingIcon:y.a},props:{actions:{type:Array,required:!1,default:function(){return[]}}},data:function(){return{isLoading:!1}},computed:{title:function(){return Object(p.a)("Deploy to...")}},methods:{onClickAction:function(t){if(t.scheduledAt){var e=Object(p.e)(Object(p.d)("DelayedJobs|Are you sure you want to run %{jobName} immediately? Otherwise this job will run automatically after it's timer finishes."),{jobName:t.name});if(!window.confirm(e))return}this.isLoading=!0,h.a.$emit("postAction",{endpoint:t.playPath})},isActionDisabled:function(t){return void 0!==t.playable&&!t.playable},remainingTime:function(t){var e=new Date(t.scheduledAt).getTime()-Date.now();return Object(P.e)(Math.max(0,e))}}},x=n(4),E=Object(x.a)(D,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"btn-group",attrs:{role:"group"}},[n("button",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"dropdown btn btn-default dropdown-new js-environment-actions-dropdown",attrs:{title:t.title,"aria-label":t.title,disabled:t.isLoading,type:"button","data-container":"body","data-toggle":"dropdown"}},[n("span",[n("icon",{attrs:{name:"play"}}),t._v(" "),n("icon",{attrs:{name:"chevron-down"}}),t._v(" "),t.isLoading?n("gl-loading-icon"):t._e()],1)]),t._v(" "),n("ul",{staticClass:"dropdown-menu dropdown-menu-right"},t._l(t.actions,(function(e,a){return n("li",{key:a},[n("button",{staticClass:"js-manual-action-link no-btn btn d-flex align-items-center",class:{disabled:t.isActionDisabled(e)},attrs:{disabled:t.isActionDisabled(e),type:"button"},on:{click:function(n){return t.onClickAction(e)}}},[n("span",{staticClass:"flex-fill"},[t._v(t._s(e.name))]),t._v(" "),e.scheduledAt?n("span",{staticClass:"text-secondary"},[n("icon",{attrs:{name:"clock"}}),t._v("\n          "+t._s(t.remainingTime(e))+"\n        ")],1):t._e()])])})),0)])}),[],!1,null,null,null).exports,I={components:{Icon:k.a},directives:{GlTooltip:j.a},props:{externalUrl:{type:String,required:!0}},computed:{title:function(){return Object(p.d)("Environments|Open live environment")}}},q=Object(x.a)(I,(function(){var t=this.$createElement,e=this._self._c||t;return e("a",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"btn external-url",attrs:{title:this.title,"aria-label":this.title,href:this.externalUrl,target:"_blank",rel:"noopener noreferrer nofollow"}},[e("icon",{attrs:{name:"external-link"}})],1)}),[],!1,null,null,null).exports,T=n(553),A={components:{Icon:k.a,GlButton:T.a},directives:{GlTooltip:j.a},props:{monitoringUrl:{type:String,required:!0}},computed:{title:function(){return Object(p.a)("Monitoring")}}},L=Object(x.a)(A,(function(){var t=this.$createElement,e=this._self._c||t;return e("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"monitoring-url d-none d-sm-none d-md-block",attrs:{href:this.monitoringUrl,title:this.title,"aria-label":this.title,rel:"noopener noreferrer nofollow",variant:"default"}},[e("icon",{attrs:{name:"chart"}})],1)}),[],!1,null,null,null).exports,R={components:{Icon:k.a,GlButton:T.a},directives:{GlTooltip:j.a},props:{autoStopUrl:{type:String,required:!0}},methods:{onPinClick:function(){h.a.$emit("cancelAutoStop",this.autoStopUrl)}},title:Object(p.a)("Prevent environment from auto-stopping")},B=Object(x.a)(R,(function(){var t=this.$createElement,e=this._self._c||t;return e("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],attrs:{title:this.$options.title,"aria-label":this.$options.title},on:{click:this.onPinClick}},[e("icon",{attrs:{name:"thumbtack"}})],1)}),[],!1,null,null,null).exports,N=n(2536);function $(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function F(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var U={components:{Icon:k.a,GlLoadingIcon:y.a,GlButton:T.a},directives:{GlTooltip:j.a,GlModal:N.a},props:{isLastDeployment:{type:Boolean,default:!0},environment:{type:Object,required:!0},retryUrl:{type:String,required:!0}},data:function(){return{isLoading:!1}},computed:{title:function(){return this.isLastDeployment?Object(p.d)("Environments|Re-deploy to environment"):Object(p.d)("Environments|Rollback environment")}},methods:{onClick:function(){var t=this;h.a.$emit("requestRollbackEnvironment",function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$(Object(n),!0).forEach((function(e){F(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this.environment,{retryUrl:this.retryUrl,isLastDeployment:this.isLastDeployment})),h.a.$on("rollbackEnvironment",(function(e){e.id===t.environment.id&&(t.isLoading=!0)}))}}},G=Object(x.a)(U,(function(){var t=this.$createElement,e=this._self._c||t;return e("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"},{name:"gl-modal",rawName:"v-gl-modal.confirm-rollback-modal",modifiers:{"confirm-rollback-modal":!0}}],staticClass:"d-none d-md-block text-secondary",attrs:{disabled:this.isLoading,title:this.title},on:{click:this.onClick}},[this.isLastDeployment?e("icon",{attrs:{name:"repeat"}}):e("icon",{attrs:{name:"redo"}}),this._v(" "),this.isLoading?e("gl-loading-icon"):this._e()],1)}),[],!1,null,null,null).exports,M=n(0),z=n.n(M),H=n(154),V={components:{Icon:k.a,LoadingButton:H.a},directives:{GlTooltip:j.a},props:{environment:{type:Object,required:!0}},data:function(){return{isLoading:!1}},computed:{title:function(){return Object(p.d)("Environments|Stop environment")}},mounted:function(){h.a.$on("stopEnvironment",this.onStopEnvironment)},beforeDestroy:function(){h.a.$off("stopEnvironment",this.onStopEnvironment)},methods:{onClick:function(){z()(this.$el).tooltip("dispose"),h.a.$emit("requestStopEnvironment",this.environment)},onStopEnvironment:function(t){this.environment.id===t.id&&(this.isLoading=!0)}}},J=Object(x.a)(V,(function(){var t=this.$createElement,e=this._self._c||t;return e("loading-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],attrs:{loading:this.isLoading,title:this.title,"aria-label":this.title,"container-class":"btn btn-danger d-none d-sm-none d-md-block","data-toggle":"modal","data-target":"#stop-environment-modal"},on:{click:this.onClick}},[e("icon",{attrs:{name:"stop"}})],1)}),[],!1,null,null,null).exports,K={components:{Icon:k.a},directives:{GlTooltip:j.a},props:{terminalPath:{type:String,required:!1,default:""},disabled:{type:Boolean,required:!1,default:!1}},computed:{title:function(){return Object(p.a)("Terminal")}}},W=Object(x.a)(K,(function(){var t=this.$createElement,e=this._self._c||t;return e("a",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"btn terminal-button d-none d-sm-none d-md-block text-secondary",class:{disabled:this.disabled},attrs:{title:this.title,"aria-label":this.title,href:this.terminalPath}},[e("icon",{attrs:{name:"terminal"}})],1)}),[],!1,null,null,null).exports;function Q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function X(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Y={components:{ActionsComponent:E,CommitComponent:S.a,ExternalUrlComponent:q,Icon:k.a,MonitoringButtonComponent:L,PinComponent:B,RollbackComponent:G,StopComponent:J,TerminalButtonComponent:W,TooltipOnTruncate:O.a,UserAvatarLink:C.a},directives:{GlTooltip:j.a},mixins:[{computed:{deployIconName:function(){return""},shouldRenderDeployBoard:function(){return!1}},methods:{toggleDeployBoard:function(){}}},w.a],props:{canReadEnvironment:{type:Boolean,required:!1,default:!1},model:{type:Object,required:!0},shouldShowAutoStopDate:{type:Boolean,required:!1,default:!1},tableData:{type:Object,required:!0}},computed:{hasLastDeploymentKey:function(){return!(!this.model||!this.model.last_deployment||i.a.isEmpty(this.model.last_deployment))},isFolder:function(){return this.model.isFolder},isProtected:function(){return this.model&&this.model.is_protected},canStopEnvironment:function(){return this.model&&this.model.can_stop},canRetry:function(){return this.model&&this.hasLastDeploymentKey&&this.model.last_deployment&&this.model.last_deployment.deployable&&this.model.last_deployment.deployable.retry_path},canShowAutoStopDate:function(){if(!this.model.auto_stop_at)return!1;var t=new Date(this.model.auto_stop_at);return new Date<t},autoStopDate:function(){return this.canShowAutoStopDate?{formatted:this.timeFormatted(this.model.auto_stop_at),tooltip:this.tooltipTitle(this.model.auto_stop_at)}:{formatted:"",tooltip:""}},canShowDeploymentDate:function(){return this.model&&this.model.last_deployment&&this.model.last_deployment.deployed_at},deployedDate:function(){return this.canShowDeploymentDate?{formatted:this.timeFormatted(this.model.last_deployment.deployed_at),tooltip:this.tooltipTitle(this.model.last_deployment.deployed_at)}:{formatted:"",tooltip:""}},actions:function(){if(!this.model||!this.model.last_deployment)return[];var t=Object(l.g)(this.model.last_deployment,{deep:!0}),e=t.manualActions,n=t.scheduledActions;return(e||[]).concat(n||[]).map((function(t){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Q(Object(n),!0).forEach((function(e){X(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t,{name:t.name})}))},userImageAltDescription:function(){return this.model&&this.model.last_deployment&&this.model.last_deployment.user&&this.model.last_deployment.user.username?Object(p.e)(Object(p.a)("%{username}'s avatar"),{username:this.model.last_deployment.user.username}):""},commitTag:function(){if(this.model&&this.model.last_deployment&&this.model.last_deployment.tag)return this.model.last_deployment.tag},commitRef:function(){if(this.model&&this.model.last_deployment&&this.model.last_deployment.ref)return this.model.last_deployment.ref},commitUrl:function(){if(this.model&&this.model.last_deployment&&this.model.last_deployment.commit&&this.model.last_deployment.commit.commit_path)return this.model.last_deployment.commit.commit_path},commitShortSha:function(){if(this.model&&this.model.last_deployment&&this.model.last_deployment.commit&&this.model.last_deployment.commit.short_id)return this.model.last_deployment.commit.short_id},commitTitle:function(){if(this.model&&this.model.last_deployment&&this.model.last_deployment.commit&&this.model.last_deployment.commit.title)return this.model.last_deployment.commit.title},commitAuthor:function(){if(this.model&&this.model.last_deployment&&this.model.last_deployment.commit&&this.model.last_deployment.commit.author)return this.model.last_deployment.commit.author},retryUrl:function(){if(this.model&&this.model.last_deployment&&this.model.last_deployment.deployable&&this.model.last_deployment.deployable.retry_path)return this.model.last_deployment.deployable.retry_path},isLastDeployment:function(){return this.model&&this.model.last_deployment&&this.model.last_deployment["last?"]},buildName:function(){if(this.model&&this.model.last_deployment&&this.model.last_deployment.deployable){var t=this.model.last_deployment.deployable;return"".concat(t.name," #").concat(t.id)}return""},deploymentInternalId:function(){return this.model&&this.model.last_deployment&&this.model.last_deployment.iid?"#".concat(this.model.last_deployment.iid):""},deploymentHasUser:function(){return this.model&&!i.a.isEmpty(this.model.last_deployment)&&!i.a.isEmpty(this.model.last_deployment.user)},deploymentUser:function(){return!this.model||i.a.isEmpty(this.model.last_deployment)||i.a.isEmpty(this.model.last_deployment.user)?{}:this.model.last_deployment.user},showNoDeployments:function(){return!this.hasLastDeploymentKey&&!this.isFolder},shouldRenderBuildName:function(){return!this.isFolder&&!i.a.isEmpty(this.model.last_deployment)&&!i.a.isEmpty(this.model.last_deployment.deployable)},buildPath:function(){return this.model&&this.model.last_deployment&&this.model.last_deployment.deployable&&this.model.last_deployment.deployable.build_path?this.model.last_deployment.deployable.build_path:""},externalURL:function(){return this.model.external_url||""},shouldRenderDeploymentID:function(){return!this.isFolder&&!i.a.isEmpty(this.model.last_deployment)&&void 0!==this.model.last_deployment.iid},environmentPath:function(){return this.model.environment_path||""},monitoringUrl:function(){return this.model.metrics_path||""},autoStopUrl:function(){return this.model.cancel_auto_stop_path||""},displayEnvironmentActions:function(){return this.actions.length>0||this.externalURL||this.monitoringUrl||this.canStopEnvironment||this.canRetry},folderIconName:function(){return this.model.isOpen?"chevron-down":"chevron-right"}},methods:{onClickFolder:function(){h.a.$emit("toggleFolder",this.model)}}};function Z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function tt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var et={components:{EnvironmentItem:Object(x.a)(Y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"gl-responsive-table-row",class:{"js-child-row environment-child-row":t.model.isChildren,"folder-row":t.isFolder},attrs:{role:"row"}},[n("div",{staticClass:"table-section section-wrap text-truncate",class:t.tableData.name.spacing,attrs:{role:"gridcell"}},[t.isFolder?t._e():n("div",{staticClass:"table-mobile-header",attrs:{role:"rowheader"}},[t._v("\n      "+t._s(t.tableData.name.title)+"\n    ")]),t._v(" "),t.shouldRenderDeployBoard?n("span",{staticClass:"deploy-board-icon",on:{click:t.toggleDeployBoard}},[n("icon",{attrs:{name:t.deployIconName}})],1):t._e(),t._v(" "),t.isFolder?n("span",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"folder-name",attrs:{title:t.model.folderName,role:"button"},on:{click:t.onClickFolder}},[n("icon",{staticClass:"folder-icon",attrs:{name:t.folderIconName}}),t._v(" "),n("icon",{staticClass:"folder-icon",attrs:{name:"folder"}}),t._v(" "),n("span",[t._v(" "+t._s(t.model.folderName)+" ")]),t._v(" "),n("span",{staticClass:"badge badge-pill"},[t._v(" "+t._s(t.model.size)+" ")])],1):n("span",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"environment-name table-mobile-content",attrs:{title:t.model.name}},[n("a",{staticClass:"qa-environment-link",attrs:{href:t.environmentPath}},[1===t.model.size?n("span",[t._v(t._s(t.model.name))]):n("span",[t._v(t._s(t.model.name_without_type))])]),t._v(" "),t.isProtected?n("span",{staticClass:"badge badge-success"},[t._v("\n        "+t._s(t.s__("Environments|protected"))+"\n      ")]):t._e()])]),t._v(" "),n("div",{staticClass:"table-section deployment-column d-none d-sm-none d-md-block",class:t.tableData.deploy.spacing,attrs:{role:"gridcell"}},[t.shouldRenderDeploymentID?n("span",{staticClass:"text-break-word"},[t._v("\n      "+t._s(t.deploymentInternalId)+"\n    ")]):t._e(),t._v(" "),!t.isFolder&&t.deploymentHasUser?n("span",{staticClass:"text-break-word"},[t._v("\n      by\n      "),n("user-avatar-link",{staticClass:"js-deploy-user-container float-none",attrs:{"link-href":t.deploymentUser.web_url,"img-src":t.deploymentUser.avatar_url,"img-alt":t.userImageAltDescription,"tooltip-text":t.deploymentUser.username}})],1):t._e(),t._v(" "),t.showNoDeployments?n("div",{staticClass:"commit-title table-mobile-content"},[t._v("\n      "+t._s(t.s__("Environments|No deployments yet"))+"\n    ")]):t._e()]),t._v(" "),n("div",{staticClass:"table-section d-none d-sm-none d-md-block",class:t.tableData.build.spacing,attrs:{role:"gridcell"}},[t.shouldRenderBuildName?n("a",{staticClass:"build-link cgray",attrs:{href:t.buildPath}},[n("tooltip-on-truncate",{staticClass:"flex-truncate-parent",attrs:{title:t.buildName,"truncate-target":"child"}},[n("span",{staticClass:"flex-truncate-child"},[t._v("\n          "+t._s(t.buildName)+"\n        ")])])],1):t._e()]),t._v(" "),t.isFolder?t._e():n("div",{staticClass:"table-section",class:t.tableData.commit.spacing,attrs:{role:"gridcell"}},[n("div",{staticClass:"table-mobile-header",attrs:{role:"rowheader"}},[t._v(t._s(t.tableData.commit.title))]),t._v(" "),t.hasLastDeploymentKey?n("div",{staticClass:"js-commit-component table-mobile-content"},[n("commit-component",{attrs:{tag:t.commitTag,"commit-ref":t.commitRef,"commit-url":t.commitUrl,"short-sha":t.commitShortSha,title:t.commitTitle,author:t.commitAuthor}})],1):t._e()]),t._v(" "),t.isFolder?t._e():n("div",{staticClass:"table-section",class:t.tableData.date.spacing,attrs:{role:"gridcell"}},[n("div",{staticClass:"table-mobile-header",attrs:{role:"rowheader"}},[t._v(t._s(t.tableData.date.title))]),t._v(" "),t.canShowDeploymentDate?n("span",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"environment-created-date-timeago table-mobile-content flex-truncate-parent",attrs:{title:t.deployedDate.tooltip}},[n("span",{staticClass:"flex-truncate-child"},[t._v("\n        "+t._s(t.deployedDate.formatted)+"\n      ")])]):t._e()]),t._v(" "),!t.isFolder&&t.shouldShowAutoStopDate?n("div",{staticClass:"table-section",class:t.tableData.autoStop.spacing,attrs:{role:"gridcell"}},[n("div",{staticClass:"table-mobile-header",attrs:{role:"rowheader"}},[t._v(t._s(t.tableData.autoStop.title))]),t._v(" "),t.canShowAutoStopDate?n("span",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"table-mobile-content flex-truncate-parent",attrs:{title:t.autoStopDate.tooltip}},[n("span",{staticClass:"flex-truncate-child js-auto-stop"},[t._v(t._s(t.autoStopDate.formatted))])]):t._e()]):t._e(),t._v(" "),!t.isFolder&&t.displayEnvironmentActions?n("div",{staticClass:"table-section table-button-footer",class:t.tableData.actions.spacing,attrs:{role:"gridcell"}},[n("div",{staticClass:"btn-group table-action-buttons",attrs:{role:"group"}},[t.canShowAutoStopDate&&t.shouldShowAutoStopDate?n("pin-component",{attrs:{"auto-stop-url":t.autoStopUrl}}):t._e(),t._v(" "),t.externalURL&&t.canReadEnvironment?n("external-url-component",{attrs:{"external-url":t.externalURL}}):t._e(),t._v(" "),t.monitoringUrl&&t.canReadEnvironment?n("monitoring-button-component",{attrs:{"monitoring-url":t.monitoringUrl}}):t._e(),t._v(" "),t.actions.length>0?n("actions-component",{attrs:{actions:t.actions}}):t._e(),t._v(" "),t.model&&t.model.terminal_path?n("terminal-button-component",{attrs:{"terminal-path":t.model.terminal_path}}):t._e(),t._v(" "),t.canRetry?n("rollback-component",{attrs:{environment:t.model,"is-last-deployment":t.isLastDeployment,"retry-url":t.retryUrl}}):t._e(),t._v(" "),t.canStopEnvironment?n("stop-component",{attrs:{environment:t.model}}):t._e()],1)]):t._e()])}),[],!1,null,null,null).exports,GlLoadingIcon:y.a,DeployBoard:function(){return n.e(4).then(n.bind(null,3230))},CanaryDeploymentCallout:function(){return n.e(4).then(n.bind(null,3230))}},mixins:[{methods:{shouldShowCanaryCallout:function(){return!1},shouldRenderDeployBoard:function(){return!1}}},Object(_.a)()],props:{environments:{type:Array,required:!0,default:function(){return[]}},deployBoardsHelpPath:{type:String,required:!1,default:""},canReadEnvironment:{type:Boolean,required:!1,default:!1}},computed:{sortedEnvironments:function(){var t=this;return this.sortEnvironments(this.environments).map((function(e){return t.shouldRenderFolderContent(e)?function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Z(Object(n),!0).forEach((function(e){tt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},e,{children:t.sortEnvironments(e.children)}):e}))},shouldShowAutoStopDate:function(){return this.glFeatures.autoStopEnvironments},tableData:function(){return{name:{title:Object(p.d)("Environments|Environment"),spacing:"section-15"},deploy:{title:Object(p.d)("Environments|Deployment"),spacing:"section-10"},build:{title:Object(p.d)("Environments|Job"),spacing:"section-15"},commit:{title:Object(p.d)("Environments|Commit"),spacing:"section-20"},date:{title:Object(p.d)("Environments|Updated"),spacing:"section-10"},autoStop:{title:Object(p.d)("Environments|Auto stop in"),spacing:"section-5"},actions:{spacing:this.shouldShowAutoStopDate?"section-25":"section-30"}}}},methods:{folderUrl:function(t){return"".concat(window.location.pathname,"/folders/").concat(t.folderName)},shouldRenderFolderContent:function(t){return t.isFolder&&t.isOpen&&t.children&&t.children.length>0},sortEnvironments:function(t){return i.a.chain(t).sortBy((function(t){return t.isFolder?t.folderName:t.name})).reverse().sortBy((function(t){return t.last_deployment?t.last_deployment.created_at:"0000"})).reverse().sortBy((function(t){return t.isFolder?-1:1})).value()}}},nt=Object(x.a)(et,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ci-table",attrs:{role:"grid"}},[n("div",{staticClass:"gl-responsive-table-row table-row-header",attrs:{role:"row"}},[n("div",{staticClass:"table-section",class:t.tableData.name.spacing,attrs:{role:"columnheader"}},[t._v("\n      "+t._s(t.tableData.name.title)+"\n    ")]),t._v(" "),n("div",{staticClass:"table-section",class:t.tableData.deploy.spacing,attrs:{role:"columnheader"}},[t._v("\n      "+t._s(t.tableData.deploy.title)+"\n    ")]),t._v(" "),n("div",{staticClass:"table-section",class:t.tableData.build.spacing,attrs:{role:"columnheader"}},[t._v("\n      "+t._s(t.tableData.build.title)+"\n    ")]),t._v(" "),n("div",{staticClass:"table-section",class:t.tableData.commit.spacing,attrs:{role:"columnheader"}},[t._v("\n      "+t._s(t.tableData.commit.title)+"\n    ")]),t._v(" "),n("div",{staticClass:"table-section",class:t.tableData.date.spacing,attrs:{role:"columnheader"}},[t._v("\n      "+t._s(t.tableData.date.title)+"\n    ")]),t._v(" "),t.shouldShowAutoStopDate?n("div",{staticClass:"table-section",class:t.tableData.autoStop.spacing,attrs:{role:"columnheader"}},[t._v("\n      "+t._s(t.tableData.autoStop.title)+"\n    ")]):t._e()]),t._v(" "),t._l(t.sortedEnvironments,(function(e,a){return[n("environment-item",{key:"environment-item-"+a,tag:"div",attrs:{model:e,"can-read-environment":t.canReadEnvironment,"should-show-auto-stop-date":t.shouldShowAutoStopDate,"table-data":t.tableData}}),t._v(" "),t.shouldRenderDeployBoard(e)?n("div",{key:"deploy-board-row-"+a,staticClass:"js-deploy-board-row"},[n("div",{staticClass:"deploy-board-container"},[n("deploy-board",{attrs:{"deploy-board-data":e.deployBoardData,"deploy-boards-help-path":t.deployBoardsHelpPath,"is-loading":e.isLoadingDeployBoard,"is-empty":e.isEmptyDeployBoard,"has-legacy-app-label":e.hasLegacyAppLabel,"logs-path":e.logs_path}})],1)]):t._e(),t._v(" "),t.shouldRenderFolderContent(e)?[e.isLoadingFolderContent?n("div",{key:"loading-item-"+a},[n("gl-loading-icon",{staticClass:"prepend-top-16",attrs:{size:"md"}})],1):[t._l(e.children,(function(e,i){return n("environment-item",{key:"env-item-"+a+"-"+i,tag:"div",attrs:{model:e,"can-read-environment":t.canReadEnvironment,"table-data":t.tableData}})})),t._v(" "),n("div",{key:"sub-div-"+a},[n("div",{staticClass:"text-center prepend-top-10"},[n("a",{staticClass:"btn btn-default",attrs:{href:t.folderUrl(e)}},[t._v("\n              "+t._s(t.s__("Environments|Show all"))+"\n            ")])])])]]:t._e(),t._v(" "),t.shouldShowCanaryCallout(e)?[n("canary-deployment-callout",{key:"canary-promo-"+a,attrs:{"canary-deployment-feature-id":t.canaryDeploymentFeatureId,"user-callouts-path":t.userCalloutsPath,"lock-promotion-svg-path":t.lockPromotionSvgPath,"help-canary-deployments-path":t.helpCanaryDeploymentsPath,"data-js-canary-promo-key":a}})]:t._e()]}))],2)}),[],!1,null,null,null).exports,at=n(821),it={props:{canaryDeploymentFeatureId:{type:String,required:!1,default:null},showCanaryDeploymentCallout:{type:Boolean,required:!1,default:!1},userCalloutsPath:{type:String,required:!1,default:null},lockPromotionSvgPath:{type:String,required:!1,default:null},helpCanaryDeploymentsPath:{type:String,required:!1,default:null},deployBoardsHelpPath:{type:String,required:!1,default:""}}},ot={components:{EnvironmentTable:nt,TablePagination:g.a,GlLoadingIcon:y.a},mixins:[it],props:{isLoading:{type:Boolean,required:!0},environments:{type:Array,required:!0},pagination:{type:Object,required:!0},canReadEnvironment:{type:Boolean,required:!0}},methods:{onChangePage:function(t){this.$emit("onChangePage",t)}}},rt=Object(x.a)(ot,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"environments-container"},[t.isLoading?n("gl-loading-icon",{staticClass:"prepend-top-default",attrs:{size:"md",label:"Loading environments"}}):t._e(),t._v(" "),t._t("emptyState"),t._v(" "),!t.isLoading&&t.environments.length>0?n("div",{staticClass:"table-holder"},[n("environment-table",{attrs:{environments:t.environments,"can-read-environment":t.canReadEnvironment,"canary-deployment-feature-id":t.canaryDeploymentFeatureId,"show-canary-deployment-callout":t.showCanaryDeploymentCallout,"user-callouts-path":t.userCalloutsPath,"lock-promotion-svg-path":t.lockPromotionSvgPath,"help-canary-deployments-path":t.helpCanaryDeploymentsPath,"deploy-boards-help-path":t.deployBoardsHelpPath}}),t._v(" "),t.pagination&&t.pagination.totalPages>1?n("table-pagination",{attrs:{change:t.onChangePage,"page-info":t.pagination}}):t._e()],1):t._e()],2)}),[],!1,null,null,null).exports;e.a={components:{environmentTable:nt,container:rt,tabs:at.a,tablePagination:g.a},data:function(){var t=new u;return{store:t,state:t.state,isLoading:!1,isMakingRequest:!1,scope:Object(l.m)("scope")||"available",page:Object(l.m)("page")||"1",requestData:{},environmentInStopModal:{},environmentInRollbackModal:{}}},methods:{saveData:function(t){this.isLoading=!1;var e=this.filterNilValues(t.config.params),n=this.filterNilValues(this.requestData);i.a.isEqual(e,n)&&(this.store.storeAvailableCount(t.data.available_count),this.store.storeStoppedCount(t.data.stopped_count),this.store.storeEnvironments(t.data.environments),this.store.setReviewAppDetails(t.data.review_app),this.store.setPagination(t.headers))},filterNilValues:function(t){return i.a.omit(t,(function(t){return i.a.isUndefined(t)||i.a.isNull(t)}))},updateContent:function(t){var e=this;return this.updateInternalState(t),this.service.fetchEnvironments(this.requestData).then((function(t){e.successCallback(t),e.poll.enable({data:e.requestData,response:t})})).catch((function(){e.errorCallback(),e.poll.restart()}))},errorCallback:function(){this.isLoading=!1,Object(m.a)(Object(p.d)("Environments|An error occurred while fetching the environments."))},postAction:function(t){var e=this,n=t.endpoint,a=t.errorMessage,o=void 0===a?Object(p.d)("Environments|An error occurred while making the request."):a;this.isMakingRequest||(this.isLoading=!0,this.service.postAction(n).then((function(){return e.fetchEnvironments()})).catch((function(t){e.isLoading=!1,Object(m.a)(i.a.isFunction(o)?o(t.response.data):o)})))},fetchEnvironments:function(){return this.isLoading=!0,this.service.fetchEnvironments(this.requestData).then(this.successCallback).catch(this.errorCallback)},updateStopModal:function(t){this.environmentInStopModal=t},updateRollbackModal:function(t){this.environmentInRollbackModal=t},stopEnvironment:function(t){var e=t.stop_path,n=Object(p.d)("Environments|An error occurred while stopping the environment, please try again");this.postAction({endpoint:e,errorMessage:n})},rollbackEnvironment:function(t){var e=t.retryUrl,n=t.isLastDeployment?Object(p.d)("Environments|An error occurred while re-deploying the environment, please try again"):Object(p.d)("Environments|An error occurred while rolling back the environment, please try again");this.postAction({endpoint:e,errorMessage:n})},cancelAutoStop:function(t){this.postAction({endpoint:t,errorMessage:function(t){return t.message||Object(p.d)("Environments|An error occurred while canceling the auto stop, please try again")}})}},computed:{tabs:function(){return[{name:Object(p.d)("Available"),scope:"available",count:this.state.availableCounter,isActive:"available"===this.scope},{name:Object(p.d)("Stopped"),scope:"stopped",count:this.state.stoppedCounter,isActive:"stopped"===this.scope}]}},created:function(){var t=this;this.service=new b(this.endpoint),this.requestData={page:this.page,scope:this.scope,nested:!0},this.poll=new d.a({resource:this.service,method:"fetchEnvironments",data:this.requestData,successCallback:this.successCallback,errorCallback:this.errorCallback,notificationCallback:function(e){t.isMakingRequest=e}}),r.a.hidden()?this.fetchEnvironments():(this.isLoading=!0,this.poll.makeRequest()),r.a.change((function(){r.a.hidden()?t.poll.stop():t.poll.restart()})),h.a.$on("postAction",this.postAction),h.a.$on("requestStopEnvironment",this.updateStopModal),h.a.$on("stopEnvironment",this.stopEnvironment),h.a.$on("requestRollbackEnvironment",this.updateRollbackModal),h.a.$on("rollbackEnvironment",this.rollbackEnvironment),h.a.$on("cancelAutoStop",this.cancelAutoStop)},beforeDestroy:function(){h.a.$off("postAction",this.postAction),h.a.$off("requestStopEnvironment",this.updateStopModal),h.a.$off("stopEnvironment",this.stopEnvironment),h.a.$off("requestRollbackEnvironment",this.updateRollbackModal),h.a.$off("rollbackEnvironment",this.rollbackEnvironment),h.a.$off("cancelAutoStop",this.cancelAutoStop)}}},125:function(t,e,n){t.exports=n(284)},1250:function(t,e,n){"use strict";var a=n(828),i=n(304),o=n(1),r=n(352),s={id:"stop-environment-modal",name:"StopEnvironmentModal",components:{GlModal:i.a},directives:{GlTooltip:a.a},props:{environment:{type:Object,required:!0}},computed:{noStopActionMessage:function(){return Object(o.e)(Object(o.d)("Environments|Note that this action will stop the environment,\n        but it will %{emphasisStart}not%{emphasisEnd} have an effect on any existing deployment\n        due to no “stop environment action” being defined\n        in the %{ciConfigLinkStart}.gitlab-ci.yml%{ciConfigLinkEnd} file."),{emphasisStart:"<strong>",emphasisEnd:"</strong>",ciConfigLinkStart:'<a href="https://docs.gitlab.com/ee/ci/yaml/" target="_blank" rel="noopener noreferrer">',ciConfigLinkEnd:"</a>"},!1)}},methods:{onSubmit:function(){r.a.$emit("stopEnvironment",this.environment)}}},l=n(4),c=Object(l.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("gl-modal",{attrs:{id:t.$options.id,"footer-primary-button-text":t.s__("Environments|Stop environment"),"footer-primary-button-variant":"danger"},on:{submit:t.onSubmit}},[n("template",{slot:"header"},[n("h4",{staticClass:"modal-title d-flex mw-100"},[t._v("\n      Stopping\n      "),n("span",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"text-truncate ml-1 mr-1 flex-fill",attrs:{title:t.environment.name}},[t._v(t._s(t.environment.name))]),t._v("\n      ?\n    ")])]),t._v(" "),n("p",[t._v(t._s(t.s__("Environments|Are you sure you want to stop this environment?")))]),t._v(" "),t.environment.has_stop_action?t._e():n("div",{staticClass:"warning_message"},[n("p",{domProps:{innerHTML:t._s(t.noStopActionMessage)}}),t._v(" "),n("a",{attrs:{href:"https://docs.gitlab.com/ee/ci/environments.html#stopping-an-environment",target:"_blank",rel:"noopener noreferrer"}},[t._v(t._s(t.s__("Environments|Learn more about stopping environments")))])])],2)}),[],!1,null,null,null);e.a=c.exports},154:function(t,e,n){"use strict";var a={components:{GlLoadingIcon:n(760).a},props:{loading:{type:Boolean,required:!1,default:!1},disabled:{type:Boolean,required:!1,default:!1},label:{type:String,required:!1},containerClass:{type:[String,Array,Object],required:!1,default:"btn btn-align-content"}},methods:{onClick:function(t){this.$emit("click",t)}}},i=n(4),o=Object(i.a)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{class:t.containerClass,attrs:{disabled:t.loading||t.disabled,type:"button"},on:{click:t.onClick}},[n("transition",{attrs:{name:"fade-in"}},[t.loading?n("gl-loading-icon",{staticClass:"js-loading-button-icon",class:{"append-right-5":t.label},attrs:{inline:!0}}):t._e()],1),t._v(" "),n("transition",{attrs:{name:"fade-in"}},[t._t("default",[t.label?n("span",{staticClass:"js-loading-button-label"},[t._v(" "+t._s(t.label)+" ")]):t._e()])],2)],1)}),[],!1,null,null,null);e.a=o.exports},159:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n(85);var a=n(146),i=n(16);function o(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var r=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=e,this.options.data=e.data||{},this.options.notificationCallback=e.notificationCallback||function(){},this.intervalHeader="POLL-INTERVAL",this.timeoutID=null,this.canPoll=!0}var e,n,r;return e=t,(n=[{key:"checkConditions",value:function(t){var e=this,n=Object(i.D)(t.headers),o=parseInt(n[this.intervalHeader],10);o>0&&-1!==a.b.indexOf(t.status)&&this.canPoll&&(this.timeoutID&&clearTimeout(this.timeoutID),this.timeoutID=setTimeout((function(){e.makeRequest()}),o)),this.options.successCallback(t)}},{key:"makeRequest",value:function(){var t=this,e=this.options,n=e.resource,i=e.method,o=e.data,r=e.errorCallback,s=e.notificationCallback;return s(!0),n[i](o).then((function(e){t.checkConditions(e),s(!1)})).catch((function(t){s(!1),t.status!==a.a.ABORTED&&r(t)}))}},{key:"stop",value:function(){this.canPoll=!1,clearTimeout(this.timeoutID)}},{key:"enable",value:function(t){t&&t.data&&(this.options.data=t.data),this.canPoll=!0,t&&t.response&&this.checkConditions(t.response)}},{key:"restart",value:function(t){this.enable(t),this.makeRequest()}}])&&o(e.prototype,n),r&&o(e,r),t}()},180:function(t,e,n){"use strict";n(72);var a=n(301),i=n(828),o=n(236),r={name:"UserAvatarLink",components:{GlLink:a.a,userAvatarImage:o.a},directives:{GlTooltip:i.a},props:{linkHref:{type:String,required:!1,default:""},imgSrc:{type:String,required:!1,default:""},imgAlt:{type:String,required:!1,default:""},imgCssClasses:{type:String,required:!1,default:""},imgSize:{type:Number,required:!1,default:20},tooltipText:{type:String,required:!1,default:""},tooltipPlacement:{type:String,required:!1,default:"top"},username:{type:String,required:!1,default:""}},computed:{shouldShowUsername:function(){return this.username.length>0},avatarTooltipText:function(){return this.shouldShowUsername?"":this.tooltipText}}},s=n(4),l=Object(s.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("gl-link",{staticClass:"user-avatar-link",attrs:{href:t.linkHref}},[n("user-avatar-image",{attrs:{"img-src":t.imgSrc,"img-alt":t.imgAlt,"css-classes":t.imgCssClasses,size:t.imgSize,"tooltip-text":t.avatarTooltipText,"tooltip-placement":t.tooltipPlacement}},[t._t("default")],2),t.shouldShowUsername?n("span",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"js-user-avatar-link-username",attrs:{title:t.tooltipText,"tooltip-placement":t.tooltipPlacement}},[t._v(t._s(t.username))]):t._e(),t._t("avatar-badge")],2)}),[],!1,null,null,null);e.a=l.exports},182:function(t,e,n){"use strict";n.d(e,"f",(function(){return i})),n.d(e,"e",(function(){return o})),n.d(e,"a",(function(){return r})),n.d(e,"d",(function(){return s})),n.d(e,"c",(function(){return l})),n.d(e,"b",(function(){return c}));var a=n(1),i=Object(a.d)("Pagination|Prev"),o=Object(a.d)("Pagination|Next"),r=(Object(a.d)("Pagination|« First"),Object(a.d)("Pagination|Last »"),Object(a.d)("Pagination|Go to first page")),s=Object(a.d)("Pagination|Go to previous page"),l=Object(a.d)("Pagination|Go to next page"),c=Object(a.d)("Pagination|Go to last page")},284:function(t,e,n){!function(e){"use strict";var a=-1,i=function(t){return t.every=function(e,n,i){t._time(),i||(i=n,n=null);var o=a+=1;return t._timers[o]={visible:e,hidden:n,callback:i},t._run(o,!1),t.isSupported()&&t._listen(),o},t.stop=function(e){return!!t._timers[e]&&(t._stop(e),delete t._timers[e],!0)},t._timers={},t._time=function(){t._timed||(t._timed=!0,t._wasHidden=t.hidden(),t.change((function(){t._stopRun(),t._wasHidden=t.hidden()})))},t._run=function(n,a){var i,o=t._timers[n];if(t.hidden()){if(null===o.hidden)return;i=o.hidden}else i=o.visible;var r=function(){o.last=new Date,o.callback.call(e)};if(a){var s=new Date-o.last;i>s?o.delay=setTimeout((function(){o.id=setInterval(r,i),r()}),i-s):(o.id=setInterval(r,i),r())}else o.id=setInterval(r,i)},t._stop=function(e){var n=t._timers[e];clearInterval(n.id),clearTimeout(n.delay),delete n.id,delete n.delay},t._stopRun=function(e){var n=t.hidden(),a=t._wasHidden;if(n&&!a||!n&&a)for(var i in t._timers)t._stop(i),t._run(i,!n)},t};t.exports?t.exports=i(n(285)):i(e.Visibility)}(window)},285:function(t,e,n){!function(e){"use strict";var n=-1,a={onVisible:function(t){var e=a.isSupported();if(!e||!a.hidden())return t(),e;var n=a.change((function(e,i){a.hidden()||(a.unbind(n),t())}));return n},change:function(t){if(!a.isSupported())return!1;var e=n+=1;return a._callbacks[e]=t,a._listen(),e},unbind:function(t){delete a._callbacks[t]},afterPrerendering:function(t){var e=a.isSupported();if(!e||"prerender"!=a.state())return t(),e;var n=a.change((function(e,i){"prerender"!=i&&(a.unbind(n),t())}));return n},hidden:function(){return!(!a._doc.hidden&&!a._doc.webkitHidden)},state:function(){return a._doc.visibilityState||a._doc.webkitVisibilityState||"visible"},isSupported:function(){return!(!a._doc.visibilityState&&!a._doc.webkitVisibilityState)},_doc:document||{},_callbacks:{},_change:function(t){var e=a.state();for(var n in a._callbacks)a._callbacks[n].call(a._doc,t,e)},_listen:function(){if(!a._init){var t="visibilitychange";a._doc.webkitVisibilityState&&(t="webkit"+t);var e=function(){a._change.apply(a,arguments)};a._doc.addEventListener?a._doc.addEventListener(t,e):a._doc.attachEvent(t,e),a._init=!0}}};t.exports?t.exports=a:e.Visibility=a}(this)},304:function(t,e,n){"use strict";n(104);var a=n(0),i=n.n(a),o=["danger","primary","success","warning"],r=["sm","md","lg","xl"],s={name:"DeprecatedModal2",props:{id:{type:String,required:!1,default:null},modalSize:{type:String,required:!1,default:"md",validator:function(t){return r.includes(t)}},headerTitleText:{type:String,required:!1,default:""},footerPrimaryButtonVariant:{type:String,required:!1,default:"primary",validator:function(t){return o.includes(t)}},footerPrimaryButtonText:{type:String,required:!1,default:""}},computed:{modalSizeClass:function(){return"md"===this.modalSize?"":"modal-".concat(this.modalSize)}},mounted:function(){i()(this.$el).on("shown.bs.modal",this.opened).on("hidden.bs.modal",this.closed)},beforeDestroy:function(){i()(this.$el).off("shown.bs.modal",this.opened).off("hidden.bs.modal",this.closed)},methods:{emitCancel:function(t){this.$emit("cancel",t)},emitSubmit:function(t){this.$emit("submit",t)},opened:function(){this.$emit("open")},closed:function(){this.$emit("closed")}}},l=n(4),c=Object(l.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal fade",attrs:{id:t.id,tabindex:"-1",role:"dialog"}},[n("div",{staticClass:"modal-dialog",class:t.modalSizeClass,attrs:{role:"document"}},[n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-header"},[t._t("header",[n("h4",{staticClass:"modal-title"},[t._t("title",[t._v(" "+t._s(t.headerTitleText)+" ")])],2),t._v(" "),n("button",{staticClass:"close js-modal-close-action",attrs:{"aria-label":t.s__("Modal|Close"),type:"button","data-dismiss":"modal"},on:{click:function(e){return t.emitCancel(e)}}},[n("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])],2),t._v(" "),n("div",{staticClass:"modal-body"},[t._t("default")],2),t._v(" "),n("div",{staticClass:"modal-footer"},[t._t("footer",[n("button",{staticClass:"btn js-modal-cancel-action qa-modal-cancel-button",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(e){return t.emitCancel(e)}}},[t._v("\n            "+t._s(t.s__("Modal|Cancel"))+"\n          ")]),t._v(" "),n("button",{staticClass:"btn js-modal-primary-action qa-modal-primary-button",class:"btn-"+t.footerPrimaryButtonVariant,attrs:{type:"button","data-dismiss":"modal"},on:{click:function(e){return t.emitSubmit(e)}}},[t._v("\n            "+t._s(t.footerPrimaryButtonText)+"\n          ")])])],2)])])])}),[],!1,null,null,null);e.a=c.exports},323:function(t,e,n){var a=n(426)();t.exports=a},325:function(t,e,n){"use strict";var a=n(256),i=n.n(a),o={directives:{tooltip:n(99).a},props:{title:{type:String,required:!1,default:""},placement:{type:String,required:!1,default:"top"},truncateTarget:{type:[String,Function],required:!1,default:""}},data:function(){return{showTooltip:!1}},watch:{title:function(){this.$nextTick(this.updateTooltip)}},mounted:function(){this.updateTooltip()},methods:{selectTarget:function(){return i()(this.truncateTarget)?this.truncateTarget(this.$el):"child"===this.truncateTarget?this.$el.childNodes[0]:this.$el},updateTooltip:function(){var t=this.selectTarget();this.showTooltip=Boolean(t&&t.scrollWidth>t.offsetWidth)}}},r=n(4),s=Object(r.a)(o,(function(){var t=this.$createElement,e=this._self._c||t;return this.showTooltip?e("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"js-show-tooltip",attrs:{title:this.title,"data-placement":this.placement}},[this._t("default")],2):e("span",[this._t("default")],2)}),[],!1,null,null,null);e.a=s.exports},352:function(t,e,n){"use strict";var a=n(17);e.a=new a.default},426:function(t,e,n){var a=n(427),i=n(382),o=n(653);t.exports=function(t){return function(e,n,r){return r&&"number"!=typeof r&&i(e,n,r)&&(n=r=void 0),e=o(e),void 0===n?(n=e,e=0):n=o(n),r=void 0===r?e<n?1:-1:o(r),a(e,n,r,t)}}},427:function(t,e){var n=Math.ceil,a=Math.max;t.exports=function(t,e,i,o){for(var r=-1,s=a(n((e-t)/(i||1)),0),l=Array(s);s--;)l[o?s:++r]=t,t+=i;return l}},433:function(t,e,n){"use strict";var a=n(696),i=n(182),o={components:{GlPagination:a.a},props:{change:{type:Function,required:!0},pageInfo:{type:Object,required:!0}},computed:{showPagination:function(){return this.pageInfo.nextPage||this.pageInfo.previousPage}},prevText:i.f,nextText:i.e,labelFirstPage:i.a,labelPrevPage:i.d,labelNextPage:i.c,labelLastPage:i.b},r=n(4),s=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.showPagination?n("gl-pagination",t._b({staticClass:"justify-content-center prepend-top-default",attrs:{value:t.pageInfo.page,"per-page":t.pageInfo.perPage,"total-items":t.pageInfo.total,"prev-page":t.pageInfo.previousPage,"prev-text":t.$options.prevText,"next-page":t.pageInfo.nextPage,"next-text":t.$options.nextText,"label-first-page":t.$options.labelFirstPage,"label-prev-page":t.$options.labelPrevPage,"label-next-page":t.$options.labelNextPage,"label-last-page":t.$options.labelLastPage},on:{input:t.change}},"gl-pagination",t.$attrs,!1)):t._e()}),[],!1,null,null,null);e.a=s.exports},448:function(t,e,n){"use strict";e.a=function(){return{inject:{glFeatures:{from:"glFeatures",default:function(){return{}}}}}}},549:function(t,e,n){"use strict";n(30),n(65),n(46),n(72),n(38),n(18),n(68);var a=n(16);e.a={methods:{onChangeTab:function(t){this.updateContent({scope:t,page:"1"})},onChangePage:function(t){var e={page:Number(t).toString()};this.scope&&(e.scope=this.scope),this.updateContent(e)},updateInternalState:function(t){var e=this;this.poll.stop();var n=Object.keys(t).map((function(n){var a=t[n];return e[n]=a,"".concat(n,"=").concat(encodeURIComponent(a))})).join("&");this.requestData=t,Object(a.r)(Object(a.f)("?".concat(n))),this.isLoading=!0}}}},662:function(t,e,n){"use strict";var a=n(20),i=n.n(a),o=n(828),r=n(301),s=n(1),l=n(325),c=n(180),u=n(45),d={directives:{GlTooltip:o.a},components:{UserAvatarLink:c.a,Icon:u.a,GlLink:r.a,TooltipOnTruncate:l.a},props:{tag:{type:Boolean,required:!1,default:!1},commitRef:{type:Object,required:!1,default:function(){return{}}},mergeRequestRef:{type:Object,required:!1,default:void 0,validator:function(t){return i.a.isUndefined(t)||i.a.isFinite(t.iid)&&i.a.isString(t.path)&&!i.a.isEmpty(t.path)}},commitUrl:{type:String,required:!1,default:""},shortSha:{type:String,required:!1,default:""},title:{type:String,required:!1,default:""},author:{type:Object,required:!1,default:function(){return{}}},showRefInfo:{type:Boolean,required:!1,default:!0}},computed:{shouldShowRefInfo:function(){return this.showRefInfo&&(this.commitRef||this.mergeRequestRef)},hasAuthor:function(){return this.author&&this.author.avatar_url&&this.author.path&&this.author.username},userImageAltDescription:function(){return this.author&&this.author.username?Object(s.e)(Object(s.a)("%{username}'s avatar"),{username:this.author.username}):null}}},p=n(4),m=Object(p.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"branch-commit cgray"},[t.shouldShowRefInfo?[n("div",{staticClass:"icon-container"},[t.tag?n("icon",{attrs:{name:"tag"}}):t.mergeRequestRef?n("icon",{attrs:{name:"git-merge"}}):n("icon",{attrs:{name:"branch"}})],1),t._v(" "),t.mergeRequestRef?n("gl-link",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"ref-name",attrs:{href:t.mergeRequestRef.path,title:t.mergeRequestRef.title}},[t._v(t._s(t.mergeRequestRef.iid))]):n("gl-link",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"ref-name",attrs:{href:t.commitRef.ref_url,title:t.commitRef.name}},[t._v(t._s(t.commitRef.name))])]:t._e(),t._v(" "),n("icon",{staticClass:"commit-icon js-commit-icon",attrs:{name:"commit"}}),t._v(" "),n("gl-link",{staticClass:"commit-sha mr-0",attrs:{href:t.commitUrl}},[t._v(t._s(t.shortSha))]),t._v(" "),n("div",{staticClass:"commit-title"},[t.title?n("span",{staticClass:"flex-truncate-parent"},[t.hasAuthor?n("user-avatar-link",{staticClass:"avatar-image-container text-decoration-none",attrs:{"link-href":t.author.path,"img-src":t.author.avatar_url,"img-alt":t.userImageAltDescription,"tooltip-text":t.author.username}}):t._e(),t._v(" "),n("tooltip-on-truncate",{staticClass:"flex-truncate-child",attrs:{title:t.title}},[n("gl-link",{staticClass:"commit-row-message cgray",attrs:{href:t.commitUrl}},[t._v(t._s(t.title))])],1)],1):n("span",[t._v(t._s(t.__("Can't find HEAD commit for this branch")))])])],2)}),[],!1,null,null,null);e.a=m.exports},696:function(t,e,n){"use strict";var a=n(323),i=n.n(a),o=n(256),r=n.n(o),s=n(237),l=n.n(s),c=n(301),u=n(103),d=n(222),p=n(337),m=n(25),h=n(60),f=n.n(h);function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),a.forEach((function(e){v(t,e,n[e])}))}return t}var g=Object(p.c)(0);const y={name:"Pagination",components:{GlLink:c.a,GlIcon:u.a},model:{prop:"value",event:"input"},props:{value:{type:Number,required:!1,default:1,validator:g},perPage:{type:Number,required:!1,default:20,validator:g},totalItems:{type:Number,required:!1,default:0},limits:{type:Object,required:!1,default:function(){return{xs:0,sm:3,md:9,default:9}},validator:function(t){return 0===Object.keys(d.a).filter((function(e){return!t[e]})).length||t.default}},linkGen:{type:Function,required:!1,default:null},prevPage:{type:Number,required:!1,default:null},prevText:{type:String,required:!1,default:"Prev"},nextPage:{type:Number,required:!1,default:null},nextText:{type:String,required:!1,default:"Next"},ellipsisText:{type:String,required:!1,default:"…"},labelFirstPage:{type:String,default:"Go to first page"},labelPrevPage:{type:String,default:"Go to previous page"},labelNextPage:{type:String,default:"Go to next page"},labelLastPage:{type:String,default:"Go to last page"},labelPage:{type:Function,default:function(t){return"Go to page ".concat(t)}},size:{type:String,required:!1,default:null,validator:function(t){return Object.keys(m.w).includes(t)}},align:{type:String,required:!1,default:m.d.left,validator:function(t){return Object.keys(m.d).includes(t)}},disabled:{type:Boolean,required:!1,default:!1}},data:function(){return{breakpoint:d.b.getBreakpointSize(),minTotalPagesToCollapse:4}},computed:{isVisible:function(){return this.totalPages>1||this.isCompactPagination},isLinkBased:function(){return r()(this.linkGen)},paginationLimit:function(){return void 0!==this.limits[this.breakpoint]?this.limits[this.breakpoint]:this.limits.default},maxAdjacentPages:function(){return Math.max(Math.ceil((this.paginationLimit-1)/2),0)},totalPages:function(){return Math.ceil(this.totalItems/this.perPage)},isFillAlign:function(){return this.align===m.d.fill},wrapperClasses:function(){var t=[];return this.align===m.d.center&&t.push("justify-content-center"),this.align===m.d.right&&t.push("justify-content-end"),this.isFillAlign&&t.push("text-center"),this.size&&t.push("pagination-".concat(this.size)),Object.keys(this.$slots).length>0&&t.push("custom-rendering"),t},shouldCollapseLeftSide:function(){var t=this.value-this.maxAdjacentPages;return t>=this.maxAdjacentPages&&t>3&&this.totalPages>this.minTotalPagesToCollapse},shouldCollapseRightSide:function(){return this.totalPages-2-this.value>this.maxAdjacentPages&&this.totalPages>this.minTotalPagesToCollapse},visibleItems:function(){var t,e,n=this,a=[];if(!this.isCompactPagination){var o=this.shouldCollapseLeftSide?this.value-this.maxAdjacentPages:1;o=Math.min(o,this.totalPages-1);var r=this.shouldCollapseRightSide?this.value+this.maxAdjacentPages:this.totalPages;r=Math.max(r,2),a=(t=o,e=r,i()(t,e+1,1)).map((function(t){return n.getPageItem(t)})),this.shouldCollapseLeftSide&&a.splice(0,0,this.getPageItem(1,this.labelFirstPage),this.getEllipsisItem("left")),this.shouldCollapseRightSide&&a.push(this.getEllipsisItem("right"),this.getPageItem(this.totalPages,this.labelLastPage))}return a},isCompactPagination:function(){return Boolean(!this.totalItems&&(this.prevPage||this.nextPage))},prevPageIsDisabled:function(){return this.pageIsDisabled(this.value-1)},nextPageIsDisabled:function(){return this.pageIsDisabled(this.value+1)}},created:function(){window.addEventListener("resize",l()(this.setBreakpoint,m.v))},beforeDestroy:function(){window.removeEventListener("resize",l()(this.setBreakpoint,m.v))},methods:{setBreakpoint:function(){this.breakpoint=d.b.getBreakpointSize()},pageIsDisabled:function(t){return this.disabled||t<1||this.isCompactPagination&&t>this.value&&!this.nextPage||!this.isCompactPagination&&t>this.totalPages},getPageItem:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a={"aria-label":n||this.labelPage(t),href:"#",class:[]},i=t===this.value,o=this.pageIsDisabled(t),r=b({},a),s={};return i&&r.class.push("active","btn-primary"),this.isLinkBased?r.href=this.linkGen(t):s.click=function(n){n.preventDefault(),e.$emit("input",t)},{content:t,component:o?"span":c.a,disabled:o,key:"page_".concat(t),slot:"page-number",slotData:{page:t,active:i,disabled:o},attrs:r,listeners:s}},getEllipsisItem:function(t){return{content:this.ellipsisText,key:"ellipsis_".concat(t),slot:"ellipsis-".concat(t),component:"span",disabled:!0}}}};const _=f()({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isVisible?n("ul",{staticClass:"pagination gl-pagination text-nowrap",class:t.wrapperClasses,attrs:{role:"navigation","aria-label":"Pagination"}},[n("li",{staticClass:"page-item",class:{disabled:t.prevPageIsDisabled,"flex-fill":t.isFillAlign}},[n(t.prevPageIsDisabled?"span":"a",{tag:"component",staticClass:"page-link prev-page-item",attrs:{"aria-disabled":t.prevPageIsDisabled,"aria-label":t.labelPrevPage||t.labelPage(t.value-1),href:t.isLinkBased?t.linkGen(t.value-1):"#"},on:{click:function(e){return e.preventDefault(),t.$emit("input",t.value-1)}}},[t._t("previous",[n("gl-icon",{attrs:{name:"chevron-left"}}),t._v(" "),n("span",[t._v(t._s(t.prevText))])],null,{page:t.value-1,disabled:t.prevPageIsDisabled})],2)],1),t._v(" "),t._l(t.visibleItems,(function(e){return n("li",{key:e.key,staticClass:"page-item",class:{disabled:e.disabled,"flex-fill":t.isFillAlign}},[n(e.component,t._g(t._b({tag:"component",staticClass:"page-link",attrs:{size:t.size,"aria-disabled":e.disabled}},"component",e.attrs,!1),e.listeners),[t._t(e.slot,[t._v(t._s(e.content))],null,e.slotData)],2)],1)})),t._v(" "),n("li",{staticClass:"page-item",class:{disabled:t.nextPageIsDisabled,"flex-fill":t.isFillAlign}},[n(t.nextPageIsDisabled?"span":"a",{tag:"component",staticClass:"page-link next-page-item",attrs:{"aria-disabled":t.nextPageIsDisabled,"aria-label":t.labelNextPage||t.labelPage(t.value+1),href:t.isLinkBased?t.linkGen(t.value+1):"#"},on:{click:function(e){return e.preventDefault(),t.$emit("input",t.value+1)}}},[t._t("next",[n("span",[t._v(t._s(t.nextText))]),t._v(" "),n("gl-icon",{attrs:{name:"chevron-right"}})],null,{page:t.value+1,disabled:t.nextPageIsDisabled})],2)],1)],2):t._e()},staticRenderFns:[]},void 0,y,void 0,!1,void 0,!1,void 0,void 0,void 0);e.a=_},70:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));n(24),n(49),n(56),n(40),n(90),n(18),n(36),n(41);var a=n(8),i=n.n(a),o=n(9);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=s(this,l(e).call(this)),i.a.bind("g p",(function(){return Object(o.a)(".shortcuts-project")})),i.a.bind("g v",(function(){return Object(o.a)(".shortcuts-project-activity")})),i.a.bind("g r",(function(){return Object(o.a)(".shortcuts-project-releases")})),i.a.bind("g f",(function(){return Object(o.a)(".shortcuts-tree")})),i.a.bind("g c",(function(){return Object(o.a)(".shortcuts-commits")})),i.a.bind("g j",(function(){return Object(o.a)(".shortcuts-builds")})),i.a.bind("g n",(function(){return Object(o.a)(".shortcuts-network")})),i.a.bind("g d",(function(){return Object(o.a)(".shortcuts-repository-charts")})),i.a.bind("g i",(function(){return Object(o.a)(".shortcuts-issues")})),i.a.bind("g b",(function(){return Object(o.a)(".shortcuts-issue-boards")})),i.a.bind("g m",(function(){return Object(o.a)(".shortcuts-merge_requests")})),i.a.bind("g w",(function(){return Object(o.a)(".shortcuts-wiki")})),i.a.bind("g s",(function(){return Object(o.a)(".shortcuts-snippets")})),i.a.bind("g k",(function(){return Object(o.a)(".shortcuts-kubernetes")})),i.a.bind("g e",(function(){return Object(o.a)(".shortcuts-environments")})),i.a.bind("g l",(function(){return Object(o.a)(".shortcuts-metrics")})),i.a.bind("i",(function(){return Object(o.a)(".shortcuts-new-issue")})),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,t),e}(n(107).a)},73:function(t,e,n){"use strict";n(30),n(35),n(18),n(64);var a=n(0),i=n.n(a),o=n(32),r=(n(65),n(69),n(55),n(67),n(71));function s(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.projectSelectInput=i()(e),this.newItemBtn=i()(".new-project-item-link"),this.resourceType=this.newItemBtn.data("type"),this.resourceLabel=this.newItemBtn.data("label"),this.formattedText=this.deriveTextVariants(),this.groupId=this.projectSelectInput.data("groupId"),this.bindEvents(),this.initLocalStorage()}var e,a,o;return e=t,(a=[{key:"bindEvents",value:function(){var t=this;this.projectSelectInput.siblings(".new-project-item-select-button").on("click",(function(e){return t.openDropdown(e)})),this.newItemBtn.on("click",(function(e){t.getProjectFromLocalStorage()||(e.preventDefault(),t.openDropdown(e))})),this.projectSelectInput.on("change",(function(){return t.selectProject()}))}},{key:"initLocalStorage",value:function(){r.a.isLocalStorageAccessSafe()&&(this.localStorageKey=["group",this.groupId,this.formattedText.localStorageItemType,"recent-project"].join("-"),this.setBtnTextFromLocalStorage())}},{key:"openDropdown",value:function(t){n.e(239).then(n.t.bind(null,428,7)).then((function(){i()(t.currentTarget).siblings(".project-item-select").select2("open")})).catch((function(){}))}},{key:"selectProject",value:function(){var t=JSON.parse(this.projectSelectInput.val()),e={url:"".concat(t.url,"/").concat(this.projectSelectInput.data("relativePath")),name:t.name};this.setNewItemBtnAttributes(e),this.setProjectInLocalStorage(e)}},{key:"setBtnTextFromLocalStorage",value:function(){var t=this.getProjectFromLocalStorage();this.setNewItemBtnAttributes(t)}},{key:"setNewItemBtnAttributes",value:function(t){t?(this.newItemBtn.attr("href",t.url),this.newItemBtn.text("".concat(this.formattedText.defaultTextPrefix," in ").concat(t.name))):this.newItemBtn.text("Select project to create ".concat(this.formattedText.presetTextSuffix))}},{key:"getProjectFromLocalStorage",value:function(){var t=localStorage.getItem(this.localStorageKey);return JSON.parse(t)}},{key:"setProjectInLocalStorage",value:function(t){var e=JSON.stringify(t);localStorage.setItem(this.localStorageKey,e)}},{key:"deriveTextVariants",value:function(){var t=this.resourceLabel;return{localStorageItemType:"new-".concat(this.resourceType.split("_").join("-").slice(0,-1)),defaultTextPrefix:t,presetTextSuffix:this.resourceType.split("_").join(" ").slice(0,-1)}}}])&&s(e.prototype,a),o&&s(e,o),t}(),c=n(1),u=function(){i()(".ajax-project-select").each((function(t,e){var n,a=this,r=i()(e).data("simpleFilter")||!1,s=i()(e).data("select2");return this.groupId=i()(e).data("groupId"),this.userId=i()(e).data("userId"),this.includeGroups=i()(e).data("includeGroups"),this.allProjects=i()(e).data("allProjects")||!1,this.orderBy=i()(e).data("orderBy")||"id",this.withIssuesEnabled=i()(e).data("withIssuesEnabled"),this.withMergeRequestsEnabled=i()(e).data("withMergeRequestsEnabled"),this.withShared=void 0===i()(e).data("withShared")||i()(e).data("withShared"),this.includeProjectsInSubgroups=i()(e).data("includeProjectsInSubgroups")||!1,this.allowClear=i()(e).data("allowClear")||!1,n=Object(c.d)("ProjectSelect|Search for project"),this.includeGroups&&(n+=Object(c.d)("ProjectSelect| or group")),i()(e).select2({placeholder:n,minimumInputLength:0,query:function(t){var e,n=function(e){var n={results:e};return t.callback(n)};return e=a.includeGroups?function(e){return o.a.groups(t.term,{},(function(t){var a=t.concat(e);return n(a)}))}:n,a.groupId?o.a.groupProjects(a.groupId,t.term,{with_issues_enabled:a.withIssuesEnabled,with_merge_requests_enabled:a.withMergeRequestsEnabled,with_shared:a.withShared,include_subgroups:a.includeProjectsInSubgroups},e):a.userId?o.a.userProjects(a.userId,t.term,{with_issues_enabled:a.withIssuesEnabled,with_merge_requests_enabled:a.withMergeRequestsEnabled,with_shared:a.withShared,include_subgroups:a.includeProjectsInSubgroups},e):o.a.projects(t.term,{order_by:a.orderBy,with_issues_enabled:a.withIssuesEnabled,with_merge_requests_enabled:a.withMergeRequestsEnabled,membership:!a.allProjects},e)},id:function(t){return r?t.id:JSON.stringify({name:t.name,url:t.web_url})},text:function(t){return t.name_with_namespace||t.name},initSelection:function(t,e){return o.a.project(t.val()).then((function(t){var n=t.data;return e(n)}))},allowClear:this.allowClear,dropdownCssClass:"ajax-project-dropdown"}),s||r?e:new l(e)}))};e.a=function(){return n.e(239).then(n.t.bind(null,428,7)).then(u).catch((function(){}))}},821:function(t,e,n){"use strict";var a=n(0),i=n.n(a),o={name:"NavigationTabs",props:{tabs:{type:Array,required:!0},scope:{type:String,required:!1,default:""}},mounted:function(){i()(document).trigger("init.scrolling-tabs")},methods:{shouldRenderBadge:function(t){return!(null==t)},onTabClick:function(t){this.$emit("onChangeTab",t.scope)}}},r=n(4),s=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"nav-links scrolling-tabs separator"},t._l(t.tabs,(function(e,a){return n("li",{key:a,class:{active:e.isActive}},[n("a",{class:"js-"+t.scope+"-tab-"+e.scope,attrs:{role:"button"},on:{click:function(n){return t.onTabClick(e)}}},[t._v("\n      "+t._s(e.name)+"\n\n      "),t.shouldRenderBadge(e.count)?n("span",{staticClass:"badge badge-pill"},[t._v(" "+t._s(e.count)+" ")]):t._e()])])})),0)}),[],!1,null,null,null);e.a=s.exports},88:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));n(42),n(89);var a=n(0),i=n.n(a),o=n(51),r=n.n(o),s=n(1),l=n(33);n(28),n(78),n(40),n(46),n(129),n(35),n(77),n(18),n(36),n(41);var c=function(t){return t.reduce((function(t,e){var n=e.name,a=e.value;return Object.assign(t,function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},n,a))}),{})},u=n(11),d=n(14),p=n(73);function m(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var h=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var e=i()("ul.clone-options-dropdown"),n=i()("#project_clone"),a=i()(".js-git-clone-holder .js-clone-dropdown-label"),o=document.querySelector(".js-mobile-git-clone .js-clone-dropdown-label"),s=a.text().trim();s.length>0&&i()("a:contains('".concat(s,"')"),e).addClass("is-active"),i()("a",e).on("click",(function(t){t.preventDefault();var a=i()(t.currentTarget),r=a.attr("href"),s=a.data("cloneType");i()(".is-active",e).removeClass("is-active"),i()('a[data-clone-type="'.concat(s,'"]')).each((function(){var t=i()(this),e=t.find(".dropdown-menu-inner-title").text(),n=t.closest(".project-clone-holder").find(".js-clone-dropdown-label");t.toggleClass("is-active"),n.text(e)})),o?o.dataset.clipboardText=r:n.val(r),i()(".js-git-empty .js-clone").text(r)})),t.initRefSwitcher(),i()(".project-refs-select").on("change",(function(){return i()(this).parents("form").submit()})),i()(".hide-no-ssh-message").on("click",(function(t){return r.a.set("hide_no_ssh_message","false"),i()(this).parents(".no-ssh-key-message").remove(),t.preventDefault()})),i()(".hide-no-password-message").on("click",(function(t){return r.a.set("hide_no_password_message","false"),i()(this).parents(".no-password-message").remove(),t.preventDefault()})),i()(".hide-auto-devops-implicitly-enabled-banner").on("click",(function(t){var e=i()(this).data("project-id"),n="hide_auto_devops_implicitly_enabled_banner_".concat(e);return r.a.set(n,"false"),i()(this).parents(".auto-devops-implicitly-enabled-banner").remove(),t.preventDefault()})),t.projectSelectDropdown()}var e,n,a;return e=t,a=[{key:"projectSelectDropdown",value:function(){Object(p.a)(),i()(".project-item-select").on("click",(function(e){return t.changeProject(i()(e.currentTarget).val())}))}},{key:"changeProject",value:function(t){return window.location=t}},{key:"initRefSwitcher",value:function(){var t=document.createElement("li"),e=document.createElement("a");return e.href="#",i()(".js-project-refs-dropdown").each((function(){var n,a,o,r=i()(this),p=r.data("selected"),m=r.data("fieldName"),h=Boolean(r.data("visit")),f=r.closest("form"),v=f.attr("action"),b=Object(l.h)((n=f[0],a=new FormData(n),o=Array.from(a.keys()).map((function(t){var e=a.getAll(t);return{name:t,value:1===(e=e.filter((function(t){return t}))).length?e[0]:e}})),c(o)),v);return r.glDropdown({data:function(t,e){u.a.get(r.data("refsUrl"),{params:{ref:r.data("ref"),search:t}}).then((function(t){var n=t.data;return e(n)})).catch((function(){return Object(d.a)(Object(s.a)("An error occurred while getting projects"))}))},selectable:!0,filterable:!0,filterRemote:!0,filterByText:!0,inputFieldName:r.data("inputFieldName"),fieldName:m,renderRow:function(n){var a,i,o,r=t.cloneNode(!1),s=e.cloneNode(!1);return n===p&&(s.className="is-active"),s.textContent=n,s.dataset.ref=n,n.length>0&&h&&(s.href=Object(l.h)((o=n,(i=m)in(a={})?Object.defineProperty(a,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):a[i]=o,a),b)),r.appendChild(s),r},id:function(t,e){return e.attr("data-ref")},toggleLabel:function(t,e){return e.text().trim()},clicked:function(t){var e=t.e;h||e.preventDefault()}})}))}}],(n=null)&&m(e.prototype,n),a&&m(e,a),t}()},99:function(t,e,n){"use strict";var a=n(0),i=n.n(a);n(358);e.a={bind:function(t){var e=localStorage.getItem("gl-tooltip-delay"),n=e?JSON.parse(e):0;i()(t).tooltip({trigger:"hover",delay:n})},componentUpdated:function(t){i()(t).tooltip("_fixTitle");var e=i()(t).data("bs.tooltip"),n=e.getTipElement();e.setElementContent(i()(n.querySelectorAll(".tooltip-inner")),e.getTitle())},unbind:function(t){i()(t).tooltip("dispose")}}}}]);
//# sourceMappingURL=commons~pages.projects.environments.folder~pages.projects.environments.index.f84659bb.chunk.js.map