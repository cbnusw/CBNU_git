(this.webpackJsonp=this.webpackJsonp||[]).push([[95,10,16],{111:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=document,a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,(n=[{key:"container",set:function(e){i=e},get:function(){return i}}])&&r(t.prototype,n),a&&r(t,a),e}();t.a=new a},121:function(e,t,n){"use strict";n(28),n(26),n(85),n(27);function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store={columns:3,issues:[],issuesCount:!1,selectedIssues:[],showAddIssuesModal:!1,activeTab:"all",selectedList:null,searchTerm:"",loading:!1,loadingNewPage:!1,filterLoading:!1,page:1,perPage:50,filter:{path:""}}}var t,n,i;return t=e,(n=[{key:"selectedCount",value:function(){return this.getSelectedIssues().length}},{key:"toggleIssue",value:function(e){var t=e,n=t.selected;t.selected=!n,n?this.removeSelectedIssue(t):this.addSelectedIssue(t)}},{key:"toggleAll",value:function(){var e=this,t=this.selectedCount()!==this.store.issues.length;this.store.issues.forEach((function(n){var r=n;r.selected!==t&&(r.selected=t,t?e.addSelectedIssue(n):e.removeSelectedIssue(n))}))}},{key:"getSelectedIssues",value:function(){return this.store.selectedIssues.filter((function(e){return e.selected}))}},{key:"addSelectedIssue",value:function(e){-1===this.selectedIssueIndex(e)&&this.store.selectedIssues.push(e)}},{key:"removeSelectedIssue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];("all"===this.store.activeTab||t)&&(this.store.selectedIssues=this.store.selectedIssues.filter((function(t){return t.id!==e.id})))}},{key:"purgeUnselectedIssues",value:function(){var e=this;this.store.selectedIssues.forEach((function(t){t.selected||e.removeSelectedIssue(t,!0)}))}},{key:"selectedIssueIndex",value:function(e){return this.store.selectedIssues.indexOf(e)}},{key:"findSelectedIssue",value:function(e){return this.store.selectedIssues.filter((function(t){return t.id===e.id}))[0]}}])&&r(t.prototype,n),i&&r(t,i),e}();t.a=new i},176:function(e,t,n){"use strict";n(30),n(42),n(26),n(85),n(46),n(27);var r=n(0),i=n.n(r),a=n(20),o=n.n(a),s=n(11),l=n(14),c=n(1);t.a={init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.form,n=e.issues,r=e.prefixId;this.prefixId=r||"issue_",this.form=t||this.getElement(".bulk-update"),this.$labelDropdown=this.form.find(".js-label-select"),this.issues=n||this.getElement(".issues-list .issue"),this.willUpdateLabels=!1,this.bindEvents()},bindEvents:function(){return this.form.off("submit").on("submit",this.onFormSubmit.bind(this))},onFormSubmit:function(e){return e.preventDefault(),this.submit()},submit:function(){var e=this;s.a[this.form.attr("method")](this.form.attr("action"),this.getFormDataAsObject()).then((function(){return window.location.reload()})).catch((function(){return e.onFormSubmitFailure()}))},onFormSubmitFailure:function(){return this.form.find('[type="submit"]').enable(),new l.a(Object(c.a)("Issue update failed"))},getSelectedIssues:function(){return this.issues.has(".selected-issuable:checked")},getLabelsFromSelection:function(){var e=[];return this.getSelectedIssues().map((function(){var t=i()(this).data("labels");if(t)return t.map((function(t){if(-1===e.indexOf(t))return e.push(t)}))})),e},getUnmarkedIndeterminedLabels:function(){var e=[],t=this.$labelDropdown.data("indeterminate");return this.getLabelsFromSelection().forEach((function(n){-1===t.indexOf(n)&&e.push(n)})),e},getFormDataAsObject:function(){var e={update:{state_event:this.form.find('input[name="update[state_event]"]').val(),assignee_ids:[this.form.find('input[name="update[assignee_ids][]"]').val()],milestone_id:this.form.find('input[name="update[milestone_id]"]').val(),issuable_ids:this.form.find('input[name="update[issuable_ids]"]').val(),subscription_event:this.form.find('input[name="update[subscription_event]"]').val(),add_label_ids:[],remove_label_ids:[]}};return this.willUpdateLabels&&(e.update.add_label_ids=this.$labelDropdown.data("marked"),e.update.remove_label_ids=this.$labelDropdown.data("unmarked")),e},setOriginalDropdownData:function(){var e=i()(".bulk-update .js-label-select");e.data("common",this.getOriginalCommonIds()),e.data("marked",this.getOriginalMarkedIds()),e.data("indeterminate",this.getOriginalIndeterminateIds())},getOriginalCommonIds:function(){var e=this,t=[];return this.getElement(".selected-issuable:checked").each((function(n,r){t.push(e.getElement("#".concat(e.prefixId).concat(r.dataset.id)).data("labels"))})),o.a.intersection.apply(this,t)},getOriginalMarkedIds:function(){var e=this,t=[];return this.getElement(".selected-issuable:checked").each((function(n,r){t.push(e.getElement("#".concat(e.prefixId).concat(r.dataset.id)).data("labels"))})),o.a.intersection.apply(this,t)},getOriginalIndeterminateIds:function(){var e=this,t=[],n=[],r=[];return this.getElement(".selected-issuable:checked").each((function(i,a){(r=e.getElement("#".concat(e.prefixId).concat(a.dataset.id)).data("labels")).forEach((function(e){-1===t.indexOf(e)&&t.push(e)})),n.push(r)})),n.unshift(t),o.a.difference(t,o.a.intersection.apply(this,n))},getElement:function(e){return this.scopeEl=this.scopeEl||i()(".content"),this.scopeEl.find(e)}}},184:function(e,t,n){var r=n(108),i=n(271),a=n(215),o=n(296),s=n(344),l=n(419);r({target:"Reflect",stat:!0},{get:function e(t,n){var r,c,u=arguments.length<3?t:arguments[2];return a(t)===u?t[n]:(r=s.f(t,n))?o(r,"value")?r.value:void 0===r.get?void 0:r.get.call(u):i(c=l(t))?e(c,n,u):void 0}})},2201:function(e,t,n){n(105),n(286),e.exports=n(2202)},2202:function(e,t,n){"use strict";n.r(t);var r=n(799),i=n(73),a=n(520),o=n(731),s=n(307),l=n(521);document.addEventListener("DOMContentLoaded",(function(){Object(r.a)(s.a),o.a.init("merge_request_"),Object(a.a)({page:l.a.MERGE_REQUESTS,isGroupDecendent:!0,filteredSearchTokenKeys:s.a}),Object(i.a)()}))},259:function(e,t,n){"use strict";n(24),n(49),n(56),n(26),n(78),n(40),n(69),n(145),n(18),n(68),n(36),n(27),n(41),n(90),n(30),n(65),n(46),n(55),n(91),n(67);var r=n(20),i=/\{\{(.+?)\}\}/g,a={toCamelCase:function(e){return this.camelize(e.split("-").slice(1).join(" "))},template:function(e,t){var n=Object(r.template)(e,{escape:i});return n(t)},camelize:function(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,(function(e,t){return 0===t?e.toLowerCase():e.toUpperCase()})).replace(/\s+/g,"")},closest:function(e,t){for(;e&&e.tagName!==t&&"HTML"!==e.tagName;)e=e.parentNode;return e},isDropDownParts:function(e){return!(!e||!e.hasAttribute||"HTML"===e.tagName)&&(e.hasAttribute("data-dropdown-trigger")||e.hasAttribute("data-dropdown"))}};function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentIndex=0,this.hidden=!0,this.list="string"==typeof t?document.querySelector(t):t,this.items=[],this.eventWrapper={},this.hideOnClick=!1!==n.hideOnClick,n.addActiveClassToDropdownButton&&(this.dropdownToggle=this.list.parentNode.querySelector(".js-dropdown-toggle")),this.getItems(),this.initTemplateString(),this.addEvents(),this.initialState=t.innerHTML}var t,n,r;return t=e,r=[{key:"setImagesSrc",value:function(e){o(e.querySelectorAll("img[data-src]")).forEach((function(e){var t=e;t.src=t.getAttribute("data-src"),t.removeAttribute("data-src")}))}}],(n=[{key:"getItems",value:function(){return this.items=[].slice.call(this.list.querySelectorAll("li")),this.items}},{key:"initTemplateString",value:function(){var e=this.items||this.getItems(),t="";return e.length>0&&(t=e[e.length-1].outerHTML),this.templateString=t,this.templateString}},{key:"clickEvent",value:function(e){if("UL"!==e.target.tagName&&!e.target.closest(".".concat("droplab-item-ignore"))){var t=e.target.closest("li");if(t){this.addSelectedClass(t),e.preventDefault(),this.hideOnClick&&this.hide();var n=new CustomEvent("click.dl",{detail:{list:this,selected:t,data:e.target.dataset}});this.list.dispatchEvent(n)}}}},{key:"addSelectedClass",value:function(e){this.removeSelectedClasses(),e.classList.add("droplab-item-selected")}},{key:"removeSelectedClasses",value:function(){(this.items||this.getItems()).forEach((function(e){return e.classList.remove("droplab-item-selected")}))}},{key:"addEvents",value:function(){this.eventWrapper.clickEvent=this.clickEvent.bind(this),this.eventWrapper.closeDropdown=this.closeDropdown.bind(this),this.list.addEventListener("click",this.eventWrapper.clickEvent),this.list.addEventListener("keyup",this.eventWrapper.closeDropdown)}},{key:"closeDropdown",value:function(e){return 27!==e.keyCode||(e.preventDefault(),this.toggle())}},{key:"setData",value:function(e){this.data=e,this.render(e)}},{key:"addData",value:function(e){this.data=(this.data||[]).concat(e),this.render(this.data)}},{key:"render",value:function(e){var t=e?e.map(this.renderChildren.bind(this)):[];if(!this.list.querySelector(".filter-dropdown-loading")){(this.list.querySelector("ul[data-dynamic]")||this.list).innerHTML=t.join("");var n=new CustomEvent("render.dl",{detail:{list:this}});this.list.dispatchEvent(n)}}},{key:"renderChildren",value:function(t){var n=a.template(this.templateString,t),r=document.createElement("div");return r.innerHTML=n,e.setImagesSrc(r),r.firstChild.style.display=t.droplab_hidden?"none":"block",r.firstChild.outerHTML}},{key:"show",value:function(){this.hidden&&(this.list.style.display="block",this.currentIndex=0,this.hidden=!1,this.dropdownToggle&&this.dropdownToggle.classList.add("active"))}},{key:"hide",value:function(){this.hidden||(this.list.style.display="none",this.currentIndex=0,this.hidden=!0,this.dropdownToggle&&this.dropdownToggle.classList.remove("active"))}},{key:"toggle",value:function(){return this.hidden?this.show():this.hide()}},{key:"destroy",value:function(){this.hide(),this.list.removeEventListener("click",this.eventWrapper.clickEvent),this.list.removeEventListener("keyup",this.eventWrapper.closeDropdown)}}])&&s(t.prototype,n),r&&s(t,r),e}();var c=function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.trigger=t,this.list=new l(n,i),this.type="Hook",this.event="click",this.plugins=r||[],this.config=i||{},this.id=t.id};function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=function(e){function t(e,n,r,i){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=h(this,p(t).call(this,e,n,r,i))).type="button",a.event="click",a.eventWrapper={},a.addEvents(),a.addPlugins(),a}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,e),n=t,(r=[{key:"addPlugins",value:function(){var e=this;this.plugins.forEach((function(t){return t.init(e)}))}},{key:"clicked",value:function(e){var t=new CustomEvent("click.dl",{detail:{hook:this},bubbles:!0,cancelable:!0});e.target.dispatchEvent(t),this.list.toggle()}},{key:"addEvents",value:function(){this.eventWrapper.clicked=this.clicked.bind(this),this.trigger.addEventListener("click",this.eventWrapper.clicked)}},{key:"removeEvents",value:function(){this.trigger.removeEventListener("click",this.eventWrapper.clicked)}},{key:"restoreInitialState",value:function(){this.list.list.innerHTML=this.list.initialState}},{key:"removePlugins",value:function(){this.plugins.forEach((function(e){return e.destroy()}))}},{key:"destroy",value:function(){this.restoreInitialState(),this.removeEvents(),this.removePlugins()}}])&&d(n.prototype,r),i&&d(n,i),t}(c);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var w=function(e){function t(e,n,r,i){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=g(this,m(t).call(this,e,n,r,i))).type="input",a.event="input",a.eventWrapper={},a.addEvents(),a.addPlugins(),a}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(t,e),n=t,(r=[{key:"addPlugins",value:function(){var e=this;this.plugins.forEach((function(t){return t.init(e)}))}},{key:"addEvents",value:function(){this.eventWrapper.mousedown=this.mousedown.bind(this),this.eventWrapper.input=this.input.bind(this),this.eventWrapper.keyup=this.keyup.bind(this),this.eventWrapper.keydown=this.keydown.bind(this),this.trigger.addEventListener("mousedown",this.eventWrapper.mousedown),this.trigger.addEventListener("input",this.eventWrapper.input),this.trigger.addEventListener("keyup",this.eventWrapper.keyup),this.trigger.addEventListener("keydown",this.eventWrapper.keydown)}},{key:"removeEvents",value:function(){this.hasRemovedEvents=!0,this.trigger.removeEventListener("mousedown",this.eventWrapper.mousedown),this.trigger.removeEventListener("input",this.eventWrapper.input),this.trigger.removeEventListener("keyup",this.eventWrapper.keyup),this.trigger.removeEventListener("keydown",this.eventWrapper.keydown)}},{key:"input",value:function(e){if(!this.hasRemovedEvents){this.list.show();var t=new CustomEvent("input.dl",{detail:{hook:this,text:e.target.value},bubbles:!0,cancelable:!0});e.target.dispatchEvent(t)}}},{key:"mousedown",value:function(e){if(!this.hasRemovedEvents){var t=new CustomEvent("mousedown.dl",{detail:{hook:this,text:e.target.value},bubbles:!0,cancelable:!0});e.target.dispatchEvent(t)}}},{key:"keyup",value:function(e){this.hasRemovedEvents||this.keyEvent(e,"keyup.dl")}},{key:"keydown",value:function(e){this.hasRemovedEvents||this.keyEvent(e,"keydown.dl")}},{key:"keyEvent",value:function(e,t){this.list.show();var n=new CustomEvent(t,{detail:{hook:this,text:e.target.value,which:e.which,key:e.key},bubbles:!0,cancelable:!0});e.target.dispatchEvent(n)}},{key:"restoreInitialState",value:function(){this.list.list.innerHTML=this.list.initialState}},{key:"removePlugins",value:function(){this.plugins.forEach((function(e){return e.destroy()}))}},{key:"destroy",value:function(){this.restoreInitialState(),this.removeEvents(),this.removePlugins(),this.list.destroy()}}])&&b(n.prototype,r),i&&b(n,i),t}(c),S=function(){var e,t=!1,n=!1,r=function(e){for(var t=Array.prototype.slice.call(e.list.querySelectorAll("li:not(.divider):not(.hidden)"),0),n=[],r=0;r<t.length;r++){var i=t[r];i.classList.remove("droplab-item-active"),"none"!==i.style.display&&n.push(i)}return n},i=function(e){var t=r(e)[e.currentIndex-1],n=new CustomEvent("click.dl",{detail:{list:e,selected:t,data:t.dataset}});e.list.dispatchEvent(n),e.hide()};document.addEventListener("mousedown.dl",(function(e){var i=e.detail.hook.list;r(i),i.show(),i.currentIndex=0,t=!1,n=!1})),document.addEventListener("keydown.dl",(function(a){a.target;var o=a.detail.hook.list,s=o.currentIndex;if(t=!1,n=!1,a.detail.which){if(13===(e=a.detail.which))return void i(a.detail.hook.list);38===e&&(t=!0),40===e&&(n=!0)}else if(a.detail.key){if("Enter"===(e=a.detail.key))return void i(a.detail.hook.list);"ArrowUp"===e&&(t=!0),"ArrowDown"===e&&(n=!0)}t&&s--,n&&s++,s<0&&(s=0),o.currentIndex=s,function(e){var t=r(e);if(e.currentIndex>0&&(t[e.currentIndex-1]||(e.currentIndex=e.currentIndex-1),t[e.currentIndex-1])){var n=t[e.currentIndex-1],i=n.closest(".filter-dropdown");if(n.classList.add("droplab-item-active"),i){var a=i.offsetHeight,o=n.offsetTop-30;o>a&&(i.scrollTop=o-a)}}}(a.detail.hook.list)}))};function T(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var j=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ready=!1,this.hooks=[],this.queuedData=[],this.config={},this.eventWrapper={}}var t,n,r;return t=e,(n=[{key:"loadStatic",value:function(){var e=[].slice.apply(document.querySelectorAll("[".concat("data-dropdown-trigger","]")));this.addHooks(e)}},{key:"addData",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.applyArgs(t,"processAddData")}},{key:"setData",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.applyArgs(t,"processSetData")}},{key:"destroy",value:function(){this.hooks.forEach((function(e){return e.destroy()})),this.hooks=[],this.removeEvents()}},{key:"applyArgs",value:function(e,t){return this.ready?this[t].apply(this,T(e)):(this.queuedData=this.queuedData||[],this.queuedData.push(e),this.ready)}},{key:"processAddData",value:function(e,t){this.processData(e,t,"addData")}},{key:"processSetData",value:function(e,t){this.processData(e,t,"setData")}},{key:"processData",value:function(e,t,n){this.hooks.forEach((function(r){Array.isArray(e)&&r.list[n](e),r.trigger.id===e&&r.list[n](t)}))}},{key:"addEvents",value:function(){this.eventWrapper.documentClicked=this.documentClicked.bind(this),document.addEventListener("mousedown",this.eventWrapper.documentClicked)}},{key:"documentClicked",value:function(e){var t=e.target;"UL"!==t.tagName&&(t=a.closest(t,"UL")),a.isDropDownParts(t,this.hooks)||a.isDropDownParts(e.target,this.hooks)||this.hooks.forEach((function(e){return e.list.hide()}))}},{key:"removeEvents",value:function(){document.removeEventListener("mousedown",this.eventWrapper.documentClicked)}},{key:"changeHookList",value:function(e,t,n,r){var i=this,a="string"==typeof e?document.getElementById(e):e;this.hooks.forEach((function(e,o){var s=e;s.list.list.dataset.dropdownActive=!1,s.trigger===a&&(s.destroy(),i.hooks.splice(o,1),i.addHook(a,t,n,r))}))}},{key:"addHook",value:function(e,t,n,r){var i,o="string"==typeof e?document.querySelector(e):e;(i="string"==typeof t?document.querySelector(t):t instanceof Element?t:document.querySelector(e.dataset[a.toCamelCase("data-dropdown-trigger")])).dataset.dropdownActive=!0;var s="INPUT"===o.tagName?w:v;return this.hooks.push(new s(o,i,n,r)),this}},{key:"addHooks",value:function(e,t,n){var r=this;return e.forEach((function(e){return r.addHook(e,null,t,n)})),this}},{key:"setConfig",value:function(e){this.config=e}},{key:"fireReady",value:function(){var e=new CustomEvent("ready.dl",{detail:{dropdown:this}});document.dispatchEvent(e),this.ready=!0}},{key:"init",value:function(e,t,n,r){var i=this;return e?this.addHook(e,t,n,r):this.loadStatic(),this.addEvents(),S(),this.fireReady(),this.queuedData.forEach((function(e){return i.addData(e)})),this.queuedData=[],this}}])&&E(t.prototype,n),r&&E(t,r),e}();t.a=j},273:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n(30),n(65),n(46),n(38);var r=n(0),i=n.n(r),a=n(32),o=n(110);function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$el=t,this.namespacePath=n,this.projectPath=r,this.$dropdownBack=i()(".dropdown-menu-back",this.$el.closest(".dropdown")),this.$cancelButton=i()(".js-cancel-label-btn",this.$el),this.$newLabelField=i()("#new_label_name",this.$el),this.$newColorField=i()("#new_label_color",this.$el),this.$colorPreview=i()(".js-dropdown-label-color-preview",this.$el),this.$addList=i()(".js-add-list",this.$el),this.$newLabelError=i()(".js-label-error",this.$el),this.$newLabelCreateButton=i()(".js-new-label-btn",this.$el),this.$colorSuggestions=i()(".suggest-colors-dropdown a",this.$el),this.$newLabelError.hide(),this.$newLabelCreateButton.disable(),this.addListDefault=this.$addList.is(":checked"),this.cleanBinding(),this.addBinding()}var t,n,r;return t=e,(n=[{key:"cleanBinding",value:function(){this.$colorSuggestions.off("click"),this.$newLabelField.off("keyup change"),this.$newColorField.off("keyup change"),this.$dropdownBack.off("click"),this.$cancelButton.off("click"),this.$newLabelCreateButton.off("click")}},{key:"addBinding",value:function(){var e=this;this.$colorSuggestions.on("click",(function(t){var n=i()(this);e.addColorValue(t,n)})),this.$newLabelField.on("keyup change",this.enableLabelCreateButton.bind(this)),this.$newColorField.on("keyup change",this.enableLabelCreateButton.bind(this)),this.$dropdownBack.on("click",this.resetForm.bind(this)),this.$cancelButton.on("click",(function(t){t.preventDefault(),t.stopPropagation(),e.resetForm(),e.$dropdownBack.trigger("click")})),this.$newLabelCreateButton.on("click",this.saveLabel.bind(this))}},{key:"addColorValue",value:function(e,t){e.preventDefault(),e.stopPropagation(),this.$newColorField.val(t.data("color")).trigger("change"),this.$colorPreview.css("background-color",t.data("color")).parent().addClass("is-active")}},{key:"enableLabelCreateButton",value:function(){""!==this.$newLabelField.val()&&""!==this.$newColorField.val()?(this.$newLabelError.hide(),this.$newLabelCreateButton.enable()):this.$newLabelCreateButton.disable()}},{key:"resetForm",value:function(){this.$newLabelField.val("").trigger("change"),this.$newColorField.val("").trigger("change"),this.$addList.prop("checked",this.addListDefault),this.$colorPreview.css("background-color","").parent().removeClass("is-active")}},{key:"saveLabel",value:function(e){var t=this;e.preventDefault(),e.stopPropagation(),a.a.newLabel(this.namespacePath,this.projectPath,{title:this.$newLabelField.val(),color:this.$newColorField.val()},(function(e){if(t.$newLabelCreateButton.enable(),e.message){var n;n="string"==typeof e.message?e.message:Object.keys(e.message).map((function(t){return"".concat(Object(o.i)(t)," ").concat(e.message[t].join(", "))})).join("<br/>"),t.$newLabelError.html(n).show()}else{var r=t.$addList.is(":checked");t.$dropdownBack.trigger("click"),i()(document).trigger("created.label",[e,r])}}))}}])&&s(t.prototype,n),r&&s(t,r),e}()},286:function(e,t,n){"use strict";n.r(t);var r=n(96);document.addEventListener("DOMContentLoaded",(function(){Object(r.a)(document,gon)}))},291:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));n(24),n(30),n(28),n(42),n(26),n(78),n(85),n(65),n(46),n(69),n(145),n(72),n(50),n(58),n(38),n(18),n(55),n(68),n(36),n(91),n(67),n(27);var r=n(0),i=n.n(r),a=n(20),o=n.n(a),s=n(1),l=n(11),c=n(176),u=n(273),d=n(14),h=n(121),p=n(52),f=n(16);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var g=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=this,a=i()(t);t||(a=i()(".js-label-select")),a.each((function(t,a){var c=i()(a),v=c.closest(".labels-filter"),y=c.data("namespacePath"),b=c.data("projectPath"),g=c.data("issueUpdate"),m=c.data("selected");null==m||c.hasClass("js-multiselect")||(m=m.split(","));var k=c.data("showNo"),w=c.data("showAny"),S=c.data("showMenuAbove"),T=c.data("defaultLabel")||Object(s.a)("Label"),E=c.data("abilityName"),j=c.closest(".selectbox"),O=j.closest(".block"),C=c.closest("form, .js-issuable-update"),L=O.find(".sidebar-collapsed-icon span"),I=O.find(".js-sidebar-labels-tooltip"),P=O.find(".value"),_=c.parent().find(".dropdown-menu"),D=O.find(".block-loading").fadeOut(),x=c.data("fieldName"),A=j.find('input[name="'.concat(c.data("fieldName"),'"]')).map((function(){return this.value})).get(),V=c.data("scopedLabels"),q=c.data("scopedLabelsDocumentationLink"),F=n.handleClick;I.tooltip(),c.closest(".dropdown").find(".dropdown-new-label").length&&new u.a(c.closest(".dropdown").find(".dropdown-new-label"),y,b);var K=function(){var t=c.closest(".selectbox").find("input[name='".concat(x,"']")).map((function(){return this.value})).get();if(!o.a.isEqual(A,t)){A=t;var n={};n[E]={},n[E].label_ids=t,t.length||(n[E].label_ids=[""]),D.removeClass("hidden").fadeIn(),c.trigger("loading.gl.dropdown"),l.a.put(g,n).then((function(t){var n,r,a=t.data;D.fadeOut(),c.trigger("loaded.gl.dropdown"),j.hide(),a.issueUpdateURL=g;var l=0;a.labels.length&&g?(r=e.getLabelTemplate({labels:o.a.sortBy(a.labels,"title"),issueUpdateURL:g,enableScopedLabels:V,scopedLabelsDocumentationLink:q}),l=a.labels.length):r='<span class="no-value">'.concat(Object(s.a)("None"),"</span>");if(P.removeAttr("style").html(r),L.text(l),a.labels.length){var u=a.labels.map((function(e){return e.title}));u.length>5&&(u=u.slice(0,5)).push(Object(s.e)(Object(s.d)("Labels|and %{count} more"),{count:a.labels.length-5})),n=u.join(", ")}else n=Object(s.a)("Labels");I.attr("title",n).tooltip("_fixTitle"),i()(".has-tooltip",P).tooltip({container:"body"})})).catch((function(){return Object(d.a)(Object(s.a)("Error saving label update."))}))}};c.glDropdown({showMenuAbove:S,data:function(e,t){var n=c.attr("data-labels");l.a.get(n).then((function(e){var n=e.data;if(c.hasClass("js-extra-options")){var r=[];k&&r.unshift({id:0,title:Object(s.a)("No Label")}),w&&r.unshift({isAny:!0,title:Object(s.a)("Any Label")}),r.length&&(r.push({type:"divider"}),n=r.concat(n))}t(n),S&&c.data("glDropdown").positionMenuAbove()})).catch((function(){return Object(d.a)(Object(s.a)("Error fetching labels."))}))},renderRow:function(e){var t,n=[],r=e.id<=0||null==e.id;if(c.hasClass("js-filter-bulk-update")){var i=c.data("indeterminate")||[],a=c.data("marked")||[];if(-1!==i.indexOf(e.id)&&n.push("is-indeterminate"),-1!==a.indexOf(e.id)){var s=n.indexOf("is-indeterminate");-1!==s&&n.splice(s,1),n.push("is-active")}}else{if(this.id(e)){var l=this.id(e).toString().replace(/'/g,"\\'");C.find("input[type='hidden'][name='".concat(this.fieldName,"'][value='").concat(l,"']")).length&&n.push("is-active")}this.multiSelect&&r&&n.push("dropdown-clear-active")}t=e.color?"<span class='dropdown-label-box' style='background: ".concat(e.color,"'></span>"):"";var u=document.createElement("a");if(u.href="#",e.id){n.push.apply(n,["label-item"].concat(["d-flex","flex-row","text-break-word"])),u.dataset.labelId=e.id}u.className=n.join(" "),u.innerHTML="".concat(t," ").concat(o.a.escape(e.title));var d=document.createElement("li");return d.appendChild(u),d},search:{fields:["title"]},selectable:!0,filterable:!0,selected:c.data("selected")||[],toggleLabel:function(e,t){var n=c.parent(),r=n.find(".dropdown-input-field"),i=null!==t&&t.hasClass("is-active"),a=e?e.title:null,o=this.selected;if(r.length&&r.val().length&&n.find(".dropdown-input-clear").trigger("click"),e&&0===e.id)return this.selected=[],Object(s.a)("No Label");if(i)this.selected.push(a);else if(!i&&a){var l=this.selected.indexOf(a);this.selected.splice(l,1)}return 1===o.length?o:o.length?Object(s.e)(Object(s.a)("%{firstLabel} +%{labelCount} more"),{firstLabel:o[0],labelCount:o.length-1}):T},fieldName:c.data("fieldName"),id:function(e){return e.id<=0?e.title:c.hasClass("js-issuable-form-dropdown")?e.id:c.hasClass("js-filter-submit")&&null==e.isAny?e.title:e.id},hidden:function(){var e=i()("body").attr("data-page"),t="projects:issues:index"===e,n="projects:merge_requests:index"===e;j.hide(),P.removeAttr("style"),c.hasClass("js-issuable-form-dropdown")||i()("html").hasClass("issue-boards-page")||c.hasClass("js-multiselect")&&(c.hasClass("js-filter-submit")&&(t||n)?Issuable.filterResults(c.closest("form")):c.hasClass("js-filter-submit")?c.closest("form").submit():c.hasClass("js-filter-bulk-update")||(K(),c.data("glDropdown").clearMenu()))},multiSelect:c.hasClass("js-multiselect"),vue:c.hasClass("js-issue-board-sidebar"),clicked:function(e){var t=e.$el,n=e.e,a=e.isMarking,s=e.selectedObj,l=function(){D.fadeOut()},u=i()("body").attr("data-page"),d="projects:issues:index"===u,v="projects:merge_requests:index"===u;if(c.parent().find(".is-active:not(.dropdown-clear-active)").length&&c.parent().find(".dropdown-clear-active").removeClass("is-active"),!c.hasClass("js-issuable-form-dropdown")){if(c.hasClass("js-filter-bulk-update"))return r.enableBulkLabelDropdown(),void r.setDropdownData(c,a,s.id);var y;if(c.closest(".add-issues-modal").length&&(y=h.a.store.filter),y)return s.isAny?y.label_name=[]:t.hasClass("is-active")&&y.label_name.push(s.title),void n.preventDefault();if(c.hasClass("js-filter-submit")&&(d||v)){if(!c.hasClass("js-multiselect"))return m=s.title,Issuable.filterResults(c.closest("form"))}else{if(c.hasClass("js-filter-submit"))return c.closest("form").submit();if(c.hasClass("js-issue-board-sidebar")){if(t.hasClass("is-active"))p.c.detail.issue.labels.push(new ListLabel({id:s.id,title:s.title,color:s.color,textColor:"#fff"}));else{var b=p.c.detail.issue.labels;b=b.filter((function(e){return e.id!==s.id})),p.c.detail.issue.labels=b}D.fadeIn();var g=p.c.detail.issue.labels;p.c.detail.issue.update(c.attr("data-issue-update")).then((function(){if(Object(f.C)(s)){var e=g.map((function(e){return e.id})),t=p.c.detail.issue.labels.map((function(e){return e.id})),n=o.a.difference(e,t);c.data("marked",t),_.find(n.map((function(e){return'[data-label-id="'.concat(e,'"]')})).join(",")).removeClass("is-active")}})).then(l).catch(l)}else if(F)n.preventDefault(),F(s);else if(!c.hasClass("js-multiselect"))return K()}}},opened:function(){if(c.hasClass("js-issue-board-sidebar")){var e=c.attr("data-selected");this.selected=e?e.split(","):[],c.data("glDropdown").updateLabel()}},preserveContext:!0}),r.setOriginalDropdownData(v,c)})),this.bindEvents()}var t,n,r;return t=e,r=[{key:"getLabelTemplate",value:function(e){var t='<a href="<%- issueUpdateURL.slice(0, issueUpdateURL.lastIndexOf("/")) %>?label_name[]=<%- encodeURIComponent(label.title) %>" class="gl-link gl-label-link has-tooltip" <%= linkAttrs %> title="<%= tooltipTitleTemplate({ label, isScopedLabel, enableScopedLabels, escapeStr }) %>">',n='<span class="gl-label-text" style="background-color: <%= escapeStr(label.color) %>; color: <%= escapeStr(label.text_color) %>;">',r=o.a.template(['<span class="gl-label">',t,n,"<%- label.title %>","</span>","</a>","</span>"].join("")),i=o.a.template(['<a href="<%= scopedLabelsDocumentationLink %>" class="gl-link gl-label-icon" target="_blank" rel="noopener">','<i class="fa fa-question-circle"></i>',"</a>"].join("")),a=o.a.template(['<span class="gl-label gl-label-scoped" style="color: <%= escapeStr(label.color) %>;">',t,n,'<%- label.title.slice(0, label.title.lastIndexOf("::")) %>',"</span>",'<span class="gl-label-text" style="color: <%= rightLabelTextColor({ label, escapeStr }) %>;">','<%- label.title.slice(label.title.lastIndexOf("::") + 2) %>',"</span>","</a>","<%= infoIconTemplate({ label, scopedLabelsDocumentationLink, escapeStr }) %>","</span>"].join("")),s=o.a.template(["<% if (isScopedLabel(label) && enableScopedLabels) { %>","<span class='font-weight-bold scoped-label-tooltip-title'>Scoped label</span>","<br />","<%= escapeStr(label.description) %>","<% } else { %>","<%= escapeStr(label.description) %>","<% } %>"].join(""));return o.a.template(["<% _.each(labels, function(label){ %>","<% if (isScopedLabel(label) && enableScopedLabels) { %>",'<span class="d-inline-block position-relative scoped-label-wrapper">',"<%= scopedLabelTemplate({ label, issueUpdateURL, isScopedLabel, enableScopedLabels, rightLabelTextColor, infoIconTemplate, scopedLabelsDocumentationLink, tooltipTitleTemplate, escapeStr, linkAttrs: 'data-html=\"true\"' }) %>","</span>","<% } else { %>",'<%= labelTemplate({ label, issueUpdateURL, isScopedLabel, enableScopedLabels, tooltipTitleTemplate, escapeStr, linkAttrs: "" }) %>',"<% } %>","<% }); %>"].join(""))(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{labelTemplate:r,rightLabelTextColor:function(e){var t=e.label;return(0,e.escapeStr)("#FFFFFF"===t.text_color?t.color:t.text_color)},infoIconTemplate:i,scopedLabelTemplate:a,tooltipTitleTemplate:s,isScopedLabel:f.C,escapeStr:o.a.escape}))}}],(n=[{key:"bindEvents",value:function(){return i()("body").on("change",".selected-issuable",this.onSelectCheckboxIssue)}},{key:"onSelectCheckboxIssue",value:function(){if(!i()(".selected-issuable:checked").length)return i()(".issues-bulk-update .labels-filter .dropdown-toggle-text").text(Object(s.a)("Label"))}},{key:"enableBulkLabelDropdown",value:function(){c.a.willUpdateLabels=!0}},{key:"setDropdownData",value:function(e,t,n){var r=e.data("marked")||[],i=e.data("unmarked")||[],a=e.data("indeterminate")||[];if(t){r.push(n);var o=a.indexOf(n);o>-1&&a.splice(o,1),(o=i.indexOf(n))>-1&&i.splice(o,1)}else{var s=r.indexOf(n);s>-1&&r.splice(s,1),c.a.getOriginalIndeterminateIds().indexOf(n)>-1&&i.push(n),c.a.getOriginalCommonIds().indexOf(n)>-1&&i.push(n)}e.data("marked",r),e.data("unmarked",i),e.data("indeterminate",a)}},{key:"setOriginalDropdownData",value:function(e,t){var n=[];e.find('[name="label_name[]"]').map((function(){return n.push(this.value)})),t.data("marked",n)}}])&&b(t.prototype,n),r&&b(t,r),e}()},292:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));n(30),n(28),n(42),n(35);var r=n(0),i=n.n(r),a=n(20),o=n.n(a),s=n(1),l=(n(321),n(11)),c=n(62),u=n(121),d=n(52);function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),null!==t&&(this.currentProject="string"==typeof t?JSON.parse(t):t),e.init(n,r)}var t,n,r;return t=e,r=[{key:"init",value:function(e,t){var n=i()(e);e||(n=i()(".js-milestone-select")),n.each((function(e,n){var r,a,h,p,f=i()(n),v=f.data("milestones"),y=f.data("issueUpdate"),b=f.data("showNo"),g=f.data("showAny"),m=f.data("showMenuAbove"),k=f.data("showUpcoming"),w=f.data("showStarted"),S=f.data("useId"),T=f.data("defaultLabel"),E=f.data("defaultNo"),j=f.data("abilityName"),O=f.closest(".selectbox"),C=O.closest(".block"),L=C.find(".sidebar-collapsed-icon"),I=C.find(".value"),P=C.find(".block-loading").fadeOut();return p=g?"":null,p=b&&E?Object(s.a)("No Milestone"):p,h=f.data("selected")||p,y&&(a=o.a.template('<a href="<%- web_url %>" class="bold has-tooltip" data-container="body" title="<%- remaining %>"><%- title %></a>'),r='<span class="no-value">'.concat(Object(s.a)("None"),"</span>")),f.glDropdown({showMenuAbove:m,data:function(e,t){return l.a.get(v).then((function(e){var n=e.data,r=[];g&&r.push({id:null,name:null,title:Object(s.a)("Any Milestone")}),b&&r.push({id:-1,name:Object(s.a)("No Milestone"),title:Object(s.a)("No Milestone")}),k&&r.push({id:-2,name:"#upcoming",title:Object(s.a)("Upcoming")}),w&&r.push({id:-3,name:"#started",title:Object(s.a)("Started")}),r.length&&r.push({type:"divider"}),t(r.concat(n)),m&&f.data("glDropdown").positionMenuAbove(),i()('[data-milestone-id="'.concat(o.a.escape(h),'"] > a')).addClass("is-active")}))},renderRow:function(e){return'\n          <li data-milestone-id="'.concat(o.a.escape(e.name),"\">\n            <a href='#' class='dropdown-menu-milestone-link'>\n              ").concat(o.a.escape(e.title),"\n            </a>\n          </li>\n        ")},filterable:!0,search:{fields:["title"]},selectable:!0,toggleLabel:function(e,t){return e&&"id"in e&&i()(t).hasClass("is-active")?e.title:T},defaultLabel:T,fieldName:f.data("fieldName"),text:function(e){return o.a.escape(e.title)},id:function(e){return S||f.is(".js-issuable-form-dropdown")?e.id:e.name},hidden:function(){return O.hide(),I.css("display","")},opened:function(e){var n=i()(e.currentTarget);(f.hasClass("js-issue-board-sidebar")||t.handleClick)&&(h=f[0].dataset.selected||p),i()("a.is-active",n).removeClass("is-active"),i()('[data-milestone-id="'.concat(o.a.escape(h),'"] > a'),n).addClass("is-active")},vue:f.hasClass("js-issue-board-sidebar"),clicked:function(e){var n,o,v=e.e,b=e.selectedObj;if(b){if(t.handleClick)return v.preventDefault(),void t.handleClick(b);var g=i()("body").attr("data-page"),m="projects:issues:index"===g,k=g==g&&"projects:merge_requests:index"===g,w=b.name!==h;if(h=w?b.name:p,f.hasClass("js-filter-bulk-update")||f.hasClass("js-issuable-form-dropdown"))v.preventDefault();else if(f.closest(".add-issues-modal").length&&(o=u.a.store.filter),o)o[f.data("fieldName")]=b.name,v.preventDefault();else{if(f.hasClass("js-filter-submit")&&(m||k))return Issuable.filterResults(f.closest("form"));if(f.hasClass("js-filter-submit"))return f.closest("form").submit();if(!f.hasClass("js-issue-board-sidebar"))return b=O.find('input[type="hidden"]').val(),(n={})[j]={},n[j].milestone_id=null!=b?b:null,P.removeClass("hidden").fadeIn(),f.trigger("loading.gl.dropdown"),l.a.put(y,n).then((function(e){var t=e.data;return f.trigger("loaded.gl.dropdown"),P.fadeOut(),O.hide(),I.css("display",""),null!=t.milestone?(t.milestone.remaining=Object(c.s)(t.milestone.due_date),t.milestone.name=t.milestone.title,I.html(a(t.milestone)),L.attr("data-original-title","".concat(t.milestone.name,"<br />").concat(t.milestone.remaining)).find("span").text(t.milestone.title)):(I.html(r),L.attr("data-original-title",Object(s.a)("Milestone")).find("span").text(Object(s.a)("None")))})).catch((function(){P.fadeOut()}));-1!==b.id&&w?Object(d.b)("milestone",new ListMilestone({id:b.id,title:b.name})):Object(d.a)("milestone"),f.trigger("loading.gl.dropdown"),P.removeClass("hidden").fadeIn(),d.c.detail.issue.update(f.attr("data-issue-update")).then((function(){f.trigger("loaded.gl.dropdown"),P.fadeOut()})).catch((function(){P.fadeOut()}))}}}})}))}}],(n=null)&&h(t.prototype,n),r&&h(t,r),e}();window.MilestoneSelect=p},297:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n(30),n(42),n(46),n(55),n(91);var r=n(1);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tokenKeys=t,this.alternativeTokenKeys=n,this.conditions=r,this.tokenKeysWithAlternative=this.tokenKeys.concat(this.alternativeTokenKeys)}var t,n,a;return t=e,(n=[{key:"get",value:function(){return this.tokenKeys}},{key:"getKeys",value:function(){return this.tokenKeys.map((function(e){return e.key}))}},{key:"getAlternatives",value:function(){return this.alternativeTokenKeys}},{key:"getConditions",value:function(){return this.conditions}},{key:"shouldUppercaseTokenName",value:function(e){var t=this.searchByKey(e.toLowerCase());return t&&t.uppercaseTokenName}},{key:"shouldCapitalizeTokenValue",value:function(e){var t=this.searchByKey(e.toLowerCase());return t&&t.capitalizeTokenValue}},{key:"searchByKey",value:function(e){return this.tokenKeys.find((function(t){return t.key===e}))||null}},{key:"searchBySymbol",value:function(e){return this.tokenKeys.find((function(t){return t.symbol===e}))||null}},{key:"searchByKeyParam",value:function(e){return this.tokenKeysWithAlternative.find((function(t){var n=t.key;return n=n.replace("-","_"),t.param&&(n+="_".concat(t.param)),e===n}))||null}},{key:"searchByConditionUrl",value:function(e){return this.conditions.find((function(t){return t.url===e}))||null}},{key:"searchByConditionKeyValue",value:function(e,t,n){return this.conditions.find((function(r){return r.tokenKey===e&&r.operator===t&&r.value.toLowerCase()===n.toLowerCase()}))||null}},{key:"addExtraTokensForIssues",value:function(){var e={formattedKey:Object(r.a)("Confidential"),key:"confidential",type:"string",param:"",symbol:"",icon:"eye-slash",tag:Object(r.a)("Yes or No"),lowercaseValueOnSubmit:!0,uppercaseTokenName:!1,capitalizeTokenValue:!0};this.tokenKeys.push(e),this.tokenKeysWithAlternative.push(e)}}])&&i(t.prototype,n),a&&i(t,a),e}()},307:function(e,t,n){"use strict";n(24),n(49),n(56),n(30),n(28),n(26),n(104),n(40),n(46),n(69),n(50),n(58),n(38),n(18),n(55),n(68),n(122),n(36),n(67),n(27),n(41);var r=n(463),i=n.n(r),a=n(297),o=n(1);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var d=[{formattedKey:Object(o.a)("Author"),key:"author",type:"string",param:"username",symbol:"@",icon:"pencil",tag:"@author"},{formattedKey:Object(o.a)("Assignee"),key:"assignee",type:"string",param:"username",symbol:"@",icon:"user",tag:"@assignee"},{formattedKey:Object(o.a)("Milestone"),key:"milestone",type:"string",param:"title",symbol:"%",icon:"clock",tag:"%milestone"},{formattedKey:Object(o.a)("Release"),key:"release",type:"string",param:"tag",symbol:"",icon:"rocket",tag:Object(o.a)("tag name")},{formattedKey:Object(o.a)("Label"),key:"label",type:"array",param:"name[]",symbol:"~",icon:"labels",tag:"~label"}];gon.current_user_id&&d.push({formattedKey:Object(o.a)("My-Reaction"),key:"my-reaction",type:"string",param:"emoji",symbol:"",icon:"thumb-up",tag:"emoji"});var h=[{formattedKey:Object(o.a)("Label"),key:"label",type:"string",param:"name",symbol:"~"}],p=i()([{url:"assignee_id=None",tokenKey:"assignee",value:Object(o.a)("None")},{url:"assignee_id=Any",tokenKey:"assignee",value:Object(o.a)("Any")},{url:"milestone_title=None",tokenKey:"milestone",value:Object(o.a)("None")},{url:"milestone_title=Any",tokenKey:"milestone",value:Object(o.a)("Any")},{url:"milestone_title=%23upcoming",tokenKey:"milestone",value:Object(o.a)("Upcoming")},{url:"milestone_title=%23started",tokenKey:"milestone",value:Object(o.a)("Started")},{url:"release_tag=None",tokenKey:"release",value:Object(o.a)("None")},{url:"release_tag=Any",tokenKey:"release",value:Object(o.a)("Any")},{url:"label_name[]=None",tokenKey:"label",value:Object(o.a)("None")},{url:"label_name[]=Any",tokenKey:"label",value:Object(o.a)("Any")},{url:"my_reaction_emoji=None",tokenKey:"my-reaction",value:Object(o.a)("None")},{url:"my_reaction_emoji=Any",tokenKey:"my-reaction",value:Object(o.a)("Any")}].map((function(e){var t=u(e.url.split("="),2),n=t[0],r=t[1],i=n.includes("[]"),a="not[".concat(i?n.slice(0,-2):n,"]").concat(i?"[]":"","=").concat(r);return[l({},e,{operator:"="}),l({},e,{operator:"!=",url:a})]}))),f=new a.a(d,h,p);t.a=f},355:function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return s}));var r=38,i=40,a=13,o=27,s=8},435:function(e,t,n){"use strict";n.d(t,"a",(function(){return dt}));n(24),n(49),n(56),n(30),n(26),n(104),n(85),n(40),n(65),n(46),n(69),n(35),n(18),n(311),n(55),n(68),n(695),n(122),n(36),n(283),n(91),n(246),n(67),n(89),n(27),n(41);var r=n(219),i=n.n(r),a={issues:"issue-recent-searches",merge_requests:"merge-request-recent-searches"},o=n(16),s=n(307),l=n(33),c=n(14),u=n(111),d=n(17),h=new d.default,p=(n(498),n(297));function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var v=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"processTokens",value:function(e,t){var n=new RegExp("(".concat(t.join("|"),"):(=|!=)?([~%@]?)(?:('[^']*'{0,1})|(\"[^\"]*\"{0,1})|(\\S+))"),"g"),r=[],i=[],a=null,o=e.replace(n,(function(e,t,n,a,o,s,l){var c,u=o||s||l,d=a,h=n;return"~"!==u&&"%"!==u&&"@"!==u||(d=u,u=""),"!="!==u&&"="!==u||(h=u,u=""),c="".concat(t,":").concat(u),-1===i.indexOf(c)&&(i.push(c),r.push({key:t,value:u||"",symbol:d||"",operator:h||""})),""})).replace(/\s{2,}/g," ").trim()||"";if(r.length>0){var s=r[r.length-1],l="".concat(s.key,":").concat(s.operator).concat(s.symbol).concat(s.value);a=e.lastIndexOf(l)===e.length-l.length?s:o}else a=o;return{tokens:r,lastToken:a,searchToken:o}}}],(n=null)&&f(t.prototype,n),r&&f(t,r),e}(),y={name:"RecentSearchesDropdownContent",props:{items:{type:Array,required:!0},isLocalStorageAvailable:{type:Boolean,required:!1,default:!0},allowedKeys:{type:Array,required:!0}},computed:{processedItems:function(){var e=this;return this.items.map((function(t){var n=v.processTokens(t,e.allowedKeys),r=n.tokens,i=n.searchToken;return{text:t,tokens:r.map((function(e){return{prefix:"".concat(e.key,":"),operator:e.operator,suffix:"".concat(e.symbol).concat(e.value)}})),searchToken:i}}))},hasItems:function(){return this.items.length>0}},methods:{onItemActivated:function(e){h.$emit("recentSearchesItemSelected",e)},onRequestClearRecentSearches:function(e){e.stopPropagation(),h.$emit("requestClearRecentSearches")}}},b=n(4),g=Object(b.a)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.isLocalStorageAvailable?e.hasItems?n("ul",[e._l(e.processedItems,(function(t,r){return n("li",{key:"processed-items-"+r,ref:"dropdownItem",refInFor:!0},[n("button",{staticClass:"filtered-search-history-dropdown-item js-dropdown-button",attrs:{type:"button"},on:{click:function(n){return e.onItemActivated(t.text)}}},[n("span",e._l(t.tokens,(function(t,r){return n("span",{key:"dropdown-token-"+r,staticClass:"filtered-search-history-dropdown-token js-dropdown-token"},[n("span",{staticClass:"name"},[e._v(e._s(t.prefix))]),e._v(" "),n("span",{staticClass:"name"},[e._v(e._s(t.operator))]),e._v(" "),n("span",{staticClass:"value"},[e._v(e._s(t.suffix))])])})),0),e._v(" "),n("span",{staticClass:"filtered-search-history-dropdown-search-token"},[e._v("\n          "+e._s(t.searchToken)+"\n        ")])])])})),e._v(" "),n("li",{staticClass:"divider"}),e._v(" "),n("li",[n("button",{ref:"clearButton",staticClass:"filtered-search-history-clear-button",attrs:{type:"button"},on:{click:function(t){return e.onRequestClearRecentSearches(t)}}},[e._v("\n        "+e._s(e.__("Clear recent searches"))+"\n      ")])])],2):n("div",{ref:"dropdownNote",staticClass:"dropdown-info-note"},[e._v("\n    "+e._s(e.__("You don't have any recent searches"))+"\n  ")]):n("div",{ref:"localStorageNote",staticClass:"dropdown-info-note"},[e._v("\n    "+e._s(e.__("This feature requires local storage to be enabled"))+"\n  ")])])}),[],!1,null,null,null).exports;function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var k=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=t,this.service=n,this.wrapperElement=r}var t,n,r;return t=e,(n=[{key:"init",value:function(){this.bindEvents(),this.render()}},{key:"bindEvents",value:function(){this.onRequestClearRecentSearchesWrapper=this.onRequestClearRecentSearches.bind(this),h.$on("requestClearRecentSearches",this.onRequestClearRecentSearchesWrapper)}},{key:"unbindEvents",value:function(){h.$off("requestClearRecentSearches",this.onRequestClearRecentSearchesWrapper)}},{key:"render",value:function(){var e=this.store.state;this.vm=new d.default({el:this.wrapperElement,components:{RecentSearchesDropdownContent:g},data:function(){return e},template:'\n        <recent-searches-dropdown-content\n          :items="recentSearches"\n          :is-local-storage-available="isLocalStorageAvailable"\n          :allowed-keys="allowedKeys"\n          />\n      '})}},{key:"onRequestClearRecentSearches",value:function(){var e=this.store.setRecentSearches([]);this.service.save(e)}},{key:"destroy",value:function(){this.unbindEvents(),this.vm&&this.vm.$destroy()}}])&&m(t.prototype,n),r&&m(t,r),e}(),w=(n(77),n(525)),S=n.n(w);function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var E=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state=Object.assign({isLocalStorageAvailable:!0,recentSearches:[],allowedKeys:n},t)}var t,n,r;return t=e,(n=[{key:"addRecentSearch",value:function(e){return this.setRecentSearches([e].concat(this.state.recentSearches)),this.state.recentSearches}},{key:"setRecentSearches",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.map((function(e){return e.trim()}));return this.state.recentSearches=S()(t).slice(0,5),this.state.recentSearches}}])&&T(t.prototype,n),r&&T(t,r),e}(),j=(n(64),n(1));var O=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name="RecentSearchesServiceError",this.message=t||Object(j.a)("Recent Searches Service is unavailable")};O.prototype=Error.prototype;var C=O,L=n(71);function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var P=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"issuable-recent-searches";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.localStorageKey=t}var t,n,r;return t=e,r=[{key:"isAvailable",value:function(){return L.a.isLocalStorageAccessSafe()}}],(n=[{key:"fetch",value:function(){if(!e.isAvailable()){var t=new C;return Promise.reject(t)}var n=window.localStorage.getItem(this.localStorageKey),r=[];if(n&&n.length>0)try{r=JSON.parse(n)}catch(e){return Promise.reject(e)}return Promise.resolve(r)}},{key:"save",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.isAvailable()&&window.localStorage.setItem(this.localStorageKey,JSON.stringify(t))}}])&&I(t.prototype,n),r&&I(t,r),e}(),_=n(324),D=(n(28),n(50),n(58),n(38),n(90),n(184),{keydown:function(e){if(!this.destroyed){var t,n=e.detail.hook.list,r=n.data,i=e.detail.hook.trigger.value.toLowerCase(),a=e.detail.hook.config.Filter,o=[];r&&(t=a&&a.filterFunction&&"function"==typeof a.filterFunction?a.filterFunction:function(e){return e.droplab_hidden=-1===e[a.template].toLowerCase().indexOf(i),e},r.filter((function(e){return!e.droplab_hidden})).length!==(o=r.map((function(e){return t(e,i)}))).filter((function(e){return!e.droplab_hidden})).length&&(n.setData(o),n.currentIndex=0))}},debounceKeydown:function(e){[13,16,17,18,20,37,38,39,40,91,92,93].indexOf(e.detail.which||e.detail.keyCode)>-1||(this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(this.keydown.bind(this,e),200))},init:function(e){var t=e.config.Filter;t&&t.template&&(this.hook=e,this.destroyed=!1,this.eventWrapper={},this.eventWrapper.debounceKeydown=this.debounceKeydown.bind(this),this.hook.trigger.addEventListener("keydown.dl",this.eventWrapper.debounceKeydown),this.hook.trigger.addEventListener("mousedown.dl",this.eventWrapper.debounceKeydown))},destroy:function(){this.timeout&&clearTimeout(this.timeout),this.destroyed=!0,this.hook.trigger.removeEventListener("keydown.dl",this.eventWrapper.debounceKeydown),this.hook.trigger.removeEventListener("mousedown.dl",this.eventWrapper.debounceKeydown)}}),x=(n(374),n(258),n(145),n(495),n(42),n(72),n(93)),A=n.n(x),V=["author","assignee"],q="hint",F="operator",K=n(200),R=n(543);function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var B=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tokenValue=t,this.tokenType=n,this.tokenOperator=r}var t,r,i;return t=e,i=[{key:"replaceEpicTitle",value:function(e,t,n){var r=e,i=r.querySelector(".value");i&&(r.dataset.originalValue=i.innerText,i.innerText='"'.concat(t,'"::&').concat(n))}},{key:"setTokenStyle",value:function(e,t,n){var r=e;return r.style.backgroundColor=t,r.style.color=n,"#FFFFFF"===n&&r.querySelector(".remove-token").classList.add("inverted"),r}}],(r=[{key:"render",value:function(e,t){var n=this.tokenType,r=this.tokenValue;["none","any"].includes(r.toLowerCase())||("label"===n?this.updateLabelTokenColor(e):V.includes(n)?this.updateUserTokenAppearance(e,t):"my-reaction"===n?this.updateEmojiTokenAppearance(e,t):"epic"===n&&this.updateEpicLabel(e,t))}},{key:"updateUserTokenAppearance",value:function(e,t){var n=this.tokenValue,r=this.tokenValue.replace(/^@/,"");return R.a.retrieve(r).then((function(r){r&&(e.dataset.originalValue=n,t.innerHTML='\n          <img class="avatar s20" src="'.concat(r.avatar_url,'" alt="">\n          ').concat(A()(r.name),"\n        "))})).catch((function(){}))}},{key:"updateLabelTokenColor",value:function(t){var n=this.tokenValue,r=u.a.container.querySelector(".filtered-search"),i=r.dataset.labelsEndpoint,a=H.getEndpointWithQueryParams("".concat(i,".json"),r.dataset.endpointQueryParams);return K.a.retrieve(a).then((function(r){var i=(r||[]).find((function(e){return"~".concat(Q.getEscapedText(e.title))===n}));i&&e.setTokenStyle(t,i.color,i.text_color)})).catch((function(){return new c.a(Object(j.a)("An error occurred while fetching label colors."))}))}},{key:"updateEpicLabel",value:function(t){var n=this.tokenValue.replace(/^&/,""),r=u.a.container.querySelector(".filtered-search"),i=r.dataset.epicsEndpoint,a=H.getEndpointWithQueryParams("".concat(i,".json"),r.dataset.endpointQueryParams);return K.a.retrieve(a).then((function(r){var i=(r||[]).find((function(e){return e.id===Number(n)}));i&&e.replaceEpicTitle(t,i.title,i.id)})).catch((function(){return new c.a(Object(j.a)("An error occurred while adding formatted title for epic"))}))}},{key:"updateEmojiTokenAppearance",value:function(e,t){var r=e,i=t,a=this.tokenValue;return Promise.resolve().then(n.bind(null,447)).then((function(e){e.isEmojiNameValid(a)&&(r.dataset.originalValue=a,i.innerHTML=e.glEmojiTag(a))})).catch((function(){}))}}])&&W(t.prototype,r),i&&W(t,i),e}();function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var N,M,U,H=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getOperatorToken",value:function(t){var n=null;return e.permissibleOperatorValues.forEach((function(e){t.startsWith(e)&&(n=e)})),n}},{key:"getValueToken",value:function(t){var n=t;return e.permissibleOperatorValues.forEach((function(e){t.startsWith(e)&&(n=t.slice(e.length))})),n}},{key:"getLastVisualTokenBeforeInput",value:function(){var e=u.a.container.querySelector(".input-token"),t=e&&e.previousElementSibling;return{lastVisualToken:t,isLastVisualTokenValid:null===t||-1!==t.className.indexOf("filtered-search-term")||t&&null!==t.querySelector(".operator")&&null!==t.querySelector(".value")}}},{key:"unselectTokens",value:function(){var e=u.a.container.querySelectorAll(".js-visual-token .selectable.selected");[].forEach.call(e,(function(e){return e.classList.remove("selected")}))}},{key:"selectToken",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.classList.contains("selected");e.unselectTokens(),r&&!n||t.classList.add("selected")}},{key:"removeSelectedToken",value:function(){var e=u.a.container.querySelector(".js-visual-token .selected");if(e){var t=e.closest(".js-visual-token");t.parentElement.removeChild(t)}}},{key:"createVisualTokenElementHTML",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.canEdit,n=void 0===t||t,r=e.hasOperator,i=void 0!==r&&r,a=e.uppercaseTokenName,o=void 0!==a&&a,s=e.capitalizeTokenValue,l=void 0!==s&&s;return'\n      <div class="'.concat(n?"selectable":"hidden",'" role="button">\n        <div class="').concat(o?"text-uppercase":"",' name"></div>\n        ').concat(i?'<div class="operator"></div>':"",'\n        <div class="value-container">\n          <div class="').concat(l?"text-capitalize":"",' value"></div>\n          <div class="remove-token" role="button">\n            <i class="fa fa-close"></i>\n          </div>\n        </div>\n      </div>\n    ')}},{key:"renderVisualTokenValue",value:function(e,t,n,r){var i=t.toLowerCase(),a=e.querySelector(".value-container"),o=a.querySelector(".value");o.innerText=n,new B(n,i,r).render(a,o)}},{key:"addVisualTokenElement",value:function(t){var n=t.name,r=t.operator,i=t.value,a=t.options,o=void 0===a?{}:a,s=o.isSearchTerm,l=void 0!==s&&s,c=o.canEdit,d=o.uppercaseTokenName,h=o.capitalizeTokenValue,p=o.tokenClass,f=void 0===p?"search-token-".concat(n.toLowerCase()):p,v=document.createElement("li");v.classList.add("js-visual-token"),v.classList.add(l?"filtered-search-term":"filtered-search-token"),l||v.classList.add(f);var y=Boolean(r);if(i)v.innerHTML=e.createVisualTokenElementHTML({canEdit:c,uppercaseTokenName:d,operator:r,hasOperator:y,capitalizeTokenValue:h}),e.renderVisualTokenValue(v,n,i,r);else{var b='<div class="'.concat(d?"text-uppercase":"",' name"></div>'),g="";y&&(g='<div class="operator"></div>'),v.innerHTML=b+g}v.querySelector(".name").innerText=n,y&&(v.querySelector(".operator").innerText=r);var m=u.a.container.querySelector(".tokens-container"),k=u.a.container.querySelector(".filtered-search");m.insertBefore(v,k.parentElement)}},{key:"addValueToPreviousVisualTokenElement",value:function(t){var n=e.getLastVisualTokenBeforeInput(),r=n.lastVisualToken;if(!n.isLastVisualTokenValid&&r.classList.contains("filtered-search-token")){var i=e.getLastTokenPartial(),a=e.getLastTokenOperator();r.innerHTML=e.createVisualTokenElementHTML({hasOperator:Boolean(a)}),r.querySelector(".name").innerText=i,r.querySelector(".operator").innerText=a,e.renderVisualTokenValue(r,i,t,a)}}},{key:"addFilterVisualToken",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=i.canEdit,o=i.uppercaseTokenName,s=void 0!==o&&o,l=i.capitalizeTokenValue,c=void 0!==l&&l,d=e.getLastVisualTokenBeforeInput(),h=d.lastVisualToken,p=d.isLastVisualTokenValid,f=e.addVisualTokenElement;if(p)f({name:t,operator:n,value:r,options:{canEdit:a,uppercaseTokenName:s,capitalizeTokenValue:c}});else if(p||!h||h.querySelector(".operator")){var v=h.querySelector(".name").innerText,y=h.querySelector(".operator").innerText,b=u.a.container.querySelector(".tokens-container");b.removeChild(h);var g=r;g||n||(g=t),f({name:v,operator:y,value:g,options:{canEdit:a,uppercaseTokenName:s,capitalizeTokenValue:c}})}else{var m=u.a.container.querySelector(".tokens-container");m.removeChild(h),f({name:t,operator:n,value:r,options:{canEdit:a,uppercaseTokenName:s,capitalizeTokenValue:c}})}}},{key:"addSearchVisualToken",value:function(t){var n=e.getLastVisualTokenBeforeInput().lastVisualToken;n&&n.classList.contains("filtered-search-term")?n.querySelector(".name").innerText+=" ".concat(t):e.addVisualTokenElement({name:t,operator:null,value:null,options:{isSearchTerm:!0}})}},{key:"getLastTokenPartial",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=e.getLastVisualTokenBeforeInput(),r=n.lastVisualToken;if(!r)return"";var i=r.querySelector(".value-container"),a=i&&i.dataset.originalValue;if(a)return a;var o=r.querySelector(".value"),s=r.querySelector(".name"),l=o?o.innerText:"",c=s?s.innerText:"";if(t){var u=r.querySelector(".operator"),d=u?u.innerText:"";return l||d||c}return l||c}},{key:"getLastTokenOperator",value:function(){var t=e.getLastVisualTokenBeforeInput().lastVisualToken,n=t&&t.querySelector(".operator");return null==n?void 0:n.innerText}},{key:"removeLastTokenPartial",value:function(){var t=e.getLastVisualTokenBeforeInput().lastVisualToken;if(t){var n=t.querySelector(".value"),r=t.querySelector(".operator");if(n){var i=t.querySelector(".selectable"),a=t.querySelector(".value-container");i.removeChild(a),t.innerHTML=i.innerHTML}else r?t.removeChild(r):t.closest(".tokens-container").removeChild(t)}}},{key:"tokenizeInput",value:function(){var t=u.a.container.querySelector(".filtered-search"),n=e.getLastVisualTokenBeforeInput().isLastVisualTokenValid;t.value&&(n?e.addSearchVisualToken(t.value):e.addValueToPreviousVisualTokenElement(t.value),t.value="")}},{key:"getEndpointWithQueryParams",value:function(e,t){if(!t)return e;var n=Object(o.E)(JSON.parse(t));return"".concat(e,"?").concat(n)}},{key:"editToken",value:function(t){var n=u.a.container.querySelector(".filtered-search");e.tokenizeInput();var r=t.parentElement,i=n.parentElement;r.replaceChild(i,t);var a,o=t.querySelector(".name"),s=t.querySelector(".operator");if(t.classList.contains("filtered-search-token")){e.addFilterVisualToken(o.innerText,s.innerText,null,{uppercaseTokenName:o.classList.contains("text-uppercase")});var l=t.querySelector(".value-container");(a=l.dataset.originalValue)||(a=l.querySelector(".value").innerText)}a||(a=o.innerText),n.value=a;var c=new Event("input");n.dispatchEvent(c),n.focus()}},{key:"moveInputToTheRight",value:function(){var t=u.a.container.querySelector(".filtered-search");if(t){var n=t.parentElement,r=u.a.container.querySelector(".tokens-container");if(e.tokenizeInput(),!r.lastElementChild.isEqualNode(n)){if(!e.getLastVisualTokenBeforeInput().isLastVisualTokenValid){var i=e.getLastTokenPartial();e.removeLastTokenPartial(),e.addSearchVisualToken(i)}r.removeChild(n),r.appendChild(n)}}}}],(n=null)&&$(t.prototype,n),r&&$(t,r),e}();function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}U=["=","!="],(M="permissibleOperatorValues")in(N=H)?Object.defineProperty(N,M,{value:U,enumerable:!0,configurable:!0,writable:!0}):N[M]=U;var Q=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getEscapedText",value:function(e){var t=e,n=-1!==e.indexOf(" "),r=-1!==e.indexOf('"');return n&&(t=r?"'".concat(e,"'"):'"'.concat(e,'"')),t}},{key:"filterWithSymbol",value:function(t,n,r){var i=r,a=e.getSearchInput(n),o=i.title.toLowerCase(),s=a.toLowerCase(),l="";s[0]===t&&(l=G(s,1)[0],s=s.slice(1)),'"'!==s[0]&&"'"!==s[0]||-1===o.indexOf(" ")||(s=s.slice(1));var c=l===t&&-1!==o.indexOf(s),u=-1!==o.indexOf("".concat(l).concat(s));return i.droplab_hidden=!u&&!c,i}},{key:"filterHint",value:function(t,n){var r=t.input,a=t.allowedKeys,o=n,s=e.getSearchQuery(r),l=v.processTokens(s,a),c=l.lastToken,u=l.tokens,d=c.key||c||"",h="array"===n.type,p=u.some((function(e){return e.key===n.hint})),f="search"===o.hint;if(f&&(o.droplab_hidden=!0),!h&&p)o.droplab_hidden=!0;else if(f||d&&" "!==i()(s.split(""))){if(d){var y=d.split(":"),b=i()(y[0].split(" ")),g=f?a.some((function(e){return e.startsWith(b.toLowerCase())})):-1===o.hint.indexOf(b.toLowerCase());o.droplab_hidden=!!b&&g}}else o.droplab_hidden=!1;return o}},{key:"setDataValueIfSelected",value:function(e,t,n){var r=n.getAttribute("data-value");return r&&st.addWordToInput({tokenName:e,tokenOperator:t,tokenValue:r,clicked:!0,options:{capitalizeTokenValue:n.hasAttribute("data-capitalize")}}),null!==r}},{key:"getVisualTokenValues",value:function(e){var t=e&&e.querySelector(".name").textContent.trim(),n=e&&e.querySelector(".value")&&e.querySelector(".value").textContent.trim();"label"===t&&n&&(n=n.replace(/^~("|')?(.*)/,"$2").replace(/("|')$/,""));var r=e&&e.querySelector(".operator");return{tokenName:t,tokenOperator:r&&r.textContent.trim(),tokenValue:n}}},{key:"getSearchQuery",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=u.a.container,n=[].slice.call(t.querySelectorAll(".tokens-container li")),r=[];if(e){var i=n.findIndex((function(e){return e.classList.contains("input-token")}));n.splice(i+1)}return n.forEach((function(e){if(e.classList.contains("js-visual-token")){var t=e.querySelector(".name"),n=e.querySelector(".operator"),i=e.querySelector(".value"),a=e.querySelector(".value-container"),o=i&&i.dataset.symbol?i.dataset.symbol:"",s="",l="";n&&(l=n.textContent.trim()),a&&a.dataset.originalValue?s=a.dataset.originalValue:i&&i.innerText&&(s=i.innerText),-1!==e.className.indexOf("filtered-search-token")?r.push("".concat(t.innerText.toLowerCase(),":").concat(l).concat(o).concat(s)):r.push(t.innerText)}else if(e.classList.contains("input-token")){var c=H.getLastVisualTokenBeforeInput().isLastVisualTokenValid,d=u.a.container.querySelector(".filtered-search"),h=d&&d.value;if(c)r.push(h);else{var p=r.pop();r.push("".concat(p).concat(h))}}})),r.map((function(e){return e.trim()})).join(" ")}},{key:"getSearchInput",value:function(t){var n=t.value,r=e.getInputSelectionPosition(t).right;return n.slice(0,r)}},{key:"getInputSelectionPosition",value:function(e){var t=e.selectionStart,n=e.value,r=(n=n.replace(/(('[^']*'{0,1})|("[^"]*"{0,1})|:\s+)/g,(function(e){return e.replace(/\s/g,"_")}))).slice(t).search(/\s/);r>=0?r+=t:r<0&&(r=n.length);var i=n.slice(0,r).search(/\S+$/);return 0===t?i=0:t===n.length&&i<0?i=n.length:i<0&&(i=t),{left:i,right:r}}}],(n=null)&&z(t.prototype,n),r&&z(t,r),e}();function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Y=function(){function e(t){var n=t.droplab,r=t.dropdown,i=t.input,a=t.filter;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.droplab=n,this.hookId=i&&i.id,this.input=i,this.filter=a,this.dropdown=r,this.loadingTemplate='<div class="filter-dropdown-loading">\n      <span class="spinner"></span>\n    </div>',this.bindEvents()}var t,n,r;return t=e,(n=[{key:"bindEvents",value:function(){this.itemClickedWrapper=this.itemClicked.bind(this),this.dropdown.addEventListener("click.dl",this.itemClickedWrapper)}},{key:"unbindEvents",value:function(){this.dropdown.removeEventListener("click.dl",this.itemClickedWrapper)}},{key:"getCurrentHook",value:function(){var e=this;return this.droplab.hooks.filter((function(t){return t.id===e.hookId}))[0]||null}},{key:"itemClicked",value:function(e,t){var n=e.detail.selected;if("LI"===n.tagName&&n.innerHTML){var r=H.getLastVisualTokenBeforeInput().lastVisualToken,i=Q.getVisualTokenValues(r).tokenOperator;if(!Q.setDataValueIfSelected(this.filter,i,n)){var a=t(n);st.addWordToInput({tokenName:this.filter,tokenOperator:i,tokenValue:a,clicked:!0})}this.resetFilters(),this.dismissDropdown(),this.dispatchInputEvent()}}},{key:"setAsDropdown",value:function(){this.input.setAttribute("data-dropdown-trigger","#".concat(this.dropdown.id))}},{key:"setOffset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;window.innerWidth>480?this.dropdown.style.left="".concat(e,"px"):this.dropdown.style.left="0px"}},{key:"renderContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.getCurrentHook();e&&t&&t.list.hidden&&t.list.show()}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.setAsDropdown();var n=this.getCurrentHook(),r=null===n;r||e?this.renderContent(t):n.list.list.id!==this.dropdown.id&&this.renderContent(t)}},{key:"dismissDropdown",value:function(){this.input.focus()}},{key:"dispatchInputEvent",value:function(){this.input.dispatchEvent(new CustomEvent("input",{bubbles:!0,cancelable:!0}))}},{key:"dispatchFormSubmitEvent",value:function(){this.input.form.dispatchEvent(new Event("submit"))}},{key:"hideDropdown",value:function(){var e=this.getCurrentHook();e&&e.list.hide()}},{key:"resetFilters",value:function(){var e=this.getCurrentHook();if(e){var t=e.list.data||[];if(!t)return;var n=t.map((function(e){var t=e;return t.droplab_hidden=!1,t}));e.list.render(n)}}}])&&J(t.prototype,n),r&&J(t,r),e}();function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ee(e,t){return!t||"object"!==Z(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function te(e,t,n){return(te="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ne(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ie=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=n.input,i=n.tokenKeys;return(e=ee(this,ne(t).call(this,n))).config={Filter:{template:"hint",filterFunction:Q.filterHint.bind(null,{input:r,allowedKeys:i.getKeys()})}},e.tokenKeys=i,e}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}(t,e),n=t,(r=[{key:"itemClicked",value:function(e){var t=e.detail.selected;if("LI"===t.tagName)if(t.hasAttribute("data-value"))this.dismissDropdown();else if("submit"===t.getAttribute("data-action"))this.dismissDropdown(),this.dispatchFormSubmitEvent();else{var n=t.closest(".filter-dropdown-item").dataset,r=n.hint;if(n.tag.length){var i=this.input.value.split(" "),a=[];i.forEach((function(e,t){a.push(e),t===i.length-1&&-1!==r.indexOf(e.toLowerCase())&&a.pop()})),a.length>0&&H.addSearchVisualToken(a.join(" "));var o=r.replace(":",""),s=this.tokenKeys.searchByKey(o).uppercaseTokenName;st.addWordToInput({tokenName:o,clicked:!1,options:{uppercaseTokenName:s}})}this.dismissDropdown(),this.dispatchInputEvent()}}},{key:"renderContent",value:function(){var e=[{hint:"search",tag:"search",formattedKey:Object(j.a)("Search for this text"),icon:"".concat(gon.sprite_icons,"#search")}],n=this.tokenKeys.get().map((function(e){return{icon:"".concat(gon.sprite_icons,"#").concat(e.icon),hint:e.key,tag:":".concat(e.tag),type:e.type,formattedKey:e.formattedKey}})).concat(e);this.droplab.changeHookList(this.hookId,this.dropdown,[D],this.config),this.droplab.setData(this.hookId,n),te(ne(t.prototype),"renderContent",this).call(this)}},{key:"init",value:function(){this.droplab.addHook(this.input,this.dropdown,[D],this.config).init()}}])&&X(n.prototype,r),i&&X(n,i),t}(Y),ae={init:function(e){this.destroyed=!1,this.hook=e,this.notLoading(),this.eventWrapper={},this.eventWrapper.debounceTrigger=this.debounceTrigger.bind(this),this.hook.trigger.addEventListener("keydown.dl",this.eventWrapper.debounceTrigger),this.hook.trigger.addEventListener("focus",this.eventWrapper.debounceTrigger),this.trigger(!0)},notLoading:function(){this.loading=!1},debounceTrigger:function(e){var t=[16,17,18,20,37,38,39,40,91,93].indexOf(e.detail.which||e.detail.keyCode)>-1,n="focus"===e.type;t||this.loading||(this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(this.trigger.bind(this,n),200))},trigger:function(e){var t=this,n=this.hook.config.AjaxFilter,r=this.trigger.value;if(n&&n.endpoint&&n.searchKey){if(n.searchValueFunction&&(r=n.searchValueFunction()),n.loadingTemplate&&void 0===this.hook.list.data||0===this.hook.list.data.length){var i=this.hook.list.list.querySelector("[data-dynamic]"),a=document.createElement("div");a.innerHTML=n.loadingTemplate,a.setAttribute("data-loading-template",!0),this.listTemplate=i.outerHTML,i.outerHTML=a.outerHTML}if(e&&(r=""),n.searchKey===r)return this.list.show();this.loading=!0;var o=n.params||{};o[n.searchKey]=r;var s=n.endpoint+this.buildParams(o);return K.a.retrieve(s).then((function(e){t._loadData(e,n),n.onLoadingFinished&&n.onLoadingFinished(e)})).catch(n.onError)}},_loadData:function(e,t){var n=this.hook.list;if(t.loadingTemplate&&void 0===n.data||0===n.data.length){var r=n.list.querySelector("[data-loading-template]");r&&(r.outerHTML=this.listTemplate)}if(!this.destroyed){var i=n.list.children;1===i.length&&i[0].hasAttribute("data-dynamic")&&0===e.length&&n.hide(),n.setData.call(n,e)}this.notLoading(),n.currentIndex=0},buildParams:function(e){return e?"?"+Object.keys(e).map((function(t){return t+"="+(e[t]||"")})).join("&"):""},destroy:function(){this.timeout&&clearTimeout(this.timeout),this.destroyed=!0,this.hook.trigger.removeEventListener("keydown.dl",this.eventWrapper.debounceTrigger),this.hook.trigger.removeEventListener("focus",this.eventWrapper.debounceTrigger)}};function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function le(e,t){return!t||"object"!==oe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ce(e,t,n){return(ce="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ue(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function ue(e){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function de(e,t){return(de=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var he=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=n.tokenKeys,i=n.endpoint,a=n.symbol;return(e=le(this,ue(t).call(this,n))).tokenKeys=r,e.endpoint=i,e.symbol=a,e.config={AjaxFilter:e.ajaxFilterConfig()},e}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&de(e,t)}(t,e),n=t,(r=[{key:"ajaxFilterConfig",value:function(){return{endpoint:"".concat(gon.relative_url_root||"").concat(this.endpoint),searchKey:"search",searchValueFunction:this.getSearchInput.bind(this),loadingTemplate:this.loadingTemplate,onError:function(){Object(c.a)(Object(j.a)("An error occurred fetching the dropdown data."))}}}},{key:"itemClicked",value:function(e){ce(ue(t.prototype),"itemClicked",this).call(this,e,(function(e){return e.querySelector(".dropdown-light-content").innerText.trim()}))}},{key:"renderContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.droplab.changeHookList(this.hookId,this.dropdown,[ae],this.config),ce(ue(t.prototype),"renderContent",this).call(this,e)}},{key:"getSearchInput",value:function(){var e=Q.getSearchInput(this.input),t=v.processTokens(e,this.tokenKeys.getKeys()).lastToken||"";return t[0]===this.symbol&&(t=t.slice(1)),'"'!==t[0]&&"'"!==t[0]||(t=t.slice(1)),t}},{key:"init",value:function(){this.droplab.addHook(this.input,this.dropdown,[ae],this.config).init()}}])&&se(n.prototype,r),i&&se(n,i),t}(Y);function pe(e){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){ye(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ge(e,t){return!t||"object"!==pe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function me(e,t,n){return(me="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ke(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function ke(e){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function we(e,t){return(we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Se=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ge(this,ke(t).call(this,ve({},e,{endpoint:"/autocomplete/users.json",symbol:"@"})))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}(t,e),n=t,(r=[{key:"ajaxFilterConfig",value:function(){var e=this;return ve({},me(ke(t.prototype),"ajaxFilterConfig",this).call(this),{params:ve({active:!0,group_id:this.getGroupId(),project_id:this.getProjectId(),current_user:!0},this.projectOrGroupId()),onLoadingFinished:function(){e.hideCurrentUser()}})}},{key:"hideCurrentUser",value:function(){Object(_.a)(this.dropdown.querySelector(".js-current-user"),"hidden")}},{key:"getGroupId",value:function(){return this.input.getAttribute("data-group-id")}},{key:"getProjectId",value:function(){return this.input.getAttribute("data-project-id")}},{key:"projectOrGroupId",value:function(){var e=this.getProjectId(),t=this.getGroupId();return t?{group_id:t}:{project_id:e}}}])&&be(n.prototype,r),i&&be(n,i),t}(he),Te={_loadData:function(e,t,n){if(t.loadingTemplate){var r=n.hook.list.list.querySelector("[data-loading-template]");r&&(r.outerHTML=n.listTemplate)}n.destroyed||n.hook.list[t.method].call(n.hook.list,e)},preprocessing:function(e,t){var n=t;return e.preprocessing&&!t.preprocessed&&(n=e.preprocessing(t),K.a.override(e.endpoint,n)),n},init:function(e){var t=this;t.destroyed=!1;var n=e.config.Ajax;if(this.hook=e,n&&n.endpoint&&n.method&&("setData"===n.method||"addData"===n.method)){if(n.loadingTemplate){var r=e.list.list.querySelector("[data-dynamic]"),i=document.createElement("div");i.innerHTML=n.loadingTemplate,i.setAttribute("data-loading-template",""),this.listTemplate=r.outerHTML,r.outerHTML=i.outerHTML}return K.a.retrieve(n.endpoint).then(t.preprocessing.bind(null,n)).then((function(e){return t._loadData(e,n,t)})).catch(n.onError)}},destroy:function(){this.destroyed=!0}};function Ee(e){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Oe(e,t){return!t||"object"!==Ee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ce(e,t,n){return(Ce="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Le(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Le(e){return(Le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ie(e,t){return(Ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Pe=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=n.input,i=n.endpoint,a=n.symbol,o=n.preprocessing;return(e=Oe(this,Le(t).call(this,n))).symbol=a,e.config={Ajax:{endpoint:i,method:"setData",loadingTemplate:e.loadingTemplate,preprocessing:o,onError:function(){new c.a(Object(j.a)("An error occurred fetching the dropdown data."))}},Filter:{filterFunction:Q.filterWithSymbol.bind(null,e.symbol,r),template:"title"}},e}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ie(e,t)}(t,e),n=t,(r=[{key:"itemClicked",value:function(e){var n=this;Ce(Le(t.prototype),"itemClicked",this).call(this,e,(function(e){var t=e.querySelector(".js-data-value").innerText.trim();return"".concat(n.symbol).concat(Q.getEscapedText(t))}))}},{key:"renderContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.droplab.changeHookList(this.hookId,this.dropdown,[Te,D],this.config),Ce(Le(t.prototype),"renderContent",this).call(this,e)}},{key:"init",value:function(){this.droplab.addHook(this.input,this.dropdown,[Te,D],this.config).init()}}])&&je(n.prototype,r),i&&je(n,i),t}(Y);n(78);function _e(e){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function De(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ae(e,t){return!t||"object"!==_e(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ve(e,t,n){return(Ve="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=qe(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function qe(e){return(qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fe(e,t){return(Fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ke=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Ae(this,qe(t).call(this,r))).config={Ajax:{endpoint:"".concat(gon.relative_url_root||"","/autocomplete/award_emojis"),method:"setData",loadingTemplate:e.loadingTemplate,onError:function(){new c.a(Object(j.a)("An error occurred fetching the dropdown data."))}},Filter:{template:"name"}},Promise.resolve().then(n.bind(null,447)).then((function(t){var n=t.glEmojiTag;e.glEmojiTag=n})).catch((function(){})),e.unbindEvents(),e.bindEvents(),e}var r,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fe(e,t)}(t,e),r=t,(i=[{key:"bindEvents",value:function(){Ve(qe(t.prototype),"bindEvents",this).call(this),this.listRenderedWrapper=this.listRendered.bind(this),this.dropdown.addEventListener("render.dl",this.listRenderedWrapper)}},{key:"unbindEvents",value:function(){this.dropdown.removeEventListener("render.dl",this.listRenderedWrapper),Ve(qe(t.prototype),"unbindEvents",this).call(this)}},{key:"listRendered",value:function(){this.replaceEmojiElement()}},{key:"itemClicked",value:function(e){Ve(qe(t.prototype),"itemClicked",this).call(this,e,(function(e){var t=e.querySelector(".js-data-value").innerText.trim();return Q.getEscapedText(t)}))}},{key:"renderContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.droplab.changeHookList(this.hookId,this.dropdown,[Te,D],this.config),Ve(qe(t.prototype),"renderContent",this).call(this,e)}},{key:"replaceEmojiElement",value:function(){var e=this;this.glEmojiTag&&De(this.dropdown.querySelectorAll(".filter-dropdown-item")).forEach((function(t){var n=t.querySelector(".js-data-value");if(null!==n){var r=n.innerText,i=e.glEmojiTag(r);t.querySelector("gl-emoji").outerHTML=i}}))}},{key:"init",value:function(){this.droplab.addHook(this.input,this.dropdown,[Te,D],this.config).init()}}])&&xe(r.prototype,i),a&&xe(r,a),t}(Y);function Re(e){return(Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function We(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Be(e,t){return!t||"object"!==Re(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $e(e,t,n){return($e="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ne(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Ne(e){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Me(e,t){return(Me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ue=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Be(this,Ne(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Me(e,t)}(t,e),n=t,(r=[{key:"renderContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.droplab.changeHookList(this.hookId,this.dropdown,[],this.config),$e(Ne(t.prototype),"renderContent",this).call(this,e)}}])&&We(n.prototype,r),i&&We(n,i),t}(Y);function He(e){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ze(e,t){return!t||"object"!==He(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qe(e,t,n){return(Qe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Je(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Je(e){return(Je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ye(e,t){return(Ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ze=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=n.input,i=n.tokenKeys;return(e=ze(this,Je(t).call(this,n))).config={Filter:{filterFunction:Q.filterWithSymbol.bind(null,"",r),template:"title"}},e.tokenKeys=i,e}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ye(e,t)}(t,e),n=t,(r=[{key:"itemClicked",value:function(e){var t=e.detail.selected;if("LI"===t.tagName&&t.hasAttribute("data-value")){var n=t.dataset.value;H.removeLastTokenPartial(),st.addWordToInput({tokenName:this.filter,tokenOperator:n,clicked:!1})}this.dismissDropdown(),this.dispatchInputEvent()}},{key:"renderContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.filter=H.getLastTokenPartial();var n=[{tag:"equal",type:"string",title:"=",help:Object(j.a)("is")},{tag:"not-equal",type:"string",title:"!=",help:Object(j.a)("is not")}];this.droplab.changeHookList(this.hookId,this.dropdown,[D],this.config),this.droplab.setData(this.hookId,n),Qe(Je(t.prototype),"renderContent",this).call(this,e)}},{key:"init",value:function(){this.droplab.addHook(this.input,this.dropdown,[D],this.config).init()}}])&&Ge(n.prototype,r),i&&Ge(n,i),t}(Y);function Xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function et(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var nt=function(){function e(t){var n=t.container,r=t.runnerTagsEndpoint,i=t.labelsEndpoint,a=t.milestonesEndpoint,o=t.releasesEndpoint,s=t.groupsOnly,l=t.includeAncestorGroups,c=t.includeDescendantGroups;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=n,this.runnerTagsEndpoint=r,this.labelsEndpoint=i,this.milestonesEndpoint=a,this.releasesEndpoint=o,this.groupsOnly=s,this.includeAncestorGroups=l,this.includeDescendantGroups=c,this.filteredSearchInput=this.container.querySelector(".filtered-search")}var t,n,r;return t=e,(n=[{key:"getAllowedMappings",value:function(e){return this.buildMappings(e,this.getMappings())}},{key:"buildMappings",value:function(e,t){var n={hint:{reference:null,gl:ie,element:this.container.querySelector("#js-dropdown-hint")},operator:{reference:null,gl:Ze,element:this.container.querySelector("#js-dropdown-operator")}};return e.forEach((function(e){t[e]&&(n[e]=t[e])})),n}},{key:"getMappings",value:function(){return{author:{reference:null,gl:Se,element:this.container.querySelector("#js-dropdown-author")},assignee:{reference:null,gl:Se,element:this.container.querySelector("#js-dropdown-assignee")},milestone:{reference:null,gl:Pe,extraArguments:{endpoint:this.getMilestoneEndpoint(),symbol:"%"},element:this.container.querySelector("#js-dropdown-milestone")},release:{reference:null,gl:Pe,extraArguments:{endpoint:this.getReleasesEndpoint(),symbol:"",preprocessing:function(e){return e.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(n),!0).forEach((function(t){et(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{title:e.tag})}))}},element:this.container.querySelector("#js-dropdown-release")},label:{reference:null,gl:Pe,extraArguments:{endpoint:this.getLabelsEndpoint(),symbol:"~",preprocessing:Q.duplicateLabelPreprocessing},element:this.container.querySelector("#js-dropdown-label")},"my-reaction":{reference:null,gl:Ke,element:this.container.querySelector("#js-dropdown-my-reaction")},wip:{reference:null,gl:Pe,element:this.container.querySelector("#js-dropdown-wip")},confidential:{reference:null,gl:Pe,element:this.container.querySelector("#js-dropdown-confidential")},status:{reference:null,gl:Ue,element:this.container.querySelector("#js-dropdown-admin-runner-status")},type:{reference:null,gl:Ue,element:this.container.querySelector("#js-dropdown-admin-runner-type")},tag:{reference:null,gl:he,extraArguments:{endpoint:this.getRunnerTagsEndpoint(),symbol:"~"},element:this.container.querySelector("#js-dropdown-runner-tag")},"target-branch":{reference:null,gl:Pe,extraArguments:{endpoint:this.getMergeRequestTargetBranchesEndpoint(),symbol:""},element:this.container.querySelector("#js-dropdown-target-branch")}}}},{key:"getMilestoneEndpoint",value:function(){return"".concat(this.milestonesEndpoint,".json")}},{key:"getReleasesEndpoint",value:function(){return"".concat(this.releasesEndpoint,".json")}},{key:"getLabelsEndpoint",value:function(){var e="".concat(this.labelsEndpoint,".json?");return this.groupsOnly&&(e="".concat(e,"only_group_labels=true&")),this.includeAncestorGroups&&(e="".concat(e,"include_ancestor_groups=true&")),this.includeDescendantGroups&&(e="".concat(e,"include_descendant_groups=true")),e}},{key:"getRunnerTagsEndpoint",value:function(){return"".concat(this.runnerTagsEndpoint,".json")}},{key:"getMergeRequestTargetBranchesEndpoint",value:function(){var e="".concat(gon.relative_url_root||"","/autocomplete/merge_request_target_branches.json"),t={group_id:this.getGroupId(),project_id:this.getProjectId()};return Object(l.h)(t,e)}},{key:"getGroupId",value:function(){return this.filteredSearchInput.getAttribute("data-group-id")||""}},{key:"getProjectId",value:function(){return this.filteredSearchInput.getAttribute("data-project-id")||""}}])&&tt(t.prototype,n),r&&tt(t,r),e}(),rt=n(259);function it(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function at(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var st=function(){function e(t){var n=t.runnerTagsEndpoint,r=void 0===n?"":n,i=t.labelsEndpoint,a=void 0===i?"":i,o=t.milestonesEndpoint,s=void 0===o?"":o,l=t.releasesEndpoint,c=void 0===l?"":l,d=t.epicsEndpoint,h=void 0===d?"":d,f=t.tokenizer,v=t.page,y=t.isGroup,b=t.isGroupAncestor,g=t.isGroupDecendent,m=t.filteredSearchTokenKeys;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var k=function(e){return e.replace(/\/$/,"")};this.container=u.a.container,this.runnerTagsEndpoint=k(r),this.labelsEndpoint=k(a),this.milestonesEndpoint=k(s),this.releasesEndpoint=k(c),this.epicsEndpoint=k(h),this.tokenizer=f,this.filteredSearchTokenKeys=m||p.a,this.filteredSearchInput=this.container.querySelector(".filtered-search"),this.page=v,this.groupsOnly=y,this.includeAncestorGroups=b,this.includeDescendantGroups=g,this.setupMapping(),this.cleanupWrapper=this.cleanup.bind(this),document.addEventListener("beforeunload",this.cleanupWrapper)}var t,n,r;return t=e,r=[{key:"addWordToInput",value:function(e){var t=e.tokenName,n=e.tokenOperator,r=void 0===n?"":n,i=e.tokenValue,a=void 0===i?"":i,o=e.clicked,s=void 0!==o&&o,l=e.options,c=void 0===l?{}:l,d=c.uppercaseTokenName,h=void 0!==d&&d,p=c.capitalizeTokenValue,f=void 0!==p&&p,v=u.a.container.querySelector(".filtered-search");H.addFilterVisualToken(t,r,a,{uppercaseTokenName:h,capitalizeTokenValue:f}),v.value="",s&&H.moveInputToTheRight()}}],(n=[{key:"cleanup",value:function(){this.droplab&&(this.droplab.destroy(),this.droplab=null),this.setupMapping(),document.removeEventListener("beforeunload",this.cleanupWrapper)}},{key:"setupMapping",value:function(){var e=this.filteredSearchTokenKeys.getKeys(),t=new nt(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?it(Object(n),!0).forEach((function(t){at(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):it(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this));this.mapping=t.getAllowedMappings(e)}},{key:"updateCurrentDropdownOffset",value:function(){this.updateDropdownOffset(this.currentDropdown)}},{key:"updateDropdownOffset",value:function(e){var t=this.filteredSearchInput.getBoundingClientRect().left-this.container.querySelector(".scroll-container").getBoundingClientRect().left,n=this.mapping[e].element.clientWidth||240,r=this.container.querySelector(".scroll-container").clientWidth-n;r<t&&(t=r),this.mapping[e].reference.setOffset(t)}},{key:"load",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.mapping[e],r=n.gl,i=n.element,a=!1;if(!n.reference){var o={droplab:this.droplab,dropdown:i,input:this.filteredSearchInput,tokenKeys:this.filteredSearchTokenKeys,filter:e},s=n.extraArguments||{},l=Object.assign({},o,s);n.reference=new(Function.prototype.bind.apply(r,[null,l]))}t&&n.reference.init(),this.currentDropdown!==q&&this.currentDropdown!==F||(a=!0),this.updateDropdownOffset(e),n.reference.render(t,a),this.currentDropdown=e}},{key:"loadDropdown",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=!1;if(this.droplab||(t=!0,this.droplab=new rt.a),e!==F){var n=this.filteredSearchTokenKeys.searchByKey(e.toLowerCase()),r=n&&this.currentDropdown!==n.key&&this.mapping[n.key],i=!n&&this.currentDropdown!==q;if(r||i){var a=n&&n.key?n.key:q;this.load(a,t)}}else this.load(e,t)}},{key:"setDropdown",value:function(){var e=Q.getSearchQuery(!0),t=this.tokenizer.processTokens(e,this.filteredSearchTokenKeys.getKeys()),n=t.lastToken,r=t.searchToken;if(this.currentDropdown&&this.updateCurrentDropdownOffset(),n===r&&null!==n){var a=n.split(":"),o=i()(a[0].split(" ")),s=i()(a[1]),l=H.permissibleOperatorValues.includes(s&&s.trim()),c="";if(a.length>1){var u=H.getLastTokenOperator();c=l&&u?o:F}this.loadDropdown(c)}else if(n){var d=H.getLastTokenOperator();this.loadDropdown(d?n.key:F)}else this.loadDropdown(q)}},{key:"resetDropdowns",value:function(){this.currentDropdown&&(this.mapping[this.currentDropdown].reference.hideDropdown(),this.setDropdown(),this.mapping[this.currentDropdown].reference.resetFilters(),this.updateDropdownOffset(this.currentDropdown))}},{key:"destroyDroplab",value:function(){this.droplab.destroy()}}])&&ot(t.prototype,n),r&&ot(t,r),e}(),lt=n(355);function ct(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var dt=function(){function e(t){var n=t.page,r=t.isGroup,i=void 0!==r&&r,o=t.isGroupAncestor,l=void 0===o||o,c=t.isGroupDecendent,d=void 0!==c&&c,h=t.filteredSearchTokenKeys,p=void 0===h?s.a:h,f=t.stateFiltersSelector,v=void 0===f?".issues-state-filters":f;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isGroup=i,this.isGroupAncestor=l,this.isGroupDecendent=d,this.states=["opened","closed","merged","all"],this.page=n,this.container=u.a.container,this.filteredSearchInput=this.container.querySelector(".filtered-search"),this.filteredSearchInputForm=this.filteredSearchInput.form,this.clearSearchButton=this.container.querySelector(".clear-search"),this.tokensContainer=this.container.querySelector(".tokens-container"),this.filteredSearchTokenKeys=p,this.stateFiltersSelector=v,this.filteredSearchInput.dataset.multipleAssignees&&this.filteredSearchTokenKeys.enableMultipleAssignees&&this.filteredSearchTokenKeys.enableMultipleAssignees(),!this.filteredSearchInput.dataset.epicsEndpoint&&this.filteredSearchTokenKeys.removeEpicToken&&this.filteredSearchTokenKeys.removeEpicToken(),this.recentSearchesStore=new E({isLocalStorageAvailable:P.isAvailable(),allowedKeys:this.filteredSearchTokenKeys.getKeys()}),this.searchHistoryDropdownElement=document.querySelector(".js-filtered-search-history-dropdown");var y=this.searchHistoryDropdownElement?this.searchHistoryDropdownElement.dataset.fullPath:"project",b="".concat(y,"-").concat(a[this.page]);this.recentSearchesService=new P(b)}var t,n,r;return t=e,(n=[{key:"setup",value:function(){var e=this;if(this.fetchingRecentSearchesPromise=this.recentSearchesService.fetch().catch((function(e){if("RecentSearchesServiceError"!==e.name)return new c.a(Object(j.a)("An error occurred while parsing recent searches")),[]})).then((function(t){if(t){var n=e.recentSearchesStore.setRecentSearches(e.recentSearchesStore.state.recentSearches.concat(t));e.recentSearchesService.save(n)}})),this.filteredSearchInput){this.tokenizer=v;var t=this.filteredSearchInput.dataset,n=t.runnerTagsEndpoint,r=void 0===n?"":n,i=t.labelsEndpoint,a=void 0===i?"":i,o=t.milestonesEndpoint,s=void 0===o?"":o,l=t.releasesEndpoint,u=void 0===l?"":l,d=t.epicsEndpoint,h=void 0===d?"":d;this.dropdownManager=new st({runnerTagsEndpoint:r,labelsEndpoint:a,milestonesEndpoint:s,releasesEndpoint:u,epicsEndpoint:h,tokenizer:this.tokenizer,page:this.page,isGroup:this.isGroup,isGroupAncestor:this.isGroupAncestor,isGroupDecendent:this.isGroupDecendent,filteredSearchTokenKeys:this.filteredSearchTokenKeys}),this.recentSearchesRoot=new k(this.recentSearchesStore,this.recentSearchesService,this.searchHistoryDropdownElement),this.recentSearchesRoot.init(),this.bindEvents(),this.loadSearchParamsFromURL(),this.dropdownManager.setDropdown(),this.cleanupWrapper=this.cleanup.bind(this),document.addEventListener("beforeunload",this.cleanupWrapper)}}},{key:"cleanup",value:function(){this.unbindEvents(),document.removeEventListener("beforeunload",this.cleanupWrapper),this.recentSearchesRoot&&this.recentSearchesRoot.destroy()}},{key:"bindStateEvents",value:function(){var e=this;this.stateFilters=document.querySelector(".container-fluid ".concat(this.stateFiltersSelector)),this.stateFilters&&(this.searchStateWrapper=this.searchState.bind(this),this.applyToStateFilters((function(t){t.addEventListener("click",e.searchStateWrapper)})))}},{key:"unbindStateEvents",value:function(){var e=this;this.stateFilters&&this.applyToStateFilters((function(t){t.removeEventListener("click",e.searchStateWrapper)}))}},{key:"applyToStateFilters",value:function(e){var t=this;this.stateFilters.querySelectorAll("a[data-state]").forEach((function(n){t.states.indexOf(n.dataset.state)>-1&&e(n)}))}},{key:"bindEvents",value:function(){this.handleFormSubmit=this.handleFormSubmit.bind(this),this.setDropdownWrapper=this.dropdownManager.setDropdown.bind(this.dropdownManager),this.toggleClearSearchButtonWrapper=this.toggleClearSearchButton.bind(this),this.handleInputPlaceholderWrapper=this.handleInputPlaceholder.bind(this),this.handleInputVisualTokenWrapper=this.handleInputVisualToken.bind(this),this.checkForEnterWrapper=this.checkForEnter.bind(this),this.onClearSearchWrapper=this.onClearSearch.bind(this),this.checkForBackspaceWrapper=this.checkForBackspace.call(this),this.removeSelectedTokenKeydownWrapper=this.removeSelectedTokenKeydown.bind(this),this.unselectEditTokensWrapper=this.unselectEditTokens.bind(this),this.editTokenWrapper=this.editToken.bind(this),this.tokenChange=this.tokenChange.bind(this),this.addInputContainerFocusWrapper=this.addInputContainerFocus.bind(this),this.removeInputContainerFocusWrapper=this.removeInputContainerFocus.bind(this),this.onrecentSearchesItemSelectedWrapper=this.onrecentSearchesItemSelected.bind(this),this.removeTokenWrapper=this.removeToken.bind(this),this.filteredSearchInputForm.addEventListener("submit",this.handleFormSubmit),this.filteredSearchInput.addEventListener("input",this.setDropdownWrapper),this.filteredSearchInput.addEventListener("input",this.toggleClearSearchButtonWrapper),this.filteredSearchInput.addEventListener("input",this.handleInputPlaceholderWrapper),this.filteredSearchInput.addEventListener("keyup",this.handleInputVisualTokenWrapper),this.filteredSearchInput.addEventListener("keydown",this.checkForEnterWrapper),this.filteredSearchInput.addEventListener("keyup",this.checkForBackspaceWrapper),this.filteredSearchInput.addEventListener("click",this.tokenChange),this.filteredSearchInput.addEventListener("keyup",this.tokenChange),this.filteredSearchInput.addEventListener("focus",this.addInputContainerFocusWrapper),this.tokensContainer.addEventListener("click",this.removeTokenWrapper),this.tokensContainer.addEventListener("click",this.editTokenWrapper),this.clearSearchButton.addEventListener("click",this.onClearSearchWrapper),document.addEventListener("click",this.unselectEditTokensWrapper),document.addEventListener("click",this.removeInputContainerFocusWrapper),document.addEventListener("keydown",this.removeSelectedTokenKeydownWrapper),h.$on("recentSearchesItemSelected",this.onrecentSearchesItemSelectedWrapper),this.bindStateEvents()}},{key:"unbindEvents",value:function(){this.filteredSearchInputForm.removeEventListener("submit",this.handleFormSubmit),this.filteredSearchInput.removeEventListener("input",this.setDropdownWrapper),this.filteredSearchInput.removeEventListener("input",this.toggleClearSearchButtonWrapper),this.filteredSearchInput.removeEventListener("input",this.handleInputPlaceholderWrapper),this.filteredSearchInput.removeEventListener("keyup",this.handleInputVisualTokenWrapper),this.filteredSearchInput.removeEventListener("keydown",this.checkForEnterWrapper),this.filteredSearchInput.removeEventListener("keyup",this.checkForBackspaceWrapper),this.filteredSearchInput.removeEventListener("click",this.tokenChange),this.filteredSearchInput.removeEventListener("keyup",this.tokenChange),this.filteredSearchInput.removeEventListener("focus",this.addInputContainerFocusWrapper),this.tokensContainer.removeEventListener("click",this.removeTokenWrapper),this.tokensContainer.removeEventListener("click",this.editTokenWrapper),this.clearSearchButton.removeEventListener("click",this.onClearSearchWrapper),document.removeEventListener("click",this.unselectEditTokensWrapper),document.removeEventListener("click",this.removeInputContainerFocusWrapper),document.removeEventListener("keydown",this.removeSelectedTokenKeydownWrapper),h.$off("recentSearchesItemSelected",this.onrecentSearchesItemSelectedWrapper),this.unbindStateEvents()}},{key:"checkForBackspace",value:function(){var e=this,t=0;return function(n){if(8===n.keyCode||46===n.keyCode){var r=H.getLastVisualTokenBeforeInput().lastVisualToken,i=Q.getVisualTokenValues(r),a=i.tokenName,o=i.tokenValue,s=a&&e.canEdit&&e.canEdit(a,o);""===e.filteredSearchInput.value&&r&&s&&2===(t+=1)&&(t=0,e.filteredSearchInput.value=H.getLastTokenPartial(!0),H.removeLastTokenPartial()),e.dropdownManager.updateCurrentDropdownOffset()}else t=0}}},{key:"checkForEnter",value:function(e){if(38===e.keyCode||40===e.keyCode){var t=this.filteredSearchInput.selectionStart;e.preventDefault(),this.filteredSearchInput.setSelectionRange(t,t)}if(13===e.keyCode){var n=this.dropdownManager.mapping[this.dropdownManager.currentDropdown].element.querySelectorAll(".droplab-item-active");e.preventDefault(),n.length||(this.isHandledAsync?(e.stopImmediatePropagation(),this.filteredSearchInput.blur(),this.dropdownManager.resetDropdowns()):this.dropdownManager.destroyDroplab(),this.search())}}},{key:"addInputContainerFocus",value:function(){Object(_.a)(this.filteredSearchInput.closest(".filtered-search-box"),"focus")}},{key:"removeInputContainerFocus",value:function(e){var t=this.filteredSearchInput.closest(".filtered-search-box"),n=t&&t.contains(e.target),r=null!==e.target.closest(".filter-dropdown"),i=null!==e.target.closest("ul[data-dropdown]");n||r||i||!t||t.classList.remove("focus")}},{key:"removeToken",value:function(e){if(e.target.closest(".remove-token")){e.preventDefault(),e.stopImmediatePropagation();var t=e.target.closest(".selectable");H.selectToken(t,!0),this.removeSelectedToken()}}},{key:"unselectEditTokens",value:function(e){var t=this.container.querySelector(".filtered-search-box"),n=t&&t.contains(e.target),r=null!==e.target.closest(".filter-dropdown"),i=e.target.classList.contains("tokens-container");(!n&&!r||i)&&(H.moveInputToTheRight(),this.dropdownManager.resetDropdowns())}},{key:"editToken",value:function(e){var t=e.target.closest(".js-visual-token"),n=t&&t.querySelector(".name").textContent.trim(),r=this.canEdit&&this.canEdit(n);t&&r&&(e.preventDefault(),e.stopPropagation(),H.editToken(t),this.tokenChange())}},{key:"toggleClearSearchButton",value:function(){var e=Q.getSearchQuery(),t=this.clearSearchButton.classList.contains("hidden");0!==e.length||t?e.length&&t&&this.clearSearchButton.classList.remove("hidden"):this.clearSearchButton.classList.add("hidden")}},{key:"handleInputPlaceholder",value:function(){var e=Q.getSearchQuery(),t=Object(j.a)("Search or filter results..."),n=this.filteredSearchInput.placeholder;0===e.length&&n!==t?this.filteredSearchInput.placeholder=t:e.length>0&&""!==n&&(this.filteredSearchInput.placeholder="")}},{key:"removeSelectedTokenKeydown",value:function(e){8!==e.keyCode&&46!==e.keyCode||this.removeSelectedToken()}},{key:"removeSelectedToken",value:function(){H.removeSelectedToken(),this.handleInputPlaceholder(),this.toggleClearSearchButton(),this.dropdownManager.updateCurrentDropdownOffset()}},{key:"onClearSearch",value:function(e){e.preventDefault(),this.clearSearch()}},{key:"clearSearch",value:function(){var e=this;this.filteredSearchInput.value="";var t=[];[].forEach.call(this.tokensContainer.children,(function(n){var r=n.classList.contains("js-visual-token");if(r){var i=Q.getVisualTokenValues(n),a=i.tokenName,o=i.tokenValue;r=e.canEdit&&e.canEdit(a,o)}r&&t.push(n)})),t.forEach((function(e){e.parentElement.removeChild(e)})),this.clearSearchButton.classList.add("hidden"),this.handleInputPlaceholder(),this.dropdownManager.resetDropdowns(),this.isHandledAsync&&this.search()}},{key:"handleInputVisualToken",value:function(e){var t=this;if(e.keyCode!==lt.a){var n=this.filteredSearchInput,r=this.tokenizer.processTokens(n.value,this.filteredSearchTokenKeys.getKeys()),a=r.tokens,o=r.searchToken,s=H.getLastVisualTokenBeforeInput().isLastVisualTokenValid;if(s){a.forEach((function(e){n.value=n.value.replace("".concat(e.key,":").concat(e.operator).concat(e.symbol).concat(e.value),""),H.addFilterVisualToken(e.key,e.operator,"".concat(e.symbol).concat(e.value),{uppercaseTokenName:t.filteredSearchTokenKeys.shouldUppercaseTokenName(e.key),capitalizeTokenValue:t.filteredSearchTokenKeys.shouldCapitalizeTokenValue(e.key)})}));var l=o.split(":");if(l.length>1){var c=l[0].split(" "),u=i()(c);if(c.length>1){c.pop();var d=c.join(" ");n.value=n.value.replace(d,""),H.addSearchVisualToken(d)}H.addFilterVisualToken(u,null,null,{uppercaseTokenName:this.filteredSearchTokenKeys.shouldUppercaseTokenName(u),capitalizeTokenValue:this.filteredSearchTokenKeys.shouldCapitalizeTokenValue(u)}),n.value=n.value.replace("".concat(u,":"),"")}}else if(s||H.getLastTokenOperator()){if(o.match(/([~%@]{0,1}".+")|([~%@]{0,1}'.+')|^((?![~%@]')(?![~%@]")(?!')(?!")).*/g)&&" "===n.value[n.value.length-1]){var h=H.getLastTokenPartial();H.addFilterVisualToken(o,null,null,{capitalizeTokenValue:this.filteredSearchTokenKeys.shouldCapitalizeTokenValue(h)}),n.value=n.value.replace(o,"").trim()}}else{var p=H.getLastTokenPartial(),f=o&&o.trim();H.permissibleOperatorValues.includes(f)&&(H.removeLastTokenPartial(),H.addFilterVisualToken(p,f,null,{capitalizeTokenValue:this.filteredSearchTokenKeys.shouldCapitalizeTokenValue(p)}),n.value=n.value.replace(o,"").trim())}}}},{key:"handleFormSubmit",value:function(e){e.preventDefault(),this.search()}},{key:"saveCurrentSearchQuery",value:function(){var e=this;this.fetchingRecentSearchesPromise.then((function(){var t=Q.getSearchQuery();if(t.length>0){var n=e.recentSearchesStore.addRecentSearch(t);e.recentSearchesService.save(n)}})).catch((function(){}))}},{key:"getAllParams",value:function(e){return this.modifyUrlParams?this.modifyUrlParams(e):e}},{key:"transformParams",value:function(t){var n=this,r=new RegExp(/not\[(\w+)\]\[?\]?=(.*)/);return t.map((function(t){var i=t.match(r);if(i&&3===i.length){var a=i[1];if(e.notTransformableQueryParams.includes(a)||n.filteredSearchTokenKeys.searchByConditionUrl(t))return t;var o=i[2],s=encodeURIComponent("!=");return"".concat(a,"=").concat(s).concat(o)}var l=ct(t.split("="),2),c=l[0],u=l[1];if(e.notTransformableQueryParams.includes(c)||n.filteredSearchTokenKeys.searchByConditionUrl(t))return t;var d=encodeURIComponent("=");return"".concat(c,"=").concat(d).concat(u)}))}},{key:"loadSearchParamsFromURL",value:function(){var e=this,t=Object(o.p)(),n=this.transformParams(t),r=this.getAllParams(n),i=this.getUsernameParams(),a=!1;r.forEach((function(t){var n=t.split("="),r=decodeURIComponent(n[0]),o=n[1],s=e.filteredSearchTokenKeys.searchByConditionUrl(t);if(s){a=!0;var l=e.canEdit&&e.canEdit(s.tokenKey);H.addFilterVisualToken(s.tokenKey,s.operator,s.value,{canEdit:l})}else{var c=o?decodeURIComponent(o.replace(/\+/g," ")):o,u=e.filteredSearchTokenKeys.searchByKeyParam(r);if(u){var d=u.key,h=u.symbol,p="";-1!==c.indexOf(" ")&&(p=-1===c.indexOf('"')?'"':"'"),a=!0;var f=e.canEdit&&e.canEdit(d,c),v=u.uppercaseTokenName,y=u.capitalizeTokenValue,b=H.getOperatorToken(c),g=H.getValueToken(c);H.addFilterVisualToken(d,b,"".concat(h).concat(p).concat(g).concat(p),{canEdit:f,uppercaseTokenName:v,capitalizeTokenValue:y})}else if(u||"assignee_id"!==r)if(u||"author_id"!==r)u||"search"!==r||(a=!0,e.filteredSearchInput.value=c);else{var m=parseInt(o,10);if(i[m]){a=!0;var k=e.canEdit&&e.canEdit("author"),w=H.getOperatorToken(i[m]),S=H.getValueToken(i[m]);H.addFilterVisualToken("author",w,"@".concat(S),{canEdit:k})}}else{var T=parseInt(o,10);if(i[T]){a=!0;var E=e.canEdit&&e.canEdit("assignee"),j=H.getOperatorToken(i[T]),O=H.getValueToken(i[T]);H.addFilterVisualToken("assignee",j,"@".concat(O),{canEdit:E})}}}})),this.saveCurrentSearchQuery(),a&&(this.clearSearchButton.classList.remove("hidden"),this.handleInputPlaceholder())}},{key:"searchState",value:function(e){e.preventDefault();var t=e.currentTarget;t.blur();var n=t.dataset&&t.dataset.state;n&&this.search(n)}},{key:"search",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=[],r=Q.getSearchQuery();this.saveCurrentSearchQuery();var i=this.filteredSearchTokenKeys.getKeys(),a=this.tokenizer.processTokens(r,i),s=a.tokens,c=a.searchToken,u=t||Object(o.m)("state")||"opened";if(n.push("state=".concat(u)),s.forEach((function(t){var r=e.filteredSearchTokenKeys.searchByConditionKeyValue(t.key,t.operator,t.value),i=e.filteredSearchTokenKeys.searchByKey(t.key)||{},a=i.param,o=t.key.replace("-","_"),s=a?"".concat(o,"_").concat(a):o,l="";if(r)l=r.url;else{var c=t.value;if(i.lowercaseValueOnSubmit&&(c=c.toLowerCase()),("'"===c[0]&&"'"===c[c.length-1]||'"'===c[0]&&'"'===c[c.length-1])&&(c=c.slice(1,c.length-1)),"!="===t.operator){var u=s.endsWith("[]");l="not[".concat(u?s.slice(0,-2):s,"]").concat(u?"[]":"","=").concat(encodeURIComponent(c))}else l="".concat(s,"=").concat(encodeURIComponent(c))}n.push(l)})),c){var d=c.split(" ").map((function(e){return encodeURIComponent(e)})).join("+");n.push("search=".concat(d))}var h="?scope=all&utf8=%E2%9C%93&".concat(n.join("&"));this.updateObject?this.updateObject(h):Object(l.s)(h)}},{key:"getUsernameParams",value:function(){var e={};try{var t=this.filteredSearchInput.getAttribute("data-username-params");JSON.parse(t).forEach((function(t){e[t.id]=t.username}))}catch(e){}return e}},{key:"tokenChange",value:function(){var e=this.dropdownManager.mapping[this.dropdownManager.currentDropdown];if(e){var t=e.reference;this.setDropdownWrapper(),t.dispatchInputEvent()}}},{key:"onrecentSearchesItemSelected",value:function(e){this.clearSearch(),this.filteredSearchInput.value=e,this.filteredSearchInput.dispatchEvent(new CustomEvent("input")),this.search()}},{key:"canEdit",value:function(){return!0}}])&&ut(t.prototype,n),r&&ut(t,r),e}();!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(dt,"notTransformableQueryParams",["scope","utf8","state","search"])},494:function(e,t,n){"use strict";var r=n(467),i=n(343),a=n(223),o=n(546),s=n(459),l=Math.min,c=[].lastIndexOf,u=!!c&&1/[1].lastIndexOf(1,-0)<0,d=o("lastIndexOf"),h=s("indexOf",{ACCESSORS:!0,1:0}),p=u||!d||!h;e.exports=p?function(e){if(u)return c.apply(this,arguments)||0;var t=r(this),n=a(t.length),o=n-1;for(arguments.length>1&&(o=l(o,i(arguments[1]))),o<0&&(o=n+o);o>=0;o--)if(o in t&&t[o]===e)return o||0;return-1}:c},498:function(e,t,n){var r=n(108),i=n(494);r({target:"Array",proto:!0,forced:i!==[].lastIndexOf},{lastIndexOf:i})},513:function(e,t,n){"use strict";var r=new(n(17).default);t.a=r},520:function(e,t,n){"use strict";var r=n(435);t.a=function(e){var t=e.page,n=e.filteredSearchTokenKeys,i=e.isGroup,a=e.isGroupAncestor,o=e.isGroupDecendent,s=e.stateFiltersSelector;r.a&&document.querySelector(".filtered-search")&&new r.a({page:t,isGroup:i,isGroupAncestor:a,isGroupDecendent:o,filteredSearchTokenKeys:n,stateFiltersSelector:s}).setup()}},521:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={MERGE_REQUESTS:"merge_requests",ISSUES:"issues",ADMIN_RUNNERS:"admin/runners"}},73:function(e,t,n){"use strict";n(30),n(35),n(18),n(64);var r=n(0),i=n.n(r),a=n(32),o=(n(65),n(69),n(55),n(67),n(71));function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.projectSelectInput=i()(t),this.newItemBtn=i()(".new-project-item-link"),this.resourceType=this.newItemBtn.data("type"),this.resourceLabel=this.newItemBtn.data("label"),this.formattedText=this.deriveTextVariants(),this.groupId=this.projectSelectInput.data("groupId"),this.bindEvents(),this.initLocalStorage()}var t,r,a;return t=e,(r=[{key:"bindEvents",value:function(){var e=this;this.projectSelectInput.siblings(".new-project-item-select-button").on("click",(function(t){return e.openDropdown(t)})),this.newItemBtn.on("click",(function(t){e.getProjectFromLocalStorage()||(t.preventDefault(),e.openDropdown(t))})),this.projectSelectInput.on("change",(function(){return e.selectProject()}))}},{key:"initLocalStorage",value:function(){o.a.isLocalStorageAccessSafe()&&(this.localStorageKey=["group",this.groupId,this.formattedText.localStorageItemType,"recent-project"].join("-"),this.setBtnTextFromLocalStorage())}},{key:"openDropdown",value:function(e){n.e(239).then(n.t.bind(null,428,7)).then((function(){i()(e.currentTarget).siblings(".project-item-select").select2("open")})).catch((function(){}))}},{key:"selectProject",value:function(){var e=JSON.parse(this.projectSelectInput.val()),t={url:"".concat(e.url,"/").concat(this.projectSelectInput.data("relativePath")),name:e.name};this.setNewItemBtnAttributes(t),this.setProjectInLocalStorage(t)}},{key:"setBtnTextFromLocalStorage",value:function(){var e=this.getProjectFromLocalStorage();this.setNewItemBtnAttributes(e)}},{key:"setNewItemBtnAttributes",value:function(e){e?(this.newItemBtn.attr("href",e.url),this.newItemBtn.text("".concat(this.formattedText.defaultTextPrefix," in ").concat(e.name))):this.newItemBtn.text("Select project to create ".concat(this.formattedText.presetTextSuffix))}},{key:"getProjectFromLocalStorage",value:function(){var e=localStorage.getItem(this.localStorageKey);return JSON.parse(e)}},{key:"setProjectInLocalStorage",value:function(e){var t=JSON.stringify(e);localStorage.setItem(this.localStorageKey,t)}},{key:"deriveTextVariants",value:function(){var e=this.resourceLabel;return{localStorageItemType:"new-".concat(this.resourceType.split("_").join("-").slice(0,-1)),defaultTextPrefix:e,presetTextSuffix:this.resourceType.split("_").join(" ").slice(0,-1)}}}])&&s(t.prototype,r),a&&s(t,a),e}(),c=n(1),u=function(){i()(".ajax-project-select").each((function(e,t){var n,r=this,o=i()(t).data("simpleFilter")||!1,s=i()(t).data("select2");return this.groupId=i()(t).data("groupId"),this.userId=i()(t).data("userId"),this.includeGroups=i()(t).data("includeGroups"),this.allProjects=i()(t).data("allProjects")||!1,this.orderBy=i()(t).data("orderBy")||"id",this.withIssuesEnabled=i()(t).data("withIssuesEnabled"),this.withMergeRequestsEnabled=i()(t).data("withMergeRequestsEnabled"),this.withShared=void 0===i()(t).data("withShared")||i()(t).data("withShared"),this.includeProjectsInSubgroups=i()(t).data("includeProjectsInSubgroups")||!1,this.allowClear=i()(t).data("allowClear")||!1,n=Object(c.d)("ProjectSelect|Search for project"),this.includeGroups&&(n+=Object(c.d)("ProjectSelect| or group")),i()(t).select2({placeholder:n,minimumInputLength:0,query:function(e){var t,n=function(t){var n={results:t};return e.callback(n)};return t=r.includeGroups?function(t){return a.a.groups(e.term,{},(function(e){var r=e.concat(t);return n(r)}))}:n,r.groupId?a.a.groupProjects(r.groupId,e.term,{with_issues_enabled:r.withIssuesEnabled,with_merge_requests_enabled:r.withMergeRequestsEnabled,with_shared:r.withShared,include_subgroups:r.includeProjectsInSubgroups},t):r.userId?a.a.userProjects(r.userId,e.term,{with_issues_enabled:r.withIssuesEnabled,with_merge_requests_enabled:r.withMergeRequestsEnabled,with_shared:r.withShared,include_subgroups:r.includeProjectsInSubgroups},t):a.a.projects(e.term,{order_by:r.orderBy,with_issues_enabled:r.withIssuesEnabled,with_merge_requests_enabled:r.withMergeRequestsEnabled,membership:!r.allProjects},t)},id:function(e){return o?e.id:JSON.stringify({name:e.name,url:e.web_url})},text:function(e){return e.name_with_namespace||e.name},initSelection:function(e,t){return a.a.project(e.val()).then((function(e){var n=e.data;return t(n)}))},allowClear:this.allowClear,dropdownCssClass:"ajax-project-dropdown"}),s||o?t:new l(t)}))};t.a=function(){return n.e(239).then(n.t.bind(null,428,7)).then(u).catch((function(){}))}},731:function(e,t,n){"use strict";n(42),n(46);var r=n(0),i=n.n(r),a=n(20),o=n(176),s=n(292),l=n(1);var c=n(291),u=n(513);function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.vueIssuablesListFeature=Object(a.property)(["gon","features","vueIssuablesList"])(window),this.initDomElements(),this.bindEvents(),this.initDropdowns(),this.setupBulkUpdateActions()}var t,n,r;return t=e,r=[{key:"getCheckedIssueIds",value:function(){var e=i()(".selected-issuable:checked");return e.length>0?i.a.map(e,(function(e){return i()(e).data("id")})):[]}}],(n=[{key:"initDomElements",value:function(){this.$page=i()(".layout-page"),this.$sidebar=i()(".right-sidebar"),this.$sidebarInnerContainer=this.$sidebar.find(".issuable-sidebar"),this.$bulkEditCancelBtn=i()(".js-bulk-update-menu-hide"),this.$bulkEditSubmitBtn=i()(".update-selected-issues"),this.$bulkUpdateEnableBtn=i()(".js-bulk-update-toggle"),this.$otherFilters=i()(".issues-other-filters"),this.$checkAllContainer=i()(".check-all-holder"),this.$issueChecks=i()(".issue-check"),this.$issuesList=i()(".selected-issuable"),this.$issuableIdsInput=i()("#update_issuable_ids")}},{key:"bindEvents",value:function(){var e=this;this.$bulkUpdateEnableBtn.on("click",(function(t){return e.toggleBulkEdit(t,!0)})),this.$bulkEditCancelBtn.on("click",(function(t){return e.toggleBulkEdit(t,!1)})),this.$checkAllContainer.on("click",(function(t){return e.selectAll(t)})),this.$issuesList.on("change",(function(){return e.updateFormState()})),this.$bulkEditSubmitBtn.on("click",(function(){return e.prepForSubmit()})),this.$checkAllContainer.on("click",(function(){return e.updateFormState()})),this.vueIssuablesListFeature&&u.a.$on("issuables:updateBulkEdit",(function(){e.updateFormState()}))}},{key:"initDropdowns",value:function(){new c.a,new s.a,i()(".js-issue-status").each((function(e,t){var n=i()(t).data("fieldName");return i()(t).glDropdown({selectable:!0,fieldName:n,toggleLabel:function(e,t,n){var r=Object(l.a)("Author"),i=n.dropdown.find(".is-active");return i.length&&(r=i.text()),r},clicked:function(e){return e.e.preventDefault()},id:function(e,t){return i()(t).data("id")}})})),i()(".js-subscription-event").each((function(e,t){var n=i()(t).data("fieldName");return i()(t).glDropdown({selectable:!0,fieldName:n,toggleLabel:function(e,t,n){var r=Object(l.a)("Subscription"),i=n.dropdown.find(".is-active");return i.length&&(r=i.text()),r},clicked:function(e){return e.e.preventDefault()},id:function(e,t){return i()(t).data("id")}})}))}},{key:"setupBulkUpdateActions",value:function(){o.a.setOriginalDropdownData()}},{key:"updateFormState",value:function(){var e=!i()(".selected-issuable:checked").length;this.toggleSubmitButtonDisabled(e),this.updateSelectedIssuableIds(),o.a.setOriginalDropdownData()}},{key:"prepForSubmit",value:function(){var e=this;setTimeout((function(){return e.$bulkEditSubmitBtn.disable()})),this.updateSelectedIssuableIds()}},{key:"toggleBulkEdit",value:function(e,t){e.preventDefault(),u.a.$emit("issuables:toggleBulkEdit",t),this.toggleSidebarDisplay(t),this.toggleBulkEditButtonDisabled(t),this.toggleOtherFiltersDisabled(t),this.toggleCheckboxDisplay(t)}},{key:"updateSelectedIssuableIds",value:function(){this.$issuableIdsInput.val(e.getCheckedIssueIds())}},{key:"selectAll",value:function(){var e=this.$checkAllContainer.find("input").prop("checked");this.$issuesList.prop("checked",e)}},{key:"toggleSidebarDisplay",value:function(e){this.$page.toggleClass("right-sidebar-expanded issuable-bulk-update-sidebar",e),this.$page.toggleClass("right-sidebar-collapsed issuable-bulk-update-sidebar",!e),this.$sidebarInnerContainer.toggleClass("hidden",!e),this.$sidebar.toggleClass("right-sidebar-expanded issuable-bulk-update-sidebar",e),this.$sidebar.toggleClass("right-sidebar-collapsed issuable-bulk-update-sidebar",!e)}},{key:"toggleBulkEditButtonDisabled",value:function(e){e?this.$bulkUpdateEnableBtn.disable():this.$bulkUpdateEnableBtn.enable()}},{key:"toggleCheckboxDisplay",value:function(e){this.$checkAllContainer.toggleClass("hidden",!e||this.vueIssuablesListFeature),this.$issueChecks.toggleClass("hidden",!e)}},{key:"toggleOtherFiltersDisabled",value:function(e){this.$otherFilters.toggleClass("disabled-content",e)}},{key:"toggleSubmitButtonDisabled",value:function(e){e?this.$bulkEditSubmitBtn.disable():this.$bulkEditSubmitBtn.enable()}}])&&d(t.prototype,n),r&&d(t,r),e}();t.a={bulkUpdateSidebar:null,init:function(e){var t=document.querySelector(".issues-bulk-update"),n=Boolean(this.bulkUpdateSidebar);return t&&!n&&(o.a.init({prefixId:e}),this.bulkUpdateSidebar=new h),this.bulkUpdateSidebar}}},799:function(e,t,n){"use strict";var r=n(1);t.a=function(e){var t={formattedKey:Object(r.a)("WIP"),key:"wip",type:"string",param:"",symbol:"",icon:"admin",tag:Object(r.a)("Yes or No"),lowercaseValueOnSubmit:!0,uppercaseTokenName:!0,capitalizeTokenValue:!0};e.tokenKeys.push(t),e.tokenKeysWithAlternative.push(t);var n={formattedKey:Object(r.a)("Target-Branch"),key:"target-branch",type:"string",param:"",symbol:"",icon:"arrow-right",tag:"branch"};e.tokenKeys.push(n),e.tokenKeysWithAlternative.push(n)}}},[[2201,1,0,2,6]]]);
//# sourceMappingURL=pages.groups.merge_requests.e61817f6.chunk.js.map