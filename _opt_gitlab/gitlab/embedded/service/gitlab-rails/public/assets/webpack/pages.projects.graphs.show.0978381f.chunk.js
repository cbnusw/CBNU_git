(this.webpackJsonp=this.webpackJsonp||[]).push([[157],{113:function(t,e,n){"use strict";n.r(e);var r=n(88),a=n(70),i=n(96);document.addEventListener("DOMContentLoaded",(function(){Object(i.a)(document,gon),new r.a,new a.a}))},1163:function(t,e,n){"use strict";var r=n(0),a=n.n(r),i=n(16),o={data:function(){return{width:0,height:0}},beforeDestroy:function(){this.contentResizeHandler.off("content.resize",this.debouncedResize),window.removeEventListener("resize",this.debouncedResize)},created:function(){this.debouncedResize=Object(i.h)(this.onResize),this.contentResizeHandler=a()(document).on("content.resize",this.debouncedResize),window.addEventListener("resize",this.debouncedResize)},methods:{onResize:function(){var t=this.$refs.chartWrapper,e=t.clientWidth,n=t.clientHeight;this.width=e,this.height=n}}},c=n(4),s=Object(c.a)(o,(function(){var t=this.$createElement;return(this._self._c||t)("div",{ref:"chartWrapper"},[this._t("default",null,{width:this.width,height:this.height})],2)}),[],!1,null,null,null);e.a=s.exports},2331:function(t,e,n){n(105),n(113),t.exports=n(2468)},2468:function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"showChart",(function(){return T})),n.d(r,"parsedData",(function(){return E})),n.d(r,"default",(function(){return A}));var a={};n.r(a),n.d(a,"fetchChartData",(function(){return L})),n.d(a,"default",(function(){return B}));var i=n(17),o=(n(24),n(49),n(56),n(30),n(28),n(26),n(78),n(40),n(46),n(129),n(69),n(35),n(1010),n(50),n(58),n(38),n(18),n(68),n(36),n(27),n(41),n(525)),c=n.n(o),s=n(237),u=n.n(s),l=n(22),d=n(760),h=n(2530),f=n(1),p=n(823),b=n(62),m=function(t){var e=new Date(t),n=e.getUTCMonth(),r=e.getUTCFullYear();return 0===n?"".concat(r):Object(b.j)(!0)[n]},g=function(t){var e=t.getUTCFullYear(),n=t.getUTCMonth(),r=t.getUTCDate();return"".concat(e,"-").concat("0".concat(n+1).slice(-2),"-").concat("0".concat(r).slice(-2))},v=n(1163);function j(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){O(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function O(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var _,C={components:{GlAreaChart:h.a,GlLoadingIcon:d.a,ResizableChartContainer:v.a},props:{endpoint:{type:String,required:!0},branch:{type:String,required:!0}},data:function(){return{masterChart:null,individualCharts:[],svgs:{},masterChartHeight:264,individualChartHeight:216}},computed:y({},Object(l.e)(["chartData","loading"]),{},Object(l.d)(["showChart","parsedData"]),{masterChartData:function(){var t=this,e={};return this.xAxisRange.forEach((function(n){e[n]=t.parsedData.total[n]||0})),[{name:Object(f.a)("Commits"),data:Object.entries(e)}]},masterChartOptions:function(){return y({},this.getCommonChartOptions(!0),{yAxis:{name:Object(f.a)("Number of commits")},grid:{bottom:64,left:64,right:20,top:20}})},individualChartsData:function(){var t=this;return Object.keys(this.parsedData.byAuthorEmail).map((function(e){var n=t.parsedData.byAuthorEmail[e];return{name:n.name,email:e,commits:n.commits,dates:[{name:Object(f.a)("Commits"),data:t.xAxisRange.map((function(t){return[t,n.dates[t]||0]}))}]}})).sort((function(t,e){return e.commits-t.commits})).slice(0,100)},individualChartOptions:function(){return y({},this.getCommonChartOptions(!1),{yAxis:{name:Object(f.a)("Commits"),max:this.individualChartYAxisMax},grid:{bottom:27,left:64,right:20,top:8}})},individualChartYAxisMax:function(){return this.individualChartsData.reduce((function(t,e){var n=e.dates[0].data.map((function(t){return t[1]}));return Math.max.apply(Math,[t].concat(j(n)))}),0)},xAxisRange:function(){var t=Object.keys(this.parsedData.total).sort((function(t,e){return new Date(t)-new Date(e)})),e=new Date(t[0]),n=new Date(t[t.length-1]);return Object(b.g)(e,n,g)},firstContributionDate:function(){return this.xAxisRange[0]},lastContributionDate:function(){return this.xAxisRange[this.xAxisRange.length-1]},charts:function(){return c()(this.individualCharts)}}),mounted:function(){this.fetchChartData(this.endpoint)},methods:y({},Object(l.c)(["fetchChartData"]),{getCommonChartOptions:function(t){return{xAxis:{type:"time",name:"",data:this.xAxisRange,axisLabel:{formatter:m,showMaxLabel:!1,showMinLabel:!1},boundaryGap:!1,splitNumber:t?24:18,minInterval:24192e5,min:this.firstContributionDate,max:this.lastContributionDate}}},setSvg:function(t){var e=this;return Object(p.a)(t).then((function(n){n&&e.$set(e.svgs,t,"path://".concat(n))})).catch((function(){}))},onMasterChartCreated:function(t){var e=this;this.masterChart=t,this.setSvg("scroll-handle").then((function(){e.masterChart.setOption({dataZoom:[{type:"slider",handleIcon:e.svgs["scroll-handle"]}]})})).catch((function(){})),this.masterChart.on("datazoom",u()(this.setIndividualChartsZoom,200))},onIndividualChartCreated:function(t){this.individualCharts.push(t)},setIndividualChartsZoom:function(t){this.charts.forEach((function(e){return e.setOption({dataZoom:{start:t.start,end:t.end,show:!1}},{lazyUpdate:!0})}))}})},S=n(4),x=Object(S.a)(C,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.loading?n("div",{staticClass:"contributors-loader text-center"},[n("gl-loading-icon",{attrs:{inline:!0,size:4}})],1):t.showChart?n("div",{staticClass:"contributors-charts"},[n("h4",[t._v(t._s(t.__("Commits to"))+" "+t._s(t.branch))]),t._v(" "),n("span",[t._v(t._s(t.__("Excluding merge commits. Limited to 6,000 commits.")))]),t._v(" "),n("resizable-chart-container",{scopedSlots:t._u([{key:"default",fn:function(e){var r=e.width;return n("gl-area-chart",{attrs:{width:r,data:t.masterChartData,option:t.masterChartOptions,height:t.masterChartHeight},on:{created:t.onMasterChartCreated}})}}])}),t._v(" "),n("div",{staticClass:"row"},t._l(t.individualChartsData,(function(e,r){return n("div",{key:r,staticClass:"col-lg-6 col-12"},[n("h4",[t._v(t._s(e.name))]),t._v(" "),n("p",[t._v(t._s(t.n__("%d commit","%d commits",e.commits))+" ("+t._s(e.email)+")")]),t._v(" "),n("resizable-chart-container",{scopedSlots:t._u([{key:"default",fn:function(r){var a=r.width;return n("gl-area-chart",{attrs:{width:a,data:e.dates,option:t.individualChartOptions,height:t.individualChartHeight},on:{created:t.onIndividualChartCreated}})}}],null,!0)})],1)})),0)],1):t._e()])}),[],!1,null,null,null).exports;n(77);function I(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var D=(I(_={},"SET_LOADING_STATE",(function(t,e){t.loading=e})),I(_,"SET_CHART_DATA",(function(t,e){Object.assign(t,{chartData:e})})),I(_,"SET_ACTIVE_BRANCH",(function(t,e){Object.assign(t,{branch:e})})),_);var T=function(t){return Boolean(!t.loading&&t.chartData)},E=function(t){var e={},n={};return t.chartData.forEach((function(t){var r=t.date,a=t.author_name,i=t.author_email;n[r]=n[r]?n[r]+1:1;var o,c,s,u=e[i];u?(u.commits+=1,u.dates[r]=u.dates[r]?u.dates[r]+1:1):e[i]={name:a,commits:1,dates:(o={},c=r,s=1,c in o?Object.defineProperty(o,c,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[c]=s,o)}})),{total:n,byAuthorEmail:e}},A=function(){},P=n(14),k=n(11),R=function(t){return k.a.get(t)},L=function(t,e){var n=t.commit;return n("SET_LOADING_STATE",!0),R(e).then((function(t){return t.data})).then((function(t){n("SET_CHART_DATA",t),n("SET_LOADING_STATE",!1)})).catch((function(){return Object(P.a)(Object(f.a)("An error occurred while loading chart data"))}))},B=function(){};i.default.use(l.b);var N=new l.b.Store({actions:a,mutations:D,getters:r,state:{loading:!1,chartData:null,branch:"master"}});document.addEventListener("DOMContentLoaded",(function(){var t=document.querySelector(".js-contributors-graph");return t?new i.default({el:t,store:N,render:function(e){return e(x,{props:{endpoint:t.dataset.projectGraphPath,branch:t.dataset.projectBranch}})}}):null}))},70:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));n(24),n(49),n(56),n(40),n(90),n(18),n(36),n(41);var r=n(8),a=n.n(r),i=n(9);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=c(this,s(e).call(this)),a.a.bind("g p",(function(){return Object(i.a)(".shortcuts-project")})),a.a.bind("g v",(function(){return Object(i.a)(".shortcuts-project-activity")})),a.a.bind("g r",(function(){return Object(i.a)(".shortcuts-project-releases")})),a.a.bind("g f",(function(){return Object(i.a)(".shortcuts-tree")})),a.a.bind("g c",(function(){return Object(i.a)(".shortcuts-commits")})),a.a.bind("g j",(function(){return Object(i.a)(".shortcuts-builds")})),a.a.bind("g n",(function(){return Object(i.a)(".shortcuts-network")})),a.a.bind("g d",(function(){return Object(i.a)(".shortcuts-repository-charts")})),a.a.bind("g i",(function(){return Object(i.a)(".shortcuts-issues")})),a.a.bind("g b",(function(){return Object(i.a)(".shortcuts-issue-boards")})),a.a.bind("g m",(function(){return Object(i.a)(".shortcuts-merge_requests")})),a.a.bind("g w",(function(){return Object(i.a)(".shortcuts-wiki")})),a.a.bind("g s",(function(){return Object(i.a)(".shortcuts-snippets")})),a.a.bind("g k",(function(){return Object(i.a)(".shortcuts-kubernetes")})),a.a.bind("g e",(function(){return Object(i.a)(".shortcuts-environments")})),a.a.bind("g l",(function(){return Object(i.a)(".shortcuts-metrics")})),a.a.bind("i",(function(){return Object(i.a)(".shortcuts-new-issue")})),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,t),e}(n(107).a)},73:function(t,e,n){"use strict";n(30),n(35),n(18),n(64);var r=n(0),a=n.n(r),i=n(32),o=(n(65),n(69),n(55),n(67),n(71));function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.projectSelectInput=a()(e),this.newItemBtn=a()(".new-project-item-link"),this.resourceType=this.newItemBtn.data("type"),this.resourceLabel=this.newItemBtn.data("label"),this.formattedText=this.deriveTextVariants(),this.groupId=this.projectSelectInput.data("groupId"),this.bindEvents(),this.initLocalStorage()}var e,r,i;return e=t,(r=[{key:"bindEvents",value:function(){var t=this;this.projectSelectInput.siblings(".new-project-item-select-button").on("click",(function(e){return t.openDropdown(e)})),this.newItemBtn.on("click",(function(e){t.getProjectFromLocalStorage()||(e.preventDefault(),t.openDropdown(e))})),this.projectSelectInput.on("change",(function(){return t.selectProject()}))}},{key:"initLocalStorage",value:function(){o.a.isLocalStorageAccessSafe()&&(this.localStorageKey=["group",this.groupId,this.formattedText.localStorageItemType,"recent-project"].join("-"),this.setBtnTextFromLocalStorage())}},{key:"openDropdown",value:function(t){n.e(239).then(n.t.bind(null,428,7)).then((function(){a()(t.currentTarget).siblings(".project-item-select").select2("open")})).catch((function(){}))}},{key:"selectProject",value:function(){var t=JSON.parse(this.projectSelectInput.val()),e={url:"".concat(t.url,"/").concat(this.projectSelectInput.data("relativePath")),name:t.name};this.setNewItemBtnAttributes(e),this.setProjectInLocalStorage(e)}},{key:"setBtnTextFromLocalStorage",value:function(){var t=this.getProjectFromLocalStorage();this.setNewItemBtnAttributes(t)}},{key:"setNewItemBtnAttributes",value:function(t){t?(this.newItemBtn.attr("href",t.url),this.newItemBtn.text("".concat(this.formattedText.defaultTextPrefix," in ").concat(t.name))):this.newItemBtn.text("Select project to create ".concat(this.formattedText.presetTextSuffix))}},{key:"getProjectFromLocalStorage",value:function(){var t=localStorage.getItem(this.localStorageKey);return JSON.parse(t)}},{key:"setProjectInLocalStorage",value:function(t){var e=JSON.stringify(t);localStorage.setItem(this.localStorageKey,e)}},{key:"deriveTextVariants",value:function(){var t=this.resourceLabel;return{localStorageItemType:"new-".concat(this.resourceType.split("_").join("-").slice(0,-1)),defaultTextPrefix:t,presetTextSuffix:this.resourceType.split("_").join(" ").slice(0,-1)}}}])&&c(e.prototype,r),i&&c(e,i),t}(),u=n(1),l=function(){a()(".ajax-project-select").each((function(t,e){var n,r=this,o=a()(e).data("simpleFilter")||!1,c=a()(e).data("select2");return this.groupId=a()(e).data("groupId"),this.userId=a()(e).data("userId"),this.includeGroups=a()(e).data("includeGroups"),this.allProjects=a()(e).data("allProjects")||!1,this.orderBy=a()(e).data("orderBy")||"id",this.withIssuesEnabled=a()(e).data("withIssuesEnabled"),this.withMergeRequestsEnabled=a()(e).data("withMergeRequestsEnabled"),this.withShared=void 0===a()(e).data("withShared")||a()(e).data("withShared"),this.includeProjectsInSubgroups=a()(e).data("includeProjectsInSubgroups")||!1,this.allowClear=a()(e).data("allowClear")||!1,n=Object(u.d)("ProjectSelect|Search for project"),this.includeGroups&&(n+=Object(u.d)("ProjectSelect| or group")),a()(e).select2({placeholder:n,minimumInputLength:0,query:function(t){var e,n=function(e){var n={results:e};return t.callback(n)};return e=r.includeGroups?function(e){return i.a.groups(t.term,{},(function(t){var r=t.concat(e);return n(r)}))}:n,r.groupId?i.a.groupProjects(r.groupId,t.term,{with_issues_enabled:r.withIssuesEnabled,with_merge_requests_enabled:r.withMergeRequestsEnabled,with_shared:r.withShared,include_subgroups:r.includeProjectsInSubgroups},e):r.userId?i.a.userProjects(r.userId,t.term,{with_issues_enabled:r.withIssuesEnabled,with_merge_requests_enabled:r.withMergeRequestsEnabled,with_shared:r.withShared,include_subgroups:r.includeProjectsInSubgroups},e):i.a.projects(t.term,{order_by:r.orderBy,with_issues_enabled:r.withIssuesEnabled,with_merge_requests_enabled:r.withMergeRequestsEnabled,membership:!r.allProjects},e)},id:function(t){return o?t.id:JSON.stringify({name:t.name,url:t.web_url})},text:function(t){return t.name_with_namespace||t.name},initSelection:function(t,e){return i.a.project(t.val()).then((function(t){var n=t.data;return e(n)}))},allowClear:this.allowClear,dropdownCssClass:"ajax-project-dropdown"}),c||o?e:new s(e)}))};e.a=function(){return n.e(239).then(n.t.bind(null,428,7)).then(l).catch((function(){}))}},88:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));n(42),n(89);var r=n(0),a=n.n(r),i=n(51),o=n.n(i),c=n(1),s=n(33);n(28),n(78),n(40),n(46),n(129),n(35),n(77),n(18),n(36),n(41);var u=function(t){return t.reduce((function(t,e){var n=e.name,r=e.value;return Object.assign(t,function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},n,r))}),{})},l=n(11),d=n(14),h=n(73);function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var p=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var e=a()("ul.clone-options-dropdown"),n=a()("#project_clone"),r=a()(".js-git-clone-holder .js-clone-dropdown-label"),i=document.querySelector(".js-mobile-git-clone .js-clone-dropdown-label"),c=r.text().trim();c.length>0&&a()("a:contains('".concat(c,"')"),e).addClass("is-active"),a()("a",e).on("click",(function(t){t.preventDefault();var r=a()(t.currentTarget),o=r.attr("href"),c=r.data("cloneType");a()(".is-active",e).removeClass("is-active"),a()('a[data-clone-type="'.concat(c,'"]')).each((function(){var t=a()(this),e=t.find(".dropdown-menu-inner-title").text(),n=t.closest(".project-clone-holder").find(".js-clone-dropdown-label");t.toggleClass("is-active"),n.text(e)})),i?i.dataset.clipboardText=o:n.val(o),a()(".js-git-empty .js-clone").text(o)})),t.initRefSwitcher(),a()(".project-refs-select").on("change",(function(){return a()(this).parents("form").submit()})),a()(".hide-no-ssh-message").on("click",(function(t){return o.a.set("hide_no_ssh_message","false"),a()(this).parents(".no-ssh-key-message").remove(),t.preventDefault()})),a()(".hide-no-password-message").on("click",(function(t){return o.a.set("hide_no_password_message","false"),a()(this).parents(".no-password-message").remove(),t.preventDefault()})),a()(".hide-auto-devops-implicitly-enabled-banner").on("click",(function(t){var e=a()(this).data("project-id"),n="hide_auto_devops_implicitly_enabled_banner_".concat(e);return o.a.set(n,"false"),a()(this).parents(".auto-devops-implicitly-enabled-banner").remove(),t.preventDefault()})),t.projectSelectDropdown()}var e,n,r;return e=t,r=[{key:"projectSelectDropdown",value:function(){Object(h.a)(),a()(".project-item-select").on("click",(function(e){return t.changeProject(a()(e.currentTarget).val())}))}},{key:"changeProject",value:function(t){return window.location=t}},{key:"initRefSwitcher",value:function(){var t=document.createElement("li"),e=document.createElement("a");return e.href="#",a()(".js-project-refs-dropdown").each((function(){var n,r,i,o=a()(this),h=o.data("selected"),f=o.data("fieldName"),p=Boolean(o.data("visit")),b=o.closest("form"),m=b.attr("action"),g=Object(s.h)((n=b[0],r=new FormData(n),i=Array.from(r.keys()).map((function(t){var e=r.getAll(t);return{name:t,value:1===(e=e.filter((function(t){return t}))).length?e[0]:e}})),u(i)),m);return o.glDropdown({data:function(t,e){l.a.get(o.data("refsUrl"),{params:{ref:o.data("ref"),search:t}}).then((function(t){var n=t.data;return e(n)})).catch((function(){return Object(d.a)(Object(c.a)("An error occurred while getting projects"))}))},selectable:!0,filterable:!0,filterRemote:!0,filterByText:!0,inputFieldName:o.data("inputFieldName"),fieldName:f,renderRow:function(n){var r,a,i,o=t.cloneNode(!1),c=e.cloneNode(!1);return n===h&&(c.className="is-active"),c.textContent=n,c.dataset.ref=n,n.length>0&&p&&(c.href=Object(s.h)((i=n,(a=f)in(r={})?Object.defineProperty(r,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[a]=i,r),g)),o.appendChild(c),o},id:function(t,e){return e.attr("data-ref")},toggleLabel:function(t,e){return e.text().trim()},clicked:function(t){var e=t.e;p||e.preventDefault()}})}))}}],(n=null)&&f(e.prototype,n),r&&f(e,r),t}()}},[[2331,1,0,2]]]);
//# sourceMappingURL=pages.projects.graphs.show.0978381f.chunk.js.map