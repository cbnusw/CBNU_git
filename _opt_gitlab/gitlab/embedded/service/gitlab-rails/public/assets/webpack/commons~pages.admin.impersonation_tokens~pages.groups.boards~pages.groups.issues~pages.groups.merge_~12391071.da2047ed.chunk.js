(this.webpackJsonp=this.webpackJsonp||[]).push([[6],{128:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i={assignee:"assignee",milestone:"milestone",backlog:"backlog",closed:"closed",label:"label",promotion:"promotion",blank:"blank"}},186:function(e,t,n){"use strict";var i=n(17);t.a=new i.default},240:function(e,t,n){var i=n(545),s=n(394),o=n(476),r=n(382),a=o((function(e,t){if(null==e)return[];var n=t.length;return n>1&&r(e,t[0],t[1])?t=[]:n>2&&r(t[0],t[1],t[2])&&(t=[t[0]]),s(e,i(t,1),[])}));e.exports=a},247:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n(77);var i=n(16);var s=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,Object(i.g)(t,{dropKeys:["priority"]}),{priority:null!==t.priority?t.priority:1/0})};window.ListLabel=s},276:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(35);var i=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t.id,this.name=t.name,this.username=t.username,this.avatar=t.avatar_url||t.avatar||gon.default_avatar_url,this.path=t.path,this.state=t.state,this.webUrl=t.web_url||t.webUrl};window.ListAssignee=i},287:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t.id,this.path=t.path}},288:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(24),n(49);var i=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t.id,this.title=t.title};window.ListMilestone=i},392:function(e,t,n){var i=n(557),s=n(477);e.exports=function(e,t){var n=-1,o=s(e)?Array(e.length):[];return i(e,(function(e,i,s){o[++n]=t(e,i,s)})),o}},394:function(e,t,n){var i=n(420),s=n(475),o=n(392),r=n(395),a=n(468),u=n(396),l=n(515);e.exports=function(e,t,n){var c=-1;t=i(t.length?t:[l],a(s));var d=o(e,(function(e,n,s){return{criteria:i(t,(function(t){return t(e)})),index:++c,value:e}}));return r(d,(function(e,t){return u(e,t,n)}))}},395:function(e,t){e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},396:function(e,t,n){var i=n(397);e.exports=function(e,t,n){for(var s=-1,o=e.criteria,r=t.criteria,a=o.length,u=n.length;++s<a;){var l=i(o[s],r[s]);if(l)return s>=u?l:l*("desc"==n[s]?-1:1)}return e.index-t.index}},397:function(e,t,n){var i=n(516);e.exports=function(e,t){if(e!==t){var n=void 0!==e,s=null===e,o=e==e,r=i(e),a=void 0!==t,u=null===t,l=t==t,c=i(t);if(!u&&!c&&!r&&e>t||r&&a&&l&&!u&&!c||s&&a&&l||!n&&l||!o)return 1;if(!s&&!r&&!c&&e<t||c&&n&&o&&!s&&!r||u&&n&&o||!a&&o||!l)return-1}return 0}},399:function(e,t,n){"use strict";var i=n(108),s=n(400),o=n(373),r=n(223),a=n(343),u=n(530);i({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=o(this),n=r(t.length),i=u(t,0);return i.length=s(i,t,t,n,0,void 0===e?1:a(e)),i}})},400:function(e,t,n){"use strict";var i=n(517),s=n(223),o=n(347),r=function(e,t,n,a,u,l,c,d){for(var f,p=u,h=0,g=!!c&&o(c,d,3);h<a;){if(h in n){if(f=g?g(n[h],h,t):n[h],l>0&&i(f))p=r(e,t,f,s(f.length),p,l-1)-1;else{if(p>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[p]=f}p++}h++}return p};e.exports=r},401:function(e,t,n){n(478)("flat")},52:function(e,t,n){"use strict";n.d(t,"b",(function(){return L})),n.d(t,"a",(function(){return j}));n(24),n(49),n(56),n(30),n(309),n(28),n(42),n(399),n(26),n(78),n(104),n(85),n(40),n(65),n(46),n(69),n(258),n(145),n(401),n(77),n(50),n(58),n(38),n(18),n(55),n(68),n(122),n(36),n(67),n(27),n(41);var i=n(240),s=n.n(i),o=n(0),r=n.n(o),a=n(17),u=n(51),l=n.n(u),c=n(16),d=n(1),f=n(11),p=n(33),h=n(186),g=n(128),v=n(287),b=n(247),m=n(276),y=n(288);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var w={disabled:!1,timeTracking:{limitToHours:!1},scopedLabels:{helpLink:"",enabled:!1},filter:{path:""},state:{currentBoard:{labels:[]},currentPage:"",endpoints:{}},detail:{issue:{}},moving:{issue:{},list:{}},multiSelect:{list:[]},setEndpoints:function(e){var t=e.boardsEndpoint,n=e.listsEndpoint,i=e.bulkUpdatePath,s=e.boardId,o=e.recentBoardsEndpoint,r=e.fullPath,a="".concat(n,"/generate.json");this.state.endpoints={boardsEndpoint:t,boardId:s,listsEndpoint:n,listsEndpointGenerate:a,bulkUpdatePath:i,fullPath:r,recentBoardsEndpoint:"".concat(o,".json")}},create:function(){this.state.lists=[],this.filter.path=Object(c.p)().join("&"),this.detail={issue:{}}},showPage:function(e){this.state.currentPage=e},addList:function(e){var t=new List(e);return this.state.lists=s()([].concat(E(this.state.lists),[t]),"position"),t},new:function(e){var t=this,n=this.addList(e),i=this.findList("type","backlog","backlog");n.save().then((function(){n.issues.forEach(i.removeIssue.bind(i)),t.state.lists=s()(t.state.lists,"position")})).catch((function(){})),this.removeBlankState()},updateNewListDropdown:function(e){r()(".js-board-list-".concat(e)).removeClass("is-active")},shouldAddBlankState:function(){return!this.state.lists.filter((function(e){return"backlog"!==e.type&&"closed"!==e.type}))[0]},addBlankState:function(){!this.shouldAddBlankState()||this.welcomeIsHidden()||this.disabled||this.addList({id:"blank",list_type:"blank",title:Object(d.a)("Welcome to your Issue Board!"),position:0})},removeBlankState:function(){this.removeList("blank"),l.a.set("issue_board_welcome_hidden","true",{expires:3650,path:""})},welcomeIsHidden:function(){return Object(c.F)(l.a.get("issue_board_welcome_hidden"))},removeList:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",n=this.findList("id",e,t);n&&(this.state.lists=this.state.lists.filter((function(t){return t.id!==e})))},moveList:function(e,t){var n=this;t.forEach((function(e,t){n.findList("id",parseInt(e,10)).position=t})),e.update()},addMultipleListIssues:function(e,t,n,i){var s=null,o=null;if(!t.every((function(t){return e.findIssue(t.id)}))){var r,a;if(void 0!==i)e.issues[i-1]&&(s=e.issues[i-1].id),e.issues[i]&&(o=e.issues[i].id),(r=e.issues).splice.apply(r,[i,0].concat(E(t)));else(a=e.issues).push.apply(a,E(t));e.label&&t.forEach((function(t){return t.addLabel(e.label)})),e.assignee&&(n&&"assignee"===n.type&&t.forEach((function(e){return e.removeAssignee(n.assignee)})),t.forEach((function(t){return t.addAssignee(e.assignee)}))),n&&(e.issuesSize+=t.length,e.updateMultipleIssues(t,n,s,o))}},startMoving:function(e,t){Object.assign(this.moving,{list:e,issue:t})},moveMultipleIssuesToList:function(e){var t=e.listFrom,n=e.listTo,i=e.issues,s=e.newIndex,o=i.map((function(e){return n.findIssue(e.id)})),r=i.map((function(e){return e.getLists()})).flat(),a=r.map((function(e){return e.label}));if(o.filter(Boolean).length>0)n.updateMultipleIssues(i,t),i.forEach((function(e){e.removeLabel(t.label)}));else if(n.type===g.a.assignee&&t.type===g.a.assignee&&i.some((function(e){return e.findAssignee(n.assignee)})))i.map((function(e){return n.findIssue(e.id)})).forEach((function(e){return e.removeAssignee(t.assignee)}));else if("milestone"===n.type){var u=i.map((function(e){return e.milestone})),l=this.state.lists.filter((function(e){return"milestone"===e.type&&e.id!==n.id})).filter((function(e){return e.issues.some((function(e){return i.some((function(t){return e.id===t.id}))}))}));i.forEach((function(e){u.forEach((function(t){e.removeMilestone(t)}))})),i.forEach((function(e){e.addMilestone(n.milestone)})),l.forEach((function(e){i.forEach((function(t){e.removeIssue(t)}))})),n.addMultipleIssues(i,t,s)}else n.addMultipleIssues(i,t,s);n.type===g.a.closed&&t.type!==g.a.backlog?(r.forEach((function(e){i.forEach((function(t){e.removeIssue(t)}))})),i.forEach((function(e){e.removeLabels(a)}))):n.type===g.a.backlog&&t.type===g.a.assignee?(i.forEach((function(e){e.removeAssignee(t.assignee)})),r.forEach((function(e){i.forEach((function(t){e.removeIssue(t)}))}))):n.type===g.a.backlog&&t.type===g.a.milestone?(i.forEach((function(e){e.removeMilestone(t.milestone)})),r.forEach((function(e){i.forEach((function(t){e.removeIssue(t)}))}))):this.shouldRemoveIssue(t,n)&&this.issuesAreContiguous(t,i)&&t.removeMultipleIssues(i)},issuesAreContiguous:function(e,t){if(1===t.length)return!0;var n=e.issues.map((function(e){return e.id})),i=t.map((function(e){return e.id}));return n.join("|").includes(i.join("|"))},moveIssueToList:function(e,t,n,i){var s=t.findIssue(n.id),o=n.getLists(),r=o.map((function(e){return e.label}));if(s)t.updateIssueLabel(n,e),s.removeLabel(e.label);else if("assignee"===t.type&&"assignee"===e.type&&n.findAssignee(t.assignee))t.findIssue(n.id).removeAssignee(e.assignee);else if("milestone"===t.type){var a=n.milestone,u=this.state.lists.filter((function(e){return"milestone"===e.type&&e.id!==t.id})).filter((function(e){return e.issues.some((function(e){return n.id===e.id}))}));n.removeMilestone(a),n.addMilestone(t.milestone),u.forEach((function(e){return e.removeIssue(n)})),t.addIssue(n,e,i)}else t.addIssue(n,e,i);"closed"===t.type&&"backlog"!==e.type?(o.forEach((function(e){e.removeIssue(n)})),n.removeLabels(r)):"backlog"===t.type&&"assignee"===e.type?(n.removeAssignee(e.assignee),e.removeIssue(n)):"backlog"===t.type&&"milestone"===e.type?(n.removeMilestone(e.milestone),e.removeIssue(n)):this.shouldRemoveIssue(e,t)&&e.removeIssue(n)},shouldRemoveIssue:function(e,t){return"label"!==t.type&&"assignee"===e.type||"assignee"!==t.type&&"label"===e.type||"backlog"===e.type||"closed"===e.type},moveIssueInList:function(e,t,n,i,s){var o=parseInt(s[i-1],10)||null,r=parseInt(s[i+1],10)||null;e.moveIssue(t,n,i,o,r)},moveMultipleIssuesInList:function(e){var t=e.list,n=e.issues,i=e.oldIndicies,s=e.newIndex,o=e.idArray,r=parseInt(o[s-1],10)||null,a=parseInt(o[s+n.length],10)||null;t.moveMultipleIssues({issues:n,oldIndicies:i,newIndex:s,moveBeforeId:r,moveAfterId:a})},findList:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"label",i=this.state.lists.filter((function(i){var s=!n||(i.type===n||"assignee"===i.type||"milestone"===i.type);return i[e]===t&&s}));return i[0]},findListByLabelId:function(e){return this.state.lists.find((function(t){return"label"===t.type&&t.label.id===e}))},toggleFilter:function(e){var t=this.filter.path.split("&"),n=t.indexOf(e);-1===n?t.push(e):t.splice(n,1),this.filter.path=t.join("&"),this.updateFiltersUrl(),h.a.$emit("updateTokens")},setListDetail:function(e){this.detail.list=e},updateFiltersUrl:function(){window.history.pushState(null,null,"?".concat(this.filter.path))},clearDetailIssue:function(){this.setIssueDetail({})},setIssueDetail:function(e){this.detail.issue=e},setTimeTrackingLimitToHours:function(e){this.timeTracking.limitToHours=Object(c.F)(e)},generateBoardsPath:function(e){return"".concat(this.state.endpoints.boardsEndpoint).concat(e?"/".concat(e):"",".json")},generateIssuesPath:function(e){return"".concat(this.state.endpoints.listsEndpoint).concat(e?"/".concat(e):"","/issues")},generateIssuePath:function(e,t){return"".concat(gon.relative_url_root,"/-/boards/").concat(e?"".concat(e):"","/issues").concat(t?"/".concat(t):"")},generateMultiDragPath:function(e){return"".concat(gon.relative_url_root,"/-/boards/").concat(e?"".concat(e):"","/issues/bulk_move")},all:function(){return f.a.get(this.state.endpoints.listsEndpoint)},generateDefaultLists:function(){return f.a.post(this.state.endpoints.listsEndpointGenerate,{})},createList:function(e,t){var n=_({},t,e);return f.a.post(this.state.endpoints.listsEndpoint,{list:n})},updateList:function(e,t,n){return f.a.put("".concat(this.state.endpoints.listsEndpoint,"/").concat(e),{list:{position:t,collapsed:n}})},destroyList:function(e){return f.a.delete("".concat(this.state.endpoints.listsEndpoint,"/").concat(e))},saveList:function(e){var t=e.label||e.assignee||e.milestone,n="";return e.label?n="label_id":e.assignee&&(n="assignee_id"),this.createList(t.id,n).then((function(e){return e.data})).then((function(t){return e.id=t.id,e.type=t.list_type,e.position=t.position,e.label=t.label,e.getIssues()}))},getIssuesForList:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={id:e};return Object.keys(t).forEach((function(e){n[e]=t[e]})),f.a.get(Object(p.h)(n,this.generateIssuesPath(e)))},moveIssue:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return f.a.put(this.generateIssuePath(this.state.endpoints.boardId,e),{from_list_id:t,to_list_id:n,move_before_id:i,move_after_id:s})},moveMultipleIssues:function(e){var t=e.ids,n=e.fromListId,i=e.toListId,s=e.moveBeforeId,o=e.moveAfterId;return f.a.put(this.generateMultiDragPath(this.state.endpoints.boardId),{from_list_id:n,to_list_id:i,move_before_id:s,move_after_id:o,ids:t})},newIssue:function(e,t){return f.a.post(this.generateIssuesPath(e),{issue:t})},getBacklog:function(e){return f.a.get(Object(p.h)(e,"".concat(gon.relative_url_root,"/-/boards/").concat(this.state.endpoints.boardId,"/issues.json")))},bulkUpdate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={update:Object.assign(t,{issuable_ids:e.join(",")})};return f.a.post(this.state.endpoints.bulkUpdatePath,n)},getIssueInfo:function(e){return f.a.get(e)},toggleIssueSubscription:function(e){return f.a.post(e)},recentBoards:function(){return f.a.get(this.state.endpoints.recentBoardsEndpoint)},createBoard:function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);return t.label_ids=(e.labels||[]).map((function(e){return e.id})),0===t.label_ids.length&&(t.label_ids=[""]),t.assignee&&(t.assignee_id=t.assignee.id),t.milestone&&(t.milestone_id=t.milestone.id),t.id?f.a.put(this.generateBoardsPath(t.id),{board:t}):f.a.post(this.generateBoardsPath(),{board:t})},deleteBoard:function(e){var t=e.id;return f.a.delete(this.generateBoardsPath(t))},setCurrentBoard:function(e){this.state.currentBoard=e},toggleMultiSelect:function(e){var t=this.multiSelect.list.map((function(e){return e.id})).indexOf(e.id);-1!==t?this.multiSelect.list=[].concat(E(this.multiSelect.list.slice(0,t)),E(this.multiSelect.list.slice(t+1))):this.multiSelect.list.push(e)},clearMultiSelect:function(){this.multiSelect.list=[]},refreshIssueData:function(e,t){e.id=t.id,e.iid=t.iid,e.title=t.title,e.confidential=t.confidential,e.dueDate=t.due_date,e.sidebarInfoEndpoint=t.issue_sidebar_endpoint,e.referencePath=t.reference_path,e.path=t.real_path,e.toggleSubscriptionEndpoint=t.toggle_subscription_endpoint,e.project_id=t.project_id,e.timeEstimate=t.time_estimate,e.assignableLabelsEndpoint=t.assignable_labels_endpoint,e.blocked=t.blocked,t.project&&(e.project=new v.a(t.project)),t.milestone&&(e.milestone=new y.a(t.milestone),e.milestone_id=t.milestone.id),t.labels&&(e.labels=t.labels.map((function(e){return new b.a(e)}))),t.assignees&&(e.assignees=t.assignees.map((function(e){return new m.a(e)})))}};function L(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.default.set.apply(a.default,[w.detail.issue].concat(t))}function j(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.default.delete.apply(a.default,[w.detail.issue].concat(t))}t.c=w}}]);
//# sourceMappingURL=commons~pages.admin.impersonation_tokens~pages.groups.boards~pages.groups.issues~pages.groups.merge_~12391071.da2047ed.chunk.js.map