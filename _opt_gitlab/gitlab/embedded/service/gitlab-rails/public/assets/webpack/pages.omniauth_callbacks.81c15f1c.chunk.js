(this.webpackJsonp=this.webpackJsonp||[]).push([[115],{2235:function(e,t,n){n(105),e.exports=n(2236)},2236:function(e,t,n){"use strict";n.r(t);var r=n(663);document.addEventListener("DOMContentLoaded",r.a)},663:function(e,t,n){"use strict";var r=n(0),i=n.n(r),s=(n(42),n(46),n(541)),a=n.n(s),u=n(697),c=n.n(u),h=n(704),o=n(705);function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=function(){function e(t,n,r,i,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.u2fUtils=null,this.container=t,this.renderAuthenticated=this.renderAuthenticated.bind(this),this.renderError=this.renderError.bind(this),this.renderInProgress=this.renderInProgress.bind(this),this.renderTemplate=this.renderTemplate.bind(this),this.authenticate=this.authenticate.bind(this),this.start=this.start.bind(this),this.appId=r.app_id,this.challenge=r.challenge,this.form=n,this.fallbackButton=i,this.fallbackUI=s,this.fallbackButton&&this.fallbackButton.addEventListener("click",this.switchToFallbackUI.bind(this)),this.signRequests=r.sign_requests.map((function(e){return a()(e,"challenge")})),this.templates={setup:"#js-authenticate-u2f-setup",inProgress:"#js-authenticate-u2f-in-progress",error:"#js-authenticate-u2f-error",authenticated:"#js-authenticate-u2f-authenticated"}}var t,n,r;return t=e,(n=[{key:"start",value:function(){var e=this;return Object(h.a)().then((function(t){e.u2fUtils=t,e.renderInProgress()})).catch((function(){return e.switchToFallbackUI()}))}},{key:"authenticate",value:function(){var e=this;return this.u2fUtils.sign(this.appId,this.challenge,this.signRequests,(function(t){if(t.errorCode){var n=new o.a(t.errorCode,"authenticate");return e.renderError(n)}return e.renderAuthenticated(JSON.stringify(t))}),10)}},{key:"renderTemplate",value:function(e,t){var n=i()(this.templates[e]).html(),r=c()(n);return this.container.html(r(t))}},{key:"renderInProgress",value:function(){return this.renderTemplate("inProgress"),this.authenticate()}},{key:"renderError",value:function(e){return this.renderTemplate("error",{error_message:e.message(),error_code:e.errorCode}),this.container.find("#js-u2f-try-again").on("click",this.renderInProgress)}},{key:"renderAuthenticated",value:function(e){this.renderTemplate("authenticated");var t=this.container[0];t.querySelector("#js-device-response").value=e,t.querySelector(this.form).submit(),this.fallbackButton.classList.add("hidden")}},{key:"switchToFallbackUI",value:function(){this.fallbackButton.classList.add("hidden"),this.container[0].classList.add("hidden"),this.fallbackUI.classList.remove("hidden")}}])&&l(t.prototype,n),r&&l(t,r),e}();t.a=function(){if(gon.u2f){var e=new d(i()("#js-authenticate-u2f"),"#js-login-u2f-form",gon.u2f,document.querySelector("#js-login-2fa-device"),document.querySelector(".js-2fa-form"));e.start(),gl.u2fAuthenticate=e}}}},[[2235,1,0,11]]]);
//# sourceMappingURL=pages.omniauth_callbacks.81c15f1c.chunk.js.map