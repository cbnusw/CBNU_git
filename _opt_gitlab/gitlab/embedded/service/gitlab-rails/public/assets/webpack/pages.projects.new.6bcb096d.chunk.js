(this.webpackJsonp=this.webpackJsonp||[]).push([[182],{1050:function(e,t,n){"use strict";n(30),n(42),n(55),n(91),n(89);var o=n(0),r=n.n(o),a=n(16),c=n(110),i=n(1),s=!1,l=!1,u=function(e,t){var n=Object(c.j)(e.val());t.val(n)},p=function(e,t,n){var o=t.val();n||e.val(Object(c.e)(Object(c.i)(o,"[-_]")))},d=function(e,t){e.off("keyup change").on("keyup change",(function(){u(e,t),l=e.val().trim().length>0,s=t.val().trim().length>0})),t.off("keyup change").on("keyup change",(function(){p(e,t,l),s=t.val().trim().length>0}))},f=function(e){var t=e.parents(".toggle-import-form").find("#project_name"),n=e.parents(".toggle-import-form").find("#project_path");if(!s){var o=e.val().trim();if(0!==o.length){o=o.replace(/\/?(\.git\/?)?(\?.*)?(#.*)?$/,"");var r=/\/([^\/]+)$/.exec(o);r&&(n.val(r[1]),p(t,n,!1))}}};t.a={bindEvents:function(){var e=r()("#new_project"),t=r()("#project_import_url"),n=r()(".tab-pane.active #project_path"),o=r()(".template-button > input"),c=r()(".project-fields-form"),s=r()(".selected-template"),l=r()(".change-template"),u=r()(".selected-icon"),p=r()(".push-new-project-tip"),h=r()(".project-templates-buttons"),m=r()(".tab-pane.active #project_name");1===e.length&&(r()(".how_to_import_link").on("click",(function(e){e.preventDefault(),r()(e.currentTarget).next(".modal").show()})),r()(".modal-header .close").on("click",(function(){r()(".modal").hide()})),r()(".btn_import_gitlab_project").on("click",(function(){var e=r()("a.btn_import_gitlab_project").attr("href");r()(".btn_import_gitlab_project").attr("href","".concat(e,"?namespace_id=").concat(r()("#project_namespace_id").val(),"&name=").concat(m.val(),"&path=").concat(n.val()))})),p&&p.removeAttr("rel").removeAttr("target").on("click",(function(e){e.preventDefault()})).popover({title:p.data("title"),placement:"bottom",html:!0,content:r()(".push-new-project-tip-template").html()}).on("shown.bs.popover",(function(){r()(document).on("click.popover touchstart.popover",(function(e){0===r()(e.target).closest(".popover").length&&p.trigger("click")}));var e=r()("#".concat(p.attr("aria-describedby"))).find(".js-select-on-focus");Object(a.c)(e),e.focus()})).on("hide.bs.popover",(function(){r()(document).off("click.popover touchstart.popover")})),o.on("change",(function(){h.addClass("hidden"),c.addClass("selected"),u.empty();var e=r()(this).val(),t={rails:{text:Object(i.d)("ProjectTemplates|Ruby on Rails"),icon:".template-option .icon-rails"},express:{text:Object(i.d)("ProjectTemplates|NodeJS Express"),icon:".template-option .icon-express"},spring:{text:Object(i.d)("ProjectTemplates|Spring"),icon:".template-option .icon-spring"},iosswift:{text:Object(i.d)("ProjectTemplates|iOS (Swift)"),icon:".template-option .icon-iosswift"},dotnetcore:{text:Object(i.d)("ProjectTemplates|.NET Core"),icon:".template-option .icon-dotnetcore"},android:{text:Object(i.d)("ProjectTemplates|Android"),icon:".template-option .icon-android"},gomicro:{text:Object(i.d)("ProjectTemplates|Go Micro"),icon:".template-option .icon-gomicro"},gatsby:{text:Object(i.d)("ProjectTemplates|Pages/Gatsby"),icon:".template-option .icon-gatsby"},hugo:{text:Object(i.d)("ProjectTemplates|Pages/Hugo"),icon:".template-option .icon-hugo"},jekyll:{text:Object(i.d)("ProjectTemplates|Pages/Jekyll"),icon:".template-option .icon-jekyll"},plainhtml:{text:Object(i.d)("ProjectTemplates|Pages/Plain HTML"),icon:".template-option .icon-plainhtml"},gitbook:{text:Object(i.d)("ProjectTemplates|Pages/GitBook"),icon:".template-option .icon-gitbook"},hexo:{text:Object(i.d)("ProjectTemplates|Pages/Hexo"),icon:".template-option .icon-hexo"},nfhugo:{text:Object(i.d)("ProjectTemplates|Netlify/Hugo"),icon:".template-option .icon-nfhugo"},nfjekyll:{text:Object(i.d)("ProjectTemplates|Netlify/Jekyll"),icon:".template-option .icon-nfjekyll"},nfplainhtml:{text:Object(i.d)("ProjectTemplates|Netlify/Plain HTML"),icon:".template-option .icon-nfplainhtml"},nfgitbook:{text:Object(i.d)("ProjectTemplates|Netlify/GitBook"),icon:".template-option .icon-nfgitbook"},nfhexo:{text:Object(i.d)("ProjectTemplates|Netlify/Hexo"),icon:".template-option .icon-nfhexo"},salesforcedx:{text:Object(i.d)("ProjectTemplates|SalesforceDX"),icon:".template-option .icon-salesforcedx"},serverless_framework:{text:Object(i.d)("ProjectTemplates|Serverless Framework/JS"),icon:".template-option .icon-serverless_framework"}}[e];s.text(t.text),r()(t.icon).clone().addClass("d-block").appendTo(u);var n=r()(".tab-pane.active #project_name"),o=r()(".tab-pane.active #project_path");n.focus(),d(n,o)})),l.on("click",(function(){h.removeClass("hidden"),c.removeClass("selected"),o.prop("checked",!1)})),e.on("submit",(function(){n.val(n.val().trim())})),t.keyup((function(){return f(t)})),r()(".js-import-git-toggle-button").on("click",(function(){var e=r()("#project_mirror");e.attr("disabled",!e.attr("disabled")),d(r()(".tab-pane.active #project_name"),r()(".tab-pane.active #project_path"))})),d(m,n))},deriveProjectPathFromUrl:f,onProjectNameChange:u,onProjectPathChange:p}},113:function(e,t,n){"use strict";n.r(t);var o=n(88),r=n(70),a=n(96);document.addEventListener("DOMContentLoaded",(function(){Object(a.a)(document,gon),new o.a,new r.a}))},2379:function(e,t,n){n(105),n(113),e.exports=n(2518)},2518:function(e,t,n){"use strict";n.r(t);n(30),n(26),n(35),n(27);var o=n(0),r=n.n(o);function a(e){if(e&&"selectedIndex"in e){var t=e.options[e.selectedIndex].dataset,n=t.name,o=t.visibility,r=t.visibilityLevel,a=t.showPath,c=t.editPath;document.querySelectorAll(".visibility-level-setting .form-check").forEach((function(e){var t=e.querySelector("input[type=radio]"),i=t?t.value:0,s=e.querySelector(".option-title"),l=s?s.innerText.toLowerCase():"";if(!e.classList.contains("restricted"))if(r<i){e.classList.add("disabled"),t.disabled=!0;var u=e.querySelector(".option-disabled-reason");u&&(u.innerHTML="This project cannot be ".concat(l,' because the visibility of\n            <a href="').concat(a,'">').concat(n,"</a> is ").concat(o,". To make this project\n            ").concat(l,', you must first <a href="').concat(c,'">change the visibility</a>\n            of the parent group.'))}else e.classList.remove("disabled"),t.disabled=!1}))}}var c=n(1050);document.addEventListener("DOMContentLoaded",(function(){var e;(e=document.querySelector("select.js-select-namespace"))&&(r()(".select2.js-select-namespace").on("change",(function(){return a(e)})),a(e)),c.a.bindEvents()}))},70:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n(24),n(49),n(56),n(40),n(90),n(18),n(36),n(41);var o=n(8),r=n.n(o),a=n(9);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=i(this,s(t).call(this)),r.a.bind("g p",(function(){return Object(a.a)(".shortcuts-project")})),r.a.bind("g v",(function(){return Object(a.a)(".shortcuts-project-activity")})),r.a.bind("g r",(function(){return Object(a.a)(".shortcuts-project-releases")})),r.a.bind("g f",(function(){return Object(a.a)(".shortcuts-tree")})),r.a.bind("g c",(function(){return Object(a.a)(".shortcuts-commits")})),r.a.bind("g j",(function(){return Object(a.a)(".shortcuts-builds")})),r.a.bind("g n",(function(){return Object(a.a)(".shortcuts-network")})),r.a.bind("g d",(function(){return Object(a.a)(".shortcuts-repository-charts")})),r.a.bind("g i",(function(){return Object(a.a)(".shortcuts-issues")})),r.a.bind("g b",(function(){return Object(a.a)(".shortcuts-issue-boards")})),r.a.bind("g m",(function(){return Object(a.a)(".shortcuts-merge_requests")})),r.a.bind("g w",(function(){return Object(a.a)(".shortcuts-wiki")})),r.a.bind("g s",(function(){return Object(a.a)(".shortcuts-snippets")})),r.a.bind("g k",(function(){return Object(a.a)(".shortcuts-kubernetes")})),r.a.bind("g e",(function(){return Object(a.a)(".shortcuts-environments")})),r.a.bind("g l",(function(){return Object(a.a)(".shortcuts-metrics")})),r.a.bind("i",(function(){return Object(a.a)(".shortcuts-new-issue")})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),t}(n(107).a)},73:function(e,t,n){"use strict";n(30),n(35),n(18),n(64);var o=n(0),r=n.n(o),a=n(32),c=(n(65),n(69),n(55),n(67),n(71));function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.projectSelectInput=r()(t),this.newItemBtn=r()(".new-project-item-link"),this.resourceType=this.newItemBtn.data("type"),this.resourceLabel=this.newItemBtn.data("label"),this.formattedText=this.deriveTextVariants(),this.groupId=this.projectSelectInput.data("groupId"),this.bindEvents(),this.initLocalStorage()}var t,o,a;return t=e,(o=[{key:"bindEvents",value:function(){var e=this;this.projectSelectInput.siblings(".new-project-item-select-button").on("click",(function(t){return e.openDropdown(t)})),this.newItemBtn.on("click",(function(t){e.getProjectFromLocalStorage()||(t.preventDefault(),e.openDropdown(t))})),this.projectSelectInput.on("change",(function(){return e.selectProject()}))}},{key:"initLocalStorage",value:function(){c.a.isLocalStorageAccessSafe()&&(this.localStorageKey=["group",this.groupId,this.formattedText.localStorageItemType,"recent-project"].join("-"),this.setBtnTextFromLocalStorage())}},{key:"openDropdown",value:function(e){n.e(239).then(n.t.bind(null,428,7)).then((function(){r()(e.currentTarget).siblings(".project-item-select").select2("open")})).catch((function(){}))}},{key:"selectProject",value:function(){var e=JSON.parse(this.projectSelectInput.val()),t={url:"".concat(e.url,"/").concat(this.projectSelectInput.data("relativePath")),name:e.name};this.setNewItemBtnAttributes(t),this.setProjectInLocalStorage(t)}},{key:"setBtnTextFromLocalStorage",value:function(){var e=this.getProjectFromLocalStorage();this.setNewItemBtnAttributes(e)}},{key:"setNewItemBtnAttributes",value:function(e){e?(this.newItemBtn.attr("href",e.url),this.newItemBtn.text("".concat(this.formattedText.defaultTextPrefix," in ").concat(e.name))):this.newItemBtn.text("Select project to create ".concat(this.formattedText.presetTextSuffix))}},{key:"getProjectFromLocalStorage",value:function(){var e=localStorage.getItem(this.localStorageKey);return JSON.parse(e)}},{key:"setProjectInLocalStorage",value:function(e){var t=JSON.stringify(e);localStorage.setItem(this.localStorageKey,t)}},{key:"deriveTextVariants",value:function(){var e=this.resourceLabel;return{localStorageItemType:"new-".concat(this.resourceType.split("_").join("-").slice(0,-1)),defaultTextPrefix:e,presetTextSuffix:this.resourceType.split("_").join(" ").slice(0,-1)}}}])&&i(t.prototype,o),a&&i(t,a),e}(),l=n(1),u=function(){r()(".ajax-project-select").each((function(e,t){var n,o=this,c=r()(t).data("simpleFilter")||!1,i=r()(t).data("select2");return this.groupId=r()(t).data("groupId"),this.userId=r()(t).data("userId"),this.includeGroups=r()(t).data("includeGroups"),this.allProjects=r()(t).data("allProjects")||!1,this.orderBy=r()(t).data("orderBy")||"id",this.withIssuesEnabled=r()(t).data("withIssuesEnabled"),this.withMergeRequestsEnabled=r()(t).data("withMergeRequestsEnabled"),this.withShared=void 0===r()(t).data("withShared")||r()(t).data("withShared"),this.includeProjectsInSubgroups=r()(t).data("includeProjectsInSubgroups")||!1,this.allowClear=r()(t).data("allowClear")||!1,n=Object(l.d)("ProjectSelect|Search for project"),this.includeGroups&&(n+=Object(l.d)("ProjectSelect| or group")),r()(t).select2({placeholder:n,minimumInputLength:0,query:function(e){var t,n=function(t){var n={results:t};return e.callback(n)};return t=o.includeGroups?function(t){return a.a.groups(e.term,{},(function(e){var o=e.concat(t);return n(o)}))}:n,o.groupId?a.a.groupProjects(o.groupId,e.term,{with_issues_enabled:o.withIssuesEnabled,with_merge_requests_enabled:o.withMergeRequestsEnabled,with_shared:o.withShared,include_subgroups:o.includeProjectsInSubgroups},t):o.userId?a.a.userProjects(o.userId,e.term,{with_issues_enabled:o.withIssuesEnabled,with_merge_requests_enabled:o.withMergeRequestsEnabled,with_shared:o.withShared,include_subgroups:o.includeProjectsInSubgroups},t):a.a.projects(e.term,{order_by:o.orderBy,with_issues_enabled:o.withIssuesEnabled,with_merge_requests_enabled:o.withMergeRequestsEnabled,membership:!o.allProjects},t)},id:function(e){return c?e.id:JSON.stringify({name:e.name,url:e.web_url})},text:function(e){return e.name_with_namespace||e.name},initSelection:function(e,t){return a.a.project(e.val()).then((function(e){var n=e.data;return t(n)}))},allowClear:this.allowClear,dropdownCssClass:"ajax-project-dropdown"}),i||c?t:new s(t)}))};t.a=function(){return n.e(239).then(n.t.bind(null,428,7)).then(u).catch((function(){}))}},88:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));n(42),n(89);var o=n(0),r=n.n(o),a=n(51),c=n.n(a),i=n(1),s=n(33);n(28),n(78),n(40),n(46),n(129),n(35),n(77),n(18),n(36),n(41);var l=function(e){return e.reduce((function(e,t){var n=t.name,o=t.value;return Object.assign(e,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},n,o))}),{})},u=n(11),p=n(14),d=n(73);function f(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t=r()("ul.clone-options-dropdown"),n=r()("#project_clone"),o=r()(".js-git-clone-holder .js-clone-dropdown-label"),a=document.querySelector(".js-mobile-git-clone .js-clone-dropdown-label"),i=o.text().trim();i.length>0&&r()("a:contains('".concat(i,"')"),t).addClass("is-active"),r()("a",t).on("click",(function(e){e.preventDefault();var o=r()(e.currentTarget),c=o.attr("href"),i=o.data("cloneType");r()(".is-active",t).removeClass("is-active"),r()('a[data-clone-type="'.concat(i,'"]')).each((function(){var e=r()(this),t=e.find(".dropdown-menu-inner-title").text(),n=e.closest(".project-clone-holder").find(".js-clone-dropdown-label");e.toggleClass("is-active"),n.text(t)})),a?a.dataset.clipboardText=c:n.val(c),r()(".js-git-empty .js-clone").text(c)})),e.initRefSwitcher(),r()(".project-refs-select").on("change",(function(){return r()(this).parents("form").submit()})),r()(".hide-no-ssh-message").on("click",(function(e){return c.a.set("hide_no_ssh_message","false"),r()(this).parents(".no-ssh-key-message").remove(),e.preventDefault()})),r()(".hide-no-password-message").on("click",(function(e){return c.a.set("hide_no_password_message","false"),r()(this).parents(".no-password-message").remove(),e.preventDefault()})),r()(".hide-auto-devops-implicitly-enabled-banner").on("click",(function(e){var t=r()(this).data("project-id"),n="hide_auto_devops_implicitly_enabled_banner_".concat(t);return c.a.set(n,"false"),r()(this).parents(".auto-devops-implicitly-enabled-banner").remove(),e.preventDefault()})),e.projectSelectDropdown()}var t,n,o;return t=e,o=[{key:"projectSelectDropdown",value:function(){Object(d.a)(),r()(".project-item-select").on("click",(function(t){return e.changeProject(r()(t.currentTarget).val())}))}},{key:"changeProject",value:function(e){return window.location=e}},{key:"initRefSwitcher",value:function(){var e=document.createElement("li"),t=document.createElement("a");return t.href="#",r()(".js-project-refs-dropdown").each((function(){var n,o,a,c=r()(this),d=c.data("selected"),f=c.data("fieldName"),h=Boolean(c.data("visit")),m=c.closest("form"),b=m.attr("action"),j=Object(s.h)((n=m[0],o=new FormData(n),a=Array.from(o.keys()).map((function(e){var t=o.getAll(e);return{name:e,value:1===(t=t.filter((function(e){return e}))).length?t[0]:t}})),l(a)),b);return c.glDropdown({data:function(e,t){u.a.get(c.data("refsUrl"),{params:{ref:c.data("ref"),search:e}}).then((function(e){var n=e.data;return t(n)})).catch((function(){return Object(p.a)(Object(i.a)("An error occurred while getting projects"))}))},selectable:!0,filterable:!0,filterRemote:!0,filterByText:!0,inputFieldName:c.data("inputFieldName"),fieldName:f,renderRow:function(n){var o,r,a,c=e.cloneNode(!1),i=t.cloneNode(!1);return n===d&&(i.className="is-active"),i.textContent=n,i.dataset.ref=n,n.length>0&&h&&(i.href=Object(s.h)((a=n,(r=f)in(o={})?Object.defineProperty(o,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[r]=a,o),j)),c.appendChild(i),c},id:function(e,t){return t.attr("data-ref")},toggleLabel:function(e,t){return t.text().trim()},clicked:function(e){var t=e.e;h||t.preventDefault()}})}))}}],(n=null)&&f(t.prototype,n),o&&f(t,o),e}()}},[[2379,1,0,2]]]);
//# sourceMappingURL=pages.projects.new.6bcb096d.chunk.js.map