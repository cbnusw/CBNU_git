(this.webpackJsonp=this.webpackJsonp||[]).push([[186],{2386:function(e,t,n){n(105),n(113),e.exports=n(2387)},2387:function(e,t,n){"use strict";n.r(t);var r=n(728);document.addEventListener("DOMContentLoaded",r.a)},649:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}));n(30),n(42),n(35),n(72),n(430);function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a={name:"UTC",offset:0},i={$inputEl:null,$dropdownEl:null,onSelectTimezone:null,displayFormat:function(e){return e.name}},o=function(e){return"[UTC ".concat((t=e.offset,n=parseInt(t,10),Number.isNaN(n)||0===n?"0":"".concat(t>0?"+":"-"," ").concat(Math.abs(t/3600))),"] ").concat(e.name);var t,n},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e&&e.length&&t&&t.length&&e.find((function(e){return e.identifier===t}))||null},s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,n=t.$dropdownEl,r=t.$inputEl,o=t.onSelectTimezone,s=t.displayFormat;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$dropdown=n,this.$dropdownToggle=this.$dropdown.find(".dropdown-toggle-text"),this.$input=r,this.timezoneData=this.$dropdown.data("data"),this.onSelectTimezone=o,this.displayFormat=s||i.displayFormat,this.initialTimezone=l(this.timezoneData,this.$input.val())||a,this.initDefaultTimezone(),this.initDropdown()}var t,n,s;return t=e,(n=[{key:"initDropdown",value:function(){var e=this;this.$dropdown.glDropdown({data:this.timezoneData,filterable:!0,selectable:!0,toggleLabel:this.displayFormat,search:{fields:["name"]},clicked:function(t){return e.updateInputValue(t)},text:function(e){return o(e)}}),this.setDropdownToggle(this.displayFormat(this.initialTimezone))}},{key:"initDefaultTimezone",value:function(){this.$input.val()||this.$input.val(a.name)}},{key:"setDropdownToggle",value:function(e){this.$dropdownToggle.text(e)}},{key:"updateInputValue",value:function(e){var t=e.selectedObj,n=e.e;n.preventDefault(),this.$input.val(t.identifier),this.onSelectTimezone&&this.onSelectTimezone({selectedObj:t,e:n})}}])&&r(t.prototype,n),s&&r(t,s),e}()},728:function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n(177),l=n(763),s=(n(104),n(398),n(122),{props:{initialCronInterval:{type:String,required:!1,default:""}},data:function(){return{inputNameAttribute:"schedule[cron]",cronInterval:this.initialCronInterval,cronIntervalPresets:{everyDay:"0 4 * * *",everyWeek:"0 4 * * 0",everyMonth:"0 4 1 * *"},cronSyntaxUrl:"https://en.wikipedia.org/wiki/Cron",customInputEnabled:!1}},computed:{intervalIsPreset:function(){return Object.values(this.cronIntervalPresets).includes(this.cronInterval)},isEditable:function(){return Boolean(this.customInputEnabled||!this.intervalIsPreset)}},watch:{cronInterval:function(){this.$nextTick((function(){gl.pipelineScheduleFieldErrors.updateFormValidityState()}))}},created:function(){this.intervalIsPreset&&(this.enableCustomInput=!1)},methods:{toggleCustomInput:function(e){this.customInputEnabled=e,e&&(this.cronInterval="".concat(this.cronInterval," "))}}}),u=n(4),c=Object(u.a)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"interval-pattern-form-group"},[n("div",{staticClass:"cron-preset-radio-input"},[n("input",{staticClass:"label-bold",attrs:{id:"custom",name:e.inputNameAttribute,type:"radio"},domProps:{value:e.cronInterval,checked:e.isEditable},on:{click:function(t){return e.toggleCustomInput(!0)}}}),e._v(" "),n("label",{attrs:{for:"custom"}},[e._v(" "+e._s(e.s__("PipelineSheduleIntervalPattern|Custom"))+" ")]),e._v(" "),n("span",{staticClass:"cron-syntax-link-wrap"},[e._v("\n      ("),n("a",{attrs:{href:e.cronSyntaxUrl,target:"_blank"}},[e._v(" "+e._s(e.__("Cron syntax"))+" ")]),e._v(")\n    ")])]),e._v(" "),n("div",{staticClass:"cron-preset-radio-input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.cronInterval,expression:"cronInterval"}],staticClass:"label-bold",attrs:{id:"every-day",name:e.inputNameAttribute,type:"radio"},domProps:{value:e.cronIntervalPresets.everyDay,checked:e._q(e.cronInterval,e.cronIntervalPresets.everyDay)},on:{click:function(t){return e.toggleCustomInput(!1)},change:function(t){e.cronInterval=e.cronIntervalPresets.everyDay}}}),e._v(" "),n("label",{staticClass:"label-bold",attrs:{for:"every-day"}},[e._v(" "+e._s(e.__("Every day (at 4:00am)"))+" ")])]),e._v(" "),n("div",{staticClass:"cron-preset-radio-input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.cronInterval,expression:"cronInterval"}],staticClass:"label-bold",attrs:{id:"every-week",name:e.inputNameAttribute,type:"radio"},domProps:{value:e.cronIntervalPresets.everyWeek,checked:e._q(e.cronInterval,e.cronIntervalPresets.everyWeek)},on:{click:function(t){return e.toggleCustomInput(!1)},change:function(t){e.cronInterval=e.cronIntervalPresets.everyWeek}}}),e._v(" "),n("label",{staticClass:"label-bold",attrs:{for:"every-week"}},[e._v("\n      "+e._s(e.__("Every week (Sundays at 4:00am)"))+"\n    ")])]),e._v(" "),n("div",{staticClass:"cron-preset-radio-input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.cronInterval,expression:"cronInterval"}],staticClass:"label-bold",attrs:{id:"every-month",name:e.inputNameAttribute,type:"radio"},domProps:{value:e.cronIntervalPresets.everyMonth,checked:e._q(e.cronInterval,e.cronIntervalPresets.everyMonth)},on:{click:function(t){return e.toggleCustomInput(!1)},change:function(t){e.cronInterval=e.cronIntervalPresets.everyMonth}}}),e._v(" "),n("label",{staticClass:"label-bold",attrs:{for:"every-month"}},[e._v("\n      "+e._s(e.__("Every month (on the 1st at 4:00am)"))+"\n    ")])]),e._v(" "),n("div",{staticClass:"cron-interval-input-wrapper"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.cronInterval,expression:"cronInterval"}],staticClass:"form-control inline cron-interval-input",attrs:{id:"schedule_cron",placeholder:e.__("Define a custom pattern with cron syntax"),name:e.inputNameAttribute,disabled:!e.isEditable,type:"text",required:"true"},domProps:{value:e.cronInterval},on:{input:function(t){t.target.composing||(e.cronInterval=t.target.value)}}})])])}),[],!1,null,null,null).exports,d=n(649);n(42),n(46),n(35);function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var v=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$dropdown=a()(".js-target-branch-dropdown"),this.$dropdownToggle=this.$dropdown.find(".dropdown-toggle-text"),this.$input=a()("#schedule_ref"),this.initDefaultBranch(),this.initDropdown()}var t,n,r;return t=e,(n=[{key:"initDropdown",value:function(){var e=this;this.$dropdown.glDropdown({data:this.formatBranchesList(),filterable:!0,selectable:!0,toggleLabel:function(e){return e.name},search:{fields:["name"]},clicked:function(t){return e.updateInputValue(t)},text:function(e){return e.name}}),this.setDropdownToggle()}},{key:"formatBranchesList",value:function(){return this.$dropdown.data("data").map((function(e){return{name:e}}))}},{key:"setDropdownToggle",value:function(){var e=this.$input.val();this.$dropdownToggle.text(e)}},{key:"initDefaultBranch",value:function(){var e=this.$input.val(),t=this.$dropdown.data("defaultBranch");e||this.$input.val(t)}},{key:"updateInputValue",value:function(e){var t=e.selectedObj;e.e.preventDefault(),this.$input.val(t.name),gl.pipelineScheduleFieldErrors.updateFormValidityState()}}])&&p(t.prototype,n),r&&p(t,r),e}(),h=n(762);i.default.use(o.a);t.a=function(){var e,t;e=document.getElementById("interval-pattern-input"),t=e?e.dataset.initialInterval:"",new i.default({el:e,components:{intervalPatternInput:c},render:function(e){return e("interval-pattern-input",{props:{initialCronInterval:t}})}});var n=document.getElementById("new-pipeline-schedule-form");gl.timezoneDropdown=new d.a({$dropdownEl:a()(".js-timezone-dropdown"),$inputEl:a()("#schedule_cron_timezone"),onSelectTimezone:function(){gl.pipelineScheduleFieldErrors.updateFormValidityState()}}),gl.targetBranchDropdown=new v,gl.pipelineScheduleFieldErrors=new l.a(n),Object(h.a)({container:a()(".js-ci-variable-list-section"),formField:"schedule"})}}},[[2386,1,0,2,13]]]);
//# sourceMappingURL=pages.projects.pipeline_schedules.edit.49c5ab91.chunk.js.map