(this.webpackJsonp=this.webpackJsonp||[]).push([[159,6,8,10],{112:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return s}));var i=1024,s="hidden"},113:function(e,t,n){"use strict";n.r(t);var i=n(88),s=n(70),a=n(96);document.addEventListener("DOMContentLoaded",(function(){Object(a.a)(document,gon),new i.a,new s.a}))},117:function(e,t,n){"use strict";n.d(t,"e",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"f",(function(){return l})),n.d(t,"g",(function(){return c})),n.d(t,"r",(function(){return u})),n.d(t,"j",(function(){return d})),n.d(t,"l",(function(){return p})),n.d(t,"k",(function(){return f})),n.d(t,"m",(function(){return h})),n.d(t,"p",(function(){return m})),n.d(t,"q",(function(){return g})),n.d(t,"i",(function(){return b})),n.d(t,"n",(function(){return v})),n.d(t,"h",(function(){return y})),n.d(t,"o",(function(){return _}));n(770);var i=750,s=50,a=72,r="editor",o="preview",l="createMergeRequestIn",c="readMergeRequest",u={mr:"mrdiff",edit:"editor",diff:"diff"},d={replaced:"replaced",new:"new",deleted:"deleted",renamed:"renamed",mode_changed:"mode_changed"},p=Object.freeze({not_diffable:"not_diffable",no_preview:"no_preview",added:"added",deleted:"deleted",renamed:"renamed",mode_changed:"mode_changed",text:"text",image:"image"}),f=Object.freeze({too_large:"too_large",stored_externally:"server_side_but_stored_externally"}),h={edit:{name:"ide-tree",keepAlive:!1},review:{name:"ide-review",keepAlive:!1},commit:{name:"repo-commit-section",keepAlive:!1}},m={pipelines:{name:"pipelines-list",keepAlive:!0},jobsDetail:{name:"jobs-detail",keepAlive:!1},mergeRequestInfo:{name:"merge-request-info",keepAlive:!0},clientSidePreview:{name:"clientside",keepAlive:!1}},g={unstaged:"unstaged",staged:"staged"},b={addition:{icon:"file-addition",class:"ide-file-addition"},modified:{icon:"file-modified",class:"ide-file-modified"},deleted:{icon:"file-deletion",class:"ide-file-deletion"}},v={rename:"rename",tree:"tree"},y={move:"move",delete:"delete",create:"create",update:"update"},_="package.json"},118:function(e,t,n){"use strict";n.d(t,"l",(function(){return i})),n.d(t,"J",(function(){return s})),n.d(t,"u",(function(){return a})),n.d(t,"H",(function(){return r})),n.d(t,"E",(function(){return o})),n.d(t,"c",(function(){return l})),n.d(t,"h",(function(){return c})),n.d(t,"f",(function(){return u})),n.d(t,"n",(function(){return d})),n.d(t,"D",(function(){return p})),n.d(t,"G",(function(){return f})),n.d(t,"L",(function(){return h})),n.d(t,"i",(function(){return m})),n.d(t,"r",(function(){return g})),n.d(t,"s",(function(){return b})),n.d(t,"g",(function(){return v})),n.d(t,"q",(function(){return y})),n.d(t,"t",(function(){return _})),n.d(t,"b",(function(){return w})),n.d(t,"R",(function(){return k})),n.d(t,"d",(function(){return j})),n.d(t,"o",(function(){return O})),n.d(t,"p",(function(){return S})),n.d(t,"v",(function(){return C})),n.d(t,"B",(function(){return D})),n.d(t,"P",(function(){return T})),n.d(t,"N",(function(){return E})),n.d(t,"S",(function(){return x})),n.d(t,"O",(function(){return P})),n.d(t,"j",(function(){return I})),n.d(t,"A",(function(){return L})),n.d(t,"y",(function(){return A})),n.d(t,"M",(function(){return N})),n.d(t,"F",(function(){return q})),n.d(t,"C",(function(){return R})),n.d(t,"Q",(function(){return B})),n.d(t,"m",(function(){return M})),n.d(t,"a",(function(){return F})),n.d(t,"x",(function(){return $})),n.d(t,"w",(function(){return U})),n.d(t,"z",(function(){return H})),n.d(t,"K",(function(){return V})),n.d(t,"k",(function(){return z})),n.d(t,"I",(function(){return W})),n.d(t,"e",(function(){return G}));var i="inline",s="parallel",a="match",r="old-nonewline",o="new-nonewline",l="context",c="empty-cell",u="DiffNote",d="LegacyDiffNote",p="new",f="old",h="text",m="image",g="left",b="right",v="diff_view",y="is-over",_="unfold js-unfold",w="diff-expanded",k=20,j=3,O=17,S=100,C=2e3,D="mr_tree_show",T="tree",E="mr_diff_tree_list",x="mr_show_whitespace",P="mr_tree_list_width",I=320,L=240,A=400,N=260,q="old_line",R="new_line",B="type",M="left",F="container-limited limit-container-width mx-lg-auto px-3",$=500,U=30,H=2,V=200,z="highlighted_diff_lines",W="parallel_diff_lines",G=20},120:function(e,t,n){"use strict";n.d(t,"h",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return a})),n.d(t,"o",(function(){return r})),n.d(t,"u",(function(){return o})),n.d(t,"b",(function(){return l})),n.d(t,"r",(function(){return c})),n.d(t,"s",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"m",(function(){return p})),n.d(t,"l",(function(){return f})),n.d(t,"j",(function(){return h})),n.d(t,"n",(function(){return m})),n.d(t,"w",(function(){return g})),n.d(t,"t",(function(){return b})),n.d(t,"c",(function(){return v})),n.d(t,"k",(function(){return y})),n.d(t,"f",(function(){return _})),n.d(t,"i",(function(){return w})),n.d(t,"q",(function(){return k})),n.d(t,"v",(function(){return j})),n.d(t,"p",(function(){return O})),n.d(t,"g",(function(){return S}));var i="DiscussionNote",s="DiffNote",a="discussion",r="note",o="systemNote",l="comment",c="opened",u="reopened",d="closed",p="merged",f="issue",h="epic",m="MergeRequest",g="delete",b="post",v="changed the description",y=2,_=0,w="show",k="note_",j=10,O={Issue:f,MergeRequest:m,Epic:h},S={ALL:"all",COMMENTS:"comments",HISTORY:"history"}},121:function(e,t,n){"use strict";n(28),n(26),n(85),n(27);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store={columns:3,issues:[],issuesCount:!1,selectedIssues:[],showAddIssuesModal:!1,activeTab:"all",selectedList:null,searchTerm:"",loading:!1,loadingNewPage:!1,filterLoading:!1,page:1,perPage:50,filter:{path:""}}}var t,n,s;return t=e,(n=[{key:"selectedCount",value:function(){return this.getSelectedIssues().length}},{key:"toggleIssue",value:function(e){var t=e,n=t.selected;t.selected=!n,n?this.removeSelectedIssue(t):this.addSelectedIssue(t)}},{key:"toggleAll",value:function(){var e=this,t=this.selectedCount()!==this.store.issues.length;this.store.issues.forEach((function(n){var i=n;i.selected!==t&&(i.selected=t,t?e.addSelectedIssue(n):e.removeSelectedIssue(n))}))}},{key:"getSelectedIssues",value:function(){return this.store.selectedIssues.filter((function(e){return e.selected}))}},{key:"addSelectedIssue",value:function(e){-1===this.selectedIssueIndex(e)&&this.store.selectedIssues.push(e)}},{key:"removeSelectedIssue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];("all"===this.store.activeTab||t)&&(this.store.selectedIssues=this.store.selectedIssues.filter((function(t){return t.id!==e.id})))}},{key:"purgeUnselectedIssues",value:function(){var e=this;this.store.selectedIssues.forEach((function(t){t.selected||e.removeSelectedIssue(t,!0)}))}},{key:"selectedIssueIndex",value:function(e){return this.store.selectedIssues.indexOf(e)}},{key:"findSelectedIssue",value:function(e){return this.store.selectedIssues.filter((function(t){return t.id===e.id}))[0]}}])&&i(t.prototype,n),s&&i(t,s),e}();t.a=new s},125:function(e,t,n){e.exports=n(284)},128:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i={assignee:"assignee",milestone:"milestone",backlog:"backlog",closed:"closed",label:"label",promotion:"promotion",blank:"blank"}},135:function(e,t,n){"use strict";var i=new(n(17).default);window.emitSidebarEvent=function(){return i.$emit.apply(i,arguments)},t.a=i},1396:function(e,t,n){"use strict";n.r(t);var i={};n.r(i),n.d(i,"setInitialState",(function(){return st})),n.d(i,"requestData",(function(){return at})),n.d(i,"receiveDataSuccess",(function(){return rt})),n.d(i,"receiveDataError",(function(){return ot})),n.d(i,"fetchMergeRequests",(function(){return lt})),n.d(i,"default",(function(){return ct}));var s=n(725),a=n(724),r=(n(42),n(72),n(55),n(91),n(89),n(0)),o=n.n(r),l=n(11),c=n(110),u=n(14),d=(n(30),n(26),n(85),n(69),n(77),n(38),n(311),n(68),n(27),n(20)),p=n.n(d),f=n(259),h=n(345),m=n(1),g=n(17),b=n(16),v=(n(46),n(301)),y=n(2533),_=n(32),w=g.default.observable({selectedProject:{}}),k=(n(35),n(1236)),j=n(1237),O=n(45),S={components:{GlDropdown:k.a,GlDropdownItem:j.a,Icon:O.a},props:{projects:{type:Array,required:!0},selectedProject:{type:Object,required:!1,default:function(){return{}}}},computed:{dropdownText:function(){return Object.keys(this.selectedProject).length?this.selectedProject.name:Object(m.a)("Select private project")}},methods:{selectProject:function(e){this.$emit("click",e)}}},C=n(4),D=Object(C.a)(S,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("gl-dropdown",{staticClass:"w-100",attrs:{"toggle-class":"d-flex align-items-center w-100"}},[n("template",{slot:"button-content"},[n("span",{staticClass:"str-truncated-100 mr-2"},[n("icon",{attrs:{name:"lock"}}),e._v("\n      "+e._s(e.dropdownText)+"\n    ")],1),e._v(" "),n("icon",{staticClass:"ml-auto",attrs:{name:"chevron-down"}})],1),e._v(" "),e._l(e.projects,(function(t){return n("gl-dropdown-item",{key:t.id,on:{click:function(n){return e.selectProject(t)}}},[n("icon",{staticClass:"js-active-project-check",class:{icon:t.id!==e.selectedProject.id},attrs:{name:"mobile-issue-close"}}),e._v(" "),n("span",{staticClass:"ml-1"},[e._v(e._s(t.name))])],1)}))],2)}),[],!1,null,null,null).exports,T={components:{GlLink:v.a,GlSprintf:y.a,Dropdown:D},props:{namespacePath:{type:String,required:!0},projectPath:{type:String,required:!0},newForkPath:{type:String,required:!0},helpPagePath:{type:String,required:!0}},data:function(){return{projects:[]}},computed:{selectedProject:function(){return w.selectedProject}},mounted:function(){this.fetchProjects(),this.createBtn=document.querySelector(".js-create-target"),this.warningText=document.querySelector(".js-exposed-info-warning")},methods:{selectProject:function(e){e?(Object.assign(w,{selectedProject:e}),e.namespaceFullPath!==this.namespacePath&&this.showWarning()):this.createBtn&&this.createBtn.setAttribute("disabled","disabled")},normalizeProjectData:function(e){return e.map((function(e){return{id:e.id,name:e.name_with_namespace,pathWithNamespace:e.path_with_namespace,namespaceFullpath:e.namespace.full_path}}))},fetchProjects:function(){var e=this;_.a.projectForks(this.projectPath,{with_merge_requests_enabled:!0,min_access_level:30,visibility:"private"}).then((function(t){var n=t.data;e.projects=e.normalizeProjectData(n),e.selectProject(e.projects[0])})).catch((function(e){throw Object(u.a)(Object(m.a)("Error fetching forked projects. Please try again.")),e}))},showWarning:function(){this.warningText&&this.warningText.classList.remove("hidden"),this.createBtn&&(this.createBtn.classList.add("btn-warning"),this.createBtn.classList.remove("btn-success"))}}},E=Object(C.a)(T,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"confidential-merge-request-fork-group form-group"},[n("label",[e._v(e._s(e.__("Project")))]),e._v(" "),n("div",[e.projects.length?n("dropdown",{attrs:{projects:e.projects,"selected-project":e.selectedProject},on:{click:e.selectProject}}):e._e(),e._v(" "),n("p",{staticClass:"text-muted mt-1 mb-0"},[e.projects.length?[e._v("\n        "+e._s(e.__("To protect this issue's confidentiality, a private fork of this project was selected."))+"\n      ")]:[e._v("\n        "+e._s(e.__("No forks are available to you."))),n("br"),e._v(" "),n("gl-sprintf",{attrs:{message:e.__("To protect this issue's confidentiality, %{forkLink} and set the fork's visibility to private.")},scopedSlots:e._u([{key:"forkLink",fn:function(){return[n("a",{staticClass:"help-link",attrs:{href:e.newForkPath,target:"_blank"}},[e._v(e._s(e.__("fork this project")))])]},proxy:!0}])})],e._v(" "),n("gl-link",{staticClass:"w-auto p-0 d-inline-block text-primary bg-transparent",attrs:{href:e.helpPagePath,target:"_blank"}},[n("span",{staticClass:"sr-only"},[e._v(e._s(e.__("Read more")))]),e._v(" "),n("i",{staticClass:"fa fa-question-circle",attrs:{"aria-hidden":"true"}})])],2)],1)])}),[],!1,null,null,null).exports;function x(){return Object(b.F)(document.querySelector(".js-create-mr").dataset.isConfidential)}function P(){return x()&&Object.keys(w.selectedProject).length>0}function I(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var L=Object.assign({},h.a);function A(e,t){return P()?t.replace(e,w.selectedProject.pathWithNamespace):t}var N=function(){function e(t){var n,i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wrapperEl=t,this.availableButton=this.wrapperEl.querySelector(".available"),this.branchInput=this.wrapperEl.querySelector(".js-branch-name"),this.branchMessage=this.wrapperEl.querySelector(".js-branch-message"),this.createMergeRequestButton=this.wrapperEl.querySelector(".js-create-merge-request"),this.createTargetButton=this.wrapperEl.querySelector(".js-create-target"),this.dropdownList=this.wrapperEl.querySelector(".dropdown-menu"),this.dropdownToggle=this.wrapperEl.querySelector(".js-dropdown-toggle"),this.refInput=this.wrapperEl.querySelector(".js-ref"),this.refMessage=this.wrapperEl.querySelector(".js-ref-message"),this.unavailableButton=this.wrapperEl.querySelector(".unavailable"),this.unavailableButtonSpinner=this.unavailableButton.querySelector(".spinner"),this.unavailableButtonText=this.unavailableButton.querySelector(".text"),this.branchCreated=!1,this.branchIsValid=!0,this.canCreatePath=this.wrapperEl.dataset.canCreatePath,this.createBranchPath=this.wrapperEl.dataset.createBranchPath,this.createMrPath=this.wrapperEl.dataset.createMrPath,this.droplabInitialized=!1,this.isCreatingBranch=!1,this.isCreatingMergeRequest=!1,this.isGettingRef=!1,this.mergeRequestCreated=!1,this.refDebounce=p.a.debounce((function(e,t){return i.getRef(e,t)}),500),this.refIsValid=!0,this.refsPath=this.wrapperEl.dataset.refsPath,this.suggestedRef=this.refInput.value,this.projectPath=this.wrapperEl.dataset.projectPath,this.projectId=this.wrapperEl.dataset.projectId,this.regexps={branch:{createBranchPath:new RegExp("(branch_name=)(.+?)(?=&issue)"),createMrPath:new RegExp("(branch_name=)(.+?)(?=&ref)")},ref:{createBranchPath:new RegExp("(ref=)(.+?)$"),createMrPath:new RegExp("(ref=)(.+?)$")}},this.init(),x()&&(this.createMergeRequestButton.setAttribute("data-dropdown-trigger","#create-merge-request-dropdown"),n=document.getElementById("js-forked-project"),new g.default({el:n,render:function(e){return e(E,{props:{namespacePath:n.dataset.namespacePath,projectPath:n.dataset.projectPath,newForkPath:n.dataset.newForkPath,helpPagePath:n.dataset.helpPagePath}})}}))}var t,n,i;return t=e,i=[{key:"findByValue",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!(!e||!e.length)&&(e.indexOf(t)>-1?t:!!n&&e.find((function(e){return new RegExp("^".concat(t)).test(e)})))}},{key:"getInputSelectedText",value:function(e){var t=e.selectionStart,n=e.selectionEnd;return e.value.substr(t,n-t)}},{key:"processTab",value:function(t){9!==t.keyCode||this.isGettingRef||e.getInputSelectedText(this.refInput)&&this.refInput.dataset.value!==this.suggestedRef&&(t.preventDefault(),window.getSelection().removeAllRanges())}}],(n=[{key:"available",value:function(){this.availableButton.classList.remove("hidden"),this.unavailableButton.classList.add("hidden")}},{key:"bindEvents",value:function(){this.createMergeRequestButton.addEventListener("click",this.onClickCreateMergeRequestButton.bind(this)),this.createTargetButton.addEventListener("click",this.onClickCreateMergeRequestButton.bind(this)),this.branchInput.addEventListener("keyup",this.onChangeInput.bind(this)),this.dropdownToggle.addEventListener("click",this.onClickSetFocusOnBranchNameInput.bind(this)),this.refInput.addEventListener("keyup",this.onChangeInput.bind(this)),this.refInput.addEventListener("keydown",e.processTab.bind(this))}},{key:"checkAbilityToCreateBranch",value:function(){var e=this;this.setUnavailableButtonState(),l.a.get(this.canCreatePath).then((function(t){var n=t.data;e.setUnavailableButtonState(!1),n.can_create_branch?(e.available(),e.enable(),e.updateBranchName(n.suggested_branch_name),e.droplabInitialized||(e.droplabInitialized=!0,e.initDroplab(),e.bindEvents())):e.hide()})).catch((function(){e.unavailable(),e.disable(),Object(u.a)(Object(m.a)("Failed to check related branches."))}))}},{key:"createBranch",value:function(){var e=this;return this.isCreatingBranch=!0,l.a.post(A(this.projectPath,this.createBranchPath),{confidential_issue_project_id:P()?this.projectId:null}).then((function(t){var n=t.data;e.branchCreated=!0,window.location.href=n.url})).catch((function(){return Object(u.a)(Object(m.a)("Failed to create a branch for this issue. Please try again."))}))}},{key:"createMergeRequest",value:function(){var e=this;return this.isCreatingMergeRequest=!0,l.a.post(this.createMrPath,{target_project_id:P()?w.selectedProject.id:null}).then((function(t){var n=t.data;e.mergeRequestCreated=!0,window.location.href=n.url})).catch((function(){return Object(u.a)(Object(m.a)("Failed to create Merge Request. Please try again."))}))}},{key:"disable",value:function(){this.disableCreateAction(),this.dropdownToggle.classList.add("disabled"),this.dropdownToggle.setAttribute("disabled","disabled")}},{key:"disableCreateAction",value:function(){this.createMergeRequestButton.classList.add("disabled"),this.createMergeRequestButton.setAttribute("disabled","disabled"),this.createTargetButton.classList.add("disabled"),this.createTargetButton.setAttribute("disabled","disabled")}},{key:"enable",value:function(){x()&&!P()||(this.createMergeRequestButton.classList.remove("disabled"),this.createMergeRequestButton.removeAttribute("disabled"),this.createTargetButton.classList.remove("disabled"),this.createTargetButton.removeAttribute("disabled"),this.dropdownToggle.classList.remove("disabled"),this.dropdownToggle.removeAttribute("disabled"))}},{key:"getDroplabConfig",value:function(){return{addActiveClassToDropdownButton:!0,InputSetter:[{input:this.createMergeRequestButton,valueAttribute:"data-value",inputAttribute:"data-action"},{input:this.createMergeRequestButton,valueAttribute:"data-text"},{input:this.createTargetButton,valueAttribute:"data-value",inputAttribute:"data-action"},{input:this.createTargetButton,valueAttribute:"data-text"}],hideOnClick:!1}}},{key:"getRef",value:function(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";return!!t&&l.a.get("".concat(A(this.projectPath,this.refsPath)).concat(encodeURIComponent(t))).then((function(s){var a,r=s.data,o=r[Object.keys(r)[0]],l=r[Object.keys(r)[1]];return"branch"===i?a=e.findByValue(o,t):(a=e.findByValue(o,t,!0)||e.findByValue(l,t,!0),n.suggestedRef=a),n.isGettingRef=!1,n.updateInputState(i,t,a)})).catch((function(){return n.unavailable(),n.disable(),new u.a(Object(m.a)("Failed to get ref.")),n.isGettingRef=!1,!1}))}},{key:"getTargetData",value:function(e){return{input:this["".concat(e,"Input")],message:this["".concat(e,"Message")]}}},{key:"hide",value:function(){this.wrapperEl.classList.add("hidden")}},{key:"init",value:function(){this.checkAbilityToCreateBranch()}},{key:"initDroplab",value:function(){this.droplab=new f.a,this.droplab.init(this.dropdownToggle,this.dropdownList,[L],this.getDroplabConfig())}},{key:"inputsAreValid",value:function(){return this.branchIsValid&&this.refIsValid}},{key:"isBusy",value:function(){return this.isCreatingMergeRequest||this.mergeRequestCreated||this.isCreatingBranch||this.branchCreated||this.isGettingRef}},{key:"onChangeInput",value:function(e){var t,n;if(this.disable(),e.target===this.branchInput)t="branch",n=this.branchInput.value;else{if(e.target!==this.refInput)return!1;t="ref",n=e.target.value.slice(0,e.target.selectionStart)+e.target.value.slice(e.target.selectionEnd)}return!this.isGettingRef&&(13===e.keyCode&&this.inputsAreValid()?(e.preventDefault(),this.createMergeRequestButton.click()):n?(this.showCheckingMessage(t),this.refDebounce(n,t),!0):(this.createBranchPath=this.wrapperEl.dataset.createBranchPath,this.createMrPath=this.wrapperEl.dataset.createMrPath,"branch"===t?this.branchIsValid=!0:this.refIsValid=!0,this.enable(),this.showAvailableMessage(t),!0))}},{key:"onClickCreateMergeRequestButton",value:function(e){var t=this,n=null;e.preventDefault(),!x()||e.target.classList.contains("js-create-target")?this.isBusy()||("create-mr"===e.target.dataset.action?n=this.createMergeRequest():"create-branch"===e.target.dataset.action&&(n=this.createBranch()),n.catch((function(){t.isCreatingMergeRequest=!1,t.isCreatingBranch=!1,t.enable()})),this.disable()):this.droplab.hooks.forEach((function(e){return e.list.toggle()}))}},{key:"onClickSetFocusOnBranchNameInput",value:function(){this.branchInput.focus()}},{key:"removeMessage",value:function(e){var t=this.getTargetData(e),n=t.input,i=t.message;["gl-field-error-outline","gl-field-success-outline"].forEach((function(e){return n.classList.remove(e)})),["text-muted","text-danger","text-success"].forEach((function(e){return i.classList.remove(e)})),i.style.display="none"}},{key:"setUnavailableButtonState",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e?(this.unavailableButtonSpinner.classList.remove("hide"),this.unavailableButtonText.textContent=Object(m.a)("Checking branch availability...")):(this.unavailableButtonSpinner.classList.add("hide"),this.unavailableButtonText.textContent=Object(m.a)("New branch unavailable"))}},{key:"showAvailableMessage",value:function(e){var t=this.getTargetData(e),n=t.input,i=t.message,s="branch"===e?Object(m.a)("Branch name"):Object(m.a)("Source");this.removeMessage(e),n.classList.add("gl-field-success-outline"),i.classList.add("text-success"),i.textContent=Object(m.e)(Object(m.a)("%{text} is available"),{text:s}),i.style.display="inline-block"}},{key:"showCheckingMessage",value:function(e){var t=this.getTargetData(e).message,n="branch"===e?Object(m.a)("branch name"):Object(m.a)("source");this.removeMessage(e),t.classList.add("text-muted"),t.textContent=Object(m.e)(Object(m.a)("Checking %{text} availability…"),{text:n}),t.style.display="inline-block"}},{key:"showNotAvailableMessage",value:function(e){var t=this.getTargetData(e),n=t.input,i=t.message,s="branch"===e?Object(m.a)("Branch is already taken"):Object(m.a)("Source is not available");this.removeMessage(e),n.classList.add("gl-field-error-outline"),i.classList.add("text-danger"),i.textContent=s,i.style.display="inline-block"}},{key:"unavailable",value:function(){this.availableButton.classList.add("hidden"),this.unavailableButton.classList.remove("hidden")}},{key:"updateBranchName",value:function(e){this.branchInput.value=e,this.updateCreatePaths("branch",e)}},{key:"updateInputState",value:function(e,t,n){t===n?"branch"===e?(this.branchIsValid=!1,this.showNotAvailableMessage("branch")):(this.refIsValid=!0,this.refInput.dataset.value=t,this.showAvailableMessage("ref"),this.updateCreatePaths(e,t)):"branch"===e?(this.branchIsValid=!0,this.showAvailableMessage("branch"),this.updateCreatePaths(e,t)):(this.refIsValid=!1,this.refInput.dataset.value=t,this.disableCreateAction(),this.showNotAvailableMessage("ref"),n&&(this.refInput.value=n,this.refInput.setSelectionRange(t.length,n.length))),this.inputsAreValid()?this.enable():this.disableCreateAction()}},{key:"updateCreatePaths",value:function(e,t){var n="$1".concat(encodeURIComponent(t));this.createBranchPath=this.createBranchPath.replace(this.regexps[e].createBranchPath,n),this.createMrPath=this.createMrPath.replace(this.regexps[e].createMrPath,n)}}])&&I(t.prototype,n),i&&I(t,i),e}(),q=n(733);function R(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var B=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o()("a.btn-close").length&&this.initIssueBtnEventListeners(),e.$btnNewBranch=o()("#new-branch"),e.createMrDropdownWrap=document.querySelector(".create-mr-dropdown-wrap"),document.querySelector("#related-branches")&&e.initRelatedBranches(),this.closeButtons=o()("a.btn-close"),this.reopenButtons=o()("a.btn-reopen"),this.initCloseReopenReport(),e.createMrDropdownWrap&&(this.createMergeRequestDropdown=new N(e.createMrDropdownWrap)),document.addEventListener("issuable_vue_app:change",(function(e){t.updateTopState(e.detail.isClosed,e.detail.data)}))}var t,n,i;return t=e,i=[{key:"submitNoteForm",value:function(e){var t=e.find("textarea.js-note-text").val();if(t&&t.trim().length>0)return e.submit()}},{key:"initRelatedBranches",value:function(){var e=o()("#related-branches");return l.a.get(e.data("url")).then((function(t){var n=t.data;"html"in n&&e.html(n.html)})).catch((function(){return Object(u.a)(Object(m.a)("Failed to load related branches"))}))}}],(n=[{key:"updateTopState",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object(m.a)("Unable to update this issue at this time.");if("id"in t){var i=o()("div.status-box-issue-closed"),s=o()("div.status-box-open"),a=o()(".issue_counter");i.toggleClass("hidden",!e),s.toggleClass("hidden",e),o()(document).trigger("issuable:change",e),this.toggleCloseReopenButton(e);var r=Number(a.first().text().trim().replace(/[^\d]/,""));r=e?r-1:r+1,a.text(Object(c.a)(r)),this.createMergeRequestDropdown&&(e?(this.createMergeRequestDropdown.unavailable(),this.createMergeRequestDropdown.disable()):this.createMergeRequestDropdown.checkAbilityToCreateBranch())}else Object(u.a)(n)}},{key:"initIssueBtnEventListeners",value:function(){var t=this,n=Object(m.a)("Unable to update this issue at this time.");return o()(document).on("click",".js-issuable-actions a.btn-close, .js-issuable-actions a.btn-reopen",(function(i){i.preventDefault(),i.stopImmediatePropagation();var s=o()(i.currentTarget);s.hasClass("btn-comment")&&e.submitNoteForm(s.closest("form")),t.disableCloseReopenButton(s);var a=s.attr("href");return l.a.put(a).then((function(e){var n=e.data,i=s.hasClass("btn-close");t.updateTopState(i,n)})).catch((function(){return Object(u.a)(n)})).then((function(){t.disableCloseReopenButton(s,!1)}))}))}},{key:"initCloseReopenReport",value:function(){this.closeReopenReportToggle=q.a.initCloseReopenReport(),this.closeButtons&&(this.closeButtons=this.closeButtons.not(".issuable-close-button")),this.reopenButtons&&(this.reopenButtons=this.reopenButtons.not(".issuable-close-button"))}},{key:"disableCloseReopenButton",value:function(e,t){this.closeReopenReportToggle?this.closeReopenReportToggle.setDisable(t):e.prop("disabled",t)}},{key:"toggleCloseReopenButton",value:function(e){this.closeReopenReportToggle&&this.closeReopenReportToggle.updateButton(e),this.closeButtons.toggleClass("hidden",e),this.reopenButtons.toggleClass("hidden",!e)}}])&&R(t.prototype,n),i&&R(t,i),e}(),M=n(807),F=n(218),$=n(813),U=n(819),H=n(22),V=n(816);g.default.use(H.b);document.addEventListener("DOMContentLoaded",(function(){var e=new H.b.Store(Object(V.a)());new g.default({el:"#js-vue-notes",components:{notesApp:$.a},store:e,data:function(){var e=document.getElementById("js-vue-notes").dataset,t=JSON.parse(e.currentUserData),n=JSON.parse(e.noteableData),i={};return n.noteableType=e.noteableType,n.targetType=e.targetType,t&&(i={id:t.id,name:t.name,username:t.username,avatar_url:t.avatar_path||t.avatar_url,path:t.path}),{noteableData:n,currentUserData:i,notesData:JSON.parse(e.notesData)}},render:function(e){return e("notes-app",{props:{noteableData:this.noteableData,notesData:this.notesData,userData:this.currentUserData}})}}),Object(U.a)(e)}));n(24),n(49),n(65);var z=n(125),W=n.n(z),G=n(33),Y=n(159),K=new g.default;n(18),n(64);function J(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Q=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.endpoint="".concat(t,".json"),this.realtimeEndpoint="".concat(t,"/realtime_changes")}var t,n,i;return t=e,(n=[{key:"getData",value:function(){return l.a.get(this.realtimeEndpoint)}},{key:"deleteIssuable",value:function(e){return l.a.delete(this.endpoint,{params:e})}},{key:"updateIssuable",value:function(e){return l.a.put(this.endpoint,e)}},{key:"loadTemplates",value:function(e){return e?l.a.get(e):Promise.resolve([])}}])&&J(t.prototype,n),i&&J(t,i),e}(),X=(n(78),n(36),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=t;t.length||(n=[]);var i=document.createElement("div");i.innerHTML=e;var s=i.getElementsByTagName("details");return s.length!==n.length?e:(Array.from(s).forEach((function(e,t){n[t].open&&e.setAttribute("open",!0)})),i.innerHTML)});function Z(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ee=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state=t,this.formState={title:"",description:"",lockedWarningVisible:!1,updateLoading:!1,lock_version:0,issuableTemplates:[]}}var t,n,i;return t=e,(n=[{key:"updateState",value:function(e){this.stateShouldUpdate(e)&&(this.formState.lockedWarningVisible=!0),Object.assign(this.state,Object(b.g)(e));var t=document.body.querySelector(".detail-page-description.content-block"),n=null!=t&&t.getElementsByTagName("details");this.state.descriptionHtml=X(e.description,n),this.state.titleHtml=e.title,this.state.lock_version=e.lock_version}},{key:"stateShouldUpdate",value:function(e){return this.state.titleText!==e.title_text||this.state.descriptionText!==e.description_text}},{key:"setFormState",value:function(e){this.formState=Object.assign(this.formState,e)}}])&&Z(t.prototype,n),i&&Z(t,i),e}(),te=(n(67),{methods:{animateChange:function(){var e=this;this.preAnimation=!0,this.pulseAnimation=!1,setTimeout((function(){e.preAnimation=!1,e.pulseAnimation=!0}))}}}),ne=n(99),ie={directives:{tooltip:ne.a},mixins:[te],props:{issuableRef:{type:[String,Number],required:!0},canUpdate:{required:!1,type:Boolean,default:!1},titleHtml:{type:String,required:!0},titleText:{type:String,required:!0},showInlineEditButton:{type:Boolean,required:!1,default:!1}},data:function(){return{preAnimation:!1,pulseAnimation:!1,titleEl:document.querySelector("title")}},computed:{pencilIcon:function(){return Object(b.Q)("pencil","link-highlight")}},watch:{titleHtml:function(){this.setPageTitle(),this.animateChange()}},methods:{setPageTitle:function(){var e=this.titleEl.innerText.split("·");e[0]="".concat(this.titleText," (").concat(this.issuableRef,") "),this.titleEl.textContent=e.join("·")},edit:function(){K.$emit("open.form")}}},se=Object(C.a)(ie,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"title-container"},[n("h2",{staticClass:"title qa-title",class:{"issue-realtime-pre-pulse":e.preAnimation,"issue-realtime-trigger-pulse":e.pulseAnimation},attrs:{dir:"auto"},domProps:{innerHTML:e._s(e.titleHtml)}}),e._v(" "),e.showInlineEditButton&&e.canUpdate?n("button",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"btn btn-default btn-edit btn-svg js-issuable-edit\n    qa-edit-button",attrs:{type:"button",title:"Edit title and description","data-placement":"bottom","data-container":"body"},domProps:{innerHTML:e._s(e.pencilIcon)},on:{click:e.edit}}):e._e()])}),[],!1,null,null,null).exports,ae=(n(283),n(377)),re=n(512),oe={mixins:[te,re.a],props:{canUpdate:{type:Boolean,required:!0},descriptionHtml:{type:String,required:!0},descriptionText:{type:String,required:!0},taskStatus:{type:String,required:!1,default:""},issuableType:{type:String,required:!1,default:"issue"},updateUrl:{type:String,required:!1,default:null},lockVersion:{type:Number,required:!1,default:0}},data:function(){return{preAnimation:!1,pulseAnimation:!1}},watch:{descriptionHtml:function(){var e=this;this.animateChange(),this.$nextTick((function(){e.renderGFM()}))},taskStatus:function(){this.updateTaskStatusText()}},mounted:function(){this.renderGFM(),this.updateTaskStatusText()},methods:{renderGFM:function(){o()(this.$refs["gfm-content"]).renderGFM(),this.canUpdate&&new ae.a({dataType:this.issuableType,fieldName:"description",lockVersion:this.lockVersion,selector:".detail-page-description",onSuccess:this.taskListUpdateSuccess.bind(this),onError:this.taskListUpdateError.bind(this)})},taskListUpdateSuccess:function(e){try{this.checkForSpam(e),this.closeRecaptcha()}catch(e){e&&"SpamError"===e.name&&this.openRecaptcha()}},taskListUpdateError:function(){Object(u.a)(Object(m.e)(Object(m.d)("Someone edited this %{issueType} at the same time you did. The description has been updated and you will need to make your changes again."),{issueType:this.issuableType})),this.$emit("taskListUpdateFailed")},updateTaskStatusText:function(){var e=this.taskStatus.match(/(\d+) of ((?!0)\d+)/),t=o()(".issuable-meta"),n=o()("#task_status",t),i=o()("#task_status_short",t);e?(n.text(this.taskStatus),i.text("".concat(e[1],"/").concat(e[2]," task").concat(e[2]>1?"s":""))):(n.text(""),i.text(""))}}},le=Object(C.a)(oe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.descriptionHtml?n("div",{staticClass:"description",class:{"js-task-list-container":e.canUpdate}},[n("div",{ref:"gfm-content",staticClass:"md",class:{"issue-realtime-pre-pulse":e.preAnimation,"issue-realtime-trigger-pulse":e.pulseAnimation},domProps:{innerHTML:e._s(e.descriptionHtml)}}),e._v(" "),e.descriptionText?n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.descriptionText,expression:"descriptionText"}],ref:"textarea",staticClass:"hidden js-task-list-field",attrs:{"data-update-url":e.updateUrl,dir:"auto"},domProps:{value:e.descriptionText},on:{input:function(t){t.target.composing||(e.descriptionText=t.target.value)}}}):e._e(),e._v(" "),n("recaptcha-modal",{directives:[{name:"show",rawName:"v-show",value:e.showRecaptcha,expression:"showRecaptcha"}],attrs:{html:e.recaptchaHTML},on:{close:e.closeRecaptcha}})],1):e._e()}),[],!1,null,null,null).exports,ce={components:{timeAgoTooltip:n(198).a},props:{updatedAt:{type:String,required:!1,default:""},updatedByName:{type:String,required:!1,default:""},updatedByPath:{type:String,required:!1,default:""}},computed:{hasUpdatedBy:function(){return this.updatedByName&&this.updatedByPath}}},ue=Object(C.a)(ce,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("small",{staticClass:"edited-text"},[e._v("\n  Edited\n  "),e.updatedAt?n("time-ago-tooltip",{attrs:{time:e.updatedAt,"tooltip-placement":"bottom"}}):e._e(),e._v(" "),e.hasUpdatedBy?n("span",[e._v("\n    by\n    "),n("a",{staticClass:"author-link",attrs:{href:e.updatedByPath}},[n("span",[e._v(e._s(e.updatedByName))])])]):e._e()],1)}),[],!1,null,null,null).exports,de=(n(246),{computed:{currentPath:function(){return window.location.pathname},alertMessage:function(){return Object(m.e)(Object(m.a)("Someone edited the issue at the same time you did. Please check out %{linkStart}the issue%{linkEnd} and make sure your changes will not unintentionally remove theirs."),{linkStart:'<a href="'.concat(this.currentPath,'" target="_blank" rel="nofollow">'),linkEnd:"</a>"},!1)}}}),pe=Object(C.a)(de,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"alert alert-danger",domProps:{innerHTML:this._s(this.alertMessage)}})}),[],!1,null,null,null).exports,fe={methods:{updateIssuable:function(){this.formState.updateLoading=!0,K.$emit("update.issuable")}}},he={mixins:[fe],props:{formState:{type:Object,required:!0}}},me=Object(C.a)(he,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("fieldset",[n("label",{staticClass:"sr-only",attrs:{for:"issuable-title"}},[e._v(e._s(e.__("Title")))]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.formState.title,expression:"formState.title"}],ref:"input",staticClass:"form-control qa-title-input",attrs:{id:"issuable-title",dir:"auto",type:"text",placeholder:e.__("Title"),"aria-label":e.__("Title")},domProps:{value:e.formState.title},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.metaKey?e.updateIssuable(t):null},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?e.updateIssuable(t):null}],input:function(t){t.target.composing||e.$set(e.formState,"title",t.target.value)}}})])}),[],!1,null,null,null).exports,ge={components:{markdownField:n(470).a},mixins:[fe],props:{formState:{type:Object,required:!0},markdownPreviewPath:{type:String,required:!0},markdownDocsPath:{type:String,required:!0},canAttachFile:{type:Boolean,required:!1,default:!0},enableAutocomplete:{type:Boolean,required:!1,default:!0}},mounted:function(){this.$refs.textarea.focus()}},be=Object(C.a)(ge,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"common-note-form"},[n("label",{staticClass:"sr-only",attrs:{for:"issue-description"}},[e._v(e._s(e.__("Description")))]),e._v(" "),n("markdown-field",{attrs:{"markdown-preview-path":e.markdownPreviewPath,"markdown-docs-path":e.markdownDocsPath,"can-attach-file":e.canAttachFile,"enable-autocomplete":e.enableAutocomplete}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.formState.description,expression:"formState.description"}],ref:"textarea",staticClass:"note-textarea js-gfm-input js-autosize markdown-area\n      qa-description-textarea",attrs:{slot:"textarea",id:"issue-description",dir:"auto","data-supports-quick-actions":"false","aria-label":e.__("Description"),placeholder:e.__("Write a comment or drag your files here…")},domProps:{value:e.formState.description},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.metaKey?e.updateIssuable(t):null},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?e.updateIssuable(t):null}],input:function(t){t.target.composing||e.$set(e.formState,"description",t.target.value)}},slot:"textarea"})])],1)}),[],!1,null,null,null).exports,ve={issue:Object(m.a)("Issue"),epic:Object(m.a)("Epic")},ye={mixins:[fe],props:{canDestroy:{type:Boolean,required:!0},formState:{type:Object,required:!0},showDeleteButton:{type:Boolean,required:!1,default:!0},issuableType:{type:String,required:!0}},data:function(){return{deleteLoading:!1}},computed:{isSubmitEnabled:function(){return""!==this.formState.title.trim()},shouldShowDeleteButton:function(){return this.canDestroy&&this.showDeleteButton}},methods:{closeForm:function(){K.$emit("close.form")},deleteIssuable:function(){var e=Object(m.e)(Object(m.a)("%{issuableType} will be removed! Are you sure?"),{issuableType:ve[this.issuableType]});window.confirm(e)&&(this.deleteLoading=!0,K.$emit("delete.issuable",{destroy_confirm:!0}))}}},_e=Object(C.a)(ye,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"prepend-top-default append-bottom-default clearfix"},[n("button",{staticClass:"btn btn-success float-left qa-save-button",class:{disabled:e.formState.updateLoading||!e.isSubmitEnabled},attrs:{disabled:e.formState.updateLoading||!e.isSubmitEnabled,type:"submit"},on:{click:function(t){return t.preventDefault(),e.updateIssuable(t)}}},[e._v("\n    Save changes\n    "),e.formState.updateLoading?n("i",{staticClass:"fa fa-spinner fa-spin",attrs:{"aria-hidden":"true"}}):e._e()]),e._v(" "),n("button",{staticClass:"btn btn-default float-right",attrs:{type:"button"},on:{click:e.closeForm}},[e._v("\n    "+e._s(e.__("Cancel"))+"\n  ")]),e._v(" "),e.shouldShowDeleteButton?n("button",{staticClass:"btn btn-danger float-right append-right-default qa-delete-button",class:{disabled:e.deleteLoading},attrs:{disabled:e.deleteLoading,type:"button"},on:{click:e.deleteIssuable}},[e._v("\n    Delete "),e.deleteLoading?n("i",{staticClass:"fa fa-spinner fa-spin",attrs:{"aria-hidden":"true"}}):e._e()]):e._e()])}),[],!1,null,null,null).exports,we=n(486),ke={props:{formState:{type:Object,required:!0},issuableTemplates:{type:Array,required:!1,default:function(){return[]}},projectPath:{type:String,required:!0},projectNamespace:{type:String,required:!0}},computed:{issuableTemplatesJson:function(){return JSON.stringify(this.issuableTemplates)}},mounted:function(){var e=this,t=document.querySelector(".detail-page-description .note-textarea")||{};t.setValue=function(t){e.formState.description=t},t.getValue=function(){return e.formState.description},this.issuableTemplate=new we.a({$dropdowns:o()(this.$refs.toggle),editor:t})}},je=Object(C.a)(ke,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dropdown js-issuable-selector-wrap",attrs:{"data-issuable-type":"issue"}},[n("button",{ref:"toggle",staticClass:"dropdown-menu-toggle js-issuable-selector",attrs:{"data-namespace-path":e.projectNamespace,"data-project-path":e.projectPath,"data-data":e.issuableTemplatesJson,type:"button","data-field-name":"issuable_template","data-selected":"null","data-toggle":"dropdown"}},[n("span",{staticClass:"dropdown-toggle-text"},[e._v(e._s(e.__("Choose a template")))]),e._v(" "),n("i",{staticClass:"fa fa-chevron-down",attrs:{"aria-hidden":"true"}})]),e._v(" "),n("div",{staticClass:"dropdown-menu dropdown-select"},[n("div",{staticClass:"dropdown-title"},[e._v("\n      Choose a template\n      "),n("button",{staticClass:"dropdown-title-button dropdown-menu-close",attrs:{"aria-label":e.__("Close"),type:"button"}},[n("i",{staticClass:"fa fa-times dropdown-menu-close-icon",attrs:{"aria-hidden":"true"}})])]),e._v(" "),n("div",{staticClass:"dropdown-input"},[n("input",{staticClass:"dropdown-input-field",attrs:{type:"search",placeholder:e.__("Filter"),autocomplete:"off"}}),e._v(" "),n("i",{staticClass:"fa fa-search dropdown-input-search",attrs:{"aria-hidden":"true"}}),e._v(" "),n("i",{staticClass:"fa fa-times dropdown-input-clear js-dropdown-input-clear",attrs:{role:"button","aria-label":e.__("Clear templates search input")}})]),e._v(" "),n("div",{staticClass:"dropdown-content"}),e._v(" "),n("div",{staticClass:"dropdown-footer"},[n("ul",{staticClass:"dropdown-footer-list"},[n("li",[n("a",{staticClass:"no-template"},[e._v(e._s(e.__("No template")))])]),e._v(" "),n("li",[n("a",{staticClass:"reset-template"},[e._v(e._s(e.__("Reset template")))])])])])])])}),[],!1,null,null,null).exports,Oe=n(257),Se={components:{lockedWarning:pe,titleField:me,descriptionField:be,descriptionTemplate:je,editActions:_e},props:{canDestroy:{type:Boolean,required:!0},formState:{type:Object,required:!0},issuableTemplates:{type:Array,required:!1,default:function(){return[]}},issuableType:{type:String,required:!0},markdownPreviewPath:{type:String,required:!0},markdownDocsPath:{type:String,required:!0},projectPath:{type:String,required:!0},projectNamespace:{type:String,required:!0},showDeleteButton:{type:Boolean,required:!1,default:!0},canAttachFile:{type:Boolean,required:!1,default:!0},enableAutocomplete:{type:Boolean,required:!1,default:!0}},computed:{hasIssuableTemplates:function(){return this.issuableTemplates.length},showLockedWarning:function(){return this.formState.lockedWarningVisible&&!this.formState.updateLoading}},created:function(){K.$on("delete.issuable",this.resetAutosave),K.$on("update.issuable",this.resetAutosave),K.$on("close.form",this.resetAutosave)},mounted:function(){this.initAutosave()},beforeDestroy:function(){K.$off("delete.issuable",this.resetAutosave),K.$off("update.issuable",this.resetAutosave),K.$off("close.form",this.resetAutosave)},methods:{initAutosave:function(){var e=this.$refs,t=e.description.$refs.textarea,n=e.title.$refs.input;this.autosaveDescription=new Oe.a(o()(t),[document.location.pathname,document.location.search,"description"]),this.autosaveTitle=new Oe.a(o()(n),[document.location.pathname,document.location.search,"title"])},resetAutosave:function(){this.autosaveDescription.reset(),this.autosaveTitle.reset()}}},Ce=Object(C.a)(Se,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",[e.showLockedWarning?n("locked-warning"):e._e(),e._v(" "),n("div",{staticClass:"row"},[e.hasIssuableTemplates?n("div",{staticClass:"col-sm-4 col-lg-3"},[n("description-template",{attrs:{"form-state":e.formState,"issuable-templates":e.issuableTemplates,"project-path":e.projectPath,"project-namespace":e.projectNamespace}})],1):e._e(),e._v(" "),n("div",{class:{"col-sm-8 col-lg-9":e.hasIssuableTemplates,"col-12":!e.hasIssuableTemplates}},[n("title-field",{ref:"title",attrs:{"form-state":e.formState,"issuable-templates":e.issuableTemplates}})],1)]),e._v(" "),n("description-field",{ref:"description",attrs:{"form-state":e.formState,"markdown-preview-path":e.markdownPreviewPath,"markdown-docs-path":e.markdownDocsPath,"can-attach-file":e.canAttachFile,"enable-autocomplete":e.enableAutocomplete}}),e._v(" "),n("edit-actions",{attrs:{"form-state":e.formState,"can-destroy":e.canDestroy,"show-delete-button":e.showDeleteButton,"issuable-type":e.issuableType}})],1)}),[],!1,null,null,null).exports,De={components:{Icon:O.a,GlLink:v.a},props:{zoomMeetingUrl:{type:String,required:!1,default:null}}},Te={components:{descriptionComponent:le,titleComponent:se,editedComponent:ue,formComponent:Ce,PinnedLinks:Object(C.a)(De,(function(){var e=this.$createElement,t=this._self._c||e;return this.zoomMeetingUrl?t("div",{staticClass:"border-bottom mb-3 mt-n2"},[t("gl-link",{staticClass:"btn btn-inverted btn-secondary btn-sm text-dark mb-3",attrs:{href:this.zoomMeetingUrl,target:"_blank"}},[t("icon",{attrs:{name:"brand-zoom",size:14}}),this._v(" "),t("strong",{staticClass:"vertical-align-top"},[this._v(this._s(this.__("Join Zoom meeting")))])],1)],1):this._e()}),[],!1,null,null,null).exports},mixins:[re.a],props:{endpoint:{required:!0,type:String},updateEndpoint:{required:!0,type:String},canUpdate:{required:!0,type:Boolean},canDestroy:{required:!0,type:Boolean},showInlineEditButton:{type:Boolean,required:!1,default:!0},showDeleteButton:{type:Boolean,required:!1,default:!0},enableAutocomplete:{type:Boolean,required:!1,default:!0},zoomMeetingUrl:{type:String,required:!1,default:null},issuableRef:{type:String,required:!0},initialTitleHtml:{type:String,required:!0},initialTitleText:{type:String,required:!0},initialDescriptionHtml:{type:String,required:!1,default:""},initialDescriptionText:{type:String,required:!1,default:""},initialTaskStatus:{type:String,required:!1,default:""},updatedAt:{type:String,required:!1,default:""},updatedByName:{type:String,required:!1,default:""},updatedByPath:{type:String,required:!1,default:""},issuableTemplateNamesPath:{type:String,required:!1,default:""},markdownPreviewPath:{type:String,required:!0},markdownDocsPath:{type:String,required:!0},projectPath:{type:String,required:!0},projectNamespace:{type:String,required:!0},issuableType:{type:String,required:!1,default:"issue"},canAttachFile:{type:Boolean,required:!1,default:!0},lockVersion:{type:Number,required:!1,default:0}},data:function(){var e=new ee({titleHtml:this.initialTitleHtml,titleText:this.initialTitleText,descriptionHtml:this.initialDescriptionHtml,descriptionText:this.initialDescriptionText,updatedAt:this.updatedAt,updatedByName:this.updatedByName,updatedByPath:this.updatedByPath,taskStatus:this.initialTaskStatus,lock_version:this.lockVersion});return{store:e,state:e.state,showForm:!1,templatesRequested:!1}},computed:{issuableTemplates:function(){return this.store.formState.issuableTemplates},formState:function(){return this.store.formState},hasUpdated:function(){return Boolean(this.state.updatedAt)},issueChanged:function(){var e=this.store.formState,t=e.description,n=e.title,i=this.initialDescriptionText,s=this.initialTitleText;return i||t?i!==t:!(!s&&!n)&&s!==n},defaultErrorMessage:function(){return Object(m.e)(Object(m.d)("Error updating %{issuableType}"),{issuableType:this.issuableType})}},created:function(){var e=this;this.service=new Q(this.endpoint),this.poll=new Y.a({resource:this.service,method:"getData",successCallback:function(t){return e.store.updateState(t.data)},errorCallback:function(e){throw new Error(e)}}),W.a.hidden()||this.poll.makeRequest(),W.a.change((function(){W.a.hidden()?e.poll.stop():e.poll.restart()})),window.addEventListener("beforeunload",this.handleBeforeUnloadEvent),K.$on("delete.issuable",this.deleteIssuable),K.$on("update.issuable",this.updateIssuable),K.$on("close.form",this.closeForm),K.$on("open.form",this.openForm)},beforeDestroy:function(){K.$off("delete.issuable",this.deleteIssuable),K.$off("update.issuable",this.updateIssuable),K.$off("close.form",this.closeForm),K.$off("open.form",this.openForm),window.removeEventListener("beforeunload",this.handleBeforeUnloadEvent)},methods:{handleBeforeUnloadEvent:function(e){var t=e;this.showForm&&this.issueChanged&&!this.showRecaptcha&&(t.returnValue=Object(m.a)("Are you sure you want to lose your issue information?"))},updateStoreState:function(){var e=this;return this.service.getData().then((function(e){return e.data})).then((function(t){e.store.updateState(t)})).catch((function(){Object(u.a)(e.defaultErrorMessage)}))},updateAndShowForm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.showForm||(this.showForm=!0,this.store.setFormState({title:this.state.titleText,description:this.state.descriptionText,lock_version:this.state.lock_version,lockedWarningVisible:!1,updateLoading:!1,issuableTemplates:e}))},requestTemplatesAndShowForm:function(){var e=this;return this.service.loadTemplates(this.issuableTemplateNamesPath).then((function(t){e.updateAndShowForm(t.data)})).catch((function(){Object(u.a)(e.defaultErrorMessage),e.updateAndShowForm()}))},openForm:function(){this.templatesRequested?this.updateAndShowForm(this.issuableTemplates):(this.templatesRequested=!0,this.requestTemplatesAndShowForm())},closeForm:function(){this.showForm=!1},updateIssuable:function(){var e=this;return this.service.updateIssuable(this.store.formState).then((function(e){return e.data})).then((function(t){return e.checkForSpam(t)})).then((function(e){window.location.pathname!==e.web_url&&Object(G.s)(e.web_url)})).then(this.updateStoreState).then((function(){K.$emit("close.form")})).catch((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.name,i=t.response,s=void 0===i?{}:i;if("SpamError"===n)e.openRecaptcha();else{var a=e.defaultErrorMessage;s.data&&s.data.errors&&(a+=". ".concat(s.data.errors.join(" "))),Object(u.a)(a)}}))},closeRecaptchaModal:function(){this.store.setFormState({updateLoading:!1}),this.closeRecaptcha()},deleteIssuable:function(e){var t=this;this.service.deleteIssuable(e).then((function(e){return e.data})).then((function(e){t.poll.stop(),Object(G.s)(e.web_url)})).catch((function(){Object(u.a)(Object(m.e)(Object(m.d)("Error deleting  %{issuableType}"),{issuableType:t.issuableType}))}))}}},Ee=Object(C.a)(Te,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.canUpdate&&e.showForm?n("div",[n("form-component",{attrs:{"form-state":e.formState,"can-destroy":e.canDestroy,"issuable-templates":e.issuableTemplates,"markdown-docs-path":e.markdownDocsPath,"markdown-preview-path":e.markdownPreviewPath,"project-path":e.projectPath,"project-namespace":e.projectNamespace,"show-delete-button":e.showDeleteButton,"can-attach-file":e.canAttachFile,"enable-autocomplete":e.enableAutocomplete,"issuable-type":e.issuableType}}),e._v(" "),n("recaptcha-modal",{directives:[{name:"show",rawName:"v-show",value:e.showRecaptcha,expression:"showRecaptcha"}],attrs:{html:e.recaptchaHTML},on:{close:e.closeRecaptchaModal}})],1):n("div",[n("title-component",{attrs:{"issuable-ref":e.issuableRef,"can-update":e.canUpdate,"title-html":e.state.titleHtml,"title-text":e.state.titleText,"show-inline-edit-button":e.showInlineEditButton}}),e._v(" "),n("pinned-links",{attrs:{"zoom-meeting-url":e.zoomMeetingUrl}}),e._v(" "),e.state.descriptionHtml?n("description-component",{attrs:{"can-update":e.canUpdate,"description-html":e.state.descriptionHtml,"description-text":e.state.descriptionText,"updated-at":e.state.updatedAt,"task-status":e.state.taskStatus,"issuable-type":e.issuableType,"update-url":e.updateEndpoint,"lock-version":e.state.lock_version},on:{taskListUpdateFailed:e.updateStoreState}}):e._e(),e._v(" "),e.hasUpdated?n("edited-component",{attrs:{"updated-at":e.state.updatedAt,"updated-by-name":e.state.updatedByName,"updated-by-path":e.state.updatedByPath}}):e._e()],1)])}),[],!1,null,null,null).exports,xe=n(747),Pe=n.n(xe),Ie=function(){try{var e=document.getElementById("js-issuable-app-initial-data");return JSON.parse(Pe()(e.textContent).replace(/&quot;/g,'"'))}catch(e){return console.error(e),{}}};n(28),n(50),n(58);var Le=n(815),Ae=n(760);function Ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(n),!0).forEach((function(t){Re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Be={name:"SentryErrorStackTrace",components:{Stacktrace:Le.a,GlLoadingIcon:Ae.a},props:{issueStackTracePath:{type:String,required:!0}},computed:qe({},Object(H.e)("details",["loadingStacktrace","stacktraceData"]),{},Object(H.d)("details",["stacktrace"])),mounted:function(){this.startPollingStacktrace(this.issueStackTracePath)},methods:qe({},Object(H.c)("details",["startPollingStacktrace"]))},Me=Object(C.a)(Be,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{staticClass:"card card-slim mt-4 mb-0",class:{"border-bottom-0":this.loadingStacktrace}},[t("div",{staticClass:"card-header border-bottom-0"},[t("h5",{staticClass:"card-title my-1"},[this._v(this._s(this.__("Stack trace")))])])]),this._v(" "),this.loadingStacktrace?t("div",{staticClass:"card"},[t("gl-loading-icon",{staticClass:"py-2",attrs:{label:"Fetching stack trace",size:1}})],1):t("stacktrace",{attrs:{entries:this.stacktrace}})],1)}),[],!1,null,null,null).exports,Fe=n(727);n(358);var $e=n(1233),Ue=n(828),He=n(189),Ve=n(62),ze={components:{Icon:O.a,GlTooltip:$e.a},mixins:[He.a],props:{milestone:{type:Object,required:!0}},computed:{milestoneDue:function(){var e=this.milestone.due_date||this.milestone.dueDate;return e?Object(Ve.n)(e):null},milestoneStart:function(){var e=this.milestone.start_date||this.milestone.startDate;return e?Object(Ve.n)(e):null},isMilestoneStarted:function(){return!!this.milestoneStart&&Date.now()>this.milestoneStart},isMilestonePastDue:function(){return!!this.milestoneDue&&Date.now()>this.milestoneDue},milestoneDatesAbsolute:function(){return this.milestoneDue?"(".concat(Object(Ve.c)(this.milestoneDue),")"):this.milestoneStart?"(".concat(Object(Ve.c)(this.milestoneStart),")"):""},milestoneDatesHuman:function(){return this.milestoneStart||this.milestoneDue?this.milestoneDue?Object(Ve.s)(this.milestoneDue,Object(m.e)(Object(m.a)("Expired %{expiredOn}"),{expiredOn:this.timeFormatted(this.milestoneDue)})):Object(m.e)(this.isMilestoneStarted?Object(m.a)("Started %{startsIn}"):Object(m.a)("Starts %{startsIn}"),{startsIn:this.timeFormatted(this.milestoneStart)}):""}}},We=Object(C.a)(ze,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"milestoneDetails",staticClass:"issue-milestone-details"},[n("icon",{staticClass:"inline icon",attrs:{size:16,name:"clock"}}),e._v(" "),n("span",{staticClass:"milestone-title d-inline-block"},[e._v(e._s(e.milestone.title))]),e._v(" "),n("gl-tooltip",{staticClass:"js-item-milestone",attrs:{target:function(){return e.$refs.milestoneDetails},placement:"bottom"}},[n("span",{staticClass:"bold"},[e._v(e._s(e.__("Milestone")))]),e._v(" "),n("br"),e._v(" "),n("span",[e._v(e._s(e.milestone.title))]),e._v(" "),n("br"),e._v(" "),e.milestoneStart||e.milestoneDue?n("span",{class:{"text-danger-muted":e.isMilestonePastDue,"text-tertiary":!e.isMilestonePastDue}},[n("span",[e._v(e._s(e.milestoneDatesHuman))]),n("br"),n("span",[e._v(e._s(e.milestoneDatesAbsolute))])]):e._e()])],1)}),[],!1,null,null,null).exports,Ge=n(822),Ye={data:function(){return{removeDisabled:!1}},props:{idKey:{type:Number,required:!0},displayReference:{type:String,required:!0},pathIdSeparator:{type:String,required:!0},eventNamespace:{type:String,required:!1,default:""},confidential:{type:Boolean,required:!1,default:!1},title:{type:String,required:!1,default:""},path:{type:String,required:!1,default:""},state:{type:String,required:!1,default:""},createdAt:{type:String,required:!1,default:""},closedAt:{type:String,required:!1,default:""},mergedAt:{type:String,required:!1,default:""},milestone:{type:Object,required:!1,default:function(){return{}}},dueDate:{type:String,required:!1,default:""},assignees:{type:Array,required:!1,default:function(){return[]}},weight:{type:Number,required:!1,default:0},canRemove:{type:Boolean,required:!1,default:!1},isMergeRequest:{type:Boolean,required:!1,default:!1},pipelineStatus:{type:Object,required:!1,default:function(){return{}}}},components:{icon:O.a},directives:{tooltip:ne.a},mixins:[He.a],computed:{hasState:function(){return this.state&&this.state.length>0},hasPipeline:function(){return this.isMergeRequest&&this.pipelineStatus&&Object.keys(this.pipelineStatus).length},isOpen:function(){return"opened"===this.state},isClosed:function(){return"closed"===this.state},isMerged:function(){return"merged"===this.state},hasTitle:function(){return this.title.length>0},hasAssignees:function(){return this.assignees.length>0},hasMilestone:function(){return!p.a.isEmpty(this.milestone)},iconName:function(){return this.isMergeRequest&&this.isMerged?"merge":this.isOpen?"issue-open-m":"issue-close"},iconClass:function(){return this.isMergeRequest&&this.isClosed?"merge-request-status closed issue-token-state-icon-closed":this.isOpen?"issue-token-state-icon-open":"issue-token-state-icon-closed"},computedLinkElementType:function(){return this.path.length>0?"a":"span"},computedPath:function(){return this.path.length?this.path:null},itemPath:function(){return this.displayReference.split(this.pathIdSeparator)[0]},itemId:function(){return this.displayReference.split(this.pathIdSeparator).pop()},createdAtInWords:function(){return this.createdAt?this.timeFormatted(this.createdAt):""},createdAtTimestamp:function(){return this.createdAt?Object(Ve.d)(new Date(this.createdAt)):""},mergedAtTimestamp:function(){return this.mergedAt?Object(Ve.d)(new Date(this.mergedAt)):""},mergedAtInWords:function(){return this.mergedAt?this.timeFormatted(this.mergedAt):""},closedAtInWords:function(){return this.closedAt?this.timeFormatted(this.closedAt):""},closedAtTimestamp:function(){return this.closedAt?Object(Ve.d)(new Date(this.closedAt)):""},stateText:function(){return this.isMerged?Object(m.a)("Merged"):this.isOpen?Object(m.a)("Opened"):Object(m.a)("Closed")},stateTimeInWords:function(){return this.isMerged?this.mergedAtInWords:this.isOpen?this.createdAtInWords:this.closedAtInWords},stateTimestamp:function(){return this.isMerged?this.mergedAtTimestamp:this.isOpen?this.createdAtTimestamp:this.closedAtTimestamp},pipelineStatusTooltip:function(){return this.hasPipeline?Object(m.e)(Object(m.a)("Pipeline: %{status}"),{status:this.pipelineStatus.label}):""}},methods:{onRemoveRequest:function(){var e="";this.eventNamespace&&this.eventNamespace.length>0&&(e="".concat(this.eventNamespace)),this.$emit("".concat(e,"RemoveRequest"),this.idKey),this.removeDisabled=!0}}},Ke=n(197),Je={name:"IssueItem",components:{IssueMilestone:We,IssueAssignees:Ge.a,CiIcon:Ke.a,GlTooltip:$e.a},directives:{GlTooltip:Ue.a},mixins:[Ye],props:{canReorder:{type:Boolean,required:!1,default:!1}},computed:{stateTitle:function(){return Object(m.e)('<span class="bold">%{state}</span> %{timeInWords}<br/><span class="text-tertiary">%{timestamp}</span>',{state:this.stateText,timeInWords:this.stateTimeInWords,timestamp:this.stateTimestamp})},heightStyle:function(){return{minHeight:"32px",width:"0px",visibility:"hidden"}}}},Qe=Object(C.a)(Je,(function(){var e=this,t=this,n=t.$createElement,i=t._self._c||n;return i("div",{staticClass:"item-body d-flex align-items-center p-2 p-lg-3 py-xl-2 px-xl-3",class:{"issuable-info-container":!t.canReorder,"card-body":t.canReorder}},[i("div",{staticClass:"item-contents d-flex align-items-center flex-wrap flex-grow-1 flex-xl-nowrap"},[i("div",{staticClass:"item-title d-flex align-items-center mb-xl-0"},[i("span",{ref:"iconElementXL"},[t.hasState?i("icon",{ref:"iconElementXL",class:t.iconClass,attrs:{name:t.iconName,size:16,title:t.stateTitle,"aria-label":t.state}}):t._e()],1),t._v(" "),i("gl-tooltip",{attrs:{target:function(){return t.$refs.iconElementXL}}},[i("span",{domProps:{innerHTML:t._s(t.stateTitle)}})]),t._v(" "),t.confidential?i("icon",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"confidential-icon append-right-4 align-self-baseline align-self-md-auto mt-xl-0",attrs:{name:"eye-slash",size:16,title:t.__("Confidential"),"aria-label":t.__("Confidential")}}):t._e(),t._v(" "),i("a",{staticClass:"sortable-link",attrs:{href:t.computedPath}},[t._v(t._s(t.title))])],1),t._v(" "),i("div",{staticClass:"item-info-area d-flex flex-xl-grow-1 flex-shrink-0"},[i("div",{staticClass:"item-meta d-flex flex-wrap-reverse justify-content-start justify-content-md-between"},[i("div",{staticClass:"item-path-area item-path-id d-flex align-items-center mr-2 mt-2 mt-xl-0 ml-xl-2"},[i("span",{ref:"iconElement"},[t.hasState?i("icon",{staticClass:"d-xl-none",class:t.iconClass,attrs:{name:t.iconName,title:t.stateTitle,"aria-label":t.state,"data-html":"true"}}):t._e()],1),t._v(" "),i("gl-tooltip",{attrs:{target:function(){return e.$refs.iconElement}}},[i("span",{domProps:{innerHTML:t._s(t.stateTitle)}})]),t._v(" "),i("span",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"path-id-text d-inline-block",attrs:{title:t.itemPath}},[t._v(t._s(t.itemPath))]),t._v(" "),i("span",[t._v(t._s(t.pathIdSeparator)+t._s(t.itemId))])],1),t._v(" "),i("div",{staticClass:"item-attributes-area d-flex align-items-center mt-2 mt-xl-0"},[t.hasPipeline?i("span",{staticClass:"mr-ci-status order-md-last"},[i("a",{attrs:{href:t.pipelineStatus.details_path}},[i("ci-icon",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],attrs:{status:t.pipelineStatus,title:t.pipelineStatusTooltip}})],1)]):t._e(),t._v(" "),t.hasMilestone?i("issue-milestone",{staticClass:"d-flex align-items-center item-milestone order-md-first ml-md-0",attrs:{milestone:t.milestone}}):t._e(),t._v(" "),t._t("dueDate"),t._v(" "),t._t("weight"),t._v(" "),t.hasAssignees?i("issue-assignees",{staticClass:"item-assignees align-items-center align-self-end flex-shrink-0 order-md-2 d-none d-md-flex",attrs:{assignees:t.assignees}}):t._e()],2)]),t._v(" "),0!==t.assignees.length?i("issue-assignees",{staticClass:"item-assignees d-flex align-items-center align-self-end flex-shrink-0 d-md-none ml-2",attrs:{assignees:t.assignees}}):t._e()],1)]),t._v(" "),t.canRemove?i("button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],ref:"removeButton",staticClass:"btn btn-default btn-svg btn-item-remove js-issue-item-remove-button mr-xl-0 align-self-xl-center",attrs:{disabled:t.removeDisabled,type:"button","data-qa-selector":"remove_related_issue_button",title:t.__("Remove"),"aria-label":t.__("Remove")},on:{click:t.onRemoveRequest}},[i("icon",{staticClass:"btn-item-remove-icon",attrs:{size:16,name:"close"}})],1):t._e(),t._v(" "),i("span",{style:t.heightStyle})])}),[],!1,null,null,null).exports;function Xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(n),!0).forEach((function(t){et(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function et(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var tt,nt={name:"RelatedMergeRequests",components:{Icon:O.a,GlLink:v.a,GlLoadingIcon:Ae.a,RelatedIssuableItem:Qe},props:{endpoint:{type:String,required:!0},projectNamespace:{type:String,required:!0},projectPath:{type:String,required:!0}},computed:Ze({},Object(H.e)(["isFetchingMergeRequests","mergeRequests","totalCount"]),{closingMergeRequestsText:function(){if(!this.hasClosingMergeRequest)return"";var e=Object(m.c)("When this merge request is accepted","When these merge requests are accepted",this.totalCount);return Object(m.e)(Object(m.d)("%{mrText}, this issue will be closed automatically."),{mrText:e})}}),mounted:function(){this.setInitialState({apiEndpoint:this.endpoint}),this.fetchMergeRequests()},created:function(){this.hasClosingMergeRequest=Ie().hasClosingMergeRequest},methods:Ze({},Object(H.c)(["setInitialState","fetchMergeRequests"]),{getAssignees:function(e){return e.assignees?e.assignees:e.assignee?[e.assignee]:[]}})},it=Object(C.a)(nt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isFetchingMergeRequests||!e.isFetchingMergeRequests&&e.totalCount?n("div",{attrs:{id:"related-merge-requests"}},[n("div",{staticClass:"card card-slim mt-3",attrs:{id:"merge-requests"}},[n("div",{staticClass:"card-header"},[n("div",{staticClass:"card-title mt-0 mb-0 h5 merge-requests-title position-relative"},[n("gl-link",{staticClass:"anchor position-absolute text-decoration-none",attrs:{id:"user-content-related-merge-requests",href:"#related-merge-requests","aria-hidden":"true"}}),e._v(" "),n("span",{staticClass:"mr-1"},[e._v("\n          "+e._s(e.__("Related merge requests"))+"\n        ")]),e._v(" "),e.totalCount?n("div",{staticClass:"d-inline-flex lh-100 align-middle"},[n("div",{staticClass:"mr-count-badge border-width-1px border-style-solid border-color-default"},[n("div",{staticClass:"mr-count-badge-count"},[n("svg",{staticClass:"s16 mr-1 text-secondary"},[n("icon",{staticClass:"mr-1 text-secondary",attrs:{name:"merge-request"}})],1),e._v(" "),n("span",{staticClass:"js-items-count"},[e._v(e._s(e.totalCount))])])])]):e._e()],1)]),e._v(" "),n("div",[e.isFetchingMergeRequests?n("div",{staticClass:"qa-related-merge-requests-loading-icon"},[n("gl-loading-icon",{staticClass:"py-2",attrs:{label:"Fetching related merge requests"}})],1):n("ul",{staticClass:"content-list related-items-list"},e._l(e.mergeRequests,(function(t){return n("li",{key:t.id,staticClass:"list-item pt-0 pb-0"},[n("related-issuable-item",{attrs:{"id-key":t.id,"display-reference":t.reference,title:t.title,milestone:t.milestone,assignees:e.getAssignees(t),"created-at":t.created_at,"closed-at":t.closed_at,"merged-at":t.merged_at,path:t.web_url,state:t.state,"is-merge-request":!0,"pipeline-status":t.head_pipeline&&t.head_pipeline.detailed_status,"path-id-separator":"!"}})],1)})),0)])]),e._v(" "),e.hasClosingMergeRequest&&!e.isFetchingMergeRequests?n("div",{staticClass:"issue-closed-by-widget second-block"},[e._v("\n    "+e._s(e.closingMergeRequestsText)+"\n  ")]):e._e()]):e._e()}),[],!1,null,null,null).exports,st=function(e,t){(0,e.commit)("SET_INITIAL_STATE",t)},at=function(e){return(0,e.commit)("REQUEST_DATA")},rt=function(e,t){return(0,e.commit)("RECEIVE_DATA_SUCCESS",t)},ot=function(e){return(0,e.commit)("RECEIVE_DATA_ERROR")},lt=function(e){var t=e.state,n=e.dispatch;return n("requestData"),l.a.get("".concat(t.apiEndpoint,"?per_page=").concat(100)).then((function(e){var t=e.headers,i=e.data,s=Number(Object(b.D)(t)["X-TOTAL"])||0;n("receiveDataSuccess",{data:i,total:s})})).catch((function(){n("receiveDataError"),Object(u.a)(Object(m.d)("Something went wrong while fetching related merge requests."))}))},ct=function(){};function ut(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var dt=(ut(tt={},"SET_INITIAL_STATE",(function(e,t){var n=t.apiEndpoint;e.apiEndpoint=n})),ut(tt,"REQUEST_DATA",(function(e){e.isFetchingMergeRequests=!0})),ut(tt,"RECEIVE_DATA_SUCCESS",(function(e,t){var n=t.data,i=t.total;e.isFetchingMergeRequests=!1,e.mergeRequests=n,e.totalCount=i})),ut(tt,"RECEIVE_DATA_ERROR",(function(e){e.isFetchingMergeRequests=!1,e.hasErrorFetchingMergeRequests=!0})),tt);g.default.use(H.b);var pt=function(){return new H.b.Store({state:{apiEndpoint:"",isFetchingMergeRequests:!1,hasErrorFetchingMergeRequests:!1,mergeRequests:[],totalCount:0},actions:i,mutations:dt})};var ft=n(820),ht=function(){new g.default({el:document.getElementById("js-issuable-app"),components:{issuableApp:Ee},render:function(e){return e("issuable-app",{props:Ie()})}}),function(){var e=document.querySelector("#js-sentry-error-stack-trace");if(e){var t=e.dataset.issueStackTracePath;new g.default({el:e,components:{SentryErrorStackTrace:Me},store:Fe.a,render:function(e){return e("sentry-error-stack-trace",{props:{issueStackTracePath:t}})}})}}(),function(){var e=document.querySelector("#js-related-merge-requests");if(e){var t=e.dataset,n=t.endpoint,i=t.projectPath,s=t.projectNamespace;new g.default({el:e,components:{RelatedMergeRequests:it},store:pt(),render:function(e){return e("related-merge-requests",{props:{endpoint:n,projectNamespace:s,projectPath:i}})}})}}(),new B,new M.a,new F.a,gon.features&&gon.features.vueIssuableSidebar?Object(ft.a)():Object(a.a)()};document.addEventListener("DOMContentLoaded",(function(){ht(),gon.features&&!gon.features.vueIssuableSidebar&&Object(s.a)()}))},154:function(e,t,n){"use strict";var i={components:{GlLoadingIcon:n(760).a},props:{loading:{type:Boolean,required:!1,default:!1},disabled:{type:Boolean,required:!1,default:!1},label:{type:String,required:!1},containerClass:{type:[String,Array,Object],required:!1,default:"btn btn-align-content"}},methods:{onClick:function(e){this.$emit("click",e)}}},s=n(4),a=Object(s.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{class:e.containerClass,attrs:{disabled:e.loading||e.disabled,type:"button"},on:{click:e.onClick}},[n("transition",{attrs:{name:"fade-in"}},[e.loading?n("gl-loading-icon",{staticClass:"js-loading-button-icon",class:{"append-right-5":e.label},attrs:{inline:!0}}):e._e()],1),e._v(" "),n("transition",{attrs:{name:"fade-in"}},[e._t("default",[e.label?n("span",{staticClass:"js-loading-button-label"},[e._v(" "+e._s(e.label)+" ")]):e._e()])],2)],1)}),[],!1,null,null,null);t.a=a.exports},158:function(e,t,n){"use strict";var i=n(828),s=n(553),a=n(103),r={name:"ClipboardButton",directives:{GlTooltip:i.a},components:{GlButton:s.a,GlIcon:a.a},props:{text:{type:String,required:!0},gfm:{type:String,required:!1,default:null},title:{type:String,required:!0},tooltipPlacement:{type:String,required:!1,default:"top"},tooltipContainer:{type:[String,Boolean],required:!1,default:!1},cssClass:{type:String,required:!1,default:"btn-default"}},computed:{clipboardText:function(){return null!==this.gfm?JSON.stringify({text:this.text,gfm:this.gfm}):this.text}}},o=n(4),l=Object(o.a)(r,(function(){var e=this.$createElement,t=this._self._c||e;return t("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip",value:{placement:this.tooltipPlacement,container:this.tooltipContainer},expression:"{ placement: tooltipPlacement, container: tooltipContainer }"}],class:this.cssClass,attrs:{title:this.title,"data-clipboard-text":this.clipboardText}},[t("gl-icon",{attrs:{name:"copy-to-clipboard"}})],1)}),[],!1,null,null,null);t.a=l.exports},159:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(85);var i=n(146),s=n(16);function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t,this.options.data=t.data||{},this.options.notificationCallback=t.notificationCallback||function(){},this.intervalHeader="POLL-INTERVAL",this.timeoutID=null,this.canPoll=!0}var t,n,r;return t=e,(n=[{key:"checkConditions",value:function(e){var t=this,n=Object(s.D)(e.headers),a=parseInt(n[this.intervalHeader],10);a>0&&-1!==i.b.indexOf(e.status)&&this.canPoll&&(this.timeoutID&&clearTimeout(this.timeoutID),this.timeoutID=setTimeout((function(){t.makeRequest()}),a)),this.options.successCallback(e)}},{key:"makeRequest",value:function(){var e=this,t=this.options,n=t.resource,s=t.method,a=t.data,r=t.errorCallback,o=t.notificationCallback;return o(!0),n[s](a).then((function(t){e.checkConditions(t),o(!1)})).catch((function(e){o(!1),e.status!==i.a.ABORTED&&r(e)}))}},{key:"stop",value:function(){this.canPoll=!1,clearTimeout(this.timeoutID)}},{key:"enable",value:function(e){e&&e.data&&(this.options.data=e.data),this.canPoll=!0,e&&e.response&&this.checkConditions(e.response)}},{key:"restart",value:function(e){this.enable(e),this.makeRequest()}}])&&a(t.prototype,n),r&&a(t,r),e}()},176:function(e,t,n){"use strict";n(30),n(42),n(26),n(85),n(46),n(27);var i=n(0),s=n.n(i),a=n(20),r=n.n(a),o=n(11),l=n(14),c=n(1);t.a={init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.form,n=e.issues,i=e.prefixId;this.prefixId=i||"issue_",this.form=t||this.getElement(".bulk-update"),this.$labelDropdown=this.form.find(".js-label-select"),this.issues=n||this.getElement(".issues-list .issue"),this.willUpdateLabels=!1,this.bindEvents()},bindEvents:function(){return this.form.off("submit").on("submit",this.onFormSubmit.bind(this))},onFormSubmit:function(e){return e.preventDefault(),this.submit()},submit:function(){var e=this;o.a[this.form.attr("method")](this.form.attr("action"),this.getFormDataAsObject()).then((function(){return window.location.reload()})).catch((function(){return e.onFormSubmitFailure()}))},onFormSubmitFailure:function(){return this.form.find('[type="submit"]').enable(),new l.a(Object(c.a)("Issue update failed"))},getSelectedIssues:function(){return this.issues.has(".selected-issuable:checked")},getLabelsFromSelection:function(){var e=[];return this.getSelectedIssues().map((function(){var t=s()(this).data("labels");if(t)return t.map((function(t){if(-1===e.indexOf(t))return e.push(t)}))})),e},getUnmarkedIndeterminedLabels:function(){var e=[],t=this.$labelDropdown.data("indeterminate");return this.getLabelsFromSelection().forEach((function(n){-1===t.indexOf(n)&&e.push(n)})),e},getFormDataAsObject:function(){var e={update:{state_event:this.form.find('input[name="update[state_event]"]').val(),assignee_ids:[this.form.find('input[name="update[assignee_ids][]"]').val()],milestone_id:this.form.find('input[name="update[milestone_id]"]').val(),issuable_ids:this.form.find('input[name="update[issuable_ids]"]').val(),subscription_event:this.form.find('input[name="update[subscription_event]"]').val(),add_label_ids:[],remove_label_ids:[]}};return this.willUpdateLabels&&(e.update.add_label_ids=this.$labelDropdown.data("marked"),e.update.remove_label_ids=this.$labelDropdown.data("unmarked")),e},setOriginalDropdownData:function(){var e=s()(".bulk-update .js-label-select");e.data("common",this.getOriginalCommonIds()),e.data("marked",this.getOriginalMarkedIds()),e.data("indeterminate",this.getOriginalIndeterminateIds())},getOriginalCommonIds:function(){var e=this,t=[];return this.getElement(".selected-issuable:checked").each((function(n,i){t.push(e.getElement("#".concat(e.prefixId).concat(i.dataset.id)).data("labels"))})),r.a.intersection.apply(this,t)},getOriginalMarkedIds:function(){var e=this,t=[];return this.getElement(".selected-issuable:checked").each((function(n,i){t.push(e.getElement("#".concat(e.prefixId).concat(i.dataset.id)).data("labels"))})),r.a.intersection.apply(this,t)},getOriginalIndeterminateIds:function(){var e=this,t=[],n=[],i=[];return this.getElement(".selected-issuable:checked").each((function(s,a){(i=e.getElement("#".concat(e.prefixId).concat(a.dataset.id)).data("labels")).forEach((function(e){-1===t.indexOf(e)&&t.push(e)})),n.push(i)})),n.unshift(t),r.a.difference(t,r.a.intersection.apply(this,n))},getElement:function(e){return this.scopeEl=this.scopeEl||s()(".content"),this.scopeEl.find(e)}}},180:function(e,t,n){"use strict";n(72);var i=n(301),s=n(828),a=n(236),r={name:"UserAvatarLink",components:{GlLink:i.a,userAvatarImage:a.a},directives:{GlTooltip:s.a},props:{linkHref:{type:String,required:!1,default:""},imgSrc:{type:String,required:!1,default:""},imgAlt:{type:String,required:!1,default:""},imgCssClasses:{type:String,required:!1,default:""},imgSize:{type:Number,required:!1,default:20},tooltipText:{type:String,required:!1,default:""},tooltipPlacement:{type:String,required:!1,default:"top"},username:{type:String,required:!1,default:""}},computed:{shouldShowUsername:function(){return this.username.length>0},avatarTooltipText:function(){return this.shouldShowUsername?"":this.tooltipText}}},o=n(4),l=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("gl-link",{staticClass:"user-avatar-link",attrs:{href:e.linkHref}},[n("user-avatar-image",{attrs:{"img-src":e.imgSrc,"img-alt":e.imgAlt,"css-classes":e.imgCssClasses,size:e.imgSize,"tooltip-text":e.avatarTooltipText,"tooltip-placement":e.tooltipPlacement}},[e._t("default")],2),e.shouldShowUsername?n("span",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"js-user-avatar-link-username",attrs:{title:e.tooltipText,"tooltip-placement":e.tooltipPlacement}},[e._v(e._s(e.username))]):e._e(),e._t("avatar-badge")],2)}),[],!1,null,null,null);t.a=l.exports},184:function(e,t,n){var i=n(108),s=n(271),a=n(215),r=n(296),o=n(344),l=n(419);i({target:"Reflect",stat:!0},{get:function e(t,n){var i,c,u=arguments.length<3?t:arguments[2];return a(t)===u?t[n]:(i=o.f(t,n))?r(i,"value")?i.value:void 0===i.get?void 0:i.get.call(u):s(c=l(t))?e(c,n,u):void 0}})},186:function(e,t,n){"use strict";var i=n(17);t.a=new i.default},188:function(e,t,n){
/*!
 * Pikaday
 *
 * Copyright © 2014 David Bushell | BSD & MIT license | https://github.com/Pikaday/Pikaday
 */
!function(t,i){"use strict";var s;try{s=n(!function(){var e=new Error("Cannot find module 'moment'");throw e.code="MODULE_NOT_FOUND",e}())}catch(e){}e.exports=function(e){var t="function"==typeof e,n=!!window.addEventListener,i=window.document,s=window.setTimeout,a=function(e,t,i,s){n?e.addEventListener(t,i,!!s):e.attachEvent("on"+t,i)},r=function(e,t,i,s){n?e.removeEventListener(t,i,!!s):e.detachEvent("on"+t,i)},o=function(e,t){return-1!==(" "+e.className+" ").indexOf(" "+t+" ")},l=function(e,t){o(e,t)||(e.className=""===e.className?t:e.className+" "+t)},c=function(e,t){var n;e.className=(n=(" "+e.className+" ").replace(" "+t+" "," ")).trim?n.trim():n.replace(/^\s+|\s+$/g,"")},u=function(e){return/Array/.test(Object.prototype.toString.call(e))},d=function(e){return/Date/.test(Object.prototype.toString.call(e))&&!isNaN(e.getTime())},p=function(e){var t=e.getDay();return 0===t||6===t},f=function(e){return e%4==0&&e%100!=0||e%400==0},h=function(e,t){return[31,f(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},m=function(e){d(e)&&e.setHours(0,0,0,0)},g=function(e,t){return e.getTime()===t.getTime()},b=function(e,t,n){var i,s;for(i in t)(s=void 0!==e[i])&&"object"==typeof t[i]&&null!==t[i]&&void 0===t[i].nodeName?d(t[i])?n&&(e[i]=new Date(t[i].getTime())):u(t[i])?n&&(e[i]=t[i].slice(0)):e[i]=b({},t[i],n):!n&&s||(e[i]=t[i]);return e},v=function(e,t,n){var s;i.createEvent?((s=i.createEvent("HTMLEvents")).initEvent(t,!0,!1),s=b(s,n),e.dispatchEvent(s)):i.createEventObject&&(s=i.createEventObject(),s=b(s,n),e.fireEvent("on"+t,s))},y=function(e){return e.month<0&&(e.year-=Math.ceil(Math.abs(e.month)/12),e.month+=12),e.month>11&&(e.year+=Math.floor(Math.abs(e.month)/12),e.month-=12),e},_={field:null,bound:void 0,ariaLabel:"Use the arrow keys to pick a date",position:"bottom left",reposition:!0,format:"YYYY-MM-DD",toString:null,parse:null,defaultDate:null,setDefaultDate:!1,firstDay:0,formatStrict:!1,minDate:null,maxDate:null,yearRange:10,showWeekNumber:!1,pickWholeWeek:!1,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,yearSuffix:"",showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,enableSelectionDaysInNextAndPreviousMonths:!1,numberOfMonths:1,mainCalendar:"left",container:void 0,blurFieldOnSelect:!0,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},theme:null,events:[],onSelect:null,onOpen:null,onClose:null,onDraw:null,keyboardInput:!0},w=function(e,t,n){for(t+=e.firstDay;t>=7;)t-=7;return n?e.i18n.weekdaysShort[t]:e.i18n.weekdays[t]},k=function(e){var t=[],n="false";if(e.isEmpty){if(!e.showDaysInNextAndPreviousMonths)return'<td class="is-empty"></td>';t.push("is-outside-current-month"),e.enableSelectionDaysInNextAndPreviousMonths||t.push("is-selection-disabled")}return e.isDisabled&&t.push("is-disabled"),e.isToday&&t.push("is-today"),e.isSelected&&(t.push("is-selected"),n="true"),e.hasEvent&&t.push("has-event"),e.isInRange&&t.push("is-inrange"),e.isStartRange&&t.push("is-startrange"),e.isEndRange&&t.push("is-endrange"),'<td data-day="'+e.day+'" class="'+t.join(" ")+'" aria-selected="'+n+'"><button class="pika-button pika-day" type="button" data-pika-year="'+e.year+'" data-pika-month="'+e.month+'" data-pika-day="'+e.day+'">'+e.day+"</button></td>"},j=function(e,t,n,i){return'<tr class="pika-row'+(n?" pick-whole-week":"")+(i?" is-selected":"")+'">'+(t?e.reverse():e).join("")+"</tr>"},O=function(e,t,n,i,s,a){var r,o,l,c,d,p=e._o,f=n===p.minYear,h=n===p.maxYear,m='<div id="'+a+'" class="pika-title" role="heading" aria-live="assertive">',g=!0,b=!0;for(l=[],r=0;r<12;r++)l.push('<option value="'+(n===s?r-t:12+r-t)+'"'+(r===i?' selected="selected"':"")+(f&&r<p.minMonth||h&&r>p.maxMonth?'disabled="disabled"':"")+">"+p.i18n.months[r]+"</option>");for(c='<div class="pika-label">'+p.i18n.months[i]+'<select class="pika-select pika-select-month" tabindex="-1">'+l.join("")+"</select></div>",u(p.yearRange)?(r=p.yearRange[0],o=p.yearRange[1]+1):(r=n-p.yearRange,o=1+n+p.yearRange),l=[];r<o&&r<=p.maxYear;r++)r>=p.minYear&&l.push('<option value="'+r+'"'+(r===n?' selected="selected"':"")+">"+r+"</option>");return d='<div class="pika-label">'+n+p.yearSuffix+'<select class="pika-select pika-select-year" tabindex="-1">'+l.join("")+"</select></div>",p.showMonthAfterYear?m+=d+c:m+=c+d,f&&(0===i||p.minMonth>=i)&&(g=!1),h&&(11===i||p.maxMonth<=i)&&(b=!1),0===t&&(m+='<button class="pika-prev'+(g?"":" is-disabled")+'" type="button">'+p.i18n.previousMonth+"</button>"),t===e._o.numberOfMonths-1&&(m+='<button class="pika-next'+(b?"":" is-disabled")+'" type="button">'+p.i18n.nextMonth+"</button>"),m+"</div>"},S=function(r){var l=this,c=l.config(r);l._onMouseDown=function(e){if(l._v){var t=(e=e||window.event).target||e.srcElement;if(t)if(o(t,"is-disabled")||(!o(t,"pika-button")||o(t,"is-empty")||o(t.parentNode,"is-disabled")?o(t,"pika-prev")?l.prevMonth():o(t,"pika-next")&&l.nextMonth():(l.setDate(new Date(t.getAttribute("data-pika-year"),t.getAttribute("data-pika-month"),t.getAttribute("data-pika-day"))),c.bound&&s((function(){l.hide(),c.blurFieldOnSelect&&c.field&&c.field.blur()}),100))),o(t,"pika-select"))l._c=!0;else{if(!e.preventDefault)return e.returnValue=!1,!1;e.preventDefault()}}},l._onChange=function(e){var t=(e=e||window.event).target||e.srcElement;t&&(o(t,"pika-select-month")?l.gotoMonth(t.value):o(t,"pika-select-year")&&l.gotoYear(t.value))},l._onKeyChange=function(e){if(e=e||window.event,l.isVisible())switch(e.keyCode){case 13:case 27:c.field&&c.field.blur();break;case 37:e.preventDefault(),l.adjustDate("subtract",1);break;case 38:l.adjustDate("subtract",7);break;case 39:l.adjustDate("add",1);break;case 40:l.adjustDate("add",7)}},l._onInputChange=function(n){var i;n.firedBy!==l&&(i=c.parse?c.parse(c.field.value,c.format):t?(i=e(c.field.value,c.format,c.formatStrict))&&i.isValid()?i.toDate():null:new Date(Date.parse(c.field.value)),d(i)&&l.setDate(i),l._v||l.show())},l._onInputFocus=function(){l.show()},l._onInputClick=function(){l.show()},l._onInputBlur=function(){var e=i.activeElement;do{if(o(e,"pika-single"))return}while(e=e.parentNode);l._c||(l._b=s((function(){l.hide()}),50)),l._c=!1},l._onClick=function(e){var t=(e=e||window.event).target||e.srcElement,i=t;if(t){!n&&o(t,"pika-select")&&(t.onchange||(t.setAttribute("onchange","return;"),a(t,"change",l._onChange)));do{if(o(i,"pika-single")||i===c.trigger)return}while(i=i.parentNode);l._v&&t!==c.trigger&&i!==c.trigger&&l.hide()}},l.el=i.createElement("div"),l.el.className="pika-single"+(c.isRTL?" is-rtl":"")+(c.theme?" "+c.theme:""),a(l.el,"mousedown",l._onMouseDown,!0),a(l.el,"touchend",l._onMouseDown,!0),a(l.el,"change",l._onChange),c.keyboardInput&&a(i,"keydown",l._onKeyChange),c.field&&(c.container?c.container.appendChild(l.el):c.bound?i.body.appendChild(l.el):c.field.parentNode.insertBefore(l.el,c.field.nextSibling),a(c.field,"change",l._onInputChange),c.defaultDate||(t&&c.field.value?c.defaultDate=e(c.field.value,c.format).toDate():c.defaultDate=new Date(Date.parse(c.field.value)),c.setDefaultDate=!0));var u=c.defaultDate;d(u)?c.setDefaultDate?l.setDate(u,!0):l.gotoDate(u):l.gotoDate(new Date),c.bound?(this.hide(),l.el.className+=" is-bound",a(c.trigger,"click",l._onInputClick),a(c.trigger,"focus",l._onInputFocus),a(c.trigger,"blur",l._onInputBlur)):this.show()};return S.prototype={config:function(e){this._o||(this._o=b({},_,!0));var t=b(this._o,e,!0);t.isRTL=!!t.isRTL,t.field=t.field&&t.field.nodeName?t.field:null,t.theme="string"==typeof t.theme&&t.theme?t.theme:null,t.bound=!!(void 0!==t.bound?t.field&&t.bound:t.field),t.trigger=t.trigger&&t.trigger.nodeName?t.trigger:t.field,t.disableWeekends=!!t.disableWeekends,t.disableDayFn="function"==typeof t.disableDayFn?t.disableDayFn:null;var n=parseInt(t.numberOfMonths,10)||1;if(t.numberOfMonths=n>4?4:n,d(t.minDate)||(t.minDate=!1),d(t.maxDate)||(t.maxDate=!1),t.minDate&&t.maxDate&&t.maxDate<t.minDate&&(t.maxDate=t.minDate=!1),t.minDate&&this.setMinDate(t.minDate),t.maxDate&&this.setMaxDate(t.maxDate),u(t.yearRange)){var i=(new Date).getFullYear()-10;t.yearRange[0]=parseInt(t.yearRange[0],10)||i,t.yearRange[1]=parseInt(t.yearRange[1],10)||i}else t.yearRange=Math.abs(parseInt(t.yearRange,10))||_.yearRange,t.yearRange>100&&(t.yearRange=100);return t},toString:function(n){return n=n||this._o.format,d(this._d)?this._o.toString?this._o.toString(this._d,n):t?e(this._d).format(n):this._d.toDateString():""},getMoment:function(){return t?e(this._d):null},setMoment:function(n,i){t&&e.isMoment(n)&&this.setDate(n.toDate(),i)},getDate:function(){return d(this._d)?new Date(this._d.getTime()):null},setDate:function(e,t){if(!e)return this._d=null,this._o.field&&(this._o.field.value="",v(this._o.field,"change",{firedBy:this})),this.draw();if("string"==typeof e&&(e=new Date(Date.parse(e))),d(e)){var n=this._o.minDate,i=this._o.maxDate;d(n)&&e<n?e=n:d(i)&&e>i&&(e=i),this._d=new Date(e.getTime()),m(this._d),this.gotoDate(this._d),this._o.field&&(this._o.field.value=this.toString(),v(this._o.field,"change",{firedBy:this})),t||"function"!=typeof this._o.onSelect||this._o.onSelect.call(this,this.getDate())}},gotoDate:function(e){var t=!0;if(d(e)){if(this.calendars){var n=new Date(this.calendars[0].year,this.calendars[0].month,1),i=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),s=e.getTime();i.setMonth(i.getMonth()+1),i.setDate(i.getDate()-1),t=s<n.getTime()||i.getTime()<s}t&&(this.calendars=[{month:e.getMonth(),year:e.getFullYear()}],"right"===this._o.mainCalendar&&(this.calendars[0].month+=1-this._o.numberOfMonths)),this.adjustCalendars()}},adjustDate:function(e,t){var n,i=this.getDate()||new Date,s=24*parseInt(t)*60*60*1e3;"add"===e?n=new Date(i.valueOf()+s):"subtract"===e&&(n=new Date(i.valueOf()-s)),this.setDate(n)},adjustCalendars:function(){this.calendars[0]=y(this.calendars[0]);for(var e=1;e<this._o.numberOfMonths;e++)this.calendars[e]=y({month:this.calendars[0].month+e,year:this.calendars[0].year});this.draw()},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(e){isNaN(e)||(this.calendars[0].month=parseInt(e,10),this.adjustCalendars())},nextMonth:function(){this.calendars[0].month++,this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--,this.adjustCalendars()},gotoYear:function(e){isNaN(e)||(this.calendars[0].year=parseInt(e,10),this.adjustCalendars())},setMinDate:function(e){e instanceof Date?(m(e),this._o.minDate=e,this._o.minYear=e.getFullYear(),this._o.minMonth=e.getMonth()):(this._o.minDate=_.minDate,this._o.minYear=_.minYear,this._o.minMonth=_.minMonth,this._o.startRange=_.startRange),this.draw()},setMaxDate:function(e){e instanceof Date?(m(e),this._o.maxDate=e,this._o.maxYear=e.getFullYear(),this._o.maxMonth=e.getMonth()):(this._o.maxDate=_.maxDate,this._o.maxYear=_.maxYear,this._o.maxMonth=_.maxMonth,this._o.endRange=_.endRange),this.draw()},setStartRange:function(e){this._o.startRange=e},setEndRange:function(e){this._o.endRange=e},draw:function(e){if(this._v||e){var t,n=this._o,i=n.minYear,a=n.maxYear,r=n.minMonth,o=n.maxMonth,l="";this._y<=i&&(this._y=i,!isNaN(r)&&this._m<r&&(this._m=r)),this._y>=a&&(this._y=a,!isNaN(o)&&this._m>o&&(this._m=o)),t="pika-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2);for(var c=0;c<n.numberOfMonths;c++)l+='<div class="pika-lendar">'+O(this,c,this.calendars[c].year,this.calendars[c].month,this.calendars[0].year,t)+this.render(this.calendars[c].year,this.calendars[c].month,t)+"</div>";this.el.innerHTML=l,n.bound&&"hidden"!==n.field.type&&s((function(){n.trigger.focus()}),1),"function"==typeof this._o.onDraw&&this._o.onDraw(this),n.bound&&n.field.setAttribute("aria-label",n.ariaLabel)}},adjustPosition:function(){var e,t,n,s,a,r,o,u,d,p,f,h;if(!this._o.container){if(this.el.style.position="absolute",t=e=this._o.trigger,n=this.el.offsetWidth,s=this.el.offsetHeight,a=window.innerWidth||i.documentElement.clientWidth,r=window.innerHeight||i.documentElement.clientHeight,o=window.pageYOffset||i.body.scrollTop||i.documentElement.scrollTop,f=!0,h=!0,"function"==typeof e.getBoundingClientRect)u=(p=e.getBoundingClientRect()).left+window.pageXOffset,d=p.bottom+window.pageYOffset;else for(u=t.offsetLeft,d=t.offsetTop+t.offsetHeight;t=t.offsetParent;)u+=t.offsetLeft,d+=t.offsetTop;(this._o.reposition&&u+n>a||this._o.position.indexOf("right")>-1&&u-n+e.offsetWidth>0)&&(u=u-n+e.offsetWidth,f=!1),(this._o.reposition&&d+s>r+o||this._o.position.indexOf("top")>-1&&d-s-e.offsetHeight>0)&&(d=d-s-e.offsetHeight,h=!1),this.el.style.left=u+"px",this.el.style.top=d+"px",l(this.el,f?"left-aligned":"right-aligned"),l(this.el,h?"bottom-aligned":"top-aligned"),c(this.el,f?"right-aligned":"left-aligned"),c(this.el,h?"top-aligned":"bottom-aligned")}},render:function(e,t,n){var i=this._o,s=new Date,a=h(e,t),r=new Date(e,t,1).getDay(),o=[],l=[];m(s),i.firstDay>0&&(r-=i.firstDay)<0&&(r+=7);for(var c=0===t?11:t-1,u=11===t?0:t+1,f=0===t?e-1:e,b=11===t?e+1:e,v=h(f,c),y=a+r,_=y;_>7;)_-=7;y+=7-_;for(var O,S,C,D,T=!1,E=0,x=0;E<y;E++){var P=new Date(e,t,E-r+1),I=!!d(this._d)&&g(P,this._d),L=g(P,s),A=-1!==i.events.indexOf(P.toDateString()),N=E<r||E>=a+r,q=E-r+1,R=t,B=e,M=i.startRange&&g(i.startRange,P),F=i.endRange&&g(i.endRange,P),$=i.startRange&&i.endRange&&i.startRange<P&&P<i.endRange;N&&(E<r?(q=v+q,R=c,B=f):(q-=a,R=u,B=b));var U={day:q,month:R,year:B,hasEvent:A,isSelected:I,isToday:L,isDisabled:i.minDate&&P<i.minDate||i.maxDate&&P>i.maxDate||i.disableWeekends&&p(P)||i.disableDayFn&&i.disableDayFn(P),isEmpty:N,isStartRange:M,isEndRange:F,isInRange:$,showDaysInNextAndPreviousMonths:i.showDaysInNextAndPreviousMonths,enableSelectionDaysInNextAndPreviousMonths:i.enableSelectionDaysInNextAndPreviousMonths};i.pickWholeWeek&&I&&(T=!0),l.push(k(U)),7==++x&&(i.showWeekNumber&&l.unshift((O=E-r,S=t,C=e,D=void 0,void 0,D=new Date(C,0,1),'<td class="pika-week">'+Math.ceil(((new Date(C,S,O)-D)/864e5+D.getDay()+1)/7)+"</td>")),o.push(j(l,i.isRTL,i.pickWholeWeek,T)),l=[],x=0,T=!1)}return function(e,t,n){return'<table cellpadding="0" cellspacing="0" class="pika-table" role="grid" aria-labelledby="'+n+'">'+function(e){var t,n=[];e.showWeekNumber&&n.push("<th></th>");for(t=0;t<7;t++)n.push('<th scope="col"><abbr title="'+w(e,t)+'">'+w(e,t,!0)+"</abbr></th>");return"<thead><tr>"+(e.isRTL?n.reverse():n).join("")+"</tr></thead>"}(e)+(i=t,"<tbody>"+i.join("")+"</tbody>")+"</table>";var i}(i,o,n)},isVisible:function(){return this._v},show:function(){this.isVisible()||(this._v=!0,this.draw(),c(this.el,"is-hidden"),this._o.bound&&(a(i,"click",this._onClick),this.adjustPosition()),"function"==typeof this._o.onOpen&&this._o.onOpen.call(this))},hide:function(){var e=this._v;!1!==e&&(this._o.bound&&r(i,"click",this._onClick),this.el.style.position="static",this.el.style.left="auto",this.el.style.top="auto",l(this.el,"is-hidden"),this._v=!1,void 0!==e&&"function"==typeof this._o.onClose&&this._o.onClose.call(this))},destroy:function(){var e=this._o;this.hide(),r(this.el,"mousedown",this._onMouseDown,!0),r(this.el,"touchend",this._onMouseDown,!0),r(this.el,"change",this._onChange),e.keyboardInput&&r(i,"keydown",this._onKeyChange),e.field&&(r(e.field,"change",this._onInputChange),e.bound&&(r(e.trigger,"click",this._onInputClick),r(e.trigger,"focus",this._onInputFocus),r(e.trigger,"blur",this._onInputBlur))),this.el.parentNode&&this.el.parentNode.removeChild(this.el)}},S}(s)}()},198:function(e,t,n){"use strict";var i=n(828),s=n(189),a=(n(62),{directives:{GlTooltip:i.a},mixins:[s.a],props:{time:{type:String,required:!0},tooltipPlacement:{type:String,required:!1,default:"top"},cssClass:{type:String,required:!1,default:""}}}),r=n(4),o=Object(r.a)(a,(function(){var e=this.$createElement;return(this._self._c||e)("time",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.viewport",value:{placement:this.tooltipPlacement},expression:"{ placement: tooltipPlacement }",modifiers:{viewport:!0}}],class:this.cssClass,attrs:{title:this.tooltipTitle(this.time)},domProps:{textContent:this._s(this.timeFormatted(this.time))}})}),[],!1,null,null,null);t.a=o.exports},208:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));n(42),n(26),n(77),n(38),n(27);var i=n(0),s=n.n(i),a=n(157),r=n.n(a),o=n(164),l=(n(28),n(85),n(46),n(55),n(91),n(67),n(233),n(94)),c=n.n(l),u=n(20),d=n.n(u);n(441),n(24),n(49),n(56),n(78),n(104),n(40),n(65),n(145),n(18),n(68),n(122),n(36),n(89),n(41);function p(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function f(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.columnWidths=[],this.rows=[],this.tableFound=this.parseTable()}var t,n,i;return t=e,(n=[{key:"isTable",value:function(){return this.tableFound}},{key:"convertToTableMarkdown",value:function(){var e=this;this.calculateColumnWidths();var t=this.rows.map((function(t){return"| ".concat(t.map((function(t,n){return e.formatColumn(t,n)})).join(" | ")," |")}));return t.splice(1,0,this.generateHeaderBreak()),t.join("\n")}},{key:"parseTable",value:function(){if(!this.data.types.includes("text/html")||!this.data.types.includes("text/plain"))return!1;var e=this.data.getData("text/html");if(this.doc=(new DOMParser).parseFromString(e,"text/html"),1!==this.doc.querySelectorAll("table").length)return!1;var t=this.data.getData("text/plain").trim().split(/[\n\u0085\u2028\u2029]|\r\n?/g);return this.doc.querySelectorAll("tr").length===t.length&&(this.rows=t.map((function(e){return e.split("\t")})),this.normalizeRows(),!!this.columnCountsMatch())}},{key:"normalizeRows",value:function(){var e=this.rows.map((function(e){return e.length})),t=Math.max.apply(Math,f(e));this.rows.forEach((function(e){for(;e.length<t;)e.push("")}))}},{key:"calculateColumnWidths",value:function(){var e=this;this.columnWidths=this.rows[0].map((function(t,n){return function(e,t){return Math.max.apply(Math,f(e.map((function(e){return e[t].length}))))}(e.rows,n)}))}},{key:"columnCountsMatch",value:function(){var e=this.rows[0].length,t=0;return this.doc.querySelectorAll("table tr").forEach((function(e){t=Math.max(e.cells.length,t)})),e===t}},{key:"formatColumn",value:function(e,t){return e+Array(this.columnWidths[t]-e.length+1).join(" ")}},{key:"generateHeaderBreak",value:function(){var e=this,t=this.columnWidths.map((function(t,n){return Array(e.columnWidths[n]+3).join("-")}));return"|".concat(t.join("|"),"|")}}])&&p(t.prototype,n),i&&p(t,i),e}(),m=n(178),g=n(11),b=n(1);function v(e){return!e||d.a.isString(e)?e:e.message}function y(e){var t,n,i,a,r,o,l,u=e.find(".button-attach-file"),p=e.find(".attaching-file-message"),f=e.find(".button-cancel-uploading-files"),y=e.find(".retry-uploading-link"),_=e.find(".uploading-progress"),w=e.find(".uploading-error-container"),k=e.find(".uploading-error-message"),j=e.find(".uploading-progress-container"),O=e.data("uploads-path")||window.uploads_path||null,S=gon.max_file_size||10,C=e.find(".js-gfm-input");C.wrap('<div class="div-dropzone"></div>'),C.on("paste",(function(e){return t(e)}));var D=C.closest(".md-area");e.setupMarkdownPreview();var T=e.find(".div-dropzone");if(T.parent().addClass("div-dropzone-wrapper"),T.append('<div class="div-dropzone-hover"></div>'),T.find(".div-dropzone-hover").append('<i class="fa fa-paperclip div-dropzone-icon"></i>'),!O)return T.addClass("js-invalid-dropzone"),null;var E=T.dropzone({url:O,dictDefaultMessage:"",clickable:!0,paramName:"file",maxFilesize:S,uploadMultiple:!1,headers:m.a.headers,previewContainer:!1,processing:function(){return s()(".div-dropzone-alert").alert("close")},dragover:function(){D.addClass("is-dropzone-hover"),e.find(".div-dropzone-hover").css("opacity",.7)},dragleave:function(){D.removeClass("is-dropzone-hover"),e.find(".div-dropzone-hover").css("opacity",0)},drop:function(){D.removeClass("is-dropzone-hover"),e.find(".div-dropzone-hover").css("opacity",0),C.focus()},success:function(e,t){var s=this.getQueuedFiles().length+this.getUploadingFiles().length,a=s>=1;n(t.link.markdown,a),s||u.removeClass("hide"),i(t.link.url)},error:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(b.a)("Attaching the file failed."),n=arguments.length>2?arguments[2]:void 0,i=v(t||n.responseText);w.removeClass("hide"),k.html(i),u.addClass("hide"),f.addClass("hide")},totaluploadprogress:function(e){a(this.files,p),_.text("".concat(Math.round(e),"%"))},sending:function(){u.addClass("hide"),w.addClass("hide"),j.removeClass("hide"),f.removeClass("hide")},removedfile:function(){u.removeClass("hide"),f.addClass("hide"),j.addClass("hide"),w.addClass("hide")},queuecomplete:function(){s()(".dz-preview").remove(),s()(".markdown-area").trigger("input"),j.addClass("hide"),f.addClass("hide")}}),x=s()(E[0]).children("textarea");f.on("click",(function(e){e.preventDefault(),e.stopPropagation(),c.a.forElement(T.get(0)).removeAllFiles(!0)})),y.on("click",(function(e){var t=c.a.forElement(e.target.closest(".js-main-target-form").querySelector(".div-dropzone")),n=t.files;e.preventDefault(),t.removeAllFiles(!0),n.map((function(e){var n=e;return n.status===c.a.ERROR&&(n.status=void 0,n.accepted=void 0),t.addFile(n)}))})),t=function(e){var t=e.originalEvent,i=t.clipboardData;if(i&&i.items){var s=new h(i);if(s.isTable()){e.preventDefault();var a=s.convertToTableMarkdown();n(a)}else{var c=r(t);if(c){e.preventDefault();var u=o(t)||"image.png",d="{{".concat(u,"}}");return n(d),l(c.getAsFile(),u)}}}},r=function(e){for(var t=0;t<e.clipboardData.items.length;){var n=e.clipboardData.items[t];if(-1!==n.type.indexOf("image"))return n;t+=1}return!1},n=function(e,t){var n=e;t&&(n+="\n\n");var i=x.get(0),a=i.selectionStart,r=i.selectionEnd,o=s()(x).val().length,l=s()(x).val().substring(0,a),c=s()(x).val().substring(r,o);return s()(x).val(l+n+c),i.setSelectionRange(a+n.length,r+n.length),i.style.height="".concat(i.scrollHeight,"px"),C.get(0).dispatchEvent(new Event("input")),C.trigger("input")},i=function(t){s()(e).append('<input type="hidden" name="files[]" value="'.concat(d.a.escape(t),'">'))},o=function(e){var t;return window.clipboardData&&window.clipboardData.getData?t=window.clipboardData.getData("Text"):e.clipboardData&&e.clipboardData.getData&&(t=e.clipboardData.getData("text/plain")),(t=t.split("\r"))[0]};var P=function(){return j.addClass("hide")};return l=function(t,n){var i=new FormData;i.append("file",t,n),j.removeClass("hide"),e.find(".div-dropzone-alert").alert("close"),g.a.post(O,i).then((function(e){var t=e.data.link.markdown;!function(e,t){var n=s()(x),i=n.get(0),a=i.selectionStart,r=i.selectionEnd,o="{{".concat(e,"}}");n.val((function(e,n){return n.replace(o,t)})),i.setSelectionRange(a-o.length+t.length,r-o.length+t.length),n.trigger("change")}(n,t),P()})).catch((function(e){var t;t=e.response.data.message,w.removeClass("hide"),k.html(t),P()}))},a=function(e,t){var n=e.filter((function(e){return"uploading"===e.status||"queued"===e.status})).length,i=Object(b.c)("Attaching a file","Attaching %d files",n);t.text("".concat(i," -"))},e.find(".markdown-selector").click((function(e){e.preventDefault(),s()(this).closest(".gfm-form").find(".div-dropzone").click(),C.focus()})),T.get(0)?c.a.forElement(T.get(0)):null}c.a.autoDiscover=!1;var _=n(199);function w(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var k=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.form=t,this.textarea=this.form.find("textarea.js-gfm-input"),this.enableGFM=Object.assign({},o.b,i);var s=gl.GfmAutoComplete&&gl.GfmAutoComplete.dataSources||{};Object.keys(this.enableGFM).forEach((function(e){"emojis"!==e&&(n.enableGFM[e]=Boolean(s[e]))})),this.destroy(),this.setupForm(),this.form.data("glForm",this)}var t,n,i;return t=e,(n=[{key:"destroy",value:function(){this.clearEventListeners(),this.autoComplete&&this.autoComplete.destroy(),this.form.data("glForm",null)}},{key:"setupForm",value:function(){var e=this.form.is(":not(.gfm-form)");this.form.removeClass("js-new-note-form"),e&&(this.form.find(".div-dropzone").remove(),this.form.addClass("gfm-form"),gl.utils.disableButtonIfEmptyField(this.form.find(".js-note-text"),this.form.find(".js-comment-button, .js-note-new-discussion")),this.autoComplete=new o.a(gl.GfmAutoComplete&&gl.GfmAutoComplete.dataSources),this.autoComplete.setup(this.form.find(".js-gfm-input"),this.enableGFM),y(this.form),r()(this.textarea)),this.addEventListeners(),Object(_.b)(this.form),this.form.show(),this.isAutosizeable&&this.setupAutosize()}},{key:"setupAutosize",value:function(){var e=this;this.textarea.off("autosize:resized").on("autosize:resized",this.setHeightData.bind(this)),this.textarea.off("mouseup.autosize").on("mouseup.autosize",this.destroyAutosize.bind(this)),setTimeout((function(){r()(e.textarea),e.textarea.css("resize","vertical")}),0)}},{key:"setHeightData",value:function(){this.textarea.data("height",this.textarea.outerHeight())}},{key:"destroyAutosize",value:function(){var e=this.textarea.outerHeight();this.textarea.data("height")!==e&&(r.a.destroy(this.textarea),this.textarea.data("height",e),this.textarea.outerHeight(e),this.textarea.css("max-height",window.outerHeight))}},{key:"clearEventListeners",value:function(){this.textarea.off("focus"),this.textarea.off("blur"),Object(_.c)(this.form)}},{key:"addEventListeners",value:function(){this.textarea.on("focus",(function(){s()(this).closest(".md-area").addClass("is-focused")})),this.textarea.on("blur",(function(){s()(this).closest(".md-area").removeClass("is-focused")}))}}])&&w(t.prototype,n),i&&w(t,i),e}()},209:function(e,t,n){"use strict";var i=n(17);t.a=new i.default},218:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n(42);var i=n(0),s=n.n(i),a=(n(439),n(94)),r=n.n(a),o=n(8),l=n.n(o);n(440);function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}r.a.autoDiscover=!1;var u=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.active_backdrop=null,this.active_textarea=null,s()(document).on("click",".js-zen-enter",(function(e){return e.preventDefault(),s()(e.currentTarget).trigger("zen_mode:enter")})),s()(document).on("click",".js-zen-leave",(function(e){return e.preventDefault(),s()(e.currentTarget).trigger("zen_mode:leave")})),s()(document).on("zen_mode:enter",(function(e){t.enter(s()(e.target).closest(".md-area").find(".zen-backdrop"))})),s()(document).on("zen_mode:leave",(function(){t.exit()})),s()(document).on("keydown",(function(e){if(27===e.keyCode)return e.preventDefault(),s()(document).trigger("zen_mode:leave")}))}var t,n,i;return t=e,(n=[{key:"enter",value:function(e){l.a.pause(),this.active_backdrop=s()(e),this.active_backdrop.addClass("fullscreen"),this.active_textarea=this.active_backdrop.find("textarea"),this.active_textarea.removeAttr("style"),this.active_textarea.focus()}},{key:"exit",value:function(){if(this.active_textarea){l.a.unpause(),this.active_textarea.closest(".zen-backdrop").removeClass("fullscreen"),this.scrollTo(this.active_textarea),this.active_textarea=null,this.active_backdrop=null;var e=s()(".div-dropzone");e&&!e.hasClass("js-invalid-dropzone")&&r.a.forElement(".div-dropzone").enable()}}},{key:"scrollTo",value:function(e){return s.a.scrollTo(e,0,{offset:-150})}}])&&c(t.prototype,n),i&&c(t,i),e}()},233:function(e,t,n){"use strict";var i=n(108),s=n(348);i({target:"String",proto:!0,forced:n(349)("link")},{link:function(e){return s(this,"a","href",e)}})},2334:function(e,t,n){n(105),n(113),e.exports=n(2335)},2335:function(e,t,n){"use strict";n.r(t);n(1396)},240:function(e,t,n){var i=n(545),s=n(394),a=n(476),r=n(382),o=a((function(e,t){if(null==e)return[];var n=t.length;return n>1&&r(e,t[0],t[1])?t=[]:n>2&&r(t[0],t[1],t[2])&&(t=[t[0]]),s(e,i(t,1),[])}));e.exports=o},247:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n(77);var i=n(16);var s=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,Object(i.g)(t,{dropKeys:["priority"]}),{priority:null!==t.priority?t.priority:1/0})};window.ListLabel=s},248:function(e,t,n){"use strict";n(24),n(49),n(56),n(30),n(28),n(42),n(26),n(85),n(40),n(46),n(69),n(145),n(35),n(18),n(64),n(55),n(36),n(283),n(91),n(89),n(27),n(41);var i=n(0),s=n.n(i),a=n(20),r=n.n(a),o=n(11),l=n(1),c=n(121),u=n(16);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){var i=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},p=s()(t||".js-user-search");this.users=this.users.bind(this),this.user=this.user.bind(this),this.usersPath="/autocomplete/users.json",this.userPath="/autocomplete/users/:id.json",null!=e&&("object"===d(e)?this.currentUser=e:this.currentUser=JSON.parse(e));var f=a.handleClick,h=this;p.each((function(e,t){var n=i,a={},d=s()(t);a.projectId=d.data("projectId"),a.groupId=d.data("groupId"),a.showCurrentUser=d.data("currentUser"),a.todoFilter=d.data("todoFilter"),a.todoStateFilter=d.data("todoStateFilter"),a.iid=d.data("iid"),a.issuableType=d.data("issuableType");var p=d.data("nullUser"),h=d.data("nullUserDefault"),m=d.data("showMenuAbove"),g=d.data("anyUser"),b=d.data("firstUser");a.authorId=d.data("authorId");var v,y,_,w=d.data("defaultLabel"),k=d.data("issueUpdate"),j=d.closest(".selectbox"),O=j.closest(".block"),S=d.data("abilityName"),C=O.find(".value"),D=O.find(".sidebar-collapsed-user"),T=O.find(".block-loading").fadeOut(),E=h&&p?0:null,x=d.data("selected");void 0===x&&(x=E);var P=function(){var e=d.closest(".selectbox").find("input[name='".concat(d.data("fieldName"),"'][value=0]"));e&&e.remove();var t=d.data("currentUserInfo")||{},i=n.currentUser||{},s=d.data("fieldName"),a=t.name,o=t.id||i.id,l=r.a.template('\n        <input type="hidden" name="<%- fieldName %>"\n          data-meta="<%- userName %>"\n          value="<%- userId %>" />\n        ')({fieldName:s,userName:a,userId:o});j?d.parent().before(l):d.after(l)};O[0]&&O[0].addEventListener("assignYourself",P);var I=function(){return j.find('input[name="'.concat(d.data("fieldName"),'"]'))},L=function(){return I().map((function(e,t){return parseInt(t.value,10)})).get()},A=function(){var e=d.data("maxSelect");if(e){var t=L();if(t.length>e){var n=t[0];d.closest(".selectbox").find("input[name='".concat(d.data("fieldName"),"'][value=").concat(n,"]")).remove(),emitSidebarEvent("sidebar.removeAssignee",{id:n})}}},N=function(e,t){var n=L().filter((function(e){return 0!==e})),i=I().map((function(e,t){return{name:t.dataset.meta,value:parseInt(t.value,10)}})).filter((function(e){return 0!==e.id})).get(0);if(0===n.length)return Object(l.d)("UsersSelect|Unassigned");if(1===n.length)return i.name;if(t){var s=n.filter((function(t){return t!==e.id}));return Object(l.e)(Object(l.d)("UsersSelect|%{name} + %{length} more"),{name:e.name,length:s.length})}return Object(l.e)(Object(l.d)("UsersSelect|%{name} + %{length} more"),{name:i.name,length:n.length-1})};return s()(".assign-to-me-link").on("click",(function(e){if(e.preventDefault(),s()(e.currentTarget).hide(),d.data("multiSelect")){P(),A();var t=d.data("currentUserInfo");d.find(".dropdown-toggle-text").text(N(t)).removeClass("is-default")}else{var n=s()('input[name="'.concat(d.data("fieldName"),'"]'));n.val(gon.current_user_id),x=n.val(),d.find(".dropdown-toggle-text").text(gon.current_user_fullname).removeClass("is-default")}})),O.on("click",".js-assign-yourself",(function(e){return e.preventDefault(),v(n.currentUser.id)})),v=function(e){var t={};return t[S]={},t[S].assignee_id=null!=e?e:null,T.removeClass("hidden").fadeIn(),d.trigger("loading.gl.dropdown"),o.a.put(k,t).then((function(e){var t=e.data,n={},i=n.name;return d.trigger("loaded.gl.dropdown"),T.fadeOut(),t.assignee?(n={name:t.assignee.name,username:t.assignee.username,avatar:t.assignee.avatar_url},i=r.a.escape(n.name)):(n={name:Object(l.d)("UsersSelect|Unassigned"),username:"",avatar:""},i=Object(l.d)("UsersSelect|Assignee")),C.html(y(n)),D.attr("title",i).tooltip("_fixTitle"),D.html(_(n))}))},_=r.a.template('<% if( avatar ) { %> <a class="author-link" href="/<%- username %>"> <img width="24" class="avatar avatar-inline s24" alt="" src="<%- avatar %>"> </a> <% } else { %> <i class="fa fa-user"></i> <% } %>'),y=r.a.template('<% if (username) { %> <a class="author-link bold" href="/<%- username %>"> <% if( avatar ) { %> <img width="32" class="avatar avatar-inline s32" alt="" src="<%- avatar %>"> <% } %> <span class="author"><%- name %></span> <span class="username"> @<%- username %> </span> </a> <% } else { %> <span class="no-value assign-yourself">\n      '.concat(Object(l.e)(Object(l.d)("UsersSelect|No assignee - %{openingTag} assign yourself %{closingTag}"),{openingTag:'<a href="#" class="js-assign-yourself">',closingTag:"</a>"}),"</span> <% } %>")),d.glDropdown({showMenuAbove:m,data:function(e,t){var i=this;return n.users(e,a,(function(n){(i.instance||i.options.instance).options.processData(e,n,t)}))},processData:function(e,t,n){var i,s,a,o,c,f,h=t;if(d.hasClass("js-multiselect")&&0===e.length){var v=I(),y=r.a.uniq(v,!1,(function(e){return e.value})).filter((function(e){var t=parseInt(e.value,10);return!h.find((function(e){return e.id===t}))&&0!==t})).map((function(e){var t=parseInt(e.value,10),n=e.dataset,i=n.avatarUrl,s=n.avatar_url,a=n.name,r=n.username,o=n.canMerge;return{avatar_url:i||s,id:t,name:a,username:r,can_merge:Object(u.F)(o)}}));h=t.concat(y)}if(0===e.length){if(f=0,b)for(s=0,a=h.length;s<a;s+=1)if((c=h[s]).username===b){h.splice(s,1),h.unshift(c);break}if(p&&(f+=1,h.unshift({beforeDivider:!0,name:Object(l.d)("UsersSelect|Unassigned"),id:0})),g&&(f+=1,!0===(o=g)&&(o=Object(l.d)("UsersSelect|Any User")),i={beforeDivider:!0,name:o,id:null},h.unshift(i)),f&&h.splice(f,0,{type:"divider"}),d.hasClass("js-multiselect")){var _=L().filter((function(e){return 0!==e}));if(_.length>0){d.data("dropdownHeader")&&(f+=1,h.splice(f,0,{type:"header",content:d.data("dropdownHeader")}));var w=h.filter((function(e){return-1!==_.indexOf(e.id)})).sort((function(e,t){return e.name>t.name}));h=h.filter((function(e){return-1===_.indexOf(e.id)})),w.forEach((function(e){f+=1,h.splice(f,0,e)})),h.splice(f+1,0,{type:"divider"})}}}n(h),m&&d.data("glDropdown").positionMenuAbove()},filterable:!0,filterRemote:!0,search:{fields:["name","username"]},selectable:!0,fieldName:d.data("fieldName"),toggleLabel:function(e,t,n){var i=n.filterInput.val();if(this.multiSelect&&""===i){var a=n.filteredFullData(),r=n.parseData.bind(n);this.processData(i,a,r)}return this.multiSelect?N(e,s()(t).hasClass("is-active")):e&&"id"in e&&s()(t).hasClass("is-active")?(d.find(".dropdown-toggle-text").removeClass("is-default"),e.text?e.text:e.name):(d.find(".dropdown-toggle-text").addClass("is-default"),w)},defaultLabel:w,hidden:function(){d.hasClass("js-multiselect")&&emitSidebarEvent("sidebar.saveAssignees"),d.data("alwaysShowSelectbox")||(j.hide(),O=j.closest(".block"),(C=O.find(".value")).css("display",""))},multiSelect:d.hasClass("js-multiselect"),inputMeta:d.data("inputMeta"),clicked:function(e){var t=e.$el,n=e.e,i=e.isMarking,a=e.selectedObj;if(t.tooltip("dispose"),d.hasClass("js-multiselect")){var r=t.hasClass("is-active"),o=d.closest(".selectbox").find("input[name='".concat(d.data("fieldName"),"'][value!=0]"));if(A(),a.beforeDivider&&"unassigned"===a.name.toLowerCase())o.each((function(e,t){t.remove()})),emitSidebarEvent("sidebar.removeAllAssignees");else if(r){emitSidebarEvent("sidebar.addAssignee",a);var l=d.closest(".selectbox").find("input[name='".concat(d.data("fieldName"),"'][value=0]"));l&&l.remove()}else 0===o.length&&this.addInput(d.data("fieldName"),0,{}),emitSidebarEvent("sidebar.removeAssignee",a);L().find((function(e){return e===gon.current_user_id}))?s()(".assign-to-me-link").hide():s()(".assign-to-me-link").show()}var u=s()("body").attr("data-page"),p="projects:issues:index"===u,h=u==u&&"projects:merge_requests:index"===u;if(d.hasClass("js-filter-bulk-update")||d.hasClass("js-issuable-form-dropdown")){n.preventDefault();var m=a.id!==x;(x=m?a.id:E)===gon.current_user_id?s()(".assign-to-me-link").hide():s()(".assign-to-me-link").show()}else{if(t.closest(".add-issues-modal").length)c.a.store.filter[d.data("fieldName")]=a.id;else if(f)n.preventDefault(),f(a,i);else{if(d.hasClass("js-filter-submit")&&(p||h))return Issuable.filterResults(d.closest("form"));if(d.hasClass("js-filter-submit"))return d.closest("form").submit();if(!d.hasClass("js-multiselect")){var g=d.closest(".selectbox").find("input[name='".concat(d.data("fieldName"),"']")).val();return v(g)}}d.data("maxSelect")&&L().length===d.data("maxSelect")&&d.dropdown("toggle")}},id:function(e){return e.id},opened:function(e){var t=s()(e.currentTarget),n=L();function i(e){t.find('li[data-user-id="'.concat(e,'"] .dropdown-menu-user-link')).addClass("is-active")}d.hasClass("js-issue-board-sidebar")&&0===n.length&&this.addInput(d.data("fieldName"),0,{}),t.find(".is-active").removeClass("is-active"),n.length>0?L().forEach((function(e){return i(e)})):d.hasClass("js-issue-board-sidebar")?i(0):i(x)},updateLabel:d.data("dropdownTitle"),renderRow:function(e){var t=e.username?"@".concat(e.username):"",i=e.avatar_url?e.avatar_url:gon.default_avatar_url,s=!1;if(this.multiSelect){s=L().find((function(t){return e.id===t}));var o=this.fieldName;d.closest(".selectbox").find("input[name='".concat(o,"'][value='").concat(e.id,"']")).length&&(s=!0)}else s=e.id===x;var l="";return null!=e.beforeDivider?"<li><a href='#' class='".concat(!0===s?"is-active":"","'>").concat(r.a.escape(e.name),"</a></li>"):l="<img src='".concat(i,"' class='avatar avatar-inline m-0' width='32' />"),n.renderRow(a.issuableType,e,s,t,l)}})})),n.e(239).then(n.t.bind(null,428,7)).then((function(){s()(".ajax-users-select").each((function(e,t){var n={};n.skipLdap=s()(t).hasClass("skip_ldap"),n.projectId=s()(t).data("projectId"),n.groupId=s()(t).data("groupId"),n.showCurrentUser=s()(t).data("currentUser"),n.authorId=s()(t).data("authorId"),n.skipUsers=s()(t).data("skipUsers");var i=s()(t).data("nullUser"),a=s()(t).data("anyUser"),r=s()(t).data("emailUser"),o=s()(t).data("firstUser");return s()(t).select2({placeholder:Object(l.a)("Search for a user"),multiple:s()(t).hasClass("multiselect"),minimumInputLength:0,query:function(e){return h.users(e.term,n,(function(t){var n,s={results:t};if(0===e.term.length){if(o)for(var c=s.results,u=0,d=c.length;u<d;u+=1){var p=c[u];if(p.username===o){s.results.splice(u,1),s.results.unshift(p);break}}if(i){var f={name:Object(l.d)("UsersSelect|Unassigned"),id:0};s.results.unshift(f)}if(a){!0===(n=a)&&(n=Object(l.d)("UsersSelect|Any User"));var h={name:n,id:null};s.results.unshift(h)}}if(r&&0===s.results.length&&e.term.match(/^[^@]+@[^@]+$/)){var m=e.term.trim(),g={name:Object(l.e)(Object(l.a)('Invite "%{trimmed}" by email'),{trimmed:m}),username:m,id:m,invite:!0};s.results.unshift(g)}return e.callback(s)}))},initSelection:function(){var e=1<=arguments.length?[].slice.call(arguments,0):[];return h.initSelection.apply(h,e)},formatResult:function(){var e=1<=arguments.length?[].slice.call(arguments,0):[];return h.formatResult.apply(h,e)},formatSelection:function(){var e=1<=arguments.length?[].slice.call(arguments,0):[];return h.formatSelection.apply(h,e)},dropdownCssClass:"ajax-users-dropdown",escapeMarkup:function(e){return e}})}))})).catch((function(){}))}window.emitSidebarEvent=window.emitSidebarEvent||s.a.noop,p.prototype.initSelection=function(e,t){var n=s()(e).val();return"0"===n?t({name:Object(l.d)("UsersSelect|Unassigned")}):""!==n?this.user(n,t):void 0},p.prototype.formatResult=function(e){var t=gon.default_avatar_url;return e.avatar_url&&(t=e.avatar_url),"\n    <div class='user-result'>\n      <div class='user-image'>\n        <img class='avatar avatar-inline s32' src='".concat(t,"'>\n      </div>\n      <div class='user-info'>\n        <div class='user-name dropdown-menu-user-full-name'>\n          ").concat(r.a.escape(e.name),"\n        </div>\n        <div class='user-username dropdown-menu-user-username text-secondary'>\n          ").concat(e.invite?"":"@".concat(r.a.escape(e.username)),"\n        </div>\n      </div>\n    </div>\n  ")},p.prototype.formatSelection=function(e){return r.a.escape(e.name)},p.prototype.user=function(e,t){if(!/^\d+$/.test(e))return!1;var n=this.buildUrl(this.userPath);return n=n.replace(":id",e),o.a.get(n).then((function(e){var n=e.data;t(n)}))},p.prototype.users=function(e,t,n){var i=this.buildUrl(this.usersPath),s={search:e,active:!0,project_id:t.projectId||null,group_id:t.groupId||null,skip_ldap:t.skipLdap||null,todo_filter:t.todoFilter||null,todo_state_filter:t.todoStateFilter||null,current_user:t.showCurrentUser||null,author_id:t.authorId||null,skip_users:t.skipUsers||null};return"merge_request"===t.issuableType&&(s.merge_request_iid=t.iid||null),o.a.get(i,{params:s}).then((function(e){var t=e.data;n(t)}))},p.prototype.buildUrl=function(e){return null!=gon.relative_url_root&&(e=gon.relative_url_root.replace(/\/$/,"")+e),e},p.prototype.renderRow=function(e,t,n,i,s){var a="merge_request"!==e||t.can_merge?"":Object(l.a)("Cannot merge"),o=a?"has-tooltip":"",c="".concat(!0===n?"is-active":""," ").concat(o),u=a?'data-container="body" data-placement="left" data-title="'.concat(a,'"'):"";return"\n    <li data-user-id=".concat(t.id,'>\n      <a href="#" class="dropdown-menu-user-link d-flex align-items-center ').concat(c,'" ').concat(u,">\n        ").concat(this.renderRowAvatar(e,t,s),'\n        <span class="d-flex flex-column overflow-hidden">\n          <strong class="dropdown-menu-user-full-name">\n            ').concat(r.a.escape(t.name),"\n          </strong>\n          ").concat(i?'<span class="dropdown-menu-user-username">'.concat(i,"</span>"):"","\n        </span>\n      </a>\n    </li>\n  ")},p.prototype.renderRowAvatar=function(e,t,n){if(t.beforeDivider)return n;var i="merge_request"!==e||t.can_merge?"":'<i class="fa fa-exclamation-triangle merge-icon"></i>';return'<span class="position-relative mr-2">\n    '.concat(n,"\n    ").concat(i,"\n  </span>")},t.a=p},257:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n(65);var i=n(71);function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a=function(){function e(t,n,s){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.field=t,this.isLocalStorageAvailable=i.a.isLocalStorageAccessSafe(),null!=n.join&&(n=n.join("/")),this.key="autosave/".concat(n),this.fallbackKey=s,this.field.data("autosave",this),this.restore(),this.field.on("input",(function(){return a.save()}))}var t,n,a;return t=e,(n=[{key:"restore",value:function(){if(this.isLocalStorageAvailable&&this.field.length){var e=window.localStorage.getItem(this.key),t=window.localStorage.getItem(this.fallbackKey);e?this.field.val(e):t&&this.field.val(t),this.field.trigger("input");var n=new Event("change",{bubbles:!0,cancelable:!1}),i=this.field.get(0);i&&i.dispatchEvent(n)}}},{key:"save",value:function(){if(this.field.length){var e=this.field.val();return this.isLocalStorageAvailable&&e?(this.fallbackKey&&window.localStorage.setItem(this.fallbackKey,e),window.localStorage.setItem(this.key,e)):this.reset()}}},{key:"reset",value:function(){if(this.isLocalStorageAvailable)return window.localStorage.removeItem(this.fallbackKey),window.localStorage.removeItem(this.key)}},{key:"dispose",value:function(){this.field.off("input")}}])&&s(t.prototype,n),a&&s(t,a),e}()},259:function(e,t,n){"use strict";n(24),n(49),n(56),n(26),n(78),n(40),n(69),n(145),n(18),n(68),n(36),n(27),n(41),n(90),n(30),n(65),n(46),n(55),n(91),n(67);var i=n(20),s=/\{\{(.+?)\}\}/g,a={toCamelCase:function(e){return this.camelize(e.split("-").slice(1).join(" "))},template:function(e,t){var n=Object(i.template)(e,{escape:s});return n(t)},camelize:function(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,(function(e,t){return 0===t?e.toLowerCase():e.toUpperCase()})).replace(/\s+/g,"")},closest:function(e,t){for(;e&&e.tagName!==t&&"HTML"!==e.tagName;)e=e.parentNode;return e},isDropDownParts:function(e){return!(!e||!e.hasAttribute||"HTML"===e.tagName)&&(e.hasAttribute("data-dropdown-trigger")||e.hasAttribute("data-dropdown"))}};function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var l=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentIndex=0,this.hidden=!0,this.list="string"==typeof t?document.querySelector(t):t,this.items=[],this.eventWrapper={},this.hideOnClick=!1!==n.hideOnClick,n.addActiveClassToDropdownButton&&(this.dropdownToggle=this.list.parentNode.querySelector(".js-dropdown-toggle")),this.getItems(),this.initTemplateString(),this.addEvents(),this.initialState=t.innerHTML}var t,n,i;return t=e,i=[{key:"setImagesSrc",value:function(e){r(e.querySelectorAll("img[data-src]")).forEach((function(e){var t=e;t.src=t.getAttribute("data-src"),t.removeAttribute("data-src")}))}}],(n=[{key:"getItems",value:function(){return this.items=[].slice.call(this.list.querySelectorAll("li")),this.items}},{key:"initTemplateString",value:function(){var e=this.items||this.getItems(),t="";return e.length>0&&(t=e[e.length-1].outerHTML),this.templateString=t,this.templateString}},{key:"clickEvent",value:function(e){if("UL"!==e.target.tagName&&!e.target.closest(".".concat("droplab-item-ignore"))){var t=e.target.closest("li");if(t){this.addSelectedClass(t),e.preventDefault(),this.hideOnClick&&this.hide();var n=new CustomEvent("click.dl",{detail:{list:this,selected:t,data:e.target.dataset}});this.list.dispatchEvent(n)}}}},{key:"addSelectedClass",value:function(e){this.removeSelectedClasses(),e.classList.add("droplab-item-selected")}},{key:"removeSelectedClasses",value:function(){(this.items||this.getItems()).forEach((function(e){return e.classList.remove("droplab-item-selected")}))}},{key:"addEvents",value:function(){this.eventWrapper.clickEvent=this.clickEvent.bind(this),this.eventWrapper.closeDropdown=this.closeDropdown.bind(this),this.list.addEventListener("click",this.eventWrapper.clickEvent),this.list.addEventListener("keyup",this.eventWrapper.closeDropdown)}},{key:"closeDropdown",value:function(e){return 27!==e.keyCode||(e.preventDefault(),this.toggle())}},{key:"setData",value:function(e){this.data=e,this.render(e)}},{key:"addData",value:function(e){this.data=(this.data||[]).concat(e),this.render(this.data)}},{key:"render",value:function(e){var t=e?e.map(this.renderChildren.bind(this)):[];if(!this.list.querySelector(".filter-dropdown-loading")){(this.list.querySelector("ul[data-dynamic]")||this.list).innerHTML=t.join("");var n=new CustomEvent("render.dl",{detail:{list:this}});this.list.dispatchEvent(n)}}},{key:"renderChildren",value:function(t){var n=a.template(this.templateString,t),i=document.createElement("div");return i.innerHTML=n,e.setImagesSrc(i),i.firstChild.style.display=t.droplab_hidden?"none":"block",i.firstChild.outerHTML}},{key:"show",value:function(){this.hidden&&(this.list.style.display="block",this.currentIndex=0,this.hidden=!1,this.dropdownToggle&&this.dropdownToggle.classList.add("active"))}},{key:"hide",value:function(){this.hidden||(this.list.style.display="none",this.currentIndex=0,this.hidden=!0,this.dropdownToggle&&this.dropdownToggle.classList.remove("active"))}},{key:"toggle",value:function(){return this.hidden?this.show():this.hide()}},{key:"destroy",value:function(){this.hide(),this.list.removeEventListener("click",this.eventWrapper.clickEvent),this.list.removeEventListener("keyup",this.eventWrapper.closeDropdown)}}])&&o(t.prototype,n),i&&o(t,i),e}();var c=function e(t,n,i,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.trigger=t,this.list=new l(n,s),this.type="Hook",this.event="click",this.plugins=i||[],this.config=s||{},this.id=t.id};function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function p(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){function t(e,n,i,s){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=p(this,f(t).call(this,e,n,i,s))).type="button",a.event="click",a.eventWrapper={},a.addEvents(),a.addPlugins(),a}var n,i,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,e),n=t,(i=[{key:"addPlugins",value:function(){var e=this;this.plugins.forEach((function(t){return t.init(e)}))}},{key:"clicked",value:function(e){var t=new CustomEvent("click.dl",{detail:{hook:this},bubbles:!0,cancelable:!0});e.target.dispatchEvent(t),this.list.toggle()}},{key:"addEvents",value:function(){this.eventWrapper.clicked=this.clicked.bind(this),this.trigger.addEventListener("click",this.eventWrapper.clicked)}},{key:"removeEvents",value:function(){this.trigger.removeEventListener("click",this.eventWrapper.clicked)}},{key:"restoreInitialState",value:function(){this.list.list.innerHTML=this.list.initialState}},{key:"removePlugins",value:function(){this.plugins.forEach((function(e){return e.destroy()}))}},{key:"destroy",value:function(){this.restoreInitialState(),this.removeEvents(),this.removePlugins()}}])&&d(n.prototype,i),s&&d(n,s),t}(c);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function v(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var w=function(e){function t(e,n,i,s){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=v(this,y(t).call(this,e,n,i,s))).type="input",a.event="input",a.eventWrapper={},a.addEvents(),a.addPlugins(),a}var n,i,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,e),n=t,(i=[{key:"addPlugins",value:function(){var e=this;this.plugins.forEach((function(t){return t.init(e)}))}},{key:"addEvents",value:function(){this.eventWrapper.mousedown=this.mousedown.bind(this),this.eventWrapper.input=this.input.bind(this),this.eventWrapper.keyup=this.keyup.bind(this),this.eventWrapper.keydown=this.keydown.bind(this),this.trigger.addEventListener("mousedown",this.eventWrapper.mousedown),this.trigger.addEventListener("input",this.eventWrapper.input),this.trigger.addEventListener("keyup",this.eventWrapper.keyup),this.trigger.addEventListener("keydown",this.eventWrapper.keydown)}},{key:"removeEvents",value:function(){this.hasRemovedEvents=!0,this.trigger.removeEventListener("mousedown",this.eventWrapper.mousedown),this.trigger.removeEventListener("input",this.eventWrapper.input),this.trigger.removeEventListener("keyup",this.eventWrapper.keyup),this.trigger.removeEventListener("keydown",this.eventWrapper.keydown)}},{key:"input",value:function(e){if(!this.hasRemovedEvents){this.list.show();var t=new CustomEvent("input.dl",{detail:{hook:this,text:e.target.value},bubbles:!0,cancelable:!0});e.target.dispatchEvent(t)}}},{key:"mousedown",value:function(e){if(!this.hasRemovedEvents){var t=new CustomEvent("mousedown.dl",{detail:{hook:this,text:e.target.value},bubbles:!0,cancelable:!0});e.target.dispatchEvent(t)}}},{key:"keyup",value:function(e){this.hasRemovedEvents||this.keyEvent(e,"keyup.dl")}},{key:"keydown",value:function(e){this.hasRemovedEvents||this.keyEvent(e,"keydown.dl")}},{key:"keyEvent",value:function(e,t){this.list.show();var n=new CustomEvent(t,{detail:{hook:this,text:e.target.value,which:e.which,key:e.key},bubbles:!0,cancelable:!0});e.target.dispatchEvent(n)}},{key:"restoreInitialState",value:function(){this.list.list.innerHTML=this.list.initialState}},{key:"removePlugins",value:function(){this.plugins.forEach((function(e){return e.destroy()}))}},{key:"destroy",value:function(){this.restoreInitialState(),this.removeEvents(),this.removePlugins(),this.list.destroy()}}])&&b(n.prototype,i),s&&b(n,s),t}(c),k=function(){var e,t=!1,n=!1,i=function(e){for(var t=Array.prototype.slice.call(e.list.querySelectorAll("li:not(.divider):not(.hidden)"),0),n=[],i=0;i<t.length;i++){var s=t[i];s.classList.remove("droplab-item-active"),"none"!==s.style.display&&n.push(s)}return n},s=function(e){var t=i(e)[e.currentIndex-1],n=new CustomEvent("click.dl",{detail:{list:e,selected:t,data:t.dataset}});e.list.dispatchEvent(n),e.hide()};document.addEventListener("mousedown.dl",(function(e){var s=e.detail.hook.list;i(s),s.show(),s.currentIndex=0,t=!1,n=!1})),document.addEventListener("keydown.dl",(function(a){a.target;var r=a.detail.hook.list,o=r.currentIndex;if(t=!1,n=!1,a.detail.which){if(13===(e=a.detail.which))return void s(a.detail.hook.list);38===e&&(t=!0),40===e&&(n=!0)}else if(a.detail.key){if("Enter"===(e=a.detail.key))return void s(a.detail.hook.list);"ArrowUp"===e&&(t=!0),"ArrowDown"===e&&(n=!0)}t&&o--,n&&o++,o<0&&(o=0),r.currentIndex=o,function(e){var t=i(e);if(e.currentIndex>0&&(t[e.currentIndex-1]||(e.currentIndex=e.currentIndex-1),t[e.currentIndex-1])){var n=t[e.currentIndex-1],s=n.closest(".filter-dropdown");if(n.classList.add("droplab-item-active"),s){var a=s.offsetHeight,r=n.offsetTop-30;r>a&&(s.scrollTop=r-a)}}}(a.detail.hook.list)}))};function j(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function O(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var S=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ready=!1,this.hooks=[],this.queuedData=[],this.config={},this.eventWrapper={}}var t,n,i;return t=e,(n=[{key:"loadStatic",value:function(){var e=[].slice.apply(document.querySelectorAll("[".concat("data-dropdown-trigger","]")));this.addHooks(e)}},{key:"addData",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.applyArgs(t,"processAddData")}},{key:"setData",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.applyArgs(t,"processSetData")}},{key:"destroy",value:function(){this.hooks.forEach((function(e){return e.destroy()})),this.hooks=[],this.removeEvents()}},{key:"applyArgs",value:function(e,t){return this.ready?this[t].apply(this,j(e)):(this.queuedData=this.queuedData||[],this.queuedData.push(e),this.ready)}},{key:"processAddData",value:function(e,t){this.processData(e,t,"addData")}},{key:"processSetData",value:function(e,t){this.processData(e,t,"setData")}},{key:"processData",value:function(e,t,n){this.hooks.forEach((function(i){Array.isArray(e)&&i.list[n](e),i.trigger.id===e&&i.list[n](t)}))}},{key:"addEvents",value:function(){this.eventWrapper.documentClicked=this.documentClicked.bind(this),document.addEventListener("mousedown",this.eventWrapper.documentClicked)}},{key:"documentClicked",value:function(e){var t=e.target;"UL"!==t.tagName&&(t=a.closest(t,"UL")),a.isDropDownParts(t,this.hooks)||a.isDropDownParts(e.target,this.hooks)||this.hooks.forEach((function(e){return e.list.hide()}))}},{key:"removeEvents",value:function(){document.removeEventListener("mousedown",this.eventWrapper.documentClicked)}},{key:"changeHookList",value:function(e,t,n,i){var s=this,a="string"==typeof e?document.getElementById(e):e;this.hooks.forEach((function(e,r){var o=e;o.list.list.dataset.dropdownActive=!1,o.trigger===a&&(o.destroy(),s.hooks.splice(r,1),s.addHook(a,t,n,i))}))}},{key:"addHook",value:function(e,t,n,i){var s,r="string"==typeof e?document.querySelector(e):e;(s="string"==typeof t?document.querySelector(t):t instanceof Element?t:document.querySelector(e.dataset[a.toCamelCase("data-dropdown-trigger")])).dataset.dropdownActive=!0;var o="INPUT"===r.tagName?w:m;return this.hooks.push(new o(r,s,n,i)),this}},{key:"addHooks",value:function(e,t,n){var i=this;return e.forEach((function(e){return i.addHook(e,null,t,n)})),this}},{key:"setConfig",value:function(e){this.config=e}},{key:"fireReady",value:function(){var e=new CustomEvent("ready.dl",{detail:{dropdown:this}});document.dispatchEvent(e),this.ready=!0}},{key:"init",value:function(e,t,n,i){var s=this;return e?this.addHook(e,t,n,i):this.loadStatic(),this.addEvents(),k(),this.fireReady(),this.queuedData.forEach((function(e){return s.addData(e)})),this.queuedData=[],this}}])&&O(t.prototype,n),i&&O(t,i),e}();t.a=S},273:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n(30),n(65),n(46),n(38);var i=n(0),s=n.n(i),a=n(32),r=n(110);function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var l=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$el=t,this.namespacePath=n,this.projectPath=i,this.$dropdownBack=s()(".dropdown-menu-back",this.$el.closest(".dropdown")),this.$cancelButton=s()(".js-cancel-label-btn",this.$el),this.$newLabelField=s()("#new_label_name",this.$el),this.$newColorField=s()("#new_label_color",this.$el),this.$colorPreview=s()(".js-dropdown-label-color-preview",this.$el),this.$addList=s()(".js-add-list",this.$el),this.$newLabelError=s()(".js-label-error",this.$el),this.$newLabelCreateButton=s()(".js-new-label-btn",this.$el),this.$colorSuggestions=s()(".suggest-colors-dropdown a",this.$el),this.$newLabelError.hide(),this.$newLabelCreateButton.disable(),this.addListDefault=this.$addList.is(":checked"),this.cleanBinding(),this.addBinding()}var t,n,i;return t=e,(n=[{key:"cleanBinding",value:function(){this.$colorSuggestions.off("click"),this.$newLabelField.off("keyup change"),this.$newColorField.off("keyup change"),this.$dropdownBack.off("click"),this.$cancelButton.off("click"),this.$newLabelCreateButton.off("click")}},{key:"addBinding",value:function(){var e=this;this.$colorSuggestions.on("click",(function(t){var n=s()(this);e.addColorValue(t,n)})),this.$newLabelField.on("keyup change",this.enableLabelCreateButton.bind(this)),this.$newColorField.on("keyup change",this.enableLabelCreateButton.bind(this)),this.$dropdownBack.on("click",this.resetForm.bind(this)),this.$cancelButton.on("click",(function(t){t.preventDefault(),t.stopPropagation(),e.resetForm(),e.$dropdownBack.trigger("click")})),this.$newLabelCreateButton.on("click",this.saveLabel.bind(this))}},{key:"addColorValue",value:function(e,t){e.preventDefault(),e.stopPropagation(),this.$newColorField.val(t.data("color")).trigger("change"),this.$colorPreview.css("background-color",t.data("color")).parent().addClass("is-active")}},{key:"enableLabelCreateButton",value:function(){""!==this.$newLabelField.val()&&""!==this.$newColorField.val()?(this.$newLabelError.hide(),this.$newLabelCreateButton.enable()):this.$newLabelCreateButton.disable()}},{key:"resetForm",value:function(){this.$newLabelField.val("").trigger("change"),this.$newColorField.val("").trigger("change"),this.$addList.prop("checked",this.addListDefault),this.$colorPreview.css("background-color","").parent().removeClass("is-active")}},{key:"saveLabel",value:function(e){var t=this;e.preventDefault(),e.stopPropagation(),a.a.newLabel(this.namespacePath,this.projectPath,{title:this.$newLabelField.val(),color:this.$newColorField.val()},(function(e){if(t.$newLabelCreateButton.enable(),e.message){var n;n="string"==typeof e.message?e.message:Object.keys(e.message).map((function(t){return"".concat(Object(r.i)(t)," ").concat(e.message[t].join(", "))})).join("<br/>"),t.$newLabelError.html(n).show()}else{var i=t.$addList.is(":checked");t.$dropdownBack.trigger("click"),s()(document).trigger("created.label",[e,i])}}))}}])&&o(t.prototype,n),i&&o(t,i),e}()},275:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));n(30),n(42),n(46),n(18),n(55),n(68),n(67);var i=n(0),s=n.n(i),a=n(188),r=n.n(a),o=n(210),l=n.n(o),c=n(1),u=n(11),d=n(62),p=n(52);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function m(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}var g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.$dropdown,i=t.$loading;f(this,e);var a=n.closest(".dropdown"),r=n.closest(".block");this.$loading=i,this.$dropdown=n,this.$dropdownParent=a,this.$datePicker=a.find(".js-due-date-calendar"),this.$block=r,this.$sidebarCollapsedValue=r.find(".sidebar-collapsed-icon"),this.$selectbox=n.closest(".selectbox"),this.$value=r.find(".value"),this.$valueContent=r.find(".value-content"),this.$sidebarValue=s()(".js-due-date-sidebar-value",r),this.fieldName=n.data("fieldName"),this.abilityName=n.data("abilityName"),this.issueUpdateURL=n.data("issueUpdate"),this.rawSelectedDate=null,this.displayedDate=null,this.datePayload=null,this.initGlDropdown(),this.initRemoveDueDate(),this.initDatePicker()}return m(e,[{key:"initGlDropdown",value:function(){var e=this;this.$dropdown.glDropdown({opened:function(){e.$datePicker.data("pikaday").show()},hidden:function(){e.$selectbox.hide(),e.$value.css("display","")},shouldPropagate:!1})}},{key:"initDatePicker",value:function(){var e=this,t=s()("input[name='".concat(this.fieldName,"']")),n=new r.a({field:t.get(0),theme:"gitlab-theme",format:"yyyy-mm-dd",parse:function(e){return Object(d.n)(e)},toString:function(e){return Object(d.p)(e)},onSelect:function(i){t.val(n.toString(i)),e.$dropdown.hasClass("js-issue-boards-due-date")?(p.c.detail.issue.dueDate=t.val(),e.updateIssueBoardIssue()):e.saveDueDate(!0)},firstDay:gon.first_day_of_week});n.setDate(Object(d.n)(t.val())),this.$datePicker.append(n.el),this.$datePicker.data("pikaday",n)}},{key:"initRemoveDueDate",value:function(){var e=this;this.$block.on("click",".js-remove-due-date",(function(t){var n=e.$datePicker.data("pikaday");t.preventDefault(),n.setDate(null),e.$dropdown.hasClass("js-issue-boards-due-date")?(p.c.detail.issue.dueDate="",e.updateIssueBoardIssue()):(s()("input[name='".concat(e.fieldName,"']")).val(""),e.saveDueDate(!1))}))}},{key:"saveDueDate",value:function(e){this.parseSelectedDate(),this.prepSelectedDate(),this.submitSelectedDate(e)}},{key:"parseSelectedDate",value:function(){if(this.rawSelectedDate=s()("input[name='".concat(this.fieldName,"']")).val(),this.rawSelectedDate.length){var e=this.rawSelectedDate.split("-").map((function(e){return parseInt(e,10)})),t=new Date(e[0],e[1]-1,e[2]);this.displayedDate=l()(t,"mmm d, yyyy")}else this.displayedDate=Object(c.a)("None")}},{key:"prepSelectedDate",value:function(){var e={};e[this.abilityName]={},e[this.abilityName].due_date=this.rawSelectedDate,this.datePayload=e}},{key:"updateIssueBoardIssue",value:function(){var e=this;this.$loading.fadeIn(),this.$dropdown.trigger("loading.gl.dropdown"),this.$selectbox.hide(),this.$value.css("display","");var t=function(){e.$loading.fadeOut()};p.c.detail.issue.update(this.$dropdown.attr("data-issue-update")).then(t).catch(t)}},{key:"submitSelectedDate",value:function(e){var t=this,n=this.datePayload[this.abilityName].due_date,i=this.displayedDate!==Object(c.a)("None"),a=i?"bold":"no-value";return this.$loading.removeClass("hidden").fadeIn(),e&&(this.$dropdown.trigger("loading.gl.dropdown"),this.$selectbox.hide()),this.$value.css("display",""),this.$valueContent.html("<span class='".concat(a,"'>").concat(this.displayedDate,"</span>")),this.$sidebarValue.html(this.displayedDate),s()(".js-remove-due-date-holder").toggleClass("hidden",n.length),u.a.put(this.issueUpdateURL,this.datePayload).then((function(){var s=i?"".concat(Object(c.a)("Due date"),"<br />").concat(n," (").concat(Object(d.s)(n),")"):Object(c.a)("Due date");return e&&(t.$dropdown.trigger("loaded.gl.dropdown"),t.$dropdown.dropdown("toggle")),t.$sidebarCollapsedValue.attr("data-original-title",s),t.$loading.fadeOut()}))}}]),e}(),b=function(){function e(){f(this,e),this.initMilestoneDatePicker(),this.initIssuableSelect()}return m(e,[{key:"initMilestoneDatePicker",value:function(){s()(".datepicker").each((function(){var e=s()(this),t=e.val(),n=new r.a({field:e.get(0),theme:"gitlab-theme animate-picker",format:"yyyy-mm-dd",container:e.parent().get(0),parse:function(e){return Object(d.n)(e)},toString:function(e){return Object(d.p)(e)},onSelect:function(t){e.val(n.toString(t))},firstDay:gon.first_day_of_week});n.setDate(Object(d.n)(t)),e.data("pikaday",n)})),s()(".js-clear-due-date,.js-clear-start-date").on("click",(function(e){e.preventDefault(),s()(e.target).siblings(".datepicker").data("pikaday").setDate(null)}))}},{key:"initIssuableSelect",value:function(){var e=s()(".js-issuable-update .due_date").find(".block-loading").hide();s()(".js-due-date-select").each((function(t,n){var i=s()(n);new g({$dropdown:i,$loading:e})}))}}]),e}()},276:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(35);var i=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t.id,this.name=t.name,this.username=t.username,this.avatar=t.avatar_url||t.avatar||gon.default_avatar_url,this.path=t.path,this.state=t.state,this.webUrl=t.web_url||t.webUrl};window.ListAssignee=i},277:function(e,t,n){"use strict";var i=n(1);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a={name:"DeprecatedModal",props:{id:{type:String,required:!1},title:{type:String,required:!1},text:{type:String,required:!1},hideFooter:{type:Boolean,required:!1,default:!1},kind:{type:String,required:!1,default:"primary"},modalDialogClass:{type:String,required:!1,default:""},closeKind:{type:String,required:!1,default:"default"},closeButtonLabel:{type:String,required:!1,default:Object(i.a)("Cancel")},primaryButtonLabel:{type:String,required:!1,default:""},secondaryButtonLabel:{type:String,required:!1,default:""},submitDisabled:{type:Boolean,required:!1,default:!1}},computed:{btnKindClass:function(){return s({},"btn-".concat(this.kind),!0)},btnCancelKindClass:function(){return s({},"btn-".concat(this.closeKind),!0)}},methods:{emitCancel:function(e){this.$emit("cancel",e)},emitSubmit:function(e){this.$emit("submit",e)}}},r=n(4),o=Object(r.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"modal-open"},[n("div",{staticClass:"modal",class:e.id?"":"d-block",attrs:{id:e.id,role:"dialog",tabindex:"-1"}},[n("div",{staticClass:"modal-dialog",class:e.modalDialogClass,attrs:{role:"document"}},[n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-header"},[e._t("header",[n("h4",{staticClass:"modal-title float-left"},[e._v(e._s(e.title))]),e._v(" "),n("button",{staticClass:"close float-right",attrs:{type:"button","data-dismiss":"modal","aria-label":e.__("Close")},on:{click:function(t){return e.emitCancel(t)}}},[n("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])])],2),e._v(" "),n("div",{staticClass:"modal-body"},[e._t("body",[n("p",[e._v(e._s(e.text))])],{text:e.text})],2),e._v(" "),e.hideFooter?e._e():n("div",{staticClass:"modal-footer"},[n("button",{staticClass:"btn",class:e.btnCancelKindClass,attrs:{type:"button","data-dismiss":"modal"},on:{click:function(t){return e.emitCancel(t)}}},[e._v("\n            "+e._s(e.closeButtonLabel)+"\n          ")]),e._v(" "),e.secondaryButtonLabel?e._t("secondary-button",[e.secondaryButtonLabel?n("button",{staticClass:"btn",attrs:{type:"button","data-dismiss":"modal"}},[e._v("\n              "+e._s(e.secondaryButtonLabel)+"\n            ")]):e._e()]):e._e(),e._v(" "),e.primaryButtonLabel?n("button",{staticClass:"btn js-primary-button",class:e.btnKindClass,attrs:{disabled:e.submitDisabled,type:"button","data-dismiss":"modal","data-qa-selector":"save_changes_button"},on:{click:function(t){return e.emitSubmit(t)}}},[e._v("\n            "+e._s(e.primaryButtonLabel)+"\n          ")]):e._e()],2)])])]),e._v(" "),e.id?e._e():n("div",{staticClass:"modal-backdrop fade show"})])}),[],!1,null,null,null);t.a=o.exports},284:function(e,t,n){!function(t){"use strict";var i=-1,s=function(e){return e.every=function(t,n,s){e._time(),s||(s=n,n=null);var a=i+=1;return e._timers[a]={visible:t,hidden:n,callback:s},e._run(a,!1),e.isSupported()&&e._listen(),a},e.stop=function(t){return!!e._timers[t]&&(e._stop(t),delete e._timers[t],!0)},e._timers={},e._time=function(){e._timed||(e._timed=!0,e._wasHidden=e.hidden(),e.change((function(){e._stopRun(),e._wasHidden=e.hidden()})))},e._run=function(n,i){var s,a=e._timers[n];if(e.hidden()){if(null===a.hidden)return;s=a.hidden}else s=a.visible;var r=function(){a.last=new Date,a.callback.call(t)};if(i){var o=new Date-a.last;s>o?a.delay=setTimeout((function(){a.id=setInterval(r,s),r()}),s-o):(a.id=setInterval(r,s),r())}else a.id=setInterval(r,s)},e._stop=function(t){var n=e._timers[t];clearInterval(n.id),clearTimeout(n.delay),delete n.id,delete n.delay},e._stopRun=function(t){var n=e.hidden(),i=e._wasHidden;if(n&&!i||!n&&i)for(var s in e._timers)e._stop(s),e._run(s,!n)},e};e.exports?e.exports=s(n(285)):s(t.Visibility)}(window)},285:function(e,t,n){!function(t){"use strict";var n=-1,i={onVisible:function(e){var t=i.isSupported();if(!t||!i.hidden())return e(),t;var n=i.change((function(t,s){i.hidden()||(i.unbind(n),e())}));return n},change:function(e){if(!i.isSupported())return!1;var t=n+=1;return i._callbacks[t]=e,i._listen(),t},unbind:function(e){delete i._callbacks[e]},afterPrerendering:function(e){var t=i.isSupported();if(!t||"prerender"!=i.state())return e(),t;var n=i.change((function(t,s){"prerender"!=s&&(i.unbind(n),e())}));return n},hidden:function(){return!(!i._doc.hidden&&!i._doc.webkitHidden)},state:function(){return i._doc.visibilityState||i._doc.webkitVisibilityState||"visible"},isSupported:function(){return!(!i._doc.visibilityState&&!i._doc.webkitVisibilityState)},_doc:document||{},_callbacks:{},_change:function(e){var t=i.state();for(var n in i._callbacks)i._callbacks[n].call(i._doc,e,t)},_listen:function(){if(!i._init){var e="visibilitychange";i._doc.webkitVisibilityState&&(e="webkit"+e);var t=function(){i._change.apply(i,arguments)};i._doc.addEventListener?i._doc.addEventListener(e,t):i._doc.attachEvent(e,t),i._init=!0}}};e.exports?e.exports=i:t.Visibility=i}(this)},287:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t.id,this.path=t.path}},288:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(24),n(49);var i=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t.id,this.title=t.title};window.ListMilestone=i},291:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));n(24),n(30),n(28),n(42),n(26),n(78),n(85),n(65),n(46),n(69),n(145),n(72),n(50),n(58),n(38),n(18),n(55),n(68),n(36),n(91),n(67),n(27);var i=n(0),s=n.n(i),a=n(20),r=n.n(a),o=n(1),l=n(11),c=n(176),u=n(273),d=n(14),p=n(121),f=n(52),h=n(16);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var v=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=this,a=s()(t);t||(a=s()(".js-label-select")),a.each((function(t,a){var c=s()(a),m=c.closest(".labels-filter"),g=c.data("namespacePath"),b=c.data("projectPath"),v=c.data("issueUpdate"),y=c.data("selected");null==y||c.hasClass("js-multiselect")||(y=y.split(","));var _=c.data("showNo"),w=c.data("showAny"),k=c.data("showMenuAbove"),j=c.data("defaultLabel")||Object(o.a)("Label"),O=c.data("abilityName"),S=c.closest(".selectbox"),C=S.closest(".block"),D=c.closest("form, .js-issuable-update"),T=C.find(".sidebar-collapsed-icon span"),E=C.find(".js-sidebar-labels-tooltip"),x=C.find(".value"),P=c.parent().find(".dropdown-menu"),I=C.find(".block-loading").fadeOut(),L=c.data("fieldName"),A=S.find('input[name="'.concat(c.data("fieldName"),'"]')).map((function(){return this.value})).get(),N=c.data("scopedLabels"),q=c.data("scopedLabelsDocumentationLink"),R=n.handleClick;E.tooltip(),c.closest(".dropdown").find(".dropdown-new-label").length&&new u.a(c.closest(".dropdown").find(".dropdown-new-label"),g,b);var B=function(){var t=c.closest(".selectbox").find("input[name='".concat(L,"']")).map((function(){return this.value})).get();if(!r.a.isEqual(A,t)){A=t;var n={};n[O]={},n[O].label_ids=t,t.length||(n[O].label_ids=[""]),I.removeClass("hidden").fadeIn(),c.trigger("loading.gl.dropdown"),l.a.put(v,n).then((function(t){var n,i,a=t.data;I.fadeOut(),c.trigger("loaded.gl.dropdown"),S.hide(),a.issueUpdateURL=v;var l=0;a.labels.length&&v?(i=e.getLabelTemplate({labels:r.a.sortBy(a.labels,"title"),issueUpdateURL:v,enableScopedLabels:N,scopedLabelsDocumentationLink:q}),l=a.labels.length):i='<span class="no-value">'.concat(Object(o.a)("None"),"</span>");if(x.removeAttr("style").html(i),T.text(l),a.labels.length){var u=a.labels.map((function(e){return e.title}));u.length>5&&(u=u.slice(0,5)).push(Object(o.e)(Object(o.d)("Labels|and %{count} more"),{count:a.labels.length-5})),n=u.join(", ")}else n=Object(o.a)("Labels");E.attr("title",n).tooltip("_fixTitle"),s()(".has-tooltip",x).tooltip({container:"body"})})).catch((function(){return Object(d.a)(Object(o.a)("Error saving label update."))}))}};c.glDropdown({showMenuAbove:k,data:function(e,t){var n=c.attr("data-labels");l.a.get(n).then((function(e){var n=e.data;if(c.hasClass("js-extra-options")){var i=[];_&&i.unshift({id:0,title:Object(o.a)("No Label")}),w&&i.unshift({isAny:!0,title:Object(o.a)("Any Label")}),i.length&&(i.push({type:"divider"}),n=i.concat(n))}t(n),k&&c.data("glDropdown").positionMenuAbove()})).catch((function(){return Object(d.a)(Object(o.a)("Error fetching labels."))}))},renderRow:function(e){var t,n=[],i=e.id<=0||null==e.id;if(c.hasClass("js-filter-bulk-update")){var s=c.data("indeterminate")||[],a=c.data("marked")||[];if(-1!==s.indexOf(e.id)&&n.push("is-indeterminate"),-1!==a.indexOf(e.id)){var o=n.indexOf("is-indeterminate");-1!==o&&n.splice(o,1),n.push("is-active")}}else{if(this.id(e)){var l=this.id(e).toString().replace(/'/g,"\\'");D.find("input[type='hidden'][name='".concat(this.fieldName,"'][value='").concat(l,"']")).length&&n.push("is-active")}this.multiSelect&&i&&n.push("dropdown-clear-active")}t=e.color?"<span class='dropdown-label-box' style='background: ".concat(e.color,"'></span>"):"";var u=document.createElement("a");if(u.href="#",e.id){n.push.apply(n,["label-item"].concat(["d-flex","flex-row","text-break-word"])),u.dataset.labelId=e.id}u.className=n.join(" "),u.innerHTML="".concat(t," ").concat(r.a.escape(e.title));var d=document.createElement("li");return d.appendChild(u),d},search:{fields:["title"]},selectable:!0,filterable:!0,selected:c.data("selected")||[],toggleLabel:function(e,t){var n=c.parent(),i=n.find(".dropdown-input-field"),s=null!==t&&t.hasClass("is-active"),a=e?e.title:null,r=this.selected;if(i.length&&i.val().length&&n.find(".dropdown-input-clear").trigger("click"),e&&0===e.id)return this.selected=[],Object(o.a)("No Label");if(s)this.selected.push(a);else if(!s&&a){var l=this.selected.indexOf(a);this.selected.splice(l,1)}return 1===r.length?r:r.length?Object(o.e)(Object(o.a)("%{firstLabel} +%{labelCount} more"),{firstLabel:r[0],labelCount:r.length-1}):j},fieldName:c.data("fieldName"),id:function(e){return e.id<=0?e.title:c.hasClass("js-issuable-form-dropdown")?e.id:c.hasClass("js-filter-submit")&&null==e.isAny?e.title:e.id},hidden:function(){var e=s()("body").attr("data-page"),t="projects:issues:index"===e,n="projects:merge_requests:index"===e;S.hide(),x.removeAttr("style"),c.hasClass("js-issuable-form-dropdown")||s()("html").hasClass("issue-boards-page")||c.hasClass("js-multiselect")&&(c.hasClass("js-filter-submit")&&(t||n)?Issuable.filterResults(c.closest("form")):c.hasClass("js-filter-submit")?c.closest("form").submit():c.hasClass("js-filter-bulk-update")||(B(),c.data("glDropdown").clearMenu()))},multiSelect:c.hasClass("js-multiselect"),vue:c.hasClass("js-issue-board-sidebar"),clicked:function(e){var t=e.$el,n=e.e,a=e.isMarking,o=e.selectedObj,l=function(){I.fadeOut()},u=s()("body").attr("data-page"),d="projects:issues:index"===u,m="projects:merge_requests:index"===u;if(c.parent().find(".is-active:not(.dropdown-clear-active)").length&&c.parent().find(".dropdown-clear-active").removeClass("is-active"),!c.hasClass("js-issuable-form-dropdown")){if(c.hasClass("js-filter-bulk-update"))return i.enableBulkLabelDropdown(),void i.setDropdownData(c,a,o.id);var g;if(c.closest(".add-issues-modal").length&&(g=p.a.store.filter),g)return o.isAny?g.label_name=[]:t.hasClass("is-active")&&g.label_name.push(o.title),void n.preventDefault();if(c.hasClass("js-filter-submit")&&(d||m)){if(!c.hasClass("js-multiselect"))return y=o.title,Issuable.filterResults(c.closest("form"))}else{if(c.hasClass("js-filter-submit"))return c.closest("form").submit();if(c.hasClass("js-issue-board-sidebar")){if(t.hasClass("is-active"))f.c.detail.issue.labels.push(new ListLabel({id:o.id,title:o.title,color:o.color,textColor:"#fff"}));else{var b=f.c.detail.issue.labels;b=b.filter((function(e){return e.id!==o.id})),f.c.detail.issue.labels=b}I.fadeIn();var v=f.c.detail.issue.labels;f.c.detail.issue.update(c.attr("data-issue-update")).then((function(){if(Object(h.C)(o)){var e=v.map((function(e){return e.id})),t=f.c.detail.issue.labels.map((function(e){return e.id})),n=r.a.difference(e,t);c.data("marked",t),P.find(n.map((function(e){return'[data-label-id="'.concat(e,'"]')})).join(",")).removeClass("is-active")}})).then(l).catch(l)}else if(R)n.preventDefault(),R(o);else if(!c.hasClass("js-multiselect"))return B()}}},opened:function(){if(c.hasClass("js-issue-board-sidebar")){var e=c.attr("data-selected");this.selected=e?e.split(","):[],c.data("glDropdown").updateLabel()}},preserveContext:!0}),i.setOriginalDropdownData(m,c)})),this.bindEvents()}var t,n,i;return t=e,i=[{key:"getLabelTemplate",value:function(e){var t='<a href="<%- issueUpdateURL.slice(0, issueUpdateURL.lastIndexOf("/")) %>?label_name[]=<%- encodeURIComponent(label.title) %>" class="gl-link gl-label-link has-tooltip" <%= linkAttrs %> title="<%= tooltipTitleTemplate({ label, isScopedLabel, enableScopedLabels, escapeStr }) %>">',n='<span class="gl-label-text" style="background-color: <%= escapeStr(label.color) %>; color: <%= escapeStr(label.text_color) %>;">',i=r.a.template(['<span class="gl-label">',t,n,"<%- label.title %>","</span>","</a>","</span>"].join("")),s=r.a.template(['<a href="<%= scopedLabelsDocumentationLink %>" class="gl-link gl-label-icon" target="_blank" rel="noopener">','<i class="fa fa-question-circle"></i>',"</a>"].join("")),a=r.a.template(['<span class="gl-label gl-label-scoped" style="color: <%= escapeStr(label.color) %>;">',t,n,'<%- label.title.slice(0, label.title.lastIndexOf("::")) %>',"</span>",'<span class="gl-label-text" style="color: <%= rightLabelTextColor({ label, escapeStr }) %>;">','<%- label.title.slice(label.title.lastIndexOf("::") + 2) %>',"</span>","</a>","<%= infoIconTemplate({ label, scopedLabelsDocumentationLink, escapeStr }) %>","</span>"].join("")),o=r.a.template(["<% if (isScopedLabel(label) && enableScopedLabels) { %>","<span class='font-weight-bold scoped-label-tooltip-title'>Scoped label</span>","<br />","<%= escapeStr(label.description) %>","<% } else { %>","<%= escapeStr(label.description) %>","<% } %>"].join(""));return r.a.template(["<% _.each(labels, function(label){ %>","<% if (isScopedLabel(label) && enableScopedLabels) { %>",'<span class="d-inline-block position-relative scoped-label-wrapper">',"<%= scopedLabelTemplate({ label, issueUpdateURL, isScopedLabel, enableScopedLabels, rightLabelTextColor, infoIconTemplate, scopedLabelsDocumentationLink, tooltipTitleTemplate, escapeStr, linkAttrs: 'data-html=\"true\"' }) %>","</span>","<% } else { %>",'<%= labelTemplate({ label, issueUpdateURL, isScopedLabel, enableScopedLabels, tooltipTitleTemplate, escapeStr, linkAttrs: "" }) %>',"<% } %>","<% }); %>"].join(""))(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{labelTemplate:i,rightLabelTextColor:function(e){var t=e.label;return(0,e.escapeStr)("#FFFFFF"===t.text_color?t.color:t.text_color)},infoIconTemplate:s,scopedLabelTemplate:a,tooltipTitleTemplate:o,isScopedLabel:h.C,escapeStr:r.a.escape}))}}],(n=[{key:"bindEvents",value:function(){return s()("body").on("change",".selected-issuable",this.onSelectCheckboxIssue)}},{key:"onSelectCheckboxIssue",value:function(){if(!s()(".selected-issuable:checked").length)return s()(".issues-bulk-update .labels-filter .dropdown-toggle-text").text(Object(o.a)("Label"))}},{key:"enableBulkLabelDropdown",value:function(){c.a.willUpdateLabels=!0}},{key:"setDropdownData",value:function(e,t,n){var i=e.data("marked")||[],s=e.data("unmarked")||[],a=e.data("indeterminate")||[];if(t){i.push(n);var r=a.indexOf(n);r>-1&&a.splice(r,1),(r=s.indexOf(n))>-1&&s.splice(r,1)}else{var o=i.indexOf(n);o>-1&&i.splice(o,1),c.a.getOriginalIndeterminateIds().indexOf(n)>-1&&s.push(n),c.a.getOriginalCommonIds().indexOf(n)>-1&&s.push(n)}e.data("marked",i),e.data("unmarked",s),e.data("indeterminate",a)}},{key:"setOriginalDropdownData",value:function(e,t){var n=[];e.find('[name="label_name[]"]').map((function(){return n.push(this.value)})),t.data("marked",n)}}])&&b(t.prototype,n),i&&b(t,i),e}()},292:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));n(30),n(28),n(42),n(35);var i=n(0),s=n.n(i),a=n(20),r=n.n(a),o=n(1),l=(n(321),n(11)),c=n(62),u=n(121),d=n(52);function p(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var f=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),null!==t&&(this.currentProject="string"==typeof t?JSON.parse(t):t),e.init(n,i)}var t,n,i;return t=e,i=[{key:"init",value:function(e,t){var n=s()(e);e||(n=s()(".js-milestone-select")),n.each((function(e,n){var i,a,p,f,h=s()(n),m=h.data("milestones"),g=h.data("issueUpdate"),b=h.data("showNo"),v=h.data("showAny"),y=h.data("showMenuAbove"),_=h.data("showUpcoming"),w=h.data("showStarted"),k=h.data("useId"),j=h.data("defaultLabel"),O=h.data("defaultNo"),S=h.data("abilityName"),C=h.closest(".selectbox"),D=C.closest(".block"),T=D.find(".sidebar-collapsed-icon"),E=D.find(".value"),x=D.find(".block-loading").fadeOut();return f=v?"":null,f=b&&O?Object(o.a)("No Milestone"):f,p=h.data("selected")||f,g&&(a=r.a.template('<a href="<%- web_url %>" class="bold has-tooltip" data-container="body" title="<%- remaining %>"><%- title %></a>'),i='<span class="no-value">'.concat(Object(o.a)("None"),"</span>")),h.glDropdown({showMenuAbove:y,data:function(e,t){return l.a.get(m).then((function(e){var n=e.data,i=[];v&&i.push({id:null,name:null,title:Object(o.a)("Any Milestone")}),b&&i.push({id:-1,name:Object(o.a)("No Milestone"),title:Object(o.a)("No Milestone")}),_&&i.push({id:-2,name:"#upcoming",title:Object(o.a)("Upcoming")}),w&&i.push({id:-3,name:"#started",title:Object(o.a)("Started")}),i.length&&i.push({type:"divider"}),t(i.concat(n)),y&&h.data("glDropdown").positionMenuAbove(),s()('[data-milestone-id="'.concat(r.a.escape(p),'"] > a')).addClass("is-active")}))},renderRow:function(e){return'\n          <li data-milestone-id="'.concat(r.a.escape(e.name),"\">\n            <a href='#' class='dropdown-menu-milestone-link'>\n              ").concat(r.a.escape(e.title),"\n            </a>\n          </li>\n        ")},filterable:!0,search:{fields:["title"]},selectable:!0,toggleLabel:function(e,t){return e&&"id"in e&&s()(t).hasClass("is-active")?e.title:j},defaultLabel:j,fieldName:h.data("fieldName"),text:function(e){return r.a.escape(e.title)},id:function(e){return k||h.is(".js-issuable-form-dropdown")?e.id:e.name},hidden:function(){return C.hide(),E.css("display","")},opened:function(e){var n=s()(e.currentTarget);(h.hasClass("js-issue-board-sidebar")||t.handleClick)&&(p=h[0].dataset.selected||f),s()("a.is-active",n).removeClass("is-active"),s()('[data-milestone-id="'.concat(r.a.escape(p),'"] > a'),n).addClass("is-active")},vue:h.hasClass("js-issue-board-sidebar"),clicked:function(e){var n,r,m=e.e,b=e.selectedObj;if(b){if(t.handleClick)return m.preventDefault(),void t.handleClick(b);var v=s()("body").attr("data-page"),y="projects:issues:index"===v,_=v==v&&"projects:merge_requests:index"===v,w=b.name!==p;if(p=w?b.name:f,h.hasClass("js-filter-bulk-update")||h.hasClass("js-issuable-form-dropdown"))m.preventDefault();else if(h.closest(".add-issues-modal").length&&(r=u.a.store.filter),r)r[h.data("fieldName")]=b.name,m.preventDefault();else{if(h.hasClass("js-filter-submit")&&(y||_))return Issuable.filterResults(h.closest("form"));if(h.hasClass("js-filter-submit"))return h.closest("form").submit();if(!h.hasClass("js-issue-board-sidebar"))return b=C.find('input[type="hidden"]').val(),(n={})[S]={},n[S].milestone_id=null!=b?b:null,x.removeClass("hidden").fadeIn(),h.trigger("loading.gl.dropdown"),l.a.put(g,n).then((function(e){var t=e.data;return h.trigger("loaded.gl.dropdown"),x.fadeOut(),C.hide(),E.css("display",""),null!=t.milestone?(t.milestone.remaining=Object(c.s)(t.milestone.due_date),t.milestone.name=t.milestone.title,E.html(a(t.milestone)),T.attr("data-original-title","".concat(t.milestone.name,"<br />").concat(t.milestone.remaining)).find("span").text(t.milestone.title)):(E.html(i),T.attr("data-original-title",Object(o.a)("Milestone")).find("span").text(Object(o.a)("None")))})).catch((function(){x.fadeOut()}));-1!==b.id&&w?Object(d.b)("milestone",new ListMilestone({id:b.id,title:b.name})):Object(d.a)("milestone"),h.trigger("loading.gl.dropdown"),x.removeClass("hidden").fadeIn(),d.c.detail.issue.update(h.attr("data-issue-update")).then((function(){h.trigger("loaded.gl.dropdown"),x.fadeOut()})).catch((function(){x.fadeOut()}))}}}})}))}}],(n=null)&&p(t.prototype,n),i&&p(t,i),e}();window.MilestoneSelect=f},293:function(e,t,n){"use strict";var i=n(4),s=Object(i.a)({},(function(){var e=this.$createElement,t=this._self._c||e;return t("li",{staticClass:"timeline-entry"},[t("div",{staticClass:"timeline-entry-inner"},[this._t("default")],2)])}),[],!1,null,null,null);t.a=s.exports},294:function(e,t,n){"use strict";var i=n(17);t.a=new i.default},305:function(e,t,n){"use strict";n.d(t,"e",(function(){return m})),n.d(t,"h",(function(){return g})),n.d(t,"i",(function(){return _})),n.d(t,"m",(function(){return w})),n.d(t,"b",(function(){return k})),n.d(t,"a",(function(){return S})),n.d(t,"n",(function(){return C})),n.d(t,"l",(function(){return L})),n.d(t,"g",(function(){return A})),n.d(t,"k",(function(){return N})),n.d(t,"f",(function(){return q})),n.d(t,"d",(function(){return R})),n.d(t,"j",(function(){return B})),n.d(t,"o",(function(){return M})),n.d(t,"c",(function(){return F}));n(24),n(49),n(56),n(30),n(28),n(42),n(374),n(26),n(78),n(85),n(40),n(65),n(46),n(129),n(69),n(258),n(145),n(35),n(77),n(50),n(58),n(38),n(18),n(398),n(55),n(68),n(36),n(91),n(67),n(27),n(41);var i,s=n(650),a=n.n(s),r=n(688),o=n.n(r),l=(n(110),n(117)),c=n(118);function u(e,t){if(null==e)return{};var n,i,s=function(e,t){if(null==e)return{};var n,i,s={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"file_hash";return e.find((function(e){return e[n]===t}))}function g(e){var t=function(e){var t=e.commit,n=e.note,i=e.noteableType,s=e.noteableData,a=e.diffFile,r=e.noteTargetLine,o=e.diffViewType,l=e.linePosition,u=e.positionType,d=JSON.stringify({base_sha:a.diff_refs.base_sha,start_sha:a.diff_refs.start_sha,head_sha:a.diff_refs.head_sha,old_path:a.old_path,new_path:a.new_path,position_type:u||c.L,old_line:r?r.old_line:null,new_line:r?r.new_line:null,x:e.x,y:e.y,width:e.width,height:e.height});return{view:o,line_type:l===c.s?c.D:c.G,merge_request_diff_head_sha:a.diff_refs.head_sha,in_reply_to_discussion_id:"",note_project_id:"",target_type:s.targetType,target_id:s.id,return_discussion:!0,note:{note:n,position:d,noteable_type:i,noteable_id:s.id,commit_id:t&&t.id,type:a.diff_refs.start_sha&&a.diff_refs.head_sha?c.f:c.n,line_code:r?r.line_code:null}}}(e);return{endpoint:e.noteableData.create_note_path,data:t}}var b=function(e,t){var n=t.oldLineNumber,i=t.newLineNumber;return e.findIndex((function(e){return e.old_line===n&&e.new_line===i}))},v=function(e,t){var n=t.oldLineNumber,i=t.newLineNumber;return e.findIndex((function(e){return e.left&&e.right&&e.left.old_line===n&&e.right.new_line===i}))},y=(h(i={},c.l,b),h(i,c.J,v),i),_=function(e,t,n){var i,s=y[e],a=(h(i={},c.l,t.highlighted_diff_lines),h(i,c.J,t.parallel_diff_lines),i);return s&&s(a[e],n)};function w(e,t,n){var i=b(e.highlighted_diff_lines,t),s=v(e.parallel_diff_lines,t),a=n?1:-1;i>-1&&e.highlighted_diff_lines.splice(i+a,1),s>-1&&e.parallel_diff_lines.splice(s+a,1)}function k(e,t,n,i,s){var a=t.oldLineNumber,r=t.newLineNumber,o=e.length,l=-1,u=e.map((function(e,t){return e.type===c.u?l=t:Object.assign(e,{old_line:n?a+t+1:a+t-o,new_line:n?r+t+1:r+t-o}),e}));if(l>-1){var d,p=u[l];d=i?s:n?u[l-1]:u[l+1],Object.assign(p,{meta_data:{old_pos:d.old_line,new_pos:d.new_line}})}return u}function j(e){var t=e.parallelLines,n=e.contextLines,i=e.lineNumbers,s=e.isExpandDown,a=n.map((function(e){return{left:e,right:e,line_code:e.line_code}})),r=s?1:0;if(!s&&e.bottom)t.push.apply(t,f(a));else{var o=v(t,i);t.splice.apply(t,[o+r,0].concat(f(a)))}}function O(e){var t=e.inlineLines,n=e.contextLines,i=e.lineNumbers,s=e.isExpandDown,a=s?1:0;if(!s&&e.bottom)t.push.apply(t,f(n));else{var r=b(t,i);t.splice.apply(t,[r+a,0].concat(f(n)))}}function S(e){var t,n=e.diffViewType,i=(h(t={},c.l,O),h(t,c.J,j),t)[n];i&&i(e)}function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};delete e.text;var t=Object.assign({},e);if(e.rich_text){var n=t.rich_text.charAt(0);" "!==n&&"+"!==n&&"-"!==n||(t.rich_text=e.rich_text.substring(1))}return t}function D(e,t){var n=e.left,i=e.right;return n&&n.line_code?n.line_code:i&&i.line_code?i.line_code:t}function T(e){var t=!e.highlighted_diff_lines,n=!e.parallel_diff_lines;return Object.assign(e,{highlighted_diff_lines:t?[]:e.highlighted_diff_lines,parallel_diff_lines:n?[]:e.parallel_diff_lines}),e}function E(e){var t;e.alreadyPrepared||Object.assign(e,{rich_text:(t=e.rich_text,t?t.replace(/^[+ -]/,""):void 0),discussionsExpanded:!0,discussions:[],hasForm:!1,text:void 0,alreadyPrepared:!0})}function x(e){var t=e.highlighted_diff_lines,n=e.parallel_diff_lines,i=0;return t.forEach(E),n.forEach((function(e,t){Object.assign(e,{line_code:D(e,t)}),e.left&&(i+=1,E(e.left)),e.right&&(i+=1,E(e.right))})),Object.assign(e,{inlineLinesCount:t.length,parallelLinesCount:i}),e}function P(e){var t=e.viewer&&e.viewer.name||l.l.text,n=function(e){return Math.max(e.inlineLinesCount,e.parallelLinesCount)}(e);return Object.assign(e,{renderIt:n<c.p,collapsed:t===l.l.text&&n>c.v,isShowingFullFile:!1,isLoadingFullFile:!1,discussions:[],renderingLines:!1}),e}function I(e){var t=e.reduce((function(e,t){var n,i,s,a,r,o,l=function(e){return"".concat(e.content_sha,"-").concat(e.file_hash)}(t);return p({},e,h({},l,e[l]?(n=e[l],i=t,s=n.highlighted_diff_lines,a=n.parallel_diff_lines,r=!s.length,o=!a.length,p({},n,{highlighted_diff_lines:r?i.highlighted_diff_lines:s,parallel_diff_lines:o?i.parallel_diff_lines:a,renderIt:i.renderIt,collapsed:i.collapsed})):t))}),{});return Object.values(t)}function L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=(e.diff_files||[]).map(T).map(x).map(P);return I([].concat(f(t),f(n)))}function A(e,t){var n=e.some((function(e){return e.highlighted_diff_lines.length>0}));return(!t||n?e.reduce((function(e,t){return t.highlighted_diff_lines.forEach((function(n){e.push({file:t,line:n})})),e}),[]):e.reduce((function(e,t){return t.parallel_diff_lines.forEach((function(n){n.left&&e.push({file:t,line:n.left}),n.right&&e.push({file:t,line:n.right})})),e}),[])).reduce((function(e,t){var n=t.file,i=t.line;return i.line_code&&(e[i.line_code]={base_sha:n.diff_refs.base_sha,head_sha:n.diff_refs.head_sha,start_sha:n.diff_refs.start_sha,new_path:n.new_path,old_path:n.old_path,old_line:i.old_line,new_line:i.new_line,line_code:i.line_code,position_type:"text"}),e}),{})}function N(e){var t=e.discussion,n=e.diffPosition,i=e.latestDiff,s=n.line_code,r=u(n,["line_code"]);if(t.original_position&&t.position){var o=t.original_position,l=t.position;return a()(l,r)||a()(o,r)}return i&&t.active&&s===t.line_code}var q=function(e){var t=Object.keys(l.j).find((function(t){return e["".concat(t,"_file")]}));return l.j[t]||e.viewer&&e.viewer.name===l.l.mode_changed&&l.l.mode_changed||l.j.replaced},R=function(e){for(var t=e.diffLines,n=e.data,i=e.typeKey,s=e.oldLineKey,a=e.newLineKey,r=e.mapLine,l=n.length,c=[],u=0,d=t.length;u<d;u+=1){var p=t[u];"match"===o()(i)(p)?function(){var e=t[u-1],i=t[u+1],d=o()(a),p=d(e)||0,h=d(i)-1||l;c.push.apply(c,f(n.slice(p,h).map((function(t,n){return r({line:Object.assign(t,{hasForm:!1,discussions:[]}),oldLine:(o()(s)(e)||0)+n+1,newLine:(d(e)||0)+n+1})}))))}():c.push(p)}return c},B=function(e){return requestIdleCallback(e)};var M=function(e,t,n){(function(e,t){var n=e.parallel_diff_lines,i=e.highlighted_diff_lines;return[].concat(f(n.reduce((function(e,t){return t.left&&e.push(t.left),t.right&&e.push(t.right),e}),[])),f(i)).filter((function(e){return e.line_code===t}))})(e,t).forEach(n)},F=function(e){var t=!0,n=function(e){e&&e.discussions.length&&(t=t&&e.discussionsExpanded)};return e.parallel_diff_lines.forEach((function(e){n(e.left),n(e.right)})),e.highlighted_diff_lines.forEach((function(e){n(e)})),t}},310:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));n(24),n(49),n(56),n(30),n(40),n(72),n(740),n(430),n(548),n(18),n(55),n(68),n(36),n(67),n(41);var i=n(112),s=n(1);function a(e){return e/(i.a*i.a)}function r(e){return e/(i.a*i.a*i.a)}function o(e){return e<i.a?Object(s.e)(Object(s.a)("%{size} bytes"),{size:e}):e<i.a*i.a?Object(s.e)(Object(s.a)("%{size} KiB"),{size:(t=e,t/i.a).toFixed(2)}):e<i.a*i.a*i.a?Object(s.e)(Object(s.a)("%{size} MiB"),{size:a(e).toFixed(2)}):Object(s.e)(Object(s.a)("%{size} GiB"),{size:r(e).toFixed(2)});var t}},320:function(e,t,n){"use strict";var i=n(108),s=n(234),a=n(518),r=n(239),o=n(330),l=n(354),c=n(519),u=n(356);i({target:"Promise",proto:!0,real:!0,forced:!!a&&r((function(){a.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=l(this,o("Promise")),n="function"==typeof e;return this.then(n?function(n){return c(t,e()).then((function(){return n}))}:e,n?function(n){return c(t,e()).then((function(){throw n}))}:e)}}),s||"function"!=typeof a||a.prototype.finally||u(a.prototype,"finally",o("Promise").prototype.finally)},326:function(e,t,n){"use strict";n(72);var i=n(20),s=n.n(i),a=n(310),r={props:{path:{type:String,required:!0},fileSize:{type:Number,required:!1,default:0},renderInfo:{type:Boolean,default:!0},innerCssClasses:{type:[Array,Object,String],required:!1,default:""}},data:function(){return{width:0,height:0}},computed:{fileSizeReadable:function(){return Object(a.b)(this.fileSize)},hasFileSize:function(){return this.fileSize>0},hasDimensions:function(){return this.width&&this.height}},beforeDestroy:function(){window.removeEventListener("resize",this.resizeThrottled,!1)},mounted:function(){this.onImgLoad(),this.resizeThrottled=s.a.throttle(this.onImgLoad,400),window.addEventListener("resize",this.resizeThrottled,!1)},methods:{onImgLoad:function(){requestIdleCallback(this.calculateImgSize,{timeout:1e3})},calculateImgSize:function(){var e=this,t=this.$refs.contentImg;t&&(this.width=t.naturalWidth,this.height=t.naturalHeight,this.$nextTick((function(){e.$emit("imgLoaded",{width:e.width,height:e.height,renderedWidth:t.clientWidth,renderedHeight:t.clientHeight})})))}}},o=n(4),l=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"position-relative",class:e.innerCssClasses},[n("img",{ref:"contentImg",attrs:{src:e.path},on:{load:e.onImgLoad}}),e._v(" "),e._t("image-overlay")],2),e._v(" "),e.renderInfo?n("p",{staticClass:"image-info"},[e.hasFileSize?[e._v("\n      "+e._s(e.fileSizeReadable)+"\n    ")]:e._e(),e._v(" "),e.hasFileSize&&e.hasDimensions?[e._v("\n      |\n    ")]:e._e(),e._v(" "),e.hasDimensions?[n("strong",[e._v(e._s(e.s__("ImageViewerDimensions|W")))]),e._v(": "+e._s(e.width)+" | "),n("strong",[e._v(e._s(e.s__("ImageViewerDimensions|H")))]),e._v(": "+e._s(e.height)+"\n    ")]:e._e()],2):e._e()])}),[],!1,null,null,null);t.a=l.exports},328:function(e,t,n){"use strict";n(30),n(72);var i=n(760),s=(n(55),n(67),{html:"html",htm:"html",html_vm:"html",asp:"html",jade:"pug",pug:"pug",md:"markdown","md.rendered":"markdown",markdown:"markdown","markdown.rendered":"markdown",rst:"markdown",blink:"blink",css:"css",scss:"sass",sass:"sass",less:"less",json:"json",yaml:"yaml","YAML-tmLanguage":"yaml",yml:"yaml",xml:"xml",plist:"xml",xsd:"xml",dtd:"xml",xsl:"xml",xslt:"xml",resx:"xml",iml:"xml",xquery:"xml",tmLanguage:"xml",manifest:"xml",project:"xml",png:"image",jpeg:"image",jpg:"image",gif:"image",svg:"image",ico:"image",tif:"image",tiff:"image",psd:"image",psb:"image",ami:"image",apx:"image",bmp:"image",bpg:"image",brk:"image",cur:"image",dds:"image",dng:"image",exr:"image",fpx:"image",gbr:"image",img:"image",jbig2:"image",jb2:"image",jng:"image",jxr:"image",pbm:"image",pgf:"image",pic:"image",raw:"image",webp:"image",js:"javascript",ejs:"javascript",esx:"javascript",jsx:"react",tsx:"react",ini:"settings",dlc:"settings",dll:"settings",config:"settings",conf:"settings",properties:"settings",prop:"settings",settings:"settings",option:"settings",props:"settings",toml:"settings",prefs:"settings","sln.dotsettings":"settings","sln.dotsettings.user":"settings",ts:"typescript","d.ts":"typescript-def",marko:"markojs",pdf:"pdf",xlsx:"table",xls:"table",csv:"table",tsv:"table",vscodeignore:"vscode",vsixmanifest:"vscode",vsix:"vscode","code-workplace":"vscode",suo:"visualstudio",sln:"visualstudio",csproj:"visualstudio",vb:"visualstudio",pdb:"database",sql:"database",pks:"database",pkb:"database",accdb:"database",mdb:"database",sqlite:"database",cs:"csharp",zip:"zip",tar:"zip",gz:"zip",xz:"zip",bzip2:"zip",gzip:"zip","7z":"zip",rar:"zip",tgz:"zip",exe:"exe",msi:"exe",java:"java",jar:"java",jsp:"java",c:"c",m:"c",h:"h",cc:"cpp",cpp:"cpp",mm:"cpp",cxx:"cpp",hpp:"hpp",go:"go",py:"python",url:"url",sh:"console",ksh:"console",csh:"console",tcsh:"console",zsh:"console",bash:"console",bat:"console",cmd:"console",ps1:"powershell",psm1:"powershell",psd1:"powershell",ps1xml:"powershell",psc1:"powershell",pssc:"powershell",gradle:"gradle",doc:"word",docx:"word",rtf:"word",cer:"certificate",cert:"certificate",crt:"certificate",pub:"key",key:"key",pem:"key",asc:"key",gpg:"key",woff:"font",woff2:"font",ttf:"font",eot:"font",suit:"font",otf:"font",bmap:"font",fnt:"font",odttf:"font",ttc:"font",font:"font",fonts:"font",sui:"font",ntf:"font",mrf:"font",lib:"lib",bib:"lib",rb:"ruby",erb:"ruby",fs:"fsharp",fsx:"fsharp",fsi:"fsharp",fsproj:"fsharp",swift:"swift",ino:"arduino",dockerignore:"docker",dockerfile:"docker",tex:"tex",cls:"tex",sty:"tex",pptx:"powerpoint",ppt:"powerpoint",pptm:"powerpoint",potx:"powerpoint",pot:"powerpoint",potm:"powerpoint",ppsx:"powerpoint",ppsm:"powerpoint",pps:"powerpoint",ppam:"powerpoint",ppa:"powerpoint",webm:"movie",mkv:"movie",flv:"movie",vob:"movie",ogv:"movie",ogg:"movie",gifv:"movie",avi:"movie",mov:"movie",qt:"movie",wmv:"movie",yuv:"movie",rm:"movie",rmvb:"movie",mp4:"movie",m4v:"movie",mpg:"movie",mp2:"movie",mpeg:"movie",mpe:"movie",mpv:"movie",m2v:"movie",vdi:"virtual",vbox:"virtual","vbox-prev":"virtual",ics:"email",mp3:"music",flac:"music",m4a:"music",wma:"music",aiff:"music",coffee:"coffee",txt:"document",graphql:"graphql",rs:"rust",raml:"raml",xaml:"xaml",hs:"haskell",kt:"kotlin",kts:"kotlin",patch:"git",lua:"lua",clj:"clojure",cljs:"clojure",groovy:"groovy",r:"r",rmd:"r",dart:"dart",as:"actionscript",mxml:"mxml",ahk:"autohotkey",swf:"flash",swc:"swc",cmake:"cmake",asm:"assembly",a51:"assembly",inc:"assembly",nasm:"assembly",s:"assembly",ms:"assembly",agc:"assembly",ags:"assembly",aea:"assembly",argus:"assembly",mitigus:"assembly",binsource:"assembly",vue:"vue",ml:"ocaml",mli:"ocaml",cmx:"ocaml","js.map":"javascript-map","css.map":"css-map",lock:"lock",hbs:"handlebars",mustache:"handlebars",pl:"perl",pm:"perl",hx:"haxe","spec.ts":"test-ts","test.ts":"test-ts","ts.snap":"test-ts","spec.tsx":"test-jsx","test.tsx":"test-jsx","tsx.snap":"test-jsx","spec.jsx":"test-jsx","test.jsx":"test-jsx","jsx.snap":"test-jsx","spec.js":"test-js","test.js":"test-js","js.snap":"test-js","routing.ts":"angular-routing","routing.js":"angular-routing","module.ts":"angular","module.js":"angular","ng-template":"angular","component.ts":"angular-component","component.js":"angular-component","guard.ts":"angular-guard","guard.js":"angular-guard","service.ts":"angular-service","service.js":"angular-service","pipe.ts":"angular-pipe","pipe.js":"angular-pipe","filter.js":"angular-pipe","directive.ts":"angular-directive","directive.js":"angular-directive","resolver.ts":"angular-resolver","resolver.js":"angular-resolver",pp:"puppet",ex:"elixir",exs:"elixir",ls:"livescript",erl:"erlang",twig:"twig",jl:"julia",elm:"elm",pure:"purescript",tpl:"smarty",styl:"stylus",re:"reason",rei:"reason",cmj:"bucklescript",merlin:"merlin",v:"verilog",vhd:"verilog",sv:"verilog",svh:"verilog",nb:"mathematica",wl:"wolframlanguage",wls:"wolframlanguage",njk:"nunjucks",nunjucks:"nunjucks",robot:"robot",sol:"solidity",au3:"autoit",haml:"haml",yang:"yang",tf:"terraform","tf.json":"terraform",tfvars:"terraform",tfstate:"terraform","blade.php":"laravel","inky.php":"laravel",applescript:"applescript",cake:"cake",feature:"cucumber",nim:"nim",nimble:"nim",apib:"apiblueprint",apiblueprint:"apiblueprint",tag:"riot",vfl:"vfl",kl:"kl",pcss:"postcss",sss:"postcss",todo:"todo",cfml:"coldfusion",cfc:"coldfusion",lucee:"coldfusion",cabal:"cabal",nix:"nix",slim:"slim",http:"http",rest:"http",rql:"restql",restql:"restql",kv:"kivy",graphcool:"graphcool",sbt:"sbt","reducer.ts":"ngrx-reducer","rootReducer.ts":"ngrx-reducer","state.ts":"ngrx-state","actions.ts":"ngrx-actions","effects.ts":"ngrx-effects",cr:"crystal","drone.yml":"drone",cu:"cuda",cuh:"cuda",log:"log"}),a={".jscsrc":"json",".jshintrc":"json","tsconfig.json":"json","tslint.json":"json","composer.lock":"json",".jsbeautifyrc":"json",".esformatter":"json","cdp.pid":"json",".htaccess":"xml",".jshintignore":"settings",".buildignore":"settings",makefile:"settings",".mrconfig":"settings",".yardopts":"settings","gradle.properties":"gradle",gradlew:"gradle","gradle-wrapper.properties":"gradle",license:"certificate","license.md":"certificate","license.md.rendered":"certificate","license.txt":"certificate",licence:"certificate","licence.md":"certificate","licence.md.rendered":"certificate","licence.txt":"certificate",dockerfile:"docker","docker-compose.yml":"docker",".mailmap":"email",".gitignore":"git",".gitconfig":"git",".gitattributes":"git",".gitmodules":"git",".gitkeep":"git","git-history":"git",".Rhistory":"r","cmakelists.txt":"cmake","cmakecache.txt":"cmake","angular-cli.json":"angular",".angular-cli.json":"angular",".vfl":"vfl",".kl":"kl","postcss.config.js":"postcss",".postcssrc.js":"postcss","project.graphcool":"graphcool","webpack.js":"webpack","webpack.ts":"webpack","webpack.base.js":"webpack","webpack.base.ts":"webpack","webpack.config.js":"webpack","webpack.config.ts":"webpack","webpack.common.js":"webpack","webpack.common.ts":"webpack","webpack.config.common.js":"webpack","webpack.config.common.ts":"webpack","webpack.config.common.babel.js":"webpack","webpack.config.common.babel.ts":"webpack","webpack.dev.js":"webpack","webpack.dev.ts":"webpack","webpack.config.dev.js":"webpack","webpack.config.dev.ts":"webpack","webpack.config.dev.babel.js":"webpack","webpack.config.dev.babel.ts":"webpack","webpack.prod.js":"webpack","webpack.prod.ts":"webpack","webpack.server.js":"webpack","webpack.server.ts":"webpack","webpack.client.js":"webpack","webpack.client.ts":"webpack","webpack.config.server.js":"webpack","webpack.config.server.ts":"webpack","webpack.config.client.js":"webpack","webpack.config.client.ts":"webpack","webpack.config.production.babel.js":"webpack","webpack.config.production.babel.ts":"webpack","webpack.config.prod.babel.js":"webpack","webpack.config.prod.babel.ts":"webpack","webpack.config.prod.js":"webpack","webpack.config.prod.ts":"webpack","webpack.config.production.js":"webpack","webpack.config.production.ts":"webpack","webpack.config.staging.js":"webpack","webpack.config.staging.ts":"webpack","webpack.config.babel.js":"webpack","webpack.config.babel.ts":"webpack","webpack.config.base.babel.js":"webpack","webpack.config.base.babel.ts":"webpack","webpack.config.base.js":"webpack","webpack.config.base.ts":"webpack","webpack.config.staging.babel.js":"webpack","webpack.config.staging.babel.ts":"webpack","webpack.config.coffee":"webpack","webpack.config.test.js":"webpack","webpack.config.test.ts":"webpack","webpack.config.vendor.js":"webpack","webpack.config.vendor.ts":"webpack","webpack.config.vendor.production.js":"webpack","webpack.config.vendor.production.ts":"webpack","webpack.test.js":"webpack","webpack.test.ts":"webpack","webpack.dist.js":"webpack","webpack.dist.ts":"webpack","webpackfile.js":"webpack","webpackfile.ts":"webpack","ionic.config.json":"ionic",".io-config.json":"ionic","gulpfile.js":"gulp","gulpfile.ts":"gulp","gulpfile.babel.js":"gulp","package.json":"nodejs","package-lock.json":"nodejs",".nvmrc":"nodejs",".npmignore":"npm",".npmrc":"npm",".yarnrc":"yarn","yarn.lock":"yarn",".yarnclean":"yarn",".yarn-integrity":"yarn","yarn-error.log":"yarn","androidmanifest.xml":"android",".env":"tune",".env.example":"tune",".babelrc":"babel","contributing.md":"contributing","contributing.md.rendered":"contributing","readme.md":"readme","readme.md.rendered":"readme",changelog:"changelog","changelog.md":"changelog","changelog.md.rendered":"changelog",CREDITS:"credits","credits.txt":"credits","credits.md":"credits","credits.md.rendered":"credits",".flowconfig":"flow","favicon.png":"favicon","karma.conf.js":"karma","karma.conf.ts":"karma","karma.conf.coffee":"karma","karma.config.js":"karma","karma.config.ts":"karma","karma-main.js":"karma","karma-main.ts":"karma",".bithoundrc":"bithound","appveyor.yml":"appveyor",".travis.yml":"travis","protractor.conf.js":"protractor","protractor.conf.ts":"protractor","protractor.conf.coffee":"protractor","protractor.config.js":"protractor","protractor.config.ts":"protractor","fuse.js":"fusebox",procfile:"heroku",".editorconfig":"editorconfig",".gitlab-ci.yml":"gitlab",".bowerrc":"bower","bower.json":"bower",".eslintrc.js":"eslint",".eslintrc.yaml":"eslint",".eslintrc.yml":"eslint",".eslintrc.json":"eslint",".eslintrc":"eslint",".eslintignore":"eslint","code_of_conduct.md":"conduct","code_of_conduct.md.rendered":"conduct",".watchmanconfig":"watchman","aurelia.json":"aurelia","mocha.opts":"mocha",jenkinsfile:"jenkins","firebase.json":"firebase",".firebaserc":"firebase",Rakefile:"ruby","rollup.config.js":"rollup","rollup.config.ts":"rollup","rollup-config.js":"rollup","rollup-config.ts":"rollup","rollup.config.prod.js":"rollup","rollup.config.prod.ts":"rollup","rollup.config.dev.js":"rollup","rollup.config.dev.ts":"rollup","rollup.config.prod.vendor.js":"rollup","rollup.config.prod.vendor.ts":"rollup",".hhconfig":"hack",".stylelintrc":"stylelint","stylelint.config.js":"stylelint",".stylelintrc.json":"stylelint",".stylelintrc.yaml":"stylelint",".stylelintrc.yml":"stylelint",".stylelintrc.js":"stylelint",".stylelintignore":"stylelint",".codeclimate.yml":"code-climate",".prettierrc":"prettier","prettier.config.js":"prettier",".prettierrc.js":"prettier",".prettierrc.json":"prettier",".prettierrc.yaml":"prettier",".prettierrc.yml":"prettier","nodemon.json":"nodemon",".sonarrc":"sonar",browserslist:"browserlist",".browserslistrc":"browserlist",".snyk":"snyk",".drone.yml":"drone"};var r={components:{icon:n(45).a,GlLoadingIcon:i.a},props:{fileName:{type:String,required:!0},folder:{type:Boolean,required:!1,default:!1},opened:{type:Boolean,required:!1,default:!1},loading:{type:Boolean,required:!1,default:!1},size:{type:Number,required:!1,default:16},cssClasses:{type:String,required:!1,default:""}},computed:{spriteHref:function(){var e,t=(e=this.fileName,a[e]||s[e?e.split(".").pop():""]||""||"file");return"".concat(gon.sprite_file_icons,"#").concat(t)},folderIconName:function(){return this.opened?"folder-open":"folder"},iconSizeClass:function(){return this.size?"s".concat(this.size):""}}},o=n(4),l=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[e.loading||e.folder?e._e():n("svg",{class:[e.iconSizeClass,e.cssClasses]},[n("use",e._b({},"use",{"xlink:href":e.spriteHref},!1))]),e._v(" "),!e.loading&&e.folder?n("icon",{staticClass:"folder-icon",attrs:{name:e.folderIconName,size:e.size}}):e._e(),e._v(" "),e.loading?n("gl-loading-icon",{attrs:{inline:!0}}):e._e()],1)}),[],!1,null,null,null);t.a=l.exports},345:function(e,t,n){"use strict";n(26),n(27);var i={init:function(e){this.hook=e,this.destroyed=!1,this.config=e.config.InputSetter||(this.hook.config.InputSetter={}),this.eventWrapper={},this.addEvents()},addEvents:function(){this.eventWrapper.setInputs=this.setInputs.bind(this),this.hook.list.list.addEventListener("click.dl",this.eventWrapper.setInputs)},removeEvents:function(){this.hook.list.list.removeEventListener("click.dl",this.eventWrapper.setInputs)},setInputs:function(e){var t=this;if(!this.destroyed){var n=e.detail.selected;Array.isArray(this.config)||(this.config=[this.config]),this.config.forEach((function(e){return t.setInput(e,n)}))}},setInput:function(e,t){var n=e.input||this.hook.trigger,i=t.getAttribute(e.valueAttribute),s=e.inputAttribute;return n.hasAttribute(s)?n.setAttribute(s,i):"INPUT"===n.tagName?n.value=i:n.textContent=i},destroy:function(){this.destroyed=!0,this.removeEvents()}};t.a=i},375:function(e,t,n){"use strict";var i=n(760),s=n(1),a=n(45),r=Object(s.d)("ToggleButton|Toggle Status: ON"),o=Object(s.d)("ToggleButton|Toggle Status: OFF"),l={components:{icon:a.a,GlLoadingIcon:i.a},model:{prop:"value",event:"change"},props:{name:{type:String,required:!1,default:null},value:{type:Boolean,required:!1,default:null},disabledInput:{type:Boolean,required:!1,default:!1},isLoading:{type:Boolean,required:!1,default:!1}},computed:{toggleIcon:function(){return this.value?"status_success_borderless":"status_failed_borderless"},ariaLabel:function(){return this.value?r:o}},methods:{toggleFeature:function(){this.disabledInput||this.$emit("change",!this.value)}}},c=n(4),u=Object(c.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"toggle-wrapper"},[e.name?n("input",{attrs:{name:e.name,type:"hidden"},domProps:{value:e.value}}):e._e(),e._v(" "),n("button",{staticClass:"project-feature-toggle",class:{"is-checked":e.value,"is-disabled":e.disabledInput,"is-loading":e.isLoading},attrs:{"aria-label":e.ariaLabel,type:"button"},on:{click:e.toggleFeature}},[n("gl-loading-icon",{staticClass:"loading-icon"}),e._v(" "),n("span",{staticClass:"toggle-icon"},[n("icon",{staticClass:"toggle-icon-svg",attrs:{name:e.toggleIcon}})],1)],1)])}),[],!1,null,null,null);t.a=u.exports},376:function(e,t,n){"use strict";n(42);var i=n(0),s=n.n(i),a=n(20),r=n.n(a),o=n(51),l=n.n(o),c=n(14),u=n(11),d=n(1);function p(){this.toggleTodo=this.toggleTodo.bind(this),this.sidebar=s()("aside"),this.removeListeners(),this.addEventListeners()}p.initialize=function(){this.instance||(this.instance=new p)},p.prototype.removeListeners=function(){this.sidebar.off("click",".sidebar-collapsed-icon"),this.sidebar.off("hidden.gl.dropdown"),s()(".dropdown").off("loading.gl.dropdown"),s()(".dropdown").off("loaded.gl.dropdown"),s()(document).off("click",".js-sidebar-toggle")},p.prototype.addEventListeners=function(){var e=s()(document);return this.sidebar.on("click",".sidebar-collapsed-icon",this,this.sidebarCollapseClicked),this.sidebar.on("hidden.gl.dropdown",this,this.onSidebarDropdownHidden),e.on("click",".js-sidebar-toggle",this.sidebarToggleClicked),s()(document).off("click",".js-issuable-todo").on("click",".js-issuable-todo",this.toggleTodo)},p.prototype.sidebarToggleClicked=function(e,t){var n=s()(this),i=n.find("i").hasClass("fa-angle-double-right"),a=i?Object(d.a)("Expand sidebar"):Object(d.a)("Collapse sidebar"),r=s()(".js-sidebar-toggle i");e.preventDefault(),i?(r.removeClass("fa-angle-double-right").addClass("fa-angle-double-left"),s()("aside.right-sidebar").removeClass("right-sidebar-expanded").addClass("right-sidebar-collapsed"),s()(".layout-page").removeClass("right-sidebar-expanded").addClass("right-sidebar-collapsed")):(r.removeClass("fa-angle-double-left").addClass("fa-angle-double-right"),s()("aside.right-sidebar").removeClass("right-sidebar-collapsed").addClass("right-sidebar-expanded"),s()(".layout-page").removeClass("right-sidebar-collapsed").addClass("right-sidebar-expanded")),n.attr("data-original-title",a),t||l.a.set("collapsed_gutter",s()(".right-sidebar").hasClass("right-sidebar-collapsed"))},p.prototype.toggleTodo=function(e){var t=this,n=s()(e.currentTarget),i=n.data("deletePath")?"delete":"post",a=String(n.data("deletePath")||n.data("createPath"));n.tooltip("hide"),s()(".js-issuable-todo").disable().addClass("is-loading"),u.a[i](a,{issuable_id:n.data("issuableId"),issuable_type:n.data("issuableType")}).then((function(e){var n=e.data;t.todoUpdateDone(n)})).catch((function(){return Object(c.a)(Object(d.e)(Object(d.a)("There was an error %{message} todo."),{message:"post"===i?Object(d.d)("RightSidebar|adding a"):Object(d.d)("RightSidebar|deleting the")}))}))},p.prototype.todoUpdateDone=function(e){var t=e.delete_path?e.delete_path:null,n=t?"mark":"todo",i=s()(".js-issuable-todo");s()(document).trigger("todo:toggle",e.count),i.each((function(e,i){var a=s()(i),r=a.find(".js-issuable-todo-inner");a.removeClass("is-loading").enable().attr("aria-label",a.data("".concat(n,"Text"))).attr("title",a.data("".concat(n,"Text"))).data("deletePath",t),a.hasClass("has-tooltip")&&a.tooltip("_fixTitle"),void 0!==a.data("isCollapsed")?r.html(a.data("".concat(n,"Icon"))):r.text(a.data("".concat(n,"Text")))}))},p.prototype.sidebarCollapseClicked=function(e){if(!s()(e.currentTarget).hasClass("dont-change-state")){var t=e.data;e.preventDefault();var n=s()(this).closest(".block");return t.openDropdown(n)}},p.prototype.openDropdown=function(e){var t=r.a.isString(e)?this.getBlock(e):e;this.isOpen()||(this.setCollapseAfterUpdate(t),this.toggleSidebar("open")),setTimeout((function(){t.find(".js-sidebar-dropdown-toggle").trigger("click")}))},p.prototype.setCollapseAfterUpdate=function(e){return e.addClass("collapse-after-update"),s()(".layout-page").addClass("with-overlay")},p.prototype.onSidebarDropdownHidden=function(e){var t=e.data;e.preventDefault();var n=s()(e.target).closest(".block");return t.sidebarDropdownHidden(n)},p.prototype.sidebarDropdownHidden=function(e){if(e.hasClass("collapse-after-update"))return e.removeClass("collapse-after-update"),s()(".layout-page").removeClass("with-overlay"),this.toggleSidebar("hide")},p.prototype.triggerOpenSidebar=function(){return this.sidebar.find(".js-sidebar-toggle").trigger("click")},p.prototype.toggleSidebar=function(e){if(null==e&&(e="toggle"),"toggle"===e&&this.triggerOpenSidebar(),"open"===e&&(this.isOpen()||this.triggerOpenSidebar()),"hide"===e&&this.isOpen())return this.triggerOpenSidebar()},p.prototype.isOpen=function(){return this.sidebar.is(".right-sidebar-expanded")},p.prototype.getBlock=function(e){return this.sidebar.find(".block.".concat(e))},t.a=p},377:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));n(24),n(49),n(56),n(40),n(65),n(18),n(36),n(41);var i=n(0),s=n.n(i),a=(n(681),n(1)),r=n(11),o=n(14);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.selector=t.selector,this.dataType=t.dataType,this.fieldName=t.fieldName,this.lockVersion=t.lockVersion,this.taskListContainerSelector="".concat(this.selector," .js-task-list-container"),this.updateHandler=this.update.bind(this),this.onSuccess=t.onSuccess||function(){},this.onError=t.onError||function(e){var t="";return e.response.data&&"object"===c(e.response.data)&&(t=e.response.data.errors.join(" ")),new o.a(t||Object(a.a)("Update failed"),"alert")},this.init()}var t,n,i;return t=e,(n=[{key:"init",value:function(){this.disable(),s()(this.taskListContainerSelector).taskList("enable"),s()(document).on("tasklist:changed",this.taskListContainerSelector,this.updateHandler)}},{key:"getTaskListTarget",value:function(e){return e&&e.currentTarget?s()(e.currentTarget):s()(this.taskListContainerSelector)}},{key:"disableTaskListItems",value:function(e){this.getTaskListTarget(e).taskList("disable")}},{key:"enableTaskListItems",value:function(e){this.getTaskListTarget(e).taskList("enable")}},{key:"disable",value:function(){this.disableTaskListItems(),s()(document).off("tasklist:changed",this.taskListContainerSelector)}},{key:"update",value:function(e){var t,n=this,i=s()(e.target),a=e.detail,o=a.index,c=a.checked,u=a.lineNumber,d=a.lineSource,p={};return p[this.dataType]=(l(t={},this.fieldName,i.val()),l(t,"lock_version",this.lockVersion),l(t,"update_task",{index:o,checked:c,line_number:u,line_source:d}),t),this.disableTaskListItems(e),r.a.patch(i.data("updateUrl")||s()("form.js-issuable-update").attr("action"),p).then((function(t){var i=t.data;return n.lockVersion=i.lock_version,n.enableTaskListItems(e),n.onSuccess(i)})).catch((function(t){var i=t.response;return n.enableTaskListItems(e),n.onError(i.data)}))}}])&&u(t.prototype,n),i&&u(t,i),e}()},378:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}));var i=n(484),s=n.n(i),a=function(e,t,n,i){var s=Math.floor(e.offsetTop-t);if(s<=n&&!e.classList.contains("is-stuck")){var a=i?function(){var e=document.createElement("div");return e.classList.add("sticky-placeholder"),e}():null,r=e.offsetHeight;e.classList.add("is-stuck"),i&&(e.parentNode.insertBefore(a,e.nextElementSibling),a.style.height="".concat(r-e.offsetHeight,"px"))}else s>n&&e.classList.contains("is-stuck")&&(e.classList.remove("is-stuck"),i&&e.nextElementSibling&&e.nextElementSibling.classList.contains("sticky-placeholder")&&e.nextElementSibling.remove())},r=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e&&"undefined"!=typeof CSS&&CSS.supports("(position: -webkit-sticky) or (position: sticky)")&&document.addEventListener("scroll",(function(){return a(e,window.scrollY,t,n)}),{passive:!0})},o=function(e){s.a.add(e)}},392:function(e,t,n){var i=n(557),s=n(477);e.exports=function(e,t){var n=-1,a=s(e)?Array(e.length):[];return i(e,(function(e,i,s){a[++n]=t(e,i,s)})),a}},394:function(e,t,n){var i=n(420),s=n(475),a=n(392),r=n(395),o=n(468),l=n(396),c=n(515);e.exports=function(e,t,n){var u=-1;t=i(t.length?t:[c],o(s));var d=a(e,(function(e,n,s){return{criteria:i(t,(function(t){return t(e)})),index:++u,value:e}}));return r(d,(function(e,t){return l(e,t,n)}))}},395:function(e,t){e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},396:function(e,t,n){var i=n(397);e.exports=function(e,t,n){for(var s=-1,a=e.criteria,r=t.criteria,o=a.length,l=n.length;++s<o;){var c=i(a[s],r[s]);if(c)return s>=l?c:c*("desc"==n[s]?-1:1)}return e.index-t.index}},397:function(e,t,n){var i=n(516);e.exports=function(e,t){if(e!==t){var n=void 0!==e,s=null===e,a=e==e,r=i(e),o=void 0!==t,l=null===t,c=t==t,u=i(t);if(!l&&!u&&!r&&e>t||r&&o&&c&&!l&&!u||s&&o&&c||!n&&c||!a)return 1;if(!s&&!r&&!u&&e<t||u&&n&&a&&!s&&!r||l&&n&&a||!o&&a||!c)return-1}return 0}},399:function(e,t,n){"use strict";var i=n(108),s=n(400),a=n(373),r=n(223),o=n(343),l=n(530);i({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=a(this),n=r(t.length),i=l(t,0);return i.length=s(i,t,t,n,0,void 0===e?1:o(e)),i}})},400:function(e,t,n){"use strict";var i=n(517),s=n(223),a=n(347),r=function(e,t,n,o,l,c,u,d){for(var p,f=l,h=0,m=!!u&&a(u,d,3);h<o;){if(h in n){if(p=m?m(n[h],h,t):n[h],c>0&&i(p))f=r(e,t,p,s(p.length),f,c-1)-1;else{if(f>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[f]=p}f++}h++}return f};e.exports=r},401:function(e,t,n){n(478)("flat")},434:function(e,t,n){"use strict";n(55),n(91);t.a={props:{issuableType:{required:!0,type:String}},computed:{issuableDisplayName:function(){return this.issuableType.replace(/_/g," ")}}}},448:function(e,t,n){"use strict";t.a=function(){return{inject:{glFeatures:{from:"glFeatures",default:function(){return{}}}}}}},457:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return o}));n(65);var i=n(110),s=function(e){try{window.localStorage.removeItem("autosave/".concat(e))}catch(e){console.error(e)}},a=function(e){try{return window.localStorage.getItem("autosave/".concat(e))}catch(e){return console.error(e),null}},r=function(e,t){try{window.localStorage.setItem("autosave/".concat(e),t)}catch(e){console.error(e)}},o=function(e,t){return["Note",Object(i.b)(e),t,"Reply"].join("/")}},470:function(e,t,n){"use strict";n(24),n(49),n(56),n(26),n(40),n(18),n(55),n(68),n(36),n(91),n(27),n(41);var i=n(0),s=n.n(i),a=(n(558),n(20)),r=n.n(a),o=n(1),l=n(110),c=n(14),u=n(208),d=(n(42),n(65),n(1619)),p=n(553),f=n(828),h=(n(72),n(45)),m={components:{Icon:h.a},directives:{GlTooltip:f.a},props:{buttonTitle:{type:String,required:!0},icon:{type:String,required:!0},tag:{type:String,required:!0},tagBlock:{type:String,required:!1,default:""},tagSelect:{type:String,required:!1,default:""},prepend:{type:Boolean,required:!1,default:!1},tagContent:{type:String,required:!1,default:""},cursorOffset:{type:Number,required:!1,default:0}}},g=n(4),b={components:{ToolbarButton:Object(g.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"toolbar-btn js-md",attrs:{"data-md-tag":e.tag,"data-md-cursor-offset":e.cursorOffset,"data-md-select":e.tagSelect,"data-md-block":e.tagBlock,"data-md-tag-content":e.tagContent,"data-md-prepend":e.prepend,title:e.buttonTitle,"aria-label":e.buttonTitle,type:"button",tabindex:"-1","data-container":"body"},on:{click:function(){return e.$emit("click")}}},[n("icon",{attrs:{name:e.icon}})],1)}),[],!1,null,null,null).exports,Icon:h.a,GlPopover:d.a,GlButton:p.a},directives:{GlTooltip:f.a},props:{previewMarkdown:{type:Boolean,required:!0},lineContent:{type:String,required:!1,default:""},canSuggest:{type:Boolean,required:!1,default:!0},showSuggestPopover:{type:Boolean,required:!1,default:!1}},computed:{mdTable:function(){return["| header | header |","| ------ | ------ |","| cell | cell |","| cell | cell |"].join("\n")},mdSuggestion:function(){return["```suggestion:-0+0","{text}","```"].join("\n")}},mounted:function(){s()(document).on("markdown-preview:show.vue",this.previewMarkdownTab),s()(document).on("markdown-preview:hide.vue",this.writeMarkdownTab)},beforeDestroy:function(){s()(document).off("markdown-preview:show.vue",this.previewMarkdownTab),s()(document).off("markdown-preview:hide.vue",this.writeMarkdownTab)},methods:{isValid:function(e){return!e||e.find(".js-vue-markdown-field").length&&s()(this.$el).closest("form")[0]===e[0]},previewMarkdownTab:function(e,t){e.target.blur&&e.target.blur(),this.isValid(t)&&this.$emit("preview-markdown")},writeMarkdownTab:function(e,t){e.target.blur&&e.target.blur(),this.isValid(t)&&this.$emit("write-markdown")},handleSuggestDismissed:function(){this.$emit("handleSuggestDismissed")}}},v=Object(g.a)(b,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"md-header"},[n("ul",{staticClass:"nav-links clearfix"},[n("li",{staticClass:"md-header-tab",class:{active:!e.previewMarkdown}},[n("button",{staticClass:"js-write-link",attrs:{tabindex:"-1",type:"button"},on:{click:function(t){return e.writeMarkdownTab(t)}}},[e._v("\n        "+e._s(e.__("Write"))+"\n      ")])]),e._v(" "),n("li",{staticClass:"md-header-tab",class:{active:e.previewMarkdown}},[n("button",{staticClass:"js-preview-link js-md-preview-button",attrs:{tabindex:"-1",type:"button"},on:{click:function(t){return e.previewMarkdownTab(t)}}},[e._v("\n        "+e._s(e.__("Preview"))+"\n      ")])]),e._v(" "),n("li",{staticClass:"md-header-toolbar",class:{active:!e.previewMarkdown}},[n("div",{staticClass:"d-inline-block"},[n("toolbar-button",{attrs:{tag:"**","button-title":e.__("Add bold text"),icon:"bold"}}),e._v(" "),n("toolbar-button",{attrs:{tag:"*","button-title":e.__("Add italic text"),icon:"italic"}}),e._v(" "),n("toolbar-button",{attrs:{prepend:!0,tag:"> ","button-title":e.__("Insert a quote"),icon:"quote"}})],1),e._v(" "),n("div",{staticClass:"d-inline-block ml-md-2 ml-0"},[e.canSuggest?[n("toolbar-button",{ref:"suggestButton",staticClass:"js-suggestion-btn",attrs:{tag:e.mdSuggestion,prepend:!0,"button-title":e.__("Insert suggestion"),"cursor-offset":4,"tag-content":e.lineContent,icon:"doc-code"},on:{click:e.handleSuggestDismissed}}),e._v(" "),e.showSuggestPopover&&e.$refs.suggestButton?n("gl-popover",{attrs:{target:e.$refs.suggestButton,"css-classes":["diff-suggest-popover"],placement:"bottom",show:e.showSuggestPopover}},[n("strong",[e._v(e._s(e.__("New! Suggest changes directly")))]),e._v(" "),n("p",{staticClass:"mb-2"},[e._v("\n              "+e._s(e.__("Suggest code changes which can be immediately applied in one click. Try it out!"))+"\n            ")]),e._v(" "),n("gl-button",{attrs:{variant:"primary",size:"sm"},on:{click:e.handleSuggestDismissed}},[e._v("\n              "+e._s(e.__("Got it"))+"\n            ")])],1):e._e()]:e._e(),e._v(" "),n("toolbar-button",{attrs:{tag:"`","tag-block":"```","button-title":e.__("Insert code"),icon:"code"}}),e._v(" "),n("toolbar-button",{attrs:{tag:"[{text}](url)","tag-select":"url","button-title":e.__("Add a link"),icon:"link"}})],2),e._v(" "),n("div",{staticClass:"d-inline-block ml-md-2 ml-0"},[n("toolbar-button",{attrs:{prepend:!0,tag:"* ","button-title":e.__("Add a bullet list"),icon:"list-bulleted"}}),e._v(" "),n("toolbar-button",{attrs:{prepend:!0,tag:"1. ","button-title":e.__("Add a numbered list"),icon:"list-numbered"}}),e._v(" "),n("toolbar-button",{attrs:{prepend:!0,tag:"* [ ] ","button-title":e.__("Add a task list"),icon:"list-task"}}),e._v(" "),n("toolbar-button",{attrs:{tag:e.mdTable,prepend:!0,"button-title":e.__("Add a table"),icon:"table"}})],1),e._v(" "),n("div",{staticClass:"d-inline-block ml-md-2 ml-0"},[n("button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"toolbar-btn toolbar-fullscreen-btn js-zen-enter",attrs:{"aria-label":e.__("Go full screen"),"data-container":"body",tabindex:"-1",title:e.__("Go full screen"),type:"button"}},[n("icon",{attrs:{name:"screen-full"}})],1)])])])])}),[],!1,null,null,null).exports,y=n(301),_=n(760),w={components:{GlLink:y.a,GlLoadingIcon:_.a},props:{markdownDocsPath:{type:String,required:!0},quickActionsDocsPath:{type:String,required:!1,default:""},canAttachFile:{type:Boolean,required:!1,default:!0}},computed:{hasQuickActionsDocsPath:function(){return""!==this.quickActionsDocsPath}}},k=Object(g.a)(w,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"comment-toolbar clearfix"},[n("div",{staticClass:"toolbar-text"},[!e.hasQuickActionsDocsPath&&e.markdownDocsPath?[n("gl-link",{attrs:{href:e.markdownDocsPath,target:"_blank",tabindex:"-1"}},[e._v(e._s(e.__("Markdown is supported")))])]:e._e(),e._v(" "),e.hasQuickActionsDocsPath&&e.markdownDocsPath?[n("gl-link",{attrs:{href:e.markdownDocsPath,target:"_blank",tabindex:"-1"}},[e._v(e._s(e.__("Markdown")))]),e._v("\n      and\n      "),n("gl-link",{attrs:{href:e.quickActionsDocsPath,target:"_blank",tabindex:"-1"}},[e._v(e._s(e.__("quick actions")))]),e._v("\n      are supported\n    ")]:e._e()],2),e._v(" "),e.canAttachFile?n("span",{staticClass:"uploading-container"},[n("span",{staticClass:"uploading-progress-container hide"},[n("i",{staticClass:"fa fa-file-image-o toolbar-button-icon",attrs:{"aria-hidden":"true"}}),e._v(" "),n("span",{staticClass:"attaching-file-message"}),e._v(" "),n("span",{staticClass:"uploading-progress"},[e._v("0%")]),e._v(" "),n("gl-loading-icon",{staticClass:"align-text-bottom",attrs:{inline:""}})],1),e._v(" "),n("span",{staticClass:"uploading-error-container hide"},[e._m(0),e._v(" "),n("span",{staticClass:"uploading-error-message"}),e._v(" "),n("button",{staticClass:"retry-uploading-link",attrs:{type:"button"}},[e._v(e._s(e.__("Try again")))]),e._v(" or\n      "),n("button",{staticClass:"attach-new-file markdown-selector",attrs:{type:"button"}},[e._v("\n        "+e._s(e.__("attach a new file"))+"\n      ")])]),e._v(" "),n("button",{staticClass:"markdown-selector button-attach-file btn-link",attrs:{tabindex:"-1",type:"button"}},[n("i",{staticClass:"fa fa-file-image-o toolbar-button-icon",attrs:{"aria-hidden":"true"}}),n("span",{staticClass:"text-attach-file"},[e._v(e._s(e.__("Attach a file")))])]),e._v(" "),n("button",{staticClass:"btn btn-default btn-sm hide button-cancel-uploading-files",attrs:{type:"button"}},[e._v("\n      "+e._s(e.__("Cancel"))+"\n    ")])]):e._e()])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"uploading-error-icon"},[t("i",{staticClass:"fa fa-file-image-o toolbar-button-icon",attrs:{"aria-hidden":"true"}})])}],!1,null,null,null).exports,j=n(539),O=n(11);function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],i=!0,s=!1,a=void 0;try{for(var r,o=e[Symbol.iterator]();!(i=(r=o.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==o.return||o.return()}finally{if(s)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var C={components:{markdownHeader:v,markdownToolbar:k,icon:h.a,Suggestions:j.a},props:{isSubmitting:{type:Boolean,required:!1,default:!1},markdownPreviewPath:{type:String,required:!1,default:""},markdownDocsPath:{type:String,required:!0},addSpacingClasses:{type:Boolean,required:!1,default:!0},quickActionsDocsPath:{type:String,required:!1,default:""},canAttachFile:{type:Boolean,required:!1,default:!0},enableAutocomplete:{type:Boolean,required:!1,default:!0},line:{type:Object,required:!1,default:null},note:{type:Object,required:!1,default:function(){return{}}},canSuggest:{type:Boolean,required:!1,default:!1},helpPagePath:{type:String,required:!1,default:""},showSuggestPopover:{type:Boolean,required:!1,default:!1},textareaValue:{type:String,required:!1,default:""}},data:function(){return{markdownPreview:"",referencedCommands:"",referencedUsers:"",hasSuggestion:!1,markdownPreviewLoading:!1,previewMarkdown:!1,suggestions:this.note.suggestions||[]}},computed:{shouldShowReferencedUsers:function(){return this.referencedUsers.length>=10},lineContent:function(){var e=S(this.suggestions,1)[0];if(e)return e.from_content;if(this.line){var t=this.line,n=t.rich_text,i=t.text;return i||r.a.unescape(Object(l.m)(n).replace(/\n/g,""))}return""},lineNumber:function(){var e;if(this.line){var t=this.line,n=t.new_line,i=t.old_line;e=n||i}return e},lineType:function(){return this.line?this.line.type:""},addMultipleToDiscussionWarning:function(){return Object(o.e)(Object(o.a)("%{icon}You are about to add %{usersTag} people to the discussion. Proceed with caution."),{icon:'<i class="fa fa-exclamation-triangle" aria-hidden="true"></i>',usersTag:'<strong><span class="js-referenced-users-count">'.concat(this.referencedUsers.length,"</span></strong>")},!1)}},watch:{isSubmitting:function(e){if(e&&this.$refs["markdown-preview"].querySelectorAll){var t=this.$refs["markdown-preview"].querySelectorAll("video, audio");t&&t.forEach((function(e){e.pause()}))}}},mounted:function(){return new u.a(s()(this.$refs["gl-form"]),{emojis:this.enableAutocomplete,members:this.enableAutocomplete,issues:this.enableAutocomplete,mergeRequests:this.enableAutocomplete,epics:this.enableAutocomplete,milestones:this.enableAutocomplete,labels:this.enableAutocomplete,snippets:this.enableAutocomplete})},beforeDestroy:function(){var e=s()(this.$refs["gl-form"]).data("glForm");e&&e.destroy()},methods:{showPreviewTab:function(){var e,t,n=this;if(!this.previewMarkdown){this.previewMarkdown=!0;var i=(null===(e=this.$slots.textarea[0])||void 0===e?void 0:null===(t=e.elm)||void 0===t?void 0:t.value)||this.textareaValue;i?(this.markdownPreviewLoading=!0,this.markdownPreview=Object(o.a)("Loading…"),O.a.post(this.markdownPreviewPath,{text:i}).then((function(e){return n.renderMarkdown(e.data)})).catch((function(){return new c.a(Object(o.a)("Error loading markdown preview"))}))):this.renderMarkdown()}},showWriteTab:function(){this.markdownPreview="",this.previewMarkdown=!1},renderMarkdown:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.markdownPreviewLoading=!1,this.markdownPreview=t.body||Object(o.a)("Nothing to preview."),t.references&&(this.referencedCommands=t.references.commands,this.referencedUsers=t.references.users,this.hasSuggestion=t.references.suggestions&&t.references.suggestions.length,this.suggestions=t.references.suggestions),this.$nextTick().then((function(){return s()(e.$refs["markdown-preview"]).renderGFM()})).catch((function(){return new c.a(Object(o.a)("Error rendering markdown preview"))}))}}},D=Object(g.a)(C,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"gl-form",staticClass:"js-vue-markdown-field md-area position-relative",class:{"prepend-top-default append-bottom-default":e.addSpacingClasses}},[n("markdown-header",{attrs:{"preview-markdown":e.previewMarkdown,"line-content":e.lineContent,"can-suggest":e.canSuggest,"show-suggest-popover":e.showSuggestPopover},on:{"preview-markdown":e.showPreviewTab,"write-markdown":e.showWriteTab,handleSuggestDismissed:function(){return e.$emit("handleSuggestDismissed")}}}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.previewMarkdown,expression:"!previewMarkdown"}],staticClass:"md-write-holder"},[n("div",{staticClass:"zen-backdrop"},[e._t("textarea"),e._v(" "),n("a",{staticClass:"zen-control zen-control-leave js-zen-leave",attrs:{href:"#","aria-label":e.__("Enter zen mode")}},[n("icon",{attrs:{size:32,name:"screen-normal"}})],1),e._v(" "),n("markdown-toolbar",{attrs:{"markdown-docs-path":e.markdownDocsPath,"quick-actions-docs-path":e.quickActionsDocsPath,"can-attach-file":e.canAttachFile}})],2)]),e._v(" "),e.hasSuggestion?[n("div",{directives:[{name:"show",rawName:"v-show",value:e.previewMarkdown,expression:"previewMarkdown"}],ref:"markdown-preview",staticClass:"js-vue-md-preview md-preview-holder"},[e.hasSuggestion?n("suggestions",{attrs:{"note-html":e.markdownPreview,"from-line":e.lineNumber,"from-content":e.lineContent,"line-type":e.lineType,disabled:!0,suggestions:e.suggestions,"help-page-path":e.helpPagePath}}):e._e()],1)]:[n("div",{directives:[{name:"show",rawName:"v-show",value:e.previewMarkdown,expression:"previewMarkdown"}],ref:"markdown-preview",staticClass:"js-vue-md-preview md md-preview-holder",domProps:{innerHTML:e._s(e.markdownPreview)}})],e._v(" "),e.previewMarkdown&&!e.markdownPreviewLoading?[e.referencedCommands?n("div",{staticClass:"referenced-commands",domProps:{innerHTML:e._s(e.referencedCommands)}}):e._e(),e._v(" "),e.shouldShowReferencedUsers?n("div",{staticClass:"referenced-users"},[n("span",{domProps:{innerHTML:e._s(e.addMultipleToDiscussionWarning)}})]):e._e()]:e._e()],2)}),[],!1,null,null,null);t.a=D.exports},484:function(e,t,n){!function(t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var s,a=!1,r=void 0!==t;r&&t.getComputedStyle?(s=n.createElement("div"),["","-webkit-","-moz-","-ms-"].some((function(e){try{s.style.position=e+"sticky"}catch(e){}return""!=s.style.position}))&&(a=!0)):a=!0;var o=!1,l="undefined"!=typeof ShadowRoot,c={top:null,left:null},u=[];function d(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}function p(e){return parseFloat(e)||0}function f(e){for(var t=0;e;)t+=e.offsetTop,e=e.offsetParent;return t}var h=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!(t instanceof HTMLElement))throw new Error("First argument must be HTMLElement");if(u.some((function(e){return e._node===t})))throw new Error("Stickyfill is already applied to this node");this._node=t,this._stickyMode=null,this._active=!1,u.push(this),this.refresh()}return i(e,[{key:"refresh",value:function(){if(!a&&!this._removed){this._active&&this._deactivate();var e=this._node,i=getComputedStyle(e),s={position:i.position,top:i.top,display:i.display,marginTop:i.marginTop,marginBottom:i.marginBottom,marginLeft:i.marginLeft,marginRight:i.marginRight,cssFloat:i.cssFloat};if(!isNaN(parseFloat(s.top))&&"table-cell"!=s.display&&"none"!=s.display){this._active=!0;var r=e.style.position;"sticky"!=i.position&&"-webkit-sticky"!=i.position||(e.style.position="static");var o=e.parentNode,c=l&&o instanceof ShadowRoot?o.host:o,u=e.getBoundingClientRect(),h=c.getBoundingClientRect(),m=getComputedStyle(c);this._parent={node:c,styles:{position:c.style.position},offsetHeight:c.offsetHeight},this._offsetToWindow={left:u.left,right:n.documentElement.clientWidth-u.right},this._offsetToParent={top:u.top-h.top-p(m.borderTopWidth),left:u.left-h.left-p(m.borderLeftWidth),right:-u.right+h.right-p(m.borderRightWidth)},this._styles={position:r,top:e.style.top,bottom:e.style.bottom,left:e.style.left,right:e.style.right,width:e.style.width,marginTop:e.style.marginTop,marginLeft:e.style.marginLeft,marginRight:e.style.marginRight};var g=p(s.top);this._limits={start:u.top+t.pageYOffset-g,end:h.top+t.pageYOffset+c.offsetHeight-p(m.borderBottomWidth)-e.offsetHeight-g-p(s.marginBottom)};var b=m.position;"absolute"!=b&&"relative"!=b&&(c.style.position="relative"),this._recalcPosition();var v=this._clone={};v.node=n.createElement("div"),d(v.node.style,{width:u.right-u.left+"px",height:u.bottom-u.top+"px",marginTop:s.marginTop,marginBottom:s.marginBottom,marginLeft:s.marginLeft,marginRight:s.marginRight,cssFloat:s.cssFloat,padding:0,border:0,borderSpacing:0,fontSize:"1em",position:"static"}),o.insertBefore(v.node,e),v.docOffsetTop=f(v.node)}}}},{key:"_recalcPosition",value:function(){if(this._active&&!this._removed){var e=c.top<=this._limits.start?"start":c.top>=this._limits.end?"end":"middle";if(this._stickyMode!=e){switch(e){case"start":d(this._node.style,{position:"absolute",left:this._offsetToParent.left+"px",right:this._offsetToParent.right+"px",top:this._offsetToParent.top+"px",bottom:"auto",width:"auto",marginLeft:0,marginRight:0,marginTop:0});break;case"middle":d(this._node.style,{position:"fixed",left:this._offsetToWindow.left+"px",right:this._offsetToWindow.right+"px",top:this._styles.top,bottom:"auto",width:"auto",marginLeft:0,marginRight:0,marginTop:0});break;case"end":d(this._node.style,{position:"absolute",left:this._offsetToParent.left+"px",right:this._offsetToParent.right+"px",top:"auto",bottom:0,width:"auto",marginLeft:0,marginRight:0})}this._stickyMode=e}}}},{key:"_fastCheck",value:function(){this._active&&!this._removed&&(Math.abs(f(this._clone.node)-this._clone.docOffsetTop)>1||Math.abs(this._parent.node.offsetHeight-this._parent.offsetHeight)>1)&&this.refresh()}},{key:"_deactivate",value:function(){var e=this;this._active&&!this._removed&&(this._clone.node.parentNode.removeChild(this._clone.node),delete this._clone,d(this._node.style,this._styles),delete this._styles,u.some((function(t){return t!==e&&t._parent&&t._parent.node===e._parent.node}))||d(this._parent.node.style,this._parent.styles),delete this._parent,this._stickyMode=null,this._active=!1,delete this._offsetToWindow,delete this._offsetToParent,delete this._limits)}},{key:"remove",value:function(){var e=this;this._deactivate(),u.some((function(t,n){if(t._node===e._node)return u.splice(n,1),!0})),this._removed=!0}}]),e}(),m={stickies:u,Sticky:h,forceSticky:function(){a=!1,g(),this.refreshAll()},addOne:function(e){if(!(e instanceof HTMLElement)){if(!e.length||!e[0])return;e=e[0]}for(var t=0;t<u.length;t++)if(u[t]._node===e)return u[t];return new h(e)},add:function(e){if(e instanceof HTMLElement&&(e=[e]),e.length){for(var t=[],n=function(n){var i=e[n];return i instanceof HTMLElement?u.some((function(e){if(e._node===i)return t.push(e),!0}))?"continue":void t.push(new h(i)):(t.push(void 0),"continue")},i=0;i<e.length;i++)n(i);return t}},refreshAll:function(){u.forEach((function(e){return e.refresh()}))},removeOne:function(e){if(!(e instanceof HTMLElement)){if(!e.length||!e[0])return;e=e[0]}u.some((function(t){if(t._node===e)return t.remove(),!0}))},remove:function(e){if(e instanceof HTMLElement&&(e=[e]),e.length)for(var t=function(t){var n=e[t];u.some((function(e){if(e._node===n)return e.remove(),!0}))},n=0;n<e.length;n++)t(n)},removeAll:function(){for(;u.length;)u[0].remove()}};function g(){if(!o){o=!0,a(),t.addEventListener("scroll",a),t.addEventListener("resize",m.refreshAll),t.addEventListener("orientationchange",m.refreshAll);var e=void 0,i=void 0,s=void 0;"hidden"in n?(i="hidden",s="visibilitychange"):"webkitHidden"in n&&(i="webkitHidden",s="webkitvisibilitychange"),s?(n[i]||r(),n.addEventListener(s,(function(){n[i]?clearInterval(e):r()}))):r()}function a(){t.pageXOffset!=c.left?(c.top=t.pageYOffset,c.left=t.pageXOffset,m.refreshAll()):t.pageYOffset!=c.top&&(c.top=t.pageYOffset,c.left=t.pageXOffset,u.forEach((function(e){return e._recalcPosition()})))}function r(){e=setInterval((function(){u.forEach((function(e){return e._fastCheck()}))}),500)}}a||g(),e.exports?e.exports=m:r&&(t.Stickyfill=m)}(window,document)},485:function(e,t,n){"use strict";n(72);var i=n(1),s={name:"TimeTrackingHelpState",props:{rootPath:{type:String,required:!0}},computed:{href:function(){return"".concat(this.rootPath,"help/workflow/time_tracking.md")},estimateText:function(){return Object(i.e)(Object(i.d)("estimateCommand|%{slash_command} will update the estimated time with the latest command."),{slash_command:"<code>/estimate</code>"},!1)},spendText:function(){return Object(i.e)(Object(i.d)("spendCommand|%{slash_command} will update the sum of the time spent."),{slash_command:"<code>/spend</code>"},!1)}}},a=n(4),r=Object(a.a)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"time-tracking-help-state"},[n("div",{staticClass:"time-tracking-info"},[n("h4",[e._v(e._s(e.__("Track time with quick actions")))]),e._v(" "),n("p",[e._v(e._s(e.__("Quick actions can be used in the issues description and comment boxes.")))]),e._v(" "),n("p",{domProps:{innerHTML:e._s(e.estimateText)}}),e._v(" "),n("p",{domProps:{innerHTML:e._s(e.spendText)}}),e._v(" "),n("a",{staticClass:"btn btn-default learn-more-button",attrs:{href:e.href}},[e._v(" "+e._s(e.__("Learn more"))+" ")])])])}),[],!1,null,null,null).exports,o=(n(30),n(45)),l=n(99),c={name:"TimeTrackingCollapsedState",components:{icon:o.a},directives:{tooltip:l.a},props:{showComparisonState:{type:Boolean,required:!0},showSpentOnlyState:{type:Boolean,required:!0},showEstimateOnlyState:{type:Boolean,required:!0},showNoTimeTrackingState:{type:Boolean,required:!0},timeSpentHumanReadable:{type:String,required:!1,default:""},timeEstimateHumanReadable:{type:String,required:!1,default:""}},computed:{divClass:function(){return this.showComparisonState?"compare":this.showEstimateOnlyState?"estimate-only":this.showSpentOnlyState?"spend-only":this.showNoTimeTrackingState?"no-tracking":""},spanClass:function(){return this.showComparisonState?"":this.showEstimateOnlyState||this.showSpentOnlyState?"bold":this.showNoTimeTrackingState?"no-value":""},text:function(){return this.showComparisonState?"".concat(this.timeSpentHumanReadable," / ").concat(this.timeEstimateHumanReadable):this.showEstimateOnlyState?"-- / ".concat(this.timeEstimateHumanReadable):this.showSpentOnlyState?"".concat(this.timeSpentHumanReadable," / --"):this.showNoTimeTrackingState?Object(i.a)("None"):""},timeTrackedTooltipText:function(){var e;return this.showComparisonState?e=Object(i.a)("Time remaining"):this.showEstimateOnlyState?e=Object(i.a)("Estimated"):this.showSpentOnlyState&&(e=Object(i.a)("Time spent")),Object(i.e)("%{title}: %{text}",{title:e,text:this.text})},tooltipText:function(){return this.showNoTimeTrackingState?Object(i.a)("Time tracking"):this.timeTrackedTooltipText}}},u=Object(a.a)(c,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"sidebar-collapsed-icon",attrs:{title:this.tooltipText,"data-container":"body","data-placement":"left","data-boundary":"viewport"}},[t("icon",{attrs:{name:"timer"}}),this._v(" "),t("div",{staticClass:"time-tracking-collapsed-summary"},[t("div",{class:this.divClass},[t("span",{class:this.spanClass},[this._v(" "+this._s(this.text)+" ")])])])],1)}),[],!1,null,null,null).exports,d={name:"TimeTrackingSpentOnlyPane",props:{timeSpentHumanReadable:{type:String,required:!0}},computed:{timeSpent:function(){return Object(i.e)(Object(i.d)("TimeTracking|%{startTag}Spent: %{endTag}%{timeSpentHumanReadable}"),{startTag:'<span class="bold">',endTag:"</span>",timeSpentHumanReadable:this.timeSpentHumanReadable},!1)}}},p=Object(a.a)(d,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"time-tracking-spend-only-pane",domProps:{innerHTML:this._s(this.timeSpent)}})}),[],!1,null,null,null).exports,f={name:"TimeTrackingNoTrackingPane"},h=Object(a.a)(f,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"time-tracking-no-tracking-pane"},[t("span",{staticClass:"no-value"},[this._v(" "+this._s(this.__("No estimate or time spent"))+" ")])])}),[],!1,null,null,null).exports,m={name:"TimeTrackingEstimateOnlyPane",props:{timeEstimateHumanReadable:{type:String,required:!0}}},g=Object(a.a)(m,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"time-tracking-estimate-only-pane"},[t("span",{staticClass:"bold"},[this._v(" "+this._s(this.s__("TimeTracking|Estimated:"))+" ")]),this._v(" "+this._s(this.timeEstimateHumanReadable)+"\n")])}),[],!1,null,null,null).exports,b=n(716),v=n(62),y={name:"TimeTrackingComparisonPane",components:{GlProgressBar:b.a},directives:{tooltip:l.a},props:{timeSpent:{type:Number,required:!0},timeEstimate:{type:Number,required:!0},timeSpentHumanReadable:{type:String,required:!0},timeEstimateHumanReadable:{type:String,required:!0},limitToHours:{type:Boolean,required:!1,default:!1}},computed:{parsedTimeRemaining:function(){var e=this.timeEstimate-this.timeSpent;return Object(v.o)(e,{limitToHours:this.limitToHours})},timeRemainingHumanReadable:function(){return Object(v.r)(this.parsedTimeRemaining)},timeRemainingTooltip:function(){var e=this.timeRemainingHumanReadable;return this.timeRemainingMinutes<0?Object(i.e)(Object(i.d)("TimeTracking|Over by %{timeRemainingHumanReadable}"),{timeRemainingHumanReadable:e}):Object(i.e)(Object(i.d)("TimeTracking|Time remaining: %{timeRemainingHumanReadable}"),{timeRemainingHumanReadable:e})},timeRemainingMinutes:function(){return this.timeEstimate-this.timeSpent},timeRemainingPercent:function(){return Math.floor(this.timeSpent/this.timeEstimate*100)},timeRemainingStatusClass:function(){return this.timeEstimate>=this.timeSpent?"within_estimate":"over_estimate"},progressBarVariant:function(){return this.timeRemainingPercent>100?"danger":"primary"}}},_=Object(a.a)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"time-tracking-comparison-pane"},[n("div",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"compare-meter",class:e.timeRemainingStatusClass,attrs:{title:e.timeRemainingTooltip}},[n("gl-progress-bar",{attrs:{value:e.timeRemainingPercent,variant:e.progressBarVariant}}),e._v(" "),n("div",{staticClass:"compare-display-container"},[n("div",{staticClass:"compare-display float-left"},[n("span",{staticClass:"compare-label"},[e._v(e._s(e.s__("TimeTracking|Spent")))]),e._v(" "),n("span",{staticClass:"compare-value spent"},[e._v(e._s(e.timeSpentHumanReadable))])]),e._v(" "),n("div",{staticClass:"compare-display estimated float-right"},[n("span",{staticClass:"compare-label"},[e._v(e._s(e.s__("TimeTrackingEstimated|Est")))]),e._v(" "),n("span",{staticClass:"compare-value"},[e._v(e._s(e.timeEstimateHumanReadable))])])])],1)])}),[],!1,null,null,null).exports,w=n(135),k={name:"IssuableTimeTracker",components:{TimeTrackingCollapsedState:u,TimeTrackingEstimateOnlyPane:g,TimeTrackingSpentOnlyPane:p,TimeTrackingNoTrackingPane:h,TimeTrackingComparisonPane:_,TimeTrackingHelpState:r},props:{timeEstimate:{type:Number,required:!0},timeSpent:{type:Number,required:!0},humanTimeEstimate:{type:String,required:!1,default:""},humanTimeSpent:{type:String,required:!1,default:""},limitToHours:{type:Boolean,default:!1},rootPath:{type:String,required:!0}},data:function(){return{showHelp:!1}},computed:{hasTimeSpent:function(){return Boolean(this.timeSpent)},hasTimeEstimate:function(){return Boolean(this.timeEstimate)},showComparisonState:function(){return this.hasTimeEstimate&&this.hasTimeSpent},showEstimateOnlyState:function(){return this.hasTimeEstimate&&!this.hasTimeSpent},showSpentOnlyState:function(){return this.hasTimeSpent&&!this.hasTimeEstimate},showNoTimeTrackingState:function(){return!this.hasTimeEstimate&&!this.hasTimeSpent},showHelpState:function(){return Boolean(this.showHelp)}},created:function(){w.a.$on("timeTracker:updateData",this.update)},methods:{toggleHelpState:function(e){this.showHelp=e},update:function(e){var t=e.timeEstimate,n=e.timeSpent,i=e.humanTimeEstimate,s=e.humanTimeSpent;this.timeEstimate=t,this.timeSpent=n,this.humanTimeEstimate=i,this.humanTimeSpent=s}}},j=Object(a.a)(k,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"time_tracker time-tracking-component-wrap"},[n("time-tracking-collapsed-state",{attrs:{"show-comparison-state":e.showComparisonState,"show-no-time-tracking-state":e.showNoTimeTrackingState,"show-help-state":e.showHelpState,"show-spent-only-state":e.showSpentOnlyState,"show-estimate-only-state":e.showEstimateOnlyState,"time-spent-human-readable":e.humanTimeSpent,"time-estimate-human-readable":e.humanTimeEstimate}}),e._v(" "),n("div",{staticClass:"title hide-collapsed"},[e._v("\n    "+e._s(e.__("Time tracking"))+"\n    "),e.showHelpState?e._e():n("div",{staticClass:"help-button float-right",on:{click:function(t){return e.toggleHelpState(!0)}}},[n("i",{staticClass:"fa fa-question-circle",attrs:{"aria-hidden":"true"}})]),e._v(" "),e.showHelpState?n("div",{staticClass:"close-help-button float-right",on:{click:function(t){return e.toggleHelpState(!1)}}},[n("i",{staticClass:"fa fa-close",attrs:{"aria-hidden":"true"}})]):e._e()]),e._v(" "),n("div",{staticClass:"time-tracking-content hide-collapsed"},[e.showEstimateOnlyState?n("time-tracking-estimate-only-pane",{attrs:{"time-estimate-human-readable":e.humanTimeEstimate}}):e._e(),e._v(" "),e.showSpentOnlyState?n("time-tracking-spent-only-pane",{attrs:{"time-spent-human-readable":e.humanTimeSpent}}):e._e(),e._v(" "),e.showNoTimeTrackingState?n("time-tracking-no-tracking-pane"):e._e(),e._v(" "),e.showComparisonState?n("time-tracking-comparison-pane",{attrs:{"time-estimate":e.timeEstimate,"time-spent":e.timeSpent,"time-spent-human-readable":e.humanTimeSpent,"time-estimate-human-readable":e.humanTimeEstimate,"limit-to-hours":e.limitToHours}}):e._e(),e._v(" "),n("transition",{attrs:{name:"help-state-toggle"}},[e.showHelpState?n("time-tracking-help-state",{attrs:{"root-path":e.rootPath}}):e._e()],1)],1)],1)}),[],!1,null,null,null);t.a=j.exports},486:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i=n(0),s=n.n(i),a=(n(24),n(49),n(56),n(30),n(42),n(40),n(35),n(50),n(90),n(18),n(184),n(36),n(41),n(32));n(89),n(321);function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.dropdown,i=t.data,a=t.pattern,r=t.wrapper,o=t.editor,l=t.$input;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pattern=a,this.editor=o,this.dropdown=n,this.$dropdownContainer=r,this.$filenameInput=l||s()("#file_name"),this.$dropdownIcon=s()(".fa-chevron-down",n),this.initDropdown(n,i),this.listenForFilenameInput(),this.renderMatchedDropdown(),this.initAutosizeUpdateEvent()}var t,n,i;return t=e,(n=[{key:"initDropdown",value:function(e,t){var n=this;return s()(e).glDropdown({data:t,filterable:!0,selectable:!0,toggleLabel:function(e){return e.name},search:{fields:["name"]},clicked:function(e){return n.onDropdownClicked(e)},text:function(e){return e.name}})}},{key:"onDropdownClicked",value:function(e){this.fetchFileTemplate(e)}},{key:"initAutosizeUpdateEvent",value:function(){this.autosizeUpdateEvent=document.createEvent("Event"),this.autosizeUpdateEvent.initEvent("autosize:update",!0,!1)}},{key:"listenForFilenameInput",value:function(){var e=this;return this.$filenameInput.on("keyup blur",(function(t){return e.renderMatchedDropdown(t)}))}},{key:"renderMatchedDropdown",value:function(){return this.$filenameInput.length?this.pattern.test(this.$filenameInput.val().trim())?this.$dropdownContainer.removeClass("hidden"):this.$dropdownContainer.addClass("hidden"):null}},{key:"fetchFileTemplate",value:function(e){var t=e.e,n=e.selectedObj;return t.preventDefault(),this.requestFile(n)}},{key:"requestFile",value:function(){}},{key:"setEditorContent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.skipFocus;if(e){var i=e.content;this.editor.setValue(i,1),n||this.editor.focus(),this.editor instanceof s.a&&(this.editor.get(0).dispatchEvent(this.autosizeUpdateEvent),this.editor.trigger("input"))}}},{key:"getEditorContent",value:function(){return this.editor.getValue()}},{key:"startLoadingSpinner",value:function(){this.$dropdownIcon.addClass("spinner").removeClass("fa-chevron-down")}},{key:"stopLoadingSpinner",value:function(){this.$dropdownIcon.addClass("fa-chevron-down").removeClass("spinner")}}])&&r(t.prototype,n),i&&r(t,i),e}(),l=n(1);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e,t,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(i){var s=Object.getOwnPropertyDescriptor(i,t);return s.get?s.get.call(n):s.value}})(e,t,n||e)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];(n=d(this,(e=f(t)).call.apply(e,[this].concat(a)))).projectPath=n.dropdown.data("projectPath"),n.namespacePath=n.dropdown.data("namespacePath"),n.issuableType=n.$dropdownContainer.data("issuableType"),n.titleInput=s()("#".concat(n.issuableType,"_title")),n.templateWarningEl=s()(".js-issuable-template-warning"),n.warnTemplateOverride=a[0].warnTemplateOverride;var o={name:n.dropdown.data("selected")};return o.name&&n.requestFile(o),s()(".reset-template",n.dropdown.parent()).on("click",(function(){n.setInputValueToTemplateContent()})),s()(".no-template",n.dropdown.parent()).on("click",(function(){n.reset()})),n.templateWarningEl.find(".js-close-btn").on("click",(function(){void 0!==n.previousSelectedIndex?n.dropdown.data("glDropdown").selectRowAtIndex(n.previousSelectedIndex):n.reset(),n.templateWarningEl.addClass("hidden")})),n.templateWarningEl.find(".js-override-template").on("click",(function(){n.requestFile(n.overridingTemplate),n.setSelectedIndex(),n.templateWarningEl.addClass("hidden"),n.overridingTemplate=null})),n}var n,i,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,e),n=t,(i=[{key:"reset",value:function(){this.currentTemplate&&(this.currentTemplate.content=""),this.setInputValueToTemplateContent(),s()(".dropdown-toggle-text",this.dropdown).text(Object(l.a)("Choose a template")),this.previousSelectedIndex=null}},{key:"setSelectedIndex",value:function(){this.previousSelectedIndex=this.dropdown.data("glDropdown").selectedIndex}},{key:"onDropdownClicked",value:function(e){var n=this.getEditorContent(),i=""===n||this.currentTemplate&&n===this.currentTemplate.content;if(!this.warnTemplateOverride||i)return p(f(t.prototype),"onDropdownClicked",this).call(this,e),void this.setSelectedIndex();this.overridingTemplate=e.selectedObj,this.templateWarningEl.removeClass("hidden")}},{key:"requestFile",value:function(e){var t=this;this.startLoadingSpinner(),a.a.issueTemplate(this.namespacePath,this.projectPath,e.name,this.issuableType,(function(e,n){t.currentTemplate=n,t.stopLoadingSpinner(),e||t.setInputValueToTemplateContent()}))}},{key:"setInputValueToTemplateContent",value:function(){""===this.titleInput.val()?(this.setEditorContent(this.currentTemplate,{skipFocus:!0}),this.titleInput.focus()):this.setEditorContent(this.currentTemplate,{skipFocus:!1})}}])&&u(n.prototype,i),r&&u(n,r),t}(o);function g(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var b=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.$dropdowns,a=n.editor,r=n.warnTemplateOverride;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$dropdowns=i||s()(".js-issuable-selector"),this.editor=a||this.initEditor(),this.$dropdowns.each((function(e,n){var i=s()(n);new m({pattern:/(\.md)/,data:i.data("data"),wrapper:i.closest(".js-issuable-selector-wrap"),dropdown:i,editor:t.editor,warnTemplateOverride:r})}))}var t,n,i;return t=e,(n=[{key:"initEditor",value:function(){var e=s()(".markdown-area");return e.setValue=e.val,e.getValue=e.val,e}}])&&g(t.prototype,n),i&&g(t,i),e}()},487:function(e,t,n){"use strict";n(24),n(28),n(26),n(50),n(58),n(38),n(27);var i=n(22);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a={computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(i.d)(["getNoteableDataByProp"]),{isProjectArchived:function(){return this.getNoteableDataByProp("is_project_archived")},archivedProjectDocsPath:function(){return this.getNoteableDataByProp("archived_project_docs_path")},lockedIssueDocsPath:function(){return this.getNoteableDataByProp("locked_discussion_docs_path")},confidentialIssueDocsPath:function(){return this.getNoteableDataByProp("confidential_issues_docs_path")}}),methods:{isConfidential:function(e){return Boolean(e.confidential)},isLocked:function(e){return Boolean(e.discussion_locked)},hasWarning:function(e){return this.isConfidential(e)||this.isLocked(e)}}}},488:function(e,t,n){"use strict";n(309),n(28);var i=n(14),s=n(1);t.a={computed:{discussionResolved:function(){if(this.discussion){var e=this.discussion,t=e.notes,n=e.resolved;return t?t.filter((function(e){return!e.system})).every((function(e){return e.resolved})):n}return this.note.resolved},resolveButtonTitle:function(){return this.updatedNoteBody?this.discussionResolved?Object(s.a)("Comment & unresolve thread"):Object(s.a)("Comment & resolve thread"):this.discussionResolved?Object(s.a)("Unresolve thread"):Object(s.a)("Resolve thread")}},methods:{resolveHandler:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.note&&this.note.isDraft)return this.$emit("toggleResolveStatus");this.isResolving=!0;var n=this.discussionResolved||t,a=this.resolveAsThread,r=a?this.discussion.resolve_path:"".concat(this.note.path,"/resolve");return this.toggleResolveNote({endpoint:r,isResolved:n,discussion:a}).then((function(){e.isResolving=!1})).catch((function(){e.isResolving=!1;var t=Object(s.a)("Something went wrong while resolving this discussion. Please try again.");Object(i.a)(t,"alert",e.$el)}))}}}},489:function(e,t,n){"use strict";n(24),n(28),n(26),n(72),n(50),n(58),n(38),n(27);var i=n(22);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r={components:{timeAgoTooltip:n(198).a},props:{author:{type:Object,required:!1,default:function(){return{}}},createdAt:{type:String,required:!1,default:null},actionText:{type:String,required:!1,default:""},noteId:{type:[String,Number],required:!1,default:null},includeToggle:{type:Boolean,required:!1,default:!1},expanded:{type:Boolean,required:!1,default:!0}},computed:{toggleChevronClass:function(){return this.expanded?"fa-chevron-up":"fa-chevron-down"},noteTimestampLink:function(){return"#note_".concat(this.noteId)},hasAuthor:function(){return this.author&&Object.keys(this.author).length}},methods:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(i.c)(["setTargetNoteHash"]),{handleToggle:function(){this.$emit("toggleHandler")},updateTargetNoteHash:function(){this.setTargetNoteHash(this.noteTimestampLink)}})},o=n(4),l=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"note-header-info"},[e.includeToggle?n("div",{ref:"discussionActions",staticClass:"discussion-actions"},[n("button",{staticClass:"note-action-button discussion-toggle-button js-vue-toggle-button",attrs:{type:"button"},on:{click:e.handleToggle}},[n("i",{ref:"chevronIcon",staticClass:"fa",class:e.toggleChevronClass,attrs:{"aria-hidden":"true"}}),e._v("\n      "+e._s(e.__("Toggle thread"))+"\n    ")])]):e._e(),e._v(" "),e.hasAuthor?e._m(0):n("span",[e._v(e._s(e.__("A deleted user")))]),e._v(" "),n("span",{staticClass:"note-headline-light note-headline-meta"},[n("span",{staticClass:"system-note-message"},[e._t("default")],2),e._v(" "),e.createdAt?[n("span",{ref:"actionText",staticClass:"system-note-separator"},[e.actionText?[e._v(e._s(e.actionText))]:e._e()],2),e._v(" "),n("a",{ref:"noteTimestamp",staticClass:"note-timestamp system-note-separator",attrs:{href:e.noteTimestampLink},on:{click:e.updateTargetNoteHash}},[n("time-ago-tooltip",{attrs:{time:e.createdAt,"tooltip-placement":"bottom"}})],1)]:e._e(),e._v(" "),e._t("extra-controls"),e._v(" "),n("i",{staticClass:"fa fa-spinner fa-spin editing-spinner",attrs:{"aria-label":e.__("Comment is being updated"),"aria-hidden":"true"}})],2)])}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{staticClass:"js-user-link",attrs:{href:e.author.path,"data-user-id":e.author.id,"data-username":e.author.username}},[e._t("note-header-info"),e._v(" "),n("span",{staticClass:"note-header-author-name bold"},[e._v(e._s(e.author.name))]),e._v(" "),e.author.status_tooltip_html?n("span",{domProps:{innerHTML:e._s(e.author.status_tooltip_html)}}):e._e(),e._v(" "),n("span",{staticClass:"note-headline-light"},[e._v("@"+e._s(e.author.username))])],2)}],!1,null,null,null);t.a=l.exports},490:function(e,t,n){"use strict";var i={name:"EditedNoteText",components:{timeAgoTooltip:n(198).a},props:{actionText:{type:String,required:!0},actionDetailText:{type:String,required:!1,default:""},editedAt:{type:String,required:!1,default:null},editedBy:{type:Object,required:!1,default:null},className:{type:String,required:!1,default:"edited-text"}}},s=n(4),a=Object(s.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.className},[e._v("\n  "+e._s(e.actionText)+"\n  "),e.editedBy?[e._v("\n    by\n    "),n("a",{staticClass:"js-user-link author-link",attrs:{href:e.editedBy.path,"data-user-id":e.editedBy.id}},[e._v("\n      "+e._s(e.editedBy.name)+"\n    ")])]:e._e(),e._v("\n  "+e._s(e.actionDetailText)+"\n  "),n("time-ago-tooltip",{attrs:{time:e.editedAt,"tooltip-placement":"bottom"}})],2)}),[],!1,null,null,null);t.a=a.exports},512:function(e,t,n){"use strict";n(35);var i=n(277),s=n(17),a=new s.default,r=function(){throw new Error("".concat("recaptchaDialogCallback"," is already defined!"))};window.recaptchaDialogCallback&&r();var o=function(){return a.$emit("submit")};Object.defineProperty(window,"recaptchaDialogCallback",{get:function(){return o},set:r});var l={name:"RecaptchaModal",components:{DeprecatedModal:i.a},props:{html:{type:String,required:!1,default:""}},data:function(){return{script:{},scriptSrc:"https://www.recaptcha.net/recaptcha/api.js"}},watch:{html:function(){this.appendRecaptchaScript()}},mounted:function(){a.$on("submit",this.submit),this.html&&this.appendRecaptchaScript()},beforeDestroy:function(){a.$off("submit",this.submit)},methods:{appendRecaptchaScript:function(){this.removeRecaptchaScript();var e=document.createElement("script");e.src=this.scriptSrc,e.classList.add("js-recaptcha-script"),e.async=!0,e.defer=!0,this.script=e,document.body.appendChild(e)},removeRecaptchaScript:function(){this.script instanceof Element&&this.script.remove()},close:function(){this.removeRecaptchaScript(),this.$emit("close")},submit:function(){this.$el.querySelector("form").submit()}}},c=n(4),u=Object(c.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("deprecated-modal",{staticClass:"recaptcha-modal js-recaptcha-modal",attrs:{"hide-footer":!0,title:e.__("Please solve the reCAPTCHA"),kind:"warning"},on:{cancel:e.close}},[n("div",{attrs:{slot:"body"},slot:"body"},[n("p",[e._v(e._s(e.__("We want to be sure it is you, please confirm you are not a robot.")))]),e._v(" "),n("div",{ref:"recaptcha",domProps:{innerHTML:e._s(e.html)}})])])}),[],!1,null,null,null).exports;t.a={data:function(){return{showRecaptcha:!1,recaptchaHTML:""}},components:{recaptchaModal:u},methods:{openRecaptcha:function(){this.showRecaptcha=!0},closeRecaptcha:function(){this.showRecaptcha=!1},checkForSpam:function(e){if(!e.recaptcha_html)return e;this.recaptchaHTML=e.recaptcha_html;var t=new Error(e.error_message);throw t.name="SpamError",t.message="SpamError",t}}}},52:function(e,t,n){"use strict";n.d(t,"b",(function(){return O})),n.d(t,"a",(function(){return S}));n(24),n(49),n(56),n(30),n(309),n(28),n(42),n(399),n(26),n(78),n(104),n(85),n(40),n(65),n(46),n(69),n(258),n(145),n(401),n(77),n(50),n(58),n(38),n(18),n(55),n(68),n(122),n(36),n(67),n(27),n(41);var i=n(240),s=n.n(i),a=n(0),r=n.n(a),o=n(17),l=n(51),c=n.n(l),u=n(16),d=n(1),p=n(11),f=n(33),h=n(186),m=n(128),g=n(287),b=n(247),v=n(276),y=n(288);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var j={disabled:!1,timeTracking:{limitToHours:!1},scopedLabels:{helpLink:"",enabled:!1},filter:{path:""},state:{currentBoard:{labels:[]},currentPage:"",endpoints:{}},detail:{issue:{}},moving:{issue:{},list:{}},multiSelect:{list:[]},setEndpoints:function(e){var t=e.boardsEndpoint,n=e.listsEndpoint,i=e.bulkUpdatePath,s=e.boardId,a=e.recentBoardsEndpoint,r=e.fullPath,o="".concat(n,"/generate.json");this.state.endpoints={boardsEndpoint:t,boardId:s,listsEndpoint:n,listsEndpointGenerate:o,bulkUpdatePath:i,fullPath:r,recentBoardsEndpoint:"".concat(a,".json")}},create:function(){this.state.lists=[],this.filter.path=Object(u.p)().join("&"),this.detail={issue:{}}},showPage:function(e){this.state.currentPage=e},addList:function(e){var t=new List(e);return this.state.lists=s()([].concat(k(this.state.lists),[t]),"position"),t},new:function(e){var t=this,n=this.addList(e),i=this.findList("type","backlog","backlog");n.save().then((function(){n.issues.forEach(i.removeIssue.bind(i)),t.state.lists=s()(t.state.lists,"position")})).catch((function(){})),this.removeBlankState()},updateNewListDropdown:function(e){r()(".js-board-list-".concat(e)).removeClass("is-active")},shouldAddBlankState:function(){return!this.state.lists.filter((function(e){return"backlog"!==e.type&&"closed"!==e.type}))[0]},addBlankState:function(){!this.shouldAddBlankState()||this.welcomeIsHidden()||this.disabled||this.addList({id:"blank",list_type:"blank",title:Object(d.a)("Welcome to your Issue Board!"),position:0})},removeBlankState:function(){this.removeList("blank"),c.a.set("issue_board_welcome_hidden","true",{expires:3650,path:""})},welcomeIsHidden:function(){return Object(u.F)(c.a.get("issue_board_welcome_hidden"))},removeList:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",n=this.findList("id",e,t);n&&(this.state.lists=this.state.lists.filter((function(t){return t.id!==e})))},moveList:function(e,t){var n=this;t.forEach((function(e,t){n.findList("id",parseInt(e,10)).position=t})),e.update()},addMultipleListIssues:function(e,t,n,i){var s=null,a=null;if(!t.every((function(t){return e.findIssue(t.id)}))){var r,o;if(void 0!==i)e.issues[i-1]&&(s=e.issues[i-1].id),e.issues[i]&&(a=e.issues[i].id),(r=e.issues).splice.apply(r,[i,0].concat(k(t)));else(o=e.issues).push.apply(o,k(t));e.label&&t.forEach((function(t){return t.addLabel(e.label)})),e.assignee&&(n&&"assignee"===n.type&&t.forEach((function(e){return e.removeAssignee(n.assignee)})),t.forEach((function(t){return t.addAssignee(e.assignee)}))),n&&(e.issuesSize+=t.length,e.updateMultipleIssues(t,n,s,a))}},startMoving:function(e,t){Object.assign(this.moving,{list:e,issue:t})},moveMultipleIssuesToList:function(e){var t=e.listFrom,n=e.listTo,i=e.issues,s=e.newIndex,a=i.map((function(e){return n.findIssue(e.id)})),r=i.map((function(e){return e.getLists()})).flat(),o=r.map((function(e){return e.label}));if(a.filter(Boolean).length>0)n.updateMultipleIssues(i,t),i.forEach((function(e){e.removeLabel(t.label)}));else if(n.type===m.a.assignee&&t.type===m.a.assignee&&i.some((function(e){return e.findAssignee(n.assignee)})))i.map((function(e){return n.findIssue(e.id)})).forEach((function(e){return e.removeAssignee(t.assignee)}));else if("milestone"===n.type){var l=i.map((function(e){return e.milestone})),c=this.state.lists.filter((function(e){return"milestone"===e.type&&e.id!==n.id})).filter((function(e){return e.issues.some((function(e){return i.some((function(t){return e.id===t.id}))}))}));i.forEach((function(e){l.forEach((function(t){e.removeMilestone(t)}))})),i.forEach((function(e){e.addMilestone(n.milestone)})),c.forEach((function(e){i.forEach((function(t){e.removeIssue(t)}))})),n.addMultipleIssues(i,t,s)}else n.addMultipleIssues(i,t,s);n.type===m.a.closed&&t.type!==m.a.backlog?(r.forEach((function(e){i.forEach((function(t){e.removeIssue(t)}))})),i.forEach((function(e){e.removeLabels(o)}))):n.type===m.a.backlog&&t.type===m.a.assignee?(i.forEach((function(e){e.removeAssignee(t.assignee)})),r.forEach((function(e){i.forEach((function(t){e.removeIssue(t)}))}))):n.type===m.a.backlog&&t.type===m.a.milestone?(i.forEach((function(e){e.removeMilestone(t.milestone)})),r.forEach((function(e){i.forEach((function(t){e.removeIssue(t)}))}))):this.shouldRemoveIssue(t,n)&&this.issuesAreContiguous(t,i)&&t.removeMultipleIssues(i)},issuesAreContiguous:function(e,t){if(1===t.length)return!0;var n=e.issues.map((function(e){return e.id})),i=t.map((function(e){return e.id}));return n.join("|").includes(i.join("|"))},moveIssueToList:function(e,t,n,i){var s=t.findIssue(n.id),a=n.getLists(),r=a.map((function(e){return e.label}));if(s)t.updateIssueLabel(n,e),s.removeLabel(e.label);else if("assignee"===t.type&&"assignee"===e.type&&n.findAssignee(t.assignee))t.findIssue(n.id).removeAssignee(e.assignee);else if("milestone"===t.type){var o=n.milestone,l=this.state.lists.filter((function(e){return"milestone"===e.type&&e.id!==t.id})).filter((function(e){return e.issues.some((function(e){return n.id===e.id}))}));n.removeMilestone(o),n.addMilestone(t.milestone),l.forEach((function(e){return e.removeIssue(n)})),t.addIssue(n,e,i)}else t.addIssue(n,e,i);"closed"===t.type&&"backlog"!==e.type?(a.forEach((function(e){e.removeIssue(n)})),n.removeLabels(r)):"backlog"===t.type&&"assignee"===e.type?(n.removeAssignee(e.assignee),e.removeIssue(n)):"backlog"===t.type&&"milestone"===e.type?(n.removeMilestone(e.milestone),e.removeIssue(n)):this.shouldRemoveIssue(e,t)&&e.removeIssue(n)},shouldRemoveIssue:function(e,t){return"label"!==t.type&&"assignee"===e.type||"assignee"!==t.type&&"label"===e.type||"backlog"===e.type||"closed"===e.type},moveIssueInList:function(e,t,n,i,s){var a=parseInt(s[i-1],10)||null,r=parseInt(s[i+1],10)||null;e.moveIssue(t,n,i,a,r)},moveMultipleIssuesInList:function(e){var t=e.list,n=e.issues,i=e.oldIndicies,s=e.newIndex,a=e.idArray,r=parseInt(a[s-1],10)||null,o=parseInt(a[s+n.length],10)||null;t.moveMultipleIssues({issues:n,oldIndicies:i,newIndex:s,moveBeforeId:r,moveAfterId:o})},findList:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"label",i=this.state.lists.filter((function(i){var s=!n||(i.type===n||"assignee"===i.type||"milestone"===i.type);return i[e]===t&&s}));return i[0]},findListByLabelId:function(e){return this.state.lists.find((function(t){return"label"===t.type&&t.label.id===e}))},toggleFilter:function(e){var t=this.filter.path.split("&"),n=t.indexOf(e);-1===n?t.push(e):t.splice(n,1),this.filter.path=t.join("&"),this.updateFiltersUrl(),h.a.$emit("updateTokens")},setListDetail:function(e){this.detail.list=e},updateFiltersUrl:function(){window.history.pushState(null,null,"?".concat(this.filter.path))},clearDetailIssue:function(){this.setIssueDetail({})},setIssueDetail:function(e){this.detail.issue=e},setTimeTrackingLimitToHours:function(e){this.timeTracking.limitToHours=Object(u.F)(e)},generateBoardsPath:function(e){return"".concat(this.state.endpoints.boardsEndpoint).concat(e?"/".concat(e):"",".json")},generateIssuesPath:function(e){return"".concat(this.state.endpoints.listsEndpoint).concat(e?"/".concat(e):"","/issues")},generateIssuePath:function(e,t){return"".concat(gon.relative_url_root,"/-/boards/").concat(e?"".concat(e):"","/issues").concat(t?"/".concat(t):"")},generateMultiDragPath:function(e){return"".concat(gon.relative_url_root,"/-/boards/").concat(e?"".concat(e):"","/issues/bulk_move")},all:function(){return p.a.get(this.state.endpoints.listsEndpoint)},generateDefaultLists:function(){return p.a.post(this.state.endpoints.listsEndpointGenerate,{})},createList:function(e,t){var n=w({},t,e);return p.a.post(this.state.endpoints.listsEndpoint,{list:n})},updateList:function(e,t,n){return p.a.put("".concat(this.state.endpoints.listsEndpoint,"/").concat(e),{list:{position:t,collapsed:n}})},destroyList:function(e){return p.a.delete("".concat(this.state.endpoints.listsEndpoint,"/").concat(e))},saveList:function(e){var t=e.label||e.assignee||e.milestone,n="";return e.label?n="label_id":e.assignee&&(n="assignee_id"),this.createList(t.id,n).then((function(e){return e.data})).then((function(t){return e.id=t.id,e.type=t.list_type,e.position=t.position,e.label=t.label,e.getIssues()}))},getIssuesForList:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={id:e};return Object.keys(t).forEach((function(e){n[e]=t[e]})),p.a.get(Object(f.h)(n,this.generateIssuesPath(e)))},moveIssue:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return p.a.put(this.generateIssuePath(this.state.endpoints.boardId,e),{from_list_id:t,to_list_id:n,move_before_id:i,move_after_id:s})},moveMultipleIssues:function(e){var t=e.ids,n=e.fromListId,i=e.toListId,s=e.moveBeforeId,a=e.moveAfterId;return p.a.put(this.generateMultiDragPath(this.state.endpoints.boardId),{from_list_id:n,to_list_id:i,move_before_id:s,move_after_id:a,ids:t})},newIssue:function(e,t){return p.a.post(this.generateIssuesPath(e),{issue:t})},getBacklog:function(e){return p.a.get(Object(f.h)(e,"".concat(gon.relative_url_root,"/-/boards/").concat(this.state.endpoints.boardId,"/issues.json")))},bulkUpdate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={update:Object.assign(t,{issuable_ids:e.join(",")})};return p.a.post(this.state.endpoints.bulkUpdatePath,n)},getIssueInfo:function(e){return p.a.get(e)},toggleIssueSubscription:function(e){return p.a.post(e)},recentBoards:function(){return p.a.get(this.state.endpoints.recentBoardsEndpoint)},createBoard:function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);return t.label_ids=(e.labels||[]).map((function(e){return e.id})),0===t.label_ids.length&&(t.label_ids=[""]),t.assignee&&(t.assignee_id=t.assignee.id),t.milestone&&(t.milestone_id=t.milestone.id),t.id?p.a.put(this.generateBoardsPath(t.id),{board:t}):p.a.post(this.generateBoardsPath(),{board:t})},deleteBoard:function(e){var t=e.id;return p.a.delete(this.generateBoardsPath(t))},setCurrentBoard:function(e){this.state.currentBoard=e},toggleMultiSelect:function(e){var t=this.multiSelect.list.map((function(e){return e.id})).indexOf(e.id);-1!==t?this.multiSelect.list=[].concat(k(this.multiSelect.list.slice(0,t)),k(this.multiSelect.list.slice(t+1))):this.multiSelect.list.push(e)},clearMultiSelect:function(){this.multiSelect.list=[]},refreshIssueData:function(e,t){e.id=t.id,e.iid=t.iid,e.title=t.title,e.confidential=t.confidential,e.dueDate=t.due_date,e.sidebarInfoEndpoint=t.issue_sidebar_endpoint,e.referencePath=t.reference_path,e.path=t.real_path,e.toggleSubscriptionEndpoint=t.toggle_subscription_endpoint,e.project_id=t.project_id,e.timeEstimate=t.time_estimate,e.assignableLabelsEndpoint=t.assignable_labels_endpoint,e.blocked=t.blocked,t.project&&(e.project=new g.a(t.project)),t.milestone&&(e.milestone=new y.a(t.milestone),e.milestone_id=t.milestone.id),t.labels&&(e.labels=t.labels.map((function(e){return new b.a(e)}))),t.assignees&&(e.assignees=t.assignees.map((function(e){return new v.a(e)})))}};function O(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o.default.set.apply(o.default,[j.detail.issue].concat(t))}function S(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o.default.delete.apply(o.default,[j.detail.issue].concat(t))}t.c=j},523:function(e,t,n){"use strict";n(24),n(28),n(26),n(72),n(50),n(58),n(38),n(27);var i=n(22),s=n(33),a=n(209),r=n(670),o=n(470),l=n(487),c=n(488),u=n(1),d=n(457);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m={name:"NoteForm",components:{issueWarning:r.a,markdownField:o.a},mixins:[l.a,c.a,{data:function(){return{showBatchCommentsActions:!1}},methods:{handleKeySubmit:function(){this.handleUpdate()},handleUpdate:function(e){var t=this,n=this.discussionResolved;this.isSubmitting=!0,this.$emit("handleFormUpdate",this.updatedNoteBody,this.$refs.editNoteForm,(function(){t.isSubmitting=!1,t.shouldToggleResolved(e,n)&&t.resolveHandler(n)}))}}}],props:{noteBody:{type:String,required:!1,default:""},noteId:{type:[String,Number],required:!1,default:""},saveButtonTitle:{type:String,required:!1,default:Object(u.a)("Save comment")},discussion:{type:Object,required:!1,default:function(){return{}}},isEditing:{type:Boolean,required:!0},lineCode:{type:String,required:!1,default:""},resolveDiscussion:{type:Boolean,required:!1,default:!1},line:{type:Object,required:!1,default:null},note:{type:Object,required:!1,default:null},diffFile:{type:Object,required:!1,default:null},helpPagePath:{type:String,required:!1,default:""},autosaveKey:{type:String,required:!1,default:""},showSuggestPopover:{type:Boolean,required:!1,default:!1}},data:function(){var e=this.noteBody;return!e&&this.autosaveKey&&(e=Object(d.c)(this.autosaveKey)||""),{updatedNoteBody:e,conflictWhileEditing:!1,isSubmitting:!1,isResolving:this.resolveDiscussion,isUnresolving:!this.resolveDiscussion,resolveAsThread:!0}},computed:f({},Object(i.d)(["getDiscussionLastNote","getNoteableData","getNoteableDataByProp","getNotesDataByProp","getUserDataByProp"]),{noteHash:function(){return this.noteId?"#note_".concat(this.noteId):"#"},diffParams:function(){return this.diffFile?{filePath:this.diffFile.file_path,refs:this.diffFile.diff_refs}:this.note&&this.note.position?{filePath:this.note.position.new_path,refs:this.note.position}:this.discussion&&this.discussion.diff_file?{filePath:this.discussion.diff_file.file_path,refs:this.discussion.diff_file.diff_refs}:null},markdownPreviewPath:function(){var e=this.getNoteableDataByProp("preview_note_path"),t=this.line&&this.diffParams,n=t?{preview_suggestions:t,line:this.line.new_line,file_path:this.diffParams.filePath,base_sha:this.diffParams.refs.base_sha,start_sha:this.diffParams.refs.start_sha,head_sha:this.diffParams.refs.head_sha}:{};return Object(s.h)(n,e)},markdownDocsPath:function(){return this.getNotesDataByProp("markdownDocsPath")},quickActionsDocsPath:function(){return this.isEditing?void 0:this.getNotesDataByProp("quickActionsDocsPath")},currentUserId:function(){return this.getUserDataByProp("id")},isDisabled:function(){return!this.updatedNoteBody.length||this.isSubmitting},discussionNote:function(){var e=this.discussion.id?this.getDiscussionLastNote(this.discussion):this.note;return e||{}},canSuggest:function(){return this.getNoteableData.can_receive_suggestion&&this.line&&this.line.can_receive_suggestion},changedCommentText:function(){return Object(u.e)(Object(u.a)("This comment has changed since you started editing, please review the %{startTag}updated comment%{endTag} to ensure information is not lost."),{startTag:'<a href="'.concat(this.noteHash,'" target="_blank" rel="noopener noreferrer">'),endTag:"</a>"},!1)}}),watch:{noteBody:function(){this.updatedNoteBody===this.noteBody?this.updatedNoteBody=this.noteBody:this.conflictWhileEditing=!0}},mounted:function(){this.$refs.textarea.focus()},methods:f({},Object(i.c)(["toggleResolveNote"]),{shouldToggleResolved:function(e,t){var n=this.shouldBeResolved&&this.shouldBeResolved(e);return e||void 0!==n&&t!==n},editMyLastNote:function(){if(""===this.updatedNoteBody){var e=this.getDiscussionLastNote(this.discussion);e&&a.a.$emit("enterEditMode",{noteId:e.id})}},cancelHandler:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$emit("cancelForm",e,this.noteBody!==this.updatedNoteBody)},onInput:function(){if(this.autosaveKey){var e=this.autosaveKey,t=this.updatedNoteBody;Object(d.d)(e,t)}}})},g=n(4),b=Object(g.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"editNoteForm",staticClass:"note-edit-form current-note-edit-form js-discussion-note-form"},[e.conflictWhileEditing?n("div",{staticClass:"js-conflict-edit-warning alert alert-danger",domProps:{innerHTML:e._s(e.changedCommentText)}}):e._e(),e._v(" "),n("div",{staticClass:"flash-container timeline-content"}),e._v(" "),n("form",{staticClass:"edit-note common-note-form js-quick-submit gfm-form",attrs:{"data-line-code":e.lineCode}},[e.hasWarning(e.getNoteableData)?n("issue-warning",{attrs:{"is-locked":e.isLocked(e.getNoteableData),"is-confidential":e.isConfidential(e.getNoteableData),"locked-issue-docs-path":e.lockedIssueDocsPath,"confidential-issue-docs-path":e.confidentialIssueDocsPath}}):e._e(),e._v(" "),n("markdown-field",{attrs:{"markdown-preview-path":e.markdownPreviewPath,"markdown-docs-path":e.markdownDocsPath,"quick-actions-docs-path":e.quickActionsDocsPath,line:e.line,note:e.discussionNote,"can-suggest":e.canSuggest,"add-spacing-classes":!1,"help-page-path":e.helpPagePath,"show-suggest-popover":e.showSuggestPopover},on:{handleSuggestDismissed:function(){return e.$emit("handleSuggestDismissed")}}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.updatedNoteBody,expression:"updatedNoteBody"}],ref:"textarea",staticClass:"note-textarea js-gfm-input js-note-text js-autosize markdown-area js-vue-issue-note-form js-vue-textarea qa-reply-input",attrs:{slot:"textarea",id:"note_note","data-supports-quick-actions":!e.isEditing,name:"note[note]",dir:"auto","aria-label":e.__("Description"),placeholder:e.__("Write a comment or drag your files here…")},domProps:{value:e.updatedNoteBody},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.metaKey?e.handleKeySubmit():null},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?e.handleKeySubmit():null},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:e.editMyLastNote()},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:e.cancelHandler(!0)}],input:[function(t){t.target.composing||(e.updatedNoteBody=t.target.value)},e.onInput]},slot:"textarea"})]),e._v(" "),n("div",{staticClass:"note-form-actions clearfix"},[e.showBatchCommentsActions?[e.showResolveDiscussionToggle?n("p",[n("label",[e.discussionResolved?[n("input",{directives:[{name:"model",rawName:"v-model",value:e.isUnresolving,expression:"isUnresolving"}],attrs:{type:"checkbox","data-qa-selector":"unresolve_review_discussion_checkbox"},domProps:{checked:Array.isArray(e.isUnresolving)?e._i(e.isUnresolving,null)>-1:e.isUnresolving},on:{change:function(t){var n=e.isUnresolving,i=t.target,s=!!i.checked;if(Array.isArray(n)){var a=e._i(n,null);i.checked?a<0&&(e.isUnresolving=n.concat([null])):a>-1&&(e.isUnresolving=n.slice(0,a).concat(n.slice(a+1)))}else e.isUnresolving=s}}}),e._v("\n              "+e._s(e.__("Unresolve thread"))+"\n            ")]:[n("input",{directives:[{name:"model",rawName:"v-model",value:e.isResolving,expression:"isResolving"}],attrs:{type:"checkbox","data-qa-selector":"resolve_review_discussion_checkbox"},domProps:{checked:Array.isArray(e.isResolving)?e._i(e.isResolving,null)>-1:e.isResolving},on:{change:function(t){var n=e.isResolving,i=t.target,s=!!i.checked;if(Array.isArray(n)){var a=e._i(n,null);i.checked?a<0&&(e.isResolving=n.concat([null])):a>-1&&(e.isResolving=n.slice(0,a).concat(n.slice(a+1)))}else e.isResolving=s}}}),e._v("\n              "+e._s(e.__("Resolve thread"))+"\n            ")]],2)]):e._e(),e._v(" "),n("div",[n("button",{staticClass:"btn btn-success qa-start-review",attrs:{disabled:e.isDisabled,type:"button"},on:{click:e.handleAddToReview}},[e.hasDrafts?[e._v(e._s(e.__("Add to review")))]:[e._v(e._s(e.__("Start a review")))]],2),e._v(" "),n("button",{staticClass:"btn qa-comment-now",attrs:{disabled:e.isDisabled,type:"button"},on:{click:function(t){return e.handleUpdate()}}},[e._v("\n            "+e._s(e.__("Add comment now"))+"\n          ")]),e._v(" "),n("button",{staticClass:"btn note-edit-cancel js-close-discussion-note-form",attrs:{type:"button"},on:{click:function(t){return e.cancelHandler()}}},[e._v("\n            "+e._s(e.__("Cancel"))+"\n          ")])])]:[n("button",{staticClass:"js-vue-issue-save btn btn-success js-comment-button qa-reply-comment-button",attrs:{disabled:e.isDisabled,type:"button"},on:{click:function(t){return e.handleUpdate()}}},[e._v("\n          "+e._s(e.saveButtonTitle)+"\n        ")]),e._v(" "),e.discussion.resolvable?n("button",{staticClass:"btn btn-nr btn-default append-right-10 js-comment-resolve-button",on:{click:function(t){return t.preventDefault(),e.handleUpdate(!0)}}},[e._v("\n          "+e._s(e.resolveButtonTitle)+"\n        ")]):e._e(),e._v(" "),n("button",{staticClass:"btn btn-cancel note-edit-cancel js-close-discussion-note-form",attrs:{type:"button"},on:{click:function(t){return e.cancelHandler()}}},[e._v("\n          "+e._s(e.__("Cancel"))+"\n        ")])]],2)],1)])}),[],!1,null,null,null);t.a=b.exports},533:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n(42),n(104),n(18),n(64);var i=n(0),s=n.n(i),a=n(51),r=n.n(a),o=n(222),l=n(248);var c=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.userSelect=new l.a(t),n.e(239).then(n.t.bind(null,428,7)).then((function(){s()("select.select2").select2({width:"resolve",dropdownAutoWidth:!0})})).catch((function(){})),s()(".issuable-sidebar .inline-update").on("change","select",(function(){return s()(this).submit()})),s()(".issuable-sidebar .inline-update").on("change",".js-assignee",(function(){return s()(this).submit()})),s()(document).off("click",".issuable-sidebar .dropdown-content a").on("click",".issuable-sidebar .dropdown-content a",(function(e){return e.preventDefault()})),s()(document).off("click",".edit-link").on("click",".edit-link",(function(e){e.preventDefault();var t=s()(this).parents(".block"),n=t.find(".selectbox");n.is(":visible")?(n.hide(),t.find(".value:not(.dont-hide)").show()):(n.show(),t.find(".value:not(.dont-hide)").hide()),n.is(":visible")&&setTimeout((function(){return t.find(".dropdown-menu-toggle").trigger("click")}),0)})),window.addEventListener("beforeunload",(function(){var e=o.b.getBreakpointSize();["xs","sm","md"].includes(e)&&r.a.set("collapsed_gutter",!0)}))}},534:function(e,t,n){"use strict";n(24),n(49),n(56),n(30),n(28),n(78),n(40),n(18),n(68),n(36),n(41),n(309),n(65),n(46),n(69),n(35);var i=n(828),s=n(1),a=(n(72),{props:{user:{type:Object,required:!0},imgSize:{type:Number,required:!0},issuableType:{type:String,required:!1,default:"issue"}},computed:{assigneeAlt:function(){return Object(s.e)(Object(s.a)("%{userName}'s avatar"),{userName:this.user.name})},avatarUrl:function(){return this.user.avatar||this.user.avatar_url||gon.default_avatar_url},isMergeRequest:function(){return"merge_request"===this.issuableType},hasMergeIcon:function(){return this.isMergeRequest&&!this.user.can_merge}}}),r=n(4),o=Object(r.a)(a,(function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"position-relative"},[t("img",{staticClass:"avatar avatar-inline m-0",class:"s"+this.imgSize,attrs:{alt:this.assigneeAlt,src:this.avatarUrl,width:this.imgSize,"data-qa-selector":"avatar_image"}}),this._v(" "),this.hasMergeIcon?t("i",{staticClass:"fa fa-exclamation-triangle merge-icon",attrs:{"aria-hidden":"true"}}):this._e()])}),[],!1,null,null,null).exports,l={components:{AssigneeAvatar:o},props:{user:{type:Object,required:!0},issuableType:{type:String,required:!1,default:"issue"}}},c=Object(r.a)(l,(function(){var e=this.$createElement,t=this._self._c||e;return t("button",{staticClass:"btn-link",attrs:{type:"button"}},[t("assignee-avatar",{attrs:{user:this.user,"img-size":24,"issuable-type":this.issuableType}}),this._v(" "),t("span",{staticClass:"author"},[this._v(" "+this._s(this.user.name)+" ")])],1)}),[],!1,null,null,null).exports,u={directives:{GlTooltip:i.a},components:{CollapsedAssignee:c},props:{users:{type:Array,required:!0},issuableType:{type:String,required:!1,default:"issue"}},computed:{isMergeRequest:function(){return"merge_request"===this.issuableType},hasNoUsers:function(){return!this.users.length},hasMoreThanOneAssignee:function(){return this.users.length>1},hasMoreThanTwoAssignees:function(){return this.users.length>2},allAssigneesCanMerge:function(){return this.users.every((function(e){return e.can_merge}))},sidebarAvatarCounter:function(){return this.users.length>99?"".concat(99,"+"):"+".concat(this.users.length-1)},collapsedUsers:function(){var e=this.hasMoreThanTwoAssignees?1:this.users.length;return this.users.slice(0,e)},tooltipTitleMergeStatus:function(){if(!this.isMergeRequest)return"";var e=this.users.filter((function(e){return e.can_merge})).length;return e===this.users.length?"":e>0?Object(s.e)(Object(s.a)("%{mergeLength}/%{usersLength} can merge"),{mergeLength:e,usersLength:this.users.length}):1===this.users.length?Object(s.a)("cannot merge"):Object(s.a)("no one can merge")},tooltipTitle:function(){var e=Math.min(5,this.users.length),t=this.users.slice(0,e).map((function(e){return e.name}));if(!this.users.length)return Object(s.a)("Assignee(s)");this.users.length>t.length&&t.push(Object(s.e)(Object(s.a)("+ %{amount} more"),{amount:this.users.length-t.length}));var n=t.join(", ");return this.tooltipTitleMergeStatus?"".concat(n," (").concat(this.tooltipTitleMergeStatus,")"):n},tooltipOptions:function(){return{container:"body",placement:"left",boundary:"viewport"}}}},d=Object(r.a)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip",value:e.tooltipOptions,expression:"tooltipOptions"}],staticClass:"sidebar-collapsed-icon sidebar-collapsed-user",class:{"multiple-users":e.hasMoreThanOneAssignee},attrs:{title:e.tooltipTitle}},[e.hasNoUsers?n("i",{staticClass:"fa fa-user",attrs:{"aria-label":e.__("None")}}):e._e(),e._v(" "),e._l(e.collapsedUsers,(function(t){return n("collapsed-assignee",{key:t.id,attrs:{user:t,"issuable-type":e.issuableType}})})),e._v(" "),e.hasMoreThanTwoAssignees?n("button",{staticClass:"btn-link",attrs:{type:"button"}},[n("span",{staticClass:"avatar-counter sidebar-avatar-counter"},[e._v(" "+e._s(e.sidebarAvatarCounter)+" ")]),e._v(" "),e.isMergeRequest&&!e.allAssigneesCanMerge?n("i",{staticClass:"fa fa-exclamation-triangle merge-icon",attrs:{"aria-hidden":"true"}}):e._e()]):e._e()],2)}),[],!1,null,null,null).exports,p={components:{AssigneeAvatar:o,GlLink:n(301).a},directives:{GlTooltip:i.a},props:{user:{type:Object,required:!0},rootPath:{type:String,required:!0},tooltipPlacement:{type:String,default:"bottom",required:!1},tooltipHasName:{type:Boolean,default:!0,required:!1},issuableType:{type:String,default:"issue",required:!1}},computed:{cannotMerge:function(){return"merge_request"===this.issuableType&&!this.user.can_merge},tooltipTitle:function(){return this.cannotMerge&&this.tooltipHasName?Object(s.e)(Object(s.a)("%{userName} (cannot merge)"),{userName:this.user.name}):this.cannotMerge?Object(s.a)("Cannot merge"):this.tooltipHasName?this.user.name:""},tooltipOption:function(){return{container:"body",placement:this.tooltipPlacement,boundary:"viewport"}},assigneeUrl:function(){return this.user.web_url}}},f=Object(r.a)(p,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("gl-link",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip",value:e.tooltipOption,expression:"tooltipOption"}],staticClass:"d-inline-block",attrs:{href:e.assigneeUrl,title:e.tooltipTitle}},[n("span",{staticClass:"d-flex"},[n("assignee-avatar",{attrs:{user:e.user,"img-size":32,"issuable-type":e.issuableType}}),e._v(" "),e._t("default",null,{user:e.user})],2)])}),[],!1,null,null,null).exports,h={components:{AssigneeAvatarLink:f},props:{users:{type:Array,required:!0},rootPath:{type:String,required:!0},issuableType:{type:String,required:!1,default:"issue"}},data:function(){return{showLess:!0}},computed:{firstUser:function(){return this.users[0]},hasOneUser:function(){return 1===this.users.length},hiddenAssigneesLabel:function(){var e=this.numberOfHiddenAssignees;return Object(s.e)(Object(s.a)("+ %{numberOfHiddenAssignees} more"),{numberOfHiddenAssignees:e})},renderShowMoreSection:function(){return this.users.length>5},numberOfHiddenAssignees:function(){return this.users.length-5},uncollapsedUsers:function(){var e=this.showLess?Math.min(this.users.length,5):this.users.length;return this.showLess?this.users.slice(0,e):this.users},username:function(){return"@".concat(this.firstUser.username)}},methods:{toggleShowLess:function(){this.showLess=!this.showLess}}};function m(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var g={name:"Assignees",components:{CollapsedAssigneeList:d,UncollapsedAssigneeList:Object(r.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.hasOneUser?n("assignee-avatar-link",{attrs:{"tooltip-placement":"left","tooltip-has-name":!1,user:e.firstUser,"root-path":e.rootPath,"issuable-type":e.issuableType},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.user;return[n("div",{staticClass:"ml-2"},[n("span",{staticClass:"author"},[e._v(" "+e._s(i.name)+" ")]),e._v(" "),n("span",{staticClass:"username"},[e._v(" "+e._s(e.username)+" ")])])]}}],null,!1,1761455348)}):n("div",[n("div",{staticClass:"user-list"},e._l(e.uncollapsedUsers,(function(t){return n("div",{key:t.id,staticClass:"user-item"},[n("assignee-avatar-link",{attrs:{user:t,"root-path":e.rootPath,"issuable-type":e.issuableType}})],1)})),0),e._v(" "),e.renderShowMoreSection?n("div",{staticClass:"user-list-more"},[n("button",{staticClass:"btn-link",attrs:{type:"button","data-qa-selector":"more_assignees_link"},on:{click:e.toggleShowLess}},[e.showLess?[e._v("\n        "+e._s(e.hiddenAssigneesLabel)+"\n      ")]:[e._v(e._s(e.__("- show less")))]],2)]):e._e()])}),[],!1,null,null,null).exports},props:{rootPath:{type:String,required:!0},users:{type:Array,required:!0},editable:{type:Boolean,required:!0},issuableType:{type:String,required:!1,default:"issue"}},computed:{hasNoUsers:function(){return!this.users.length},sortedAssigness:function(){var e=this.users.filter((function(e){return e.can_merge})),t=this.users.filter((function(e){return!e.can_merge}));return[].concat(m(e),m(t))}},methods:{assignSelf:function(){this.$emit("assign-self")}}},b=Object(r.a)(g,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("collapsed-assignee-list",{attrs:{users:e.sortedAssigness,"issuable-type":e.issuableType}}),e._v(" "),n("div",{staticClass:"value hide-collapsed"},[e.hasNoUsers?[n("span",{staticClass:"assign-yourself no-value qa-assign-yourself"},[e._v("\n        "+e._s(e.__("None"))+"\n        "),e.editable?[e._v("\n          -\n          "),n("button",{staticClass:"btn-link",attrs:{type:"button"},on:{click:e.assignSelf}},[e._v("\n            "+e._s(e.__("assign yourself"))+"\n          ")])]:e._e()],2)]:n("uncollapsed-assignee-list",{attrs:{users:e.sortedAssigness,"root-path":e.rootPath,"issuable-type":e.issuableType}})],2)],1)}),[],!1,null,null,null);t.a=b.exports},536:function(e,t,n){"use strict";n(72);var i=n(760),s=n(1),a={name:"AssigneeTitle",components:{GlLoadingIcon:i.a},props:{loading:{type:Boolean,required:!1,default:!1},numberOfAssignees:{type:Number,required:!0},editable:{type:Boolean,required:!0},showToggle:{type:Boolean,required:!1,default:!1}},computed:{assigneeTitle:function(){var e=this.numberOfAssignees;return Object(s.c)("Assignee","%d Assignees",e)}}},r=n(4),o=Object(r.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"title hide-collapsed"},[e._v("\n  "+e._s(e.assigneeTitle)+"\n  "),e.loading?n("gl-loading-icon",{staticClass:"align-bottom",attrs:{inline:""}}):e._e(),e._v(" "),e.editable?n("a",{staticClass:"js-sidebar-dropdown-toggle edit-link float-right",attrs:{href:"#","data-track-event":"click_edit_button","data-track-label":"right_sidebar","data-track-property":"assignee"}},[e._v("\n    "+e._s(e.__("Edit"))+"\n  ")]):e._e(),e._v(" "),e.showToggle?n("a",{staticClass:"gutter-toggle float-right js-sidebar-toggle",attrs:{"aria-label":e.__("Toggle sidebar"),href:"#",role:"button"}},[n("i",{staticClass:"fa fa-angle-double-right",attrs:{"aria-hidden":"true","data-hidden":"true"}})]):e._e()],1)}),[],!1,null,null,null);t.a=o.exports},537:function(e,t,n){"use strict";n(72);var i=n(1),s=n(253),a=n(45),r=n(375),o=n(99),l=n(135),c=Object(i.a)("Notifications on"),u=Object(i.a)("Notifications off"),d={directives:{tooltip:o.a},components:{icon:a.a,toggleButton:r.a},mixins:[s.a.mixin({label:"right_sidebar"})],props:{loading:{type:Boolean,required:!1,default:!1},projectEmailsDisabled:{type:Boolean,required:!1,default:!1},subscribeDisabledDescription:{type:String,required:!1,default:""},subscribed:{type:Boolean,required:!1,default:null},id:{type:Number,required:!1,default:null}},computed:{tracking:function(){return{category:this.$options._componentTag}},showLoadingState:function(){return null===this.subscribed},notificationIcon:function(){return this.projectEmailsDisabled?"notifications-off":this.subscribed?"notifications":"notifications-off"},notificationTooltip:function(){return this.projectEmailsDisabled?this.subscribeDisabledDescription:this.subscribed?c:u},notificationText:function(){return this.projectEmailsDisabled?this.subscribeDisabledDescription:Object(i.a)("Notifications")}},methods:{toggleSubscription:function(){l.a.$emit("toggleSubscription",this.id),this.$emit("toggleSubscription",this.id),this.track("toggle_button",{property:"notifications",value:this.subscribed?0:1})},onClickCollapsedIcon:function(){this.$emit("toggleSidebar")}}},p=n(4),f=Object(p.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],ref:"tooltip",staticClass:"sidebar-collapsed-icon",attrs:{title:e.notificationTooltip,"data-container":"body","data-placement":"left","data-boundary":"viewport"},on:{click:e.onClickCollapsedIcon}},[n("icon",{staticClass:"sidebar-item-icon is-active",attrs:{name:e.notificationIcon,size:16,"aria-hidden":"true"}})],1),e._v(" "),n("span",{staticClass:"issuable-header-text hide-collapsed float-left"},[e._v(" "+e._s(e.notificationText)+" ")]),e._v(" "),e.projectEmailsDisabled?e._e():n("toggle-button",{ref:"toggleButton",staticClass:"float-right hide-collapsed js-issuable-subscribe-button",attrs:{"is-loading":e.showLoadingState,value:e.subscribed},on:{change:e.toggleSubscription}})],1)}),[],!1,null,null,null);t.a=f.exports},539:function(e,t,n){"use strict";n(26),n(27);var i=n(17),s=n(1),a=n(553),r=n(760),o=n(828),l={components:{Icon:n(45).a,GlButton:a.a,GlLoadingIcon:r.a},directives:{"gl-tooltip":o.a},props:{canApply:{type:Boolean,required:!1,default:!1},isApplied:{type:Boolean,required:!0,default:!1},helpPagePath:{type:String,required:!0}},data:function(){return{isApplying:!1}},methods:{applySuggestion:function(){this.canApply&&(this.isApplying=!0,this.$emit("apply",this.applySuggestionCallback))},applySuggestionCallback:function(){this.isApplying=!1}}},c=n(4),u=Object(c.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"md-suggestion-header border-bottom-0 mt-2"},[n("div",{staticClass:"qa-suggestion-diff-header js-suggestion-diff-header font-weight-bold"},[e._v("\n    "+e._s(e.__("Suggested change"))+"\n    "),e.helpPagePath?n("a",{staticClass:"js-help-btn",attrs:{href:e.helpPagePath,"aria-label":e.__("Help")}},[n("icon",{attrs:{name:"question-o","css-classes":"link-highlight"}})],1):e._e()]),e._v(" "),e.isApplied?n("span",{staticClass:"badge badge-success"},[e._v(e._s(e.__("Applied")))]):e._e(),e._v(" "),e.isApplying?n("div",{staticClass:"d-flex align-items-center text-secondary"},[n("gl-loading-icon",{staticClass:"d-flex-center mr-2"}),e._v(" "),n("span",[e._v(e._s(e.__("Applying suggestion")))])],1):e.canApply?n("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.viewport",value:e.__("This also resolves the discussion"),expression:"__('This also resolves the discussion')",modifiers:{viewport:!0}}],staticClass:"btn-inverted js-apply-btn",attrs:{disabled:e.isApplying,variant:"success"},on:{click:e.applySuggestion}},[e._v("\n    "+e._s(e.__("Apply suggestion"))+"\n  ")]):e._e()],1)}),[],!1,null,null,null).exports,d={name:"SuggestionDiffRow",props:{line:{type:Object,required:!0}},computed:{displayAsCell:function(){return!(this.line.rich_text||this.line.text)},lineType:function(){return this.line.type}}},p=Object(c.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tr",{staticClass:"line_holder",class:e.lineType},[n("td",{staticClass:"diff-line-num old_line border-top-0 border-bottom-0",class:e.lineType},[e._v("\n    "+e._s(e.line.old_line)+"\n  ")]),e._v(" "),n("td",{staticClass:"diff-line-num new_line border-top-0 border-bottom-0",class:e.lineType},[e._v("\n    "+e._s(e.line.new_line)+"\n  ")]),e._v(" "),n("td",{staticClass:"line_content",class:[{"d-table-cell":e.displayAsCell},e.lineType]},[e.line.rich_text?n("span",{domProps:{innerHTML:e._s(e.line.rich_text)}}):e.line.text?n("span",[e._v(e._s(e.line.text))]):e._e()])])}),[],!1,null,null,null).exports;n(24),n(28),n(46),n(50),n(58),n(38),n(55),n(91);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){return e?e.replace(/^( |\+|-)/,""):e}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{text:m(e.text),rich_text:m(e.rich_text)})}var b={components:{SuggestionDiffHeader:u,SuggestionDiffRow:p},props:{suggestion:{type:Object,required:!0},disabled:{type:Boolean,required:!1,default:!1},helpPagePath:{type:String,required:!0}},computed:{lines:function(){return function(e){return e.filter((function(e){return"match"!==e.type})).map((function(e){return g(e)}))}(this.suggestion.diff_lines)}},methods:{applySuggestion:function(e){this.$emit("apply",{suggestionId:this.suggestion.id,callback:e})}}},v=Object(c.a)(b,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"md-suggestion"},[n("suggestion-diff-header",{staticClass:"qa-suggestion-diff-header js-suggestion-diff-header",attrs:{"can-apply":e.suggestion.appliable&&e.suggestion.current_user.can_apply&&!e.disabled,"is-applied":e.suggestion.applied,"help-page-path":e.helpPagePath},on:{apply:e.applySuggestion}}),e._v(" "),n("table",{staticClass:"mb-3 md-suggestion-diff js-syntax-highlight code"},[n("tbody",e._l(e.lines,(function(e,t){return n("suggestion-diff-row",{key:t+"-"+e.text,attrs:{line:e}})})),1)])],1)}),[],!1,null,null,null).exports,y=n(14),_={props:{lineType:{type:String,required:!1,default:""},suggestions:{type:Array,required:!1,default:function(){return[]}},noteHtml:{type:String,required:!0},disabled:{type:Boolean,required:!1,default:!1},helpPagePath:{type:String,required:!0}},data:function(){return{isRendered:!1}},watch:{suggestions:function(){this.reset()},noteHtml:function(){this.reset()}},mounted:function(){this.renderSuggestions()},methods:{renderSuggestions:function(){var e=this;if(this.noteHtml){var t=this.$refs.container.querySelectorAll(".js-render-suggestion");"old"===this.lineType&&Object(y.a)(Object(s.a)("Unable to apply suggestions to a deleted line."),"alert",this.$el),t.forEach((function(t,n){var i=t.parentElement;e.generateDiff(n).$mount(i)})),this.isRendered=!0}},generateDiff:function(e){var t=this,n=this.suggestions,s=this.disabled,a=this.helpPagePath,r=n&&n[e]?n[e]:{},o=new(i.default.extend(v))({propsData:{disabled:s,suggestion:r,helpPagePath:a}});return o.$on("apply",(function(e){var n=e.suggestionId,i=e.callback;t.$emit("apply",{suggestionId:n,callback:i,flashContainer:t.$el})})),o},reset:function(){var e=this;this.$refs.container.innerHTML=this.noteHtml,this.isRendered=!1,this.renderSuggestions(),this.$nextTick((function(){return e.renderSuggestions()}))}}},w=Object(c.a)(_,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{staticClass:"flash-container js-suggestions-flash"}),this._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:this.isRendered,expression:"isRendered"}],ref:"container",staticClass:"md",domProps:{innerHTML:this._s(this.noteHtml)}})])}),[],!1,null,null,null);t.a=w.exports},552:function(e,t,n){"use strict";n(24),n(28),n(26),n(50),n(58),n(38),n(27);var i=n(22),s=n(1);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o={computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(i.d)(["getNotesDataByProp"]),{registerLink:function(){return this.getNotesDataByProp("registerPath")},signInLink:function(){return this.getNotesDataByProp("newSessionPath")},signedOutText:function(){return Object(s.e)(Object(s.a)("Please %{startTagRegister}register%{endRegisterTag} or %{startTagSignIn}sign in%{endSignInTag} to reply"),{startTagRegister:'<a href="'.concat(this.registerLink,'">'),startTagSignIn:'<a href="'.concat(this.signInLink,'">'),endRegisterTag:"</a>",endSignInTag:"</a>"},!1)}})},l=n(4),c=Object(l.a)(o,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"disabled-comment text-center",domProps:{innerHTML:this._s(this.signedOutText)}})}),[],!1,null,null,null);t.a=c.exports},665:function(e,t,n){"use strict";var i=n(120);t.a={computed:{noteableType:function(){var e=this.discussion?this.discussion.notes[0]:this.note;return i.p[e.noteable_type]}}}},666:function(e,t,n){"use strict";n(24),n(30),n(28),n(26),n(50),n(58),n(38),n(27);var i=n(93),s=n.n(i),a=n(0),r=n.n(a),o=n(22),l=n(110),c=n(293),u=n(1),d=n(14),p=n(180),f=n(489),h=(n(72),n(760)),m=n(828),g=(n(35),{computed:{resolveButtonTitle:function(){var e=Object(u.a)("Mark comment as resolved");return this.resolvedBy&&(e=Object(u.e)(Object(u.a)("Resolved by %{name}"),{name:this.resolvedBy.name})),e}}}),b=n(45),v=n(553),y={name:"ReplyButton",components:{Icon:b.a,GlButton:v.a},directives:{GlTooltip:m.a}},_=n(4),w=Object(_.a)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"note-actions-item"},[n("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],ref:"button",staticClass:"note-action-button",attrs:{"data-track-event":"click_button","data-track-label":"reply_comment_button",variant:"transparent",title:e.__("Reply to comment")},on:{click:function(t){return e.$emit("startReplying")}}},[n("icon",{staticClass:"link-highlight",attrs:{name:"comment"}})],1)],1)}),[],!1,null,null,null).exports;function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O={name:"NoteActions",components:{Icon:b.a,ReplyButton:w,GlLoadingIcon:h.a},directives:{GlTooltip:m.a},mixins:[g],props:{authorId:{type:Number,required:!0},noteId:{type:[String,Number],required:!0},noteUrl:{type:String,required:!1,default:""},accessLevel:{type:String,required:!1,default:""},reportAbusePath:{type:String,required:!1,default:null},showReply:{type:Boolean,required:!0},canEdit:{type:Boolean,required:!0},canAwardEmoji:{type:Boolean,required:!0},canDelete:{type:Boolean,required:!0},canResolve:{type:Boolean,required:!1,default:!1},resolvable:{type:Boolean,required:!1,default:!1},isResolved:{type:Boolean,required:!1,default:!1},isResolving:{type:Boolean,required:!1,default:!1},resolvedBy:{type:Object,required:!1,default:function(){return{}}},canReportAsAbuse:{type:Boolean,required:!0}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(o.d)(["getUserDataByProp"]),{shouldShowActionsDropdown:function(){return this.currentUserId&&(this.canEdit||this.canReportAsAbuse)},showDeleteAction:function(){return this.canDelete&&!this.canReportAsAbuse&&!this.noteUrl},isAuthoredByCurrentUser:function(){return this.authorId===this.currentUserId},currentUserId:function(){return this.getUserDataByProp("id")}}),methods:{onEdit:function(){this.$emit("handleEdit")},onDelete:function(){this.$emit("handleDelete")},onResolve:function(){this.$emit("handleResolve")},closeTooltip:function(){var e=this;this.$nextTick((function(){e.$root.$emit("bv::hide::tooltip")}))}}},S=Object(_.a)(O,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"note-actions"},[e.accessLevel?n("span",{staticClass:"note-role user-access-role"},[e._v(e._s(e.accessLevel))]):e._e(),e._v(" "),e.canResolve?n("div",{staticClass:"note-actions-item"},[n("button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],ref:"resolveButton",staticClass:"line-resolve-btn note-action-button",class:{"is-disabled":!e.resolvable,"is-active":e.isResolved},attrs:{title:e.resolveButtonTitle,"aria-label":e.resolveButtonTitle,type:"button"},on:{click:e.onResolve}},[e.isResolving?n("gl-loading-icon",{attrs:{inline:""}}):[n("icon",{attrs:{name:e.isResolved?"check-circle-filled":"check-circle"}})]],2)]):e._e(),e._v(" "),e.canAwardEmoji?n("div",{staticClass:"note-actions-item"},[n("a",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"note-action-button note-emoji-button js-add-award js-note-emoji",class:{"js-user-authored":e.isAuthoredByCurrentUser},attrs:{href:"#",title:"Add reaction","data-position":"right"}},[n("icon",{staticClass:"link-highlight award-control-icon-neutral",attrs:{name:"slight-smile"}}),e._v(" "),n("icon",{staticClass:"link-highlight award-control-icon-positive",attrs:{name:"smiley"}}),e._v(" "),n("icon",{staticClass:"link-highlight award-control-icon-super-positive",attrs:{name:"smiley"}})],1)]):e._e(),e._v(" "),e.showReply?n("reply-button",{ref:"replyButton",staticClass:"js-reply-button",on:{startReplying:function(t){return e.$emit("startReplying")}}}):e._e(),e._v(" "),e.canEdit?n("div",{staticClass:"note-actions-item"},[n("button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"note-action-button js-note-edit btn btn-transparent qa-note-edit-button",attrs:{type:"button",title:"Edit comment"},on:{click:e.onEdit}},[n("icon",{staticClass:"link-highlight",attrs:{name:"pencil"}})],1)]):e._e(),e._v(" "),e.showDeleteAction?n("div",{staticClass:"note-actions-item"},[n("button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"note-action-button js-note-delete btn btn-transparent",attrs:{type:"button",title:"Delete comment"},on:{click:e.onDelete}},[n("icon",{staticClass:"link-highlight",attrs:{name:"remove"}})],1)]):e.shouldShowActionsDropdown?n("div",{staticClass:"dropdown more-actions note-actions-item"},[n("button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"note-action-button more-actions-toggle btn btn-transparent",attrs:{type:"button",title:"More actions","data-toggle":"dropdown"},on:{click:e.closeTooltip}},[n("icon",{staticClass:"icon",attrs:{name:"ellipsis_v"}})],1),e._v(" "),n("ul",{staticClass:"dropdown-menu more-actions-dropdown dropdown-open-left"},[e.canReportAsAbuse?n("li",[n("a",{attrs:{href:e.reportAbusePath}},[e._v(e._s(e.__("Report abuse to admin")))])]):e._e(),e._v(" "),e.noteUrl?n("li",[n("button",{staticClass:"btn-default btn-transparent js-btn-copy-note-link",attrs:{"data-clipboard-text":e.noteUrl,type:"button"}},[e._v("\n          "+e._s(e.__("Copy link"))+"\n        ")])]):e._e(),e._v(" "),e.canEdit?n("li",[n("button",{staticClass:"btn btn-transparent js-note-delete js-note-delete",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.onDelete(t)}}},[n("span",{staticClass:"text-danger"},[e._v(e._s(e.__("Delete comment")))])])]):e._e()])]):e._e()],1)}),[],!1,null,null,null).exports,C=(n(558),n(490)),D=(n(65),n(46),n(129),n(69),n(77),n(99)),T=n(447);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I={components:{Icon:b.a},directives:{tooltip:D.a},props:{awards:{type:Array,required:!0},toggleAwardPath:{type:String,required:!0},noteAuthorId:{type:Number,required:!0},noteId:{type:String,required:!0},canAwardEmoji:{type:Boolean,required:!0}},computed:x({},Object(o.d)(["getUserData"]),{groupedAwards:function(){var e=this.awards.reduce((function(e,t){return Object.prototype.hasOwnProperty.call(e,t.name)?e[t.name].push(t):Object.assign(e,P({},t.name,[t])),e}),{}),t={},n=e.thumbsdown,i=e.thumbsup;return i&&(t.thumbsup=i,delete e.thumbsup),n&&(t.thumbsdown=n,delete e.thumbsdown),Object.assign({},t,e)},isAuthoredByMe:function(){return this.noteAuthorId===this.getUserData.id}}),methods:x({},Object(o.c)(["toggleAwardRequest"]),{getAwardHTML:function(e){return Object(T.glEmojiTag)(e)},getAwardClassBindings:function(e){return{active:this.hasReactionByCurrentUser(e),disabled:!this.canInteractWithEmoji()}},canInteractWithEmoji:function(){return this.getUserData.id},hasReactionByCurrentUser:function(e){var t=this;return e.filter((function(e){return e.user.id===t.getUserData.id})).length},awardTitle:function(e){var t=this,n=this.hasReactionByCurrentUser(e),i=n?9:10,s=e;n&&(s=s.filter((function(e){return e.user.id!==t.getUserData.id})));var a=s.slice(0,i).map((function(e){return e.user.name})),r=s.slice(i,s.length);n&&a.unshift(Object(u.a)("You"));var o="";return r.length?o=Object(u.e)(Object(u.a)("%{listToShow}, and %{awardsListLength} more."),{listToShow:a.join(", "),awardsListLength:r.length},!1):a.length>1?(o=a.slice(0,a.length-1).join(", "),o+=a.length>2?",":"",o+=Object(u.e)(Object(u.a)(" and %{sliced}"),{sliced:a.slice(-1)},!1)):o=a.join(Object(u.a)(" and ")),o},handleAward:function(e){if(this.canAwardEmoji){var t;switch(e){case"100":t=100;break;case"1234":t=1234;break;default:t=e}var n={endpoint:this.toggleAwardPath,noteId:this.noteId,awardName:t};this.toggleAwardRequest(n).catch((function(){return Object(d.a)(Object(u.a)("Something went wrong on our end."))}))}}})},L=Object(_.a)(I,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"note-awards"},[n("div",{staticClass:"awards js-awards-block"},[e._l(e.groupedAwards,(function(t,i,s){return n("button",{directives:[{name:"tooltip",rawName:"v-tooltip"}],key:s,staticClass:"btn award-control",class:e.getAwardClassBindings(t),attrs:{title:e.awardTitle(t),"data-boundary":"viewport",type:"button"},on:{click:function(t){return e.handleAward(i)}}},[n("span",{domProps:{innerHTML:e._s(e.getAwardHTML(i))}}),e._v(" "),n("span",{staticClass:"award-control-text js-counter"},[e._v(e._s(t.length))])])})),e._v(" "),e.canAwardEmoji?n("div",{staticClass:"award-menu-holder"},[n("button",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"award-control btn js-add-award",class:{"js-user-authored":e.isAuthoredByMe},attrs:{title:"Add reaction","aria-label":e.__("Add reaction"),"data-boundary":"viewport",type:"button"}},[n("span",{staticClass:"award-control-icon award-control-icon-neutral"},[n("icon",{attrs:{name:"slight-smile"}})],1),e._v(" "),n("span",{staticClass:"award-control-icon award-control-icon-positive"},[n("icon",{attrs:{name:"smiley"}})],1),e._v(" "),n("span",{staticClass:"award-control-icon award-control-icon-super-positive"},[n("icon",{attrs:{name:"smiley"}})],1),e._v(" "),n("i",{staticClass:"fa fa-spinner fa-spin award-control-icon award-control-icon-loading",attrs:{"aria-hidden":"true"}})])]):e._e()],2)])}),[],!1,null,null,null).exports,A={name:"NoteAttachment",props:{attachment:{type:Object,required:!0}}},N=Object(_.a)(A,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"note-attachment"},[e.attachment.image?n("a",{ref:"attachmentImage",attrs:{href:e.attachment.url,target:"_blank",rel:"noopener noreferrer"}},[n("img",{staticClass:"note-image-attach",attrs:{src:e.attachment.url}})]):e._e(),e._v(" "),n("div",{staticClass:"attachment"},[e.attachment.url?n("a",{ref:"attachmentUrl",attrs:{href:e.attachment.url,target:"_blank",rel:"noopener noreferrer"}},[n("i",{staticClass:"fa fa-paperclip",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.attachment.filename)+"\n    ")]):e._e()])])}),[],!1,null,null,null).exports,q=n(523),R=n(752),B=n(539);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $={components:{noteEditedText:C.a,noteAwardsList:L,noteAttachment:N,noteForm:q.a,Suggestions:B.a},mixins:[R.a,{computed:{discussion:function(){return{}}}}],props:{note:{type:Object,required:!0},line:{type:Object,required:!1,default:null},canEdit:{type:Boolean,required:!0},isEditing:{type:Boolean,required:!1,default:!1},helpPagePath:{type:String,required:!1,default:""}},computed:{noteBody:function(){return this.note.note},hasSuggestion:function(){return this.note.suggestions&&this.note.suggestions.length},lineType:function(){return this.line?this.line.type:null}},mounted:function(){this.renderGFM(),this.isEditing&&this.initAutoSave(this.note)},updated:function(){this.renderGFM(),this.isEditing&&(this.autosave?this.setAutoSave():this.initAutoSave(this.note))},methods:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){F(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(o.c)(["submitSuggestion"]),{renderGFM:function(){r()(this.$refs["note-body"]).renderGFM()},handleFormUpdate:function(e,t,n,i){this.$emit("handleFormUpdate",e,t,n,i)},formCancelHandler:function(e,t){this.$emit("cancelForm",e,t)},applySuggestion:function(e){var t=e.suggestionId,n=e.flashContainer,i=e.callback,s=void 0===i?function(){}:i,a=this.note,r=a.discussion_id,o=a.id;return this.submitSuggestion({discussionId:r,noteId:o,suggestionId:t,flashContainer:n}).then(s)}})},U=Object(_.a)($,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"note-body",staticClass:"note-body",class:{"js-task-list-container":e.canEdit}},[e.hasSuggestion&&!e.isEditing?n("suggestions",{attrs:{suggestions:e.note.suggestions,"note-html":e.note.note_html,"line-type":e.lineType,"help-page-path":e.helpPagePath},on:{apply:e.applySuggestion}}):n("div",{staticClass:"note-text md",domProps:{innerHTML:e._s(e.note.note_html)}}),e._v(" "),e.isEditing?n("note-form",{ref:"noteForm",attrs:{"is-editing":e.isEditing,"note-body":e.noteBody,"note-id":e.note.id,line:e.line,note:e.note,"help-page-path":e.helpPagePath,discussion:e.discussion,"resolve-discussion":e.note.resolve_discussion},on:{handleFormUpdate:e.handleFormUpdate,cancelForm:e.formCancelHandler}}):e._e(),e._v(" "),e.canEdit?n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.note.note,expression:"note.note"}],staticClass:"hidden js-task-list-field",attrs:{"data-update-url":e.note.path,dir:"auto"},domProps:{value:e.note.note},on:{input:function(t){t.target.composing||e.$set(e.note,"note",t.target.value)}}}):e._e(),e._v(" "),e.note.last_edited_at?n("note-edited-text",{staticClass:"note_edited_ago",attrs:{"edited-at":e.note.last_edited_at,"edited-by":e.note.last_edited_by,"action-text":"Edited"}}):e._e(),e._v(" "),e.note.award_emoji&&e.note.award_emoji.length?n("note-awards-list",{attrs:{"note-id":e.note.id,"note-author-id":e.note.author.id,awards:e.note.award_emoji,"toggle-award-path":e.note.toggle_award_path,"can-award-emoji":e.note.current_user.can_award_emoji}}):e._e(),e._v(" "),e.note.attachment?n("note-attachment",{attrs:{attachment:e.note.attachment}}):e._e()],1)}),[],!1,null,null,null).exports,H=n(209),V=n(665),z=n(488),W=n(146);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){K(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var J={name:"NoteableNote",components:{userAvatarLink:p.a,noteHeader:f.a,noteActions:S,NoteBody:U,TimelineEntryItem:c.a},mixins:[V.a,z.a,{computed:{isDraft:function(){return!1},canResolve:function(){return this.note.current_user.can_resolve}}}],props:{note:{type:Object,required:!0},line:{type:Object,required:!1,default:null},helpPagePath:{type:String,required:!1,default:""},commit:{type:Object,required:!1,default:function(){return null}},showReplyButton:{type:Boolean,required:!1,default:!1}},data:function(){return{isEditing:!1,isDeleting:!1,isRequesting:!1,isResolving:!1}},computed:Y({},Object(o.d)(["targetNoteHash","getNoteableData","getUserData","commentsDisabled"]),{author:function(){return this.note.author},classNameBindings:function(){var e;return K(e={},"note-row-".concat(this.note.id),!0),K(e,"is-editing",this.isEditing&&!this.isRequesting),K(e,"is-requesting being-posted",this.isRequesting),K(e,"disabled-content",this.isDeleting),K(e,"target",this.isTarget),K(e,"is-editable",this.note.current_user.can_edit),e},canReportAsAbuse:function(){return Boolean(this.note.report_abuse_path)&&this.author.id!==this.getUserData.id},noteAnchorId:function(){return"note_".concat(this.note.id)},isTarget:function(){return this.targetNoteHash===this.noteAnchorId},discussionId:function(){return this.discussion?this.discussion.id:""},actionText:function(){if(!this.commit)return"";var e=this.commit,t=e.id,n=e.url,i='<a class="commit-sha monospace" href="'.concat(s()(n),'">').concat(Object(l.q)(t),"</a>");return Object(u.e)(Object(u.d)("MergeRequests|commented on commit %{commitLink}"),{commitLink:i},!1)}}),created:function(){var e=this;H.a.$on("enterEditMode",(function(t){t.noteId===e.note.id&&(e.isEditing=!0,e.scrollToNoteIfNeeded(r()(e.$el)))}))},mounted:function(){this.isTarget&&this.scrollToNoteIfNeeded(r()(this.$el))},methods:Y({},Object(o.c)(["deleteNote","removeNote","updateNote","toggleResolveNote","scrollToNoteIfNeeded"]),{editHandler:function(){this.isEditing=!0,this.$emit("handleEdit")},deleteHandler:function(){var e=this,t=this.note.isDraft?Object(u.a)("pending comment"):Object(u.a)("comment");if(window.confirm(Object(u.e)(Object(u.a)("Are you sure you want to delete this %{typeOfComment}?"),{typeOfComment:t}))){if(this.isDeleting=!0,this.$emit("handleDeleteNote",this.note),this.note.isDraft)return;this.deleteNote(this.note).then((function(){e.isDeleting=!1})).catch((function(){Object(d.a)(Object(u.a)("Something went wrong while deleting your note. Please try again.")),e.isDeleting=!1}))}},updateSuccess:function(){this.isEditing=!1,this.isRequesting=!1,this.oldContent=null,r()(this.$refs.noteBody.$el).renderGFM(),this.$refs.noteBody.resetAutoSave(),this.$emit("updateSuccess")},formUpdateHandler:function(e,t,n,i){var a=this;if(this.$emit("handleUpdateNote",{note:this.note,noteText:e,resolveDiscussion:i,callback:function(){return a.updateSuccess()}}),!this.isDraft){var r={endpoint:this.note.path,note:{target_type:this.getNoteableData.targetType,target_id:this.note.noteable_id,note:{note:e}}};this.isRequesting=!0,this.oldContent=this.note.note_html,this.note.note_html=s()(e),this.updateNote(r).then((function(){a.updateSuccess(),n()})).catch((function(t){t.status===W.a.GONE?(a.removeNote(a.note),a.updateSuccess(),n()):(a.isRequesting=!1,a.isEditing=!0,a.$nextTick((function(){var t=Object(u.a)("Something went wrong while editing your comment. Please try again.");Object(d.a)(t,"alert",a.$el),a.recoverNoteContent(e),n()})))}))}},formCancelHandler:function(e,t){e&&t&&!window.confirm(Object(u.a)("Are you sure you want to cancel editing this comment?"))||(this.$refs.noteBody.resetAutoSave(),this.oldContent&&(this.note.note_html=this.oldContent,this.oldContent=null),this.isEditing=!1,this.$emit("cancelForm"))},recoverNoteContent:function(e){this.note.note=e;var t=this.$refs.noteBody;t&&(t.note.note=e)}})},Q=Object(_.a)(J,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("timeline-entry-item",{staticClass:"note note-wrapper qa-noteable-note-item",class:e.classNameBindings,attrs:{id:e.noteAnchorId,"data-award-url":e.note.toggle_award_path,"data-note-id":e.note.id}},[e._m(0),e._v(" "),n("div",{staticClass:"timeline-content"},[n("div",{staticClass:"note-header"},[e._m(1),e._v(" "),n("note-actions",{attrs:{"author-id":e.author.id,"note-id":e.note.id,"note-url":e.note.noteable_note_url,"access-level":e.note.human_access,"show-reply":e.showReplyButton,"can-edit":e.note.current_user.can_edit,"can-award-emoji":e.note.current_user.can_award_emoji,"can-delete":e.note.current_user.can_edit,"can-report-as-abuse":e.canReportAsAbuse,"can-resolve":e.canResolve,"report-abuse-path":e.note.report_abuse_path,resolvable:e.note.resolvable||e.note.isDraft,"is-resolved":e.note.resolved||e.note.resolve_discussion,"is-resolving":e.isResolving,"resolved-by":e.note.resolved_by,"is-draft":e.note.isDraft,"resolve-discussion":e.note.isDraft&&e.note.resolve_discussion,"discussion-id":e.discussionId},on:{handleEdit:e.editHandler,handleDelete:e.deleteHandler,handleResolve:e.resolveHandler,startReplying:function(t){return e.$emit("startReplying")}}})],1),e._v(" "),n("div",{staticClass:"timeline-discussion-body"},[e._t("discussion-resolved-text"),e._v(" "),n("note-body",{ref:"noteBody",attrs:{note:e.note,line:e.line,"can-edit":e.note.current_user.can_edit,"is-editing":e.isEditing,"help-page-path":e.helpPagePath},on:{handleFormUpdate:e.formUpdateHandler,cancelForm:e.formCancelHandler}})],2)])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"timeline-icon"},[t("user-avatar-link",{attrs:{"link-href":this.author.path,"img-src":this.author.avatar_url,"img-alt":this.author.name,"img-size":40}},[this._t("avatar-badge",null,{slot:"avatar-badge"})],2)],1)},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("note-header",{attrs:{author:e.author,"created-at":e.note.created_at,"note-id":e.note.id}},[e._t("note-header-info",null,{slot:"note-header-info"}),e._v(" "),e.commit?n("span",{domProps:{innerHTML:e._s(e.actionText)}}):n("span",{staticClass:"d-none d-sm-inline"},[e._v("·")])],2)}],!1,null,null,null);t.a=Q.exports},667:function(e,t,n){"use strict";n(24),n(28),n(26),n(50),n(58),n(38),n(27);var i=n(0),s=n.n(i),a=n(22),r=n(553),o=n(2532),l=n(828),c=n(489),u=n(45),d=n(448),p=n(293),f=n(16),h=n(827);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v={name:"SystemNote",components:{Icon:u.a,noteHeader:c.a,TimelineEntryItem:p.a,GlButton:r.a,GlSkeletonLoading:o.a},directives:{GlTooltip:l.a},mixins:[{computed:{canSeeDescriptionVersion:function(){},canDeleteDescriptionVersion:function(){},shouldShowDescriptionVersion:function(){},descriptionVersionToggleIcon:function(){}},methods:{toggleDescriptionVersion:function(){},deleteDescriptionVersion:function(){}}},Object(d.a)()],props:{note:{type:Object,required:!0}},data:function(){return{expanded:!1}},computed:g({},Object(a.d)(["targetNoteHash","descriptionVersions"]),{},Object(a.e)(["isLoadingDescriptionVersion"]),{noteAnchorId:function(){return"note_".concat(this.note.id)},isTargetNote:function(){return this.targetNoteHash===this.noteAnchorId},iconHtml:function(){return Object(f.Q)(this.note.system_note_icon_name)},toggleIcon:function(){return this.expanded?"chevron-up":"chevron-down"},actionTextHtml:function(){return s()(this.note.note_html).unwrap().html()},hasMoreCommits:function(){return s()(this.note.note_html).filter("ul").children().length>3},descriptionVersion:function(){return this.descriptionVersions[this.note.description_version_id]}}),mounted:function(){Object(h.a)(this.$el.querySelectorAll(".gfm-merge_request"))},methods:g({},Object(a.c)(["fetchDescriptionVersion","softDeleteDescriptionVersion"]))},y=n(4),_=Object(y.a)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("timeline-entry-item",{staticClass:"note system-note note-wrapper",class:{target:e.isTargetNote,"pr-0":e.shouldShowDescriptionVersion},attrs:{id:e.noteAnchorId}},[n("div",{staticClass:"timeline-icon",domProps:{innerHTML:e._s(e.iconHtml)}}),e._v(" "),n("div",{staticClass:"timeline-content"},[n("div",{staticClass:"note-header"},[n("note-header",{attrs:{author:e.note.author,"created-at":e.note.created_at,"note-id":e.note.id}},[n("span",{domProps:{innerHTML:e._s(e.actionTextHtml)}}),e._v(" "),e.canSeeDescriptionVersion?n("template",{slot:"extra-controls"},[e._v("\n          ·\n          "),n("button",{staticClass:"btn-blank btn-link",attrs:{type:"button"},on:{click:e.toggleDescriptionVersion}},[e._v("\n            "+e._s(e.__("Compare with previous version"))+"\n            "),n("icon",{staticClass:"append-left-5",attrs:{name:e.descriptionVersionToggleIcon,size:12}})],1)]):e._e()],2)],1),e._v(" "),n("div",{staticClass:"note-body"},[n("div",{staticClass:"note-text md",class:{"system-note-commit-list":e.hasMoreCommits,"hide-shade":e.expanded},domProps:{innerHTML:e._s(e.note.note_html)}}),e._v(" "),e.hasMoreCommits?n("div",{staticClass:"flex-list"},[n("div",{staticClass:"system-note-commit-list-toggler flex-row",on:{click:function(t){e.expanded=!e.expanded}}},[n("icon",{staticClass:"append-right-5",attrs:{name:e.toggleIcon,size:8}}),e._v(" "),n("span",[e._v(e._s(e.__("Toggle commit list")))])],1)]):e._e(),e._v(" "),e.shouldShowDescriptionVersion?n("div",{staticClass:"description-version pt-2"},[e.isLoadingDescriptionVersion?n("pre",{staticClass:"loading-state"},[e._v("          "),n("gl-skeleton-loading"),e._v("\n        ")],1):n("pre",{staticClass:"wrapper mt-2",domProps:{innerHTML:e._s(e.descriptionVersion)}}),e._v(" "),e.canDeleteDescriptionVersion?n("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],ref:"deleteDescriptionVersionButton",staticClass:"btn-transparent delete-description-history",attrs:{title:e.__("Remove description history")},on:{click:e.deleteDescriptionVersion}},[n("icon",{attrs:{name:"remove"}})],1):e._e()],1):e._e()])])])}),[],!1,null,null,null);t.a=_.exports},668:function(e,t,n){"use strict";n(24),n(28),n(26),n(50),n(58),n(38),n(27);var i=n(22),s=n(293);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o={name:"PlaceholderNote",components:{userAvatarLink:n(180).a,TimelineEntryItem:s.a},props:{note:{type:Object,required:!0}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(i.d)(["getUserData"]))},l=n(4),c=Object(l.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("timeline-entry-item",{staticClass:"note note-wrapper being-posted fade-in-half"},[n("div",{staticClass:"timeline-icon"},[n("user-avatar-link",{attrs:{"link-href":e.getUserData.path,"img-src":e.getUserData.avatar_url,"img-size":40}})],1),e._v(" "),n("div",{ref:"note",staticClass:"timeline-content",class:{discussion:!e.note.individual_note}},[n("div",{staticClass:"note-header"},[n("div",{staticClass:"note-header-info"},[n("a",{attrs:{href:e.getUserData.path}},[n("span",{staticClass:"d-none d-sm-inline-block bold"},[e._v(e._s(e.getUserData.name))]),e._v(" "),n("span",{staticClass:"note-headline-light"},[e._v("@"+e._s(e.getUserData.username))])])])]),e._v(" "),n("div",{staticClass:"note-body"},[n("div",{staticClass:"note-text md"},[n("p",[e._v(e._s(e.note.body))])])])])])}),[],!1,null,null,null);t.a=c.exports},669:function(e,t,n){"use strict";var i={name:"PlaceholderSystemNote",components:{TimelineEntryItem:n(293).a},props:{note:{type:Object,required:!0}}},s=n(4),a=Object(s.a)(i,(function(){var e=this.$createElement,t=this._self._c||e;return t("timeline-entry-item",{staticClass:"note system-note being-posted fade-in-half"},[t("div",{staticClass:"timeline-content"},[t("em",[this._v(this._s(this.note.body))])])])}),[],!1,null,null,null);t.a=a.exports},670:function(e,t,n){"use strict";var i=n(301),s=n(20),a=n.n(s),r=n(1);function o(e){return'<a href="'.concat(a.a.escape(e),'" target="_blank" rel="noopener noreferrer">')}var l={components:{icon:n(45).a,GlLink:i.a},props:{isLocked:{type:Boolean,default:!1,required:!1},isConfidential:{type:Boolean,default:!1,required:!1},lockedIssueDocsPath:{type:String,required:!1,default:""},confidentialIssueDocsPath:{type:String,required:!1,default:""}},computed:{warningIcon:function(){return this.isConfidential?"eye-slash":this.isLocked?"lock":""},isLockedAndConfidential:function(){return this.isConfidential&&this.isLocked},confidentialAndLockedDiscussionText:function(){return Object(r.e)(Object(r.a)("This issue is %{confidentialLinkStart}confidential%{linkEnd} and %{lockedLinkStart}locked%{linkEnd}."),{confidentialLinkStart:o(this.confidentialIssueDocsPath),lockedLinkStart:o(this.lockedIssueDocsPath),linkEnd:"</a>"},!1)}}},c=n(4),u=Object(c.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"issuable-note-warning"},[e.isLockedAndConfidential?e._e():n("icon",{staticClass:"icon inline",attrs:{name:e.warningIcon,size:16}}),e._v(" "),e.isLockedAndConfidential?n("span",{ref:"lockedAndConfidential"},[n("span",{domProps:{innerHTML:e._s(e.confidentialAndLockedDiscussionText)}}),e._v("\n    "+e._s(e.__("People without permission will never get a notification and won't be able to comment."))+"\n  ")]):e.isConfidential?n("span",{ref:"confidential"},[e._v("\n    "+e._s(e.__("This is a confidential issue."))+"\n    "+e._s(e.__("People without permission will never get a notification."))+"\n    "),n("gl-link",{attrs:{href:e.confidentialIssueDocsPath,target:"_blank"}},[e._v("\n      "+e._s(e.__("Learn more"))+"\n    ")])],1):e.isLocked?n("span",{ref:"locked"},[e._v("\n    "+e._s(e.__("This issue is locked."))+"\n    "+e._s(e.__("Only project members can comment."))+"\n    "),n("gl-link",{attrs:{href:e.lockedIssueDocsPath,target:"_blank"}},[e._v("\n      "+e._s(e.__("Learn more"))+"\n    ")])],1):e._e()],1)}),[],!1,null,null,null);t.a=u.exports},671:function(e,t,n){"use strict";n(72),n(55),n(67);var i=n(301),s=n(45),a=n(310),r={components:{GlLink:i.a,Icon:s.a},props:{path:{type:String,required:!0},filePath:{type:String,required:!1,default:""},fileSize:{type:Number,required:!1,default:0}},computed:{fileSizeReadable:function(){return Object(a.b)(this.fileSize)},fileName:function(){return(this.filePath||this.path).split("/").pop()}}},o=n(4),l=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"file-container"},[n("div",{staticClass:"file-content"},[n("p",{staticClass:"prepend-top-10 file-info"},[e._v("\n      "+e._s(e.fileName)+"\n      "),e.fileSize>0?[e._v("\n        ("+e._s(e.fileSizeReadable)+")\n      ")]:e._e()],2),e._v(" "),n("gl-link",{staticClass:"btn btn-default",attrs:{href:e.path,rel:"nofollow",download:e.fileName,target:"_blank"}},[n("icon",{staticClass:"float-left append-right-8",attrs:{size:16,name:"download"}}),e._v("\n      "+e._s(e.__("Download"))+"\n    ")],1)],1)])}),[],!1,null,null,null);t.a=l.exports},681:function(e,t,n){(function(t){window,e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(i,s,function(t){return e[t]}.bind(null,s));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,n){var i,s,a,r,o=[].indexOf;i=function(e){return Array.prototype.slice.apply(e)},a=function(e,t){for(;e&&!e.classList.contains(t);)e=e.parentNode;return e},r=function(e,t){var n;return"function"==typeof Event?(n=new Event(e,{bubbles:!0,cancelable:!0})).detail=t:(n=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,t),n},s=function(){class e{constructor(e){this.el=e,this.container=a(this.el,"js-task-list-container"),this.field=this.container.querySelector(".js-task-list-field"),this.container.addEventListener("change",e=>{if(e.target.classList.contains("task-list-item-checkbox"))return this.updateTaskList(e.target)}),this.enable()}enable(){var e;if(this.container.querySelectorAll(".js-task-list-field").length>0)return i(this.container.querySelectorAll(".task-list-item")).forEach((function(e){return e.classList.add("enabled")})),i(this.container.querySelectorAll(".task-list-item-checkbox")).forEach((function(e){return e.disabled=!1})),this.container.classList.add("is-task-list-enabled"),e=r("tasklist:enabled"),this.container.dispatchEvent(e)}disable(){var e;return i(this.container.querySelectorAll(".task-list-item")).forEach((function(e){return e.classList.remove("enabled")})),i(this.container.querySelectorAll(".task-list-item-checkbox")).forEach((function(e){return e.disabled=!0})),this.container.classList.remove("is-task-list-enabled"),e=r("tasklist:disabled"),this.container.dispatchEvent(e)}updateTaskList(t){var n,s,a,o,l,c,u;if(a=this.container.querySelectorAll(".task-list-item-checkbox"),o=1+i(a).indexOf(t),n=r("tasklist:change",{index:o,checked:t.checked}),this.field.dispatchEvent(n),!n.defaultPrevented)return({result:u,lineNumber:l,lineSource:c}=e.updateSource(this.field.value,o,t.checked,t)),this.field.value=u,n=r("change"),this.field.dispatchEvent(n),s=r("tasklist:changed",{index:o,checked:t.checked,lineNumber:l,lineSource:c}),this.field.dispatchEvent(s)}static escapePattern(e){return e.replace(/([\[\]])/g,"\\$1").replace(/\s/,"\\s").replace("x","[xX]")}static updateSource(e,t,n,i){return i.parentElement.hasAttribute("data-sourcepos")?this._updateSourcePosition(e,i,n):this._updateSourceRegex(e,t,n)}static _updateSourcePosition(e,t,n){var i,s,a,r,o;return r=e.split("\n"),o=t.parentElement.getAttribute("data-sourcepos"),a=r[(s=parseInt(o.split(":")[0]))-1],i=n?a.replace(this.incompletePattern,this.complete):a.replace(this.completePattern,this.incomplete),r[s-1]=i,{result:r.join("\n"),lineNumber:s,lineSource:a}}static _updateSourceRegex(e,t,n){var i,s,a,r,l,c,u,d;return d=e.split("\n"),i=e.replace(/\r/g,"").replace(this.itemsInParasPattern,"").split("\n"),r=0,a=!1,{result:function(){var e,p,f;for(f=[],s=e=0,p=d.length;e<p;s=++e)l=d[s],a?l.match(this.endFencesPattern)&&(a=!1):l.match(this.startFencesPattern)?a=!0:o.call(i,l)>=0&&l.trim().match(this.itemPattern)&&(r+=1)===t&&(c=s+1,u=l,l=n?l.replace(this.incompletePattern,this.complete):l.replace(this.completePattern,this.incomplete)),f.push(l);return f}.call(this).join("\n"),lineNumber:c,lineSource:u}}}return e.incomplete="[ ]",e.complete="[x]",e.incompletePattern=RegExp(`${e.escapePattern(e.incomplete)}`),e.completePattern=RegExp(`${e.escapePattern(e.complete)}`),e.itemPattern=RegExp(`^(?:\\s*(?:>\\s*)*(?:[-+*]|(?:\\d+\\.)))\\s*(${e.escapePattern(e.complete)}|${e.escapePattern(e.incomplete)})\\s`),e.startFencesPattern=/^`{3}.*$/,e.endFencesPattern=/^`{3}$/,e.itemsInParasPattern=RegExp(`^(${e.escapePattern(e.complete)}|${e.escapePattern(e.incomplete)}).+$`,"g"),e}.call(this),void 0!==t&&(t.fn.taskList=function(e){return this.each((function(n,i){var a;if((a=t(i).data("task-list"))||(a=new s(i),t(i).data("task-list",a),e&&"enable"!==e))return a[e||"enable"]()}))}),e.exports=s}])}).call(this,n(0))},682:function(e,t,n){"use strict";n(30),n(85),n(72);var i=n(117),s=n(326),a={components:{ImageViewer:s.a},props:{newPath:{type:String,required:!0},oldPath:{type:String,required:!0},newSize:{type:Number,required:!1,default:0},oldSize:{type:Number,required:!1,default:0}}},r=n(4),o=Object(r.a)(a,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"two-up view d-flex"},[t("image-viewer",{staticClass:"wrap w-50",attrs:{path:this.oldPath,"file-size":this.oldSize,"render-info":!0,"inner-css-classes":"frame deleted"}}),this._v(" "),t("image-viewer",{staticClass:"wrap w-50",attrs:{path:this.newPath,"file-size":this.newSize,"render-info":!0,"inner-css-classes":["frame","added"]}},[this._t("image-overlay",null,{slot:"image-overlay"})],2)],1)}),[],!1,null,null,null).exports,l=n(20),c=n.n(l);function u(e){return e?"".concat(e,"px"):""}var d={components:{ImageViewer:s.a},props:{newPath:{type:String,required:!0},oldPath:{type:String,required:!0}},data:function(){return{dragging:!1,swipeOldImgInfo:null,swipeNewImgInfo:null,swipeMaxWidth:void 0,swipeMaxHeight:void 0,swipeBarPos:1,swipeWrapWidth:0}},computed:{swipeMaxPixelWidth:function(){return u(this.swipeMaxWidth)},swipeMaxPixelHeight:function(){return u(this.swipeMaxHeight)},swipeWrapPixelWidth:function(){return u(this.swipeWrapWidth)},swipeBarPixelPos:function(){return u(this.swipeBarPos)}},beforeDestroy:function(){window.removeEventListener("resize",this.resizeThrottled,!1),document.body.removeEventListener("mouseup",this.stopDrag),document.body.removeEventListener("mousemove",this.dragMove),document.body.removeEventListener("touchend",this.stopDrag),document.body.removeEventListener("touchmove",this.dragMove)},mounted:function(){window.addEventListener("resize",this.resize,!1)},methods:{dragMove:function(e){if(this.dragging){var t=(e.pageX||e.touches[0].pageX)-this.$refs.swipeFrame.getBoundingClientRect().left,n=this.$refs.swipeFrame.clientWidth;t<=0?t=0:t>n&&(t=n),this.swipeWrapWidth=t/n*100,this.swipeBarPos=t}},startDrag:function(){this.dragging=!0,document.body.addEventListener("mousemove",this.dragMove),document.body.addEventListener("touchmove",this.dragMove)},stopDrag:function(){this.dragging=!1,document.body.removeEventListener("mousemove",this.dragMove),document.body.removeEventListener("touchmove",this.dragMove)},prepareSwipe:function(){this.swipeOldImgInfo&&this.swipeNewImgInfo&&this.swipeOldImgInfo.renderedWidth>0&&(this.swipeMaxWidth=Math.max(this.swipeOldImgInfo.renderedWidth,this.swipeNewImgInfo.renderedWidth)+2,this.swipeMaxHeight=Math.max(this.swipeOldImgInfo.renderedHeight,this.swipeNewImgInfo.renderedHeight)+2,document.body.addEventListener("mouseup",this.stopDrag),document.body.addEventListener("touchend",this.stopDrag))},swipeNewImgLoaded:function(e){this.swipeNewImgInfo=e,this.prepareSwipe()},swipeOldImgLoaded:function(e){this.swipeOldImgInfo=e,this.prepareSwipe()},resize:c.a.throttle((function(){this.swipeBarPos=0,this.swipeWrapWidth=0,this.prepareSwipe()}),400)}},p=Object(r.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"swipe view"},[n("div",{ref:"swipeFrame",staticClass:"swipe-frame",style:{width:e.swipeMaxPixelWidth,height:e.swipeMaxPixelHeight,"user-select":e.dragging?"none":null}},[n("image-viewer",{key:"swipeOldImg",ref:"swipeOldImg",staticClass:"frame deleted",attrs:{"render-info":!1,path:e.oldPath},on:{imgLoaded:e.swipeOldImgLoaded}}),e._v(" "),n("div",{ref:"swipeWrap",staticClass:"swipe-wrap",style:{width:e.swipeWrapWidth+"%"}},[n("image-viewer",{key:"swipeNewImg",staticClass:"frame added",style:{width:e.swipeMaxPixelWidth},attrs:{"render-info":!1,path:e.newPath},on:{imgLoaded:e.swipeNewImgLoaded}},[e._t("image-overlay",null,{slot:"image-overlay"})],2)],1),e._v(" "),n("span",{ref:"swipeBar",staticClass:"swipe-bar",style:{left:e.swipeBarPixelPos},on:{mousedown:e.startDrag,mouseup:e.stopDrag,touchstart:e.startDrag,touchend:e.stopDrag}},[n("span",{staticClass:"top-handle"}),e._v(" "),n("span",{staticClass:"bottom-handle"})])],1)])}),[],!1,null,null,null).exports,f={components:{ImageViewer:s.a},props:{newPath:{type:String,required:!0},oldPath:{type:String,required:!0}},data:function(){return{onionMaxWidth:void 0,onionMaxHeight:void 0,onionOldImgInfo:null,onionNewImgInfo:null,onionDraggerPos:0,onionOpacity:1,dragging:!1}},computed:{onionMaxPixelWidth:function(){return u(this.onionMaxWidth)},onionMaxPixelHeight:function(){return u(this.onionMaxHeight)},onionDraggerPixelPos:function(){return u(this.onionDraggerPos)}},beforeDestroy:function(){document.body.removeEventListener("mouseup",this.stopDrag),document.body.removeEventListener("touchend",this.stopDrag),document.body.removeEventListener("mousemove",this.dragMove),document.body.removeEventListener("touchmove",this.dragMove)},methods:{dragMove:function(e){if(this.dragging){var t=(e.pageX||e.touches[0].pageX)-this.$refs.dragTrack.getBoundingClientRect().left,n=this.$refs.dragTrack.clientWidth-this.$refs.dragger.clientWidth||100,i=t;i<0&&(i=0),i>n&&(i=n),this.onionOpacity=t/n,this.onionDraggerPos=i}},startDrag:function(){this.dragging=!0,document.body.style.userSelect="none",document.body.addEventListener("mousemove",this.dragMove),document.body.addEventListener("touchmove",this.dragMove)},stopDrag:function(){this.dragging=!1,document.body.style.userSelect="",document.body.removeEventListener("mousemove",this.dragMove),document.body.removeEventListener("touchmove",this.dragMove)},prepareOnionSkin:function(){this.onionOldImgInfo&&this.onionNewImgInfo&&(this.onionMaxWidth=Math.max(this.onionOldImgInfo.renderedWidth,this.onionNewImgInfo.renderedWidth),this.onionMaxHeight=Math.max(this.onionOldImgInfo.renderedHeight,this.onionNewImgInfo.renderedHeight),this.onionOpacity=1,this.onionDraggerPos=this.$refs.dragTrack.clientWidth-this.$refs.dragger.clientWidth||100,document.body.addEventListener("mouseup",this.stopDrag),document.body.addEventListener("touchend",this.stopDrag))},onionNewImgLoaded:function(e){this.onionNewImgInfo=e,this.prepareOnionSkin()},onionOldImgLoaded:function(e){this.onionOldImgInfo=e,this.prepareOnionSkin()}}},h=Object(r.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"onion-skin view"},[n("div",{staticClass:"onion-skin-frame",style:{width:e.onionMaxPixelWidth,height:e.onionMaxPixelHeight,"user-select":e.dragging?"none":null}},[n("div",{staticClass:"frame deleted",style:{width:e.onionMaxPixelWidth,height:e.onionMaxPixelHeight}},[n("image-viewer",{key:"onionOldImg",attrs:{"render-info":!1,path:e.oldPath},on:{imgLoaded:e.onionOldImgLoaded}})],1),e._v(" "),n("div",{ref:"addedFrame",staticClass:"added frame",style:{opacity:e.onionOpacity,width:e.onionMaxPixelWidth,height:e.onionMaxPixelHeight}},[n("image-viewer",{key:"onionNewImg",attrs:{"render-info":!1,path:e.newPath},on:{imgLoaded:e.onionNewImgLoaded}},[e._t("image-overlay",null,{slot:"image-overlay"})],2)],1),e._v(" "),n("div",{staticClass:"controls"},[n("div",{staticClass:"transparent"}),e._v(" "),n("div",{ref:"dragTrack",staticClass:"drag-track",on:{mousedown:e.startDrag,mouseup:e.stopDrag,touchstart:e.startDrag,touchend:e.stopDrag}},[n("div",{ref:"dragger",staticClass:"dragger",style:{left:e.onionDraggerPixelPos}})]),e._v(" "),n("div",{staticClass:"opaque"})])])])}),[],!1,null,null,null).exports,m={replaced:"replaced",new:"new",deleted:"deleted",renamed:"renamed"},g={twoup:"twoup",swipe:"swipe",onion:"onion"},b={components:{ImageViewer:s.a},props:{diffMode:{type:String,required:!0},newPath:{type:String,required:!0},oldPath:{type:String,required:!0},newSize:{type:Number,required:!1,default:0},oldSize:{type:Number,required:!1,default:0}},data:function(){return{mode:g.twoup}},computed:{imageViewComponent:function(){switch(this.mode){case g.twoup:return o;case g.swipe:return p;case g.onion:return h;default:return}},isNew:function(){return this.diffMode===m.new},isRenamed:function(){return this.diffMode===m.renamed},imagePath:function(){return this.isNew||this.isRenamed?this.newPath:this.oldPath}},methods:{changeMode:function(e){this.mode=e}},diffModes:m,imageViewMode:g},v=Object(r.a)(b,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"diff-file-container"},[e.diffMode===e.$options.diffModes.replaced?n("div",{staticClass:"diff-viewer"},[n("div",{staticClass:"image js-replaced-image"},[n(e.imageViewComponent,e._b({tag:"component"},"component",e.$props,!1),[e._t("image-overlay",null,{slot:"image-overlay"})],2)],1),e._v(" "),n("div",{staticClass:"view-modes"},[n("ul",{staticClass:"view-modes-menu"},[n("li",{class:{active:e.mode===e.$options.imageViewMode.twoup},on:{click:function(t){return e.changeMode(e.$options.imageViewMode.twoup)}}},[e._v("\n          "+e._s(e.s__("ImageDiffViewer|2-up"))+"\n        ")]),e._v(" "),n("li",{class:{active:e.mode===e.$options.imageViewMode.swipe},on:{click:function(t){return e.changeMode(e.$options.imageViewMode.swipe)}}},[e._v("\n          "+e._s(e.s__("ImageDiffViewer|Swipe"))+"\n        ")]),e._v(" "),n("li",{class:{active:e.mode===e.$options.imageViewMode.onion},on:{click:function(t){return e.changeMode(e.$options.imageViewMode.onion)}}},[e._v("\n          "+e._s(e.s__("ImageDiffViewer|Onion skin"))+"\n        ")])])])]):n("div",{staticClass:"diff-viewer"},[n("div",{staticClass:"image"},[n("image-viewer",{attrs:{path:e.imagePath,"file-size":e.isNew?e.newSize:e.oldSize,"inner-css-classes":["frame",{added:e.isNew,deleted:e.diffMode===e.$options.diffModes.deleted}]}},[e.isNew||e.isRenamed?e._t("image-overlay",null,{slot:"image-overlay"}):e._e()],2)],1)])])}),[],!1,null,null,null).exports,y={components:{DownloadViewer:n(671).a},props:{diffMode:{type:String,required:!0},newPath:{type:String,required:!0},oldPath:{type:String,required:!0},projectPath:{type:String,required:!1,default:""}},diffModes:m},_=Object(r.a)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"diff-file-container"},[n("div",{staticClass:"diff-viewer"},[e.diffMode===e.$options.diffModes.replaced?n("div",{staticClass:"two-up view row"},[n("div",{staticClass:"col-sm-6 deleted"},[n("download-viewer",{attrs:{path:e.oldPath,"project-path":e.projectPath}})],1),e._v(" "),n("div",{staticClass:"col-sm-6 added"},[n("download-viewer",{attrs:{path:e.newPath,"project-path":e.projectPath}})],1)]):e.diffMode===e.$options.diffModes.new?n("div",{staticClass:"added"},[n("download-viewer",{attrs:{path:e.newPath,"project-path":e.projectPath}})],1):n("div",{staticClass:"deleted"},[n("download-viewer",{attrs:{path:e.oldPath,"project-path":e.projectPath}})],1)])])}),[],!1,null,null,null).exports,w=Object(r.a)({},(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"nothing-here-block"},[this._v(this._s(this.__("File moved")))])}),[],!1,null,null,null).exports,k=n(1),j={props:{aMode:{type:String,required:!1,default:null},bMode:{type:String,required:!1,default:null}},computed:{outputText:function(){return Object(k.e)(Object(k.a)("File mode changed from %{a_mode} to %{b_mode}"),{a_mode:this.aMode,b_mode:this.bMode})}}},O=Object(r.a)(j,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"nothing-here-block"},[this._v(this._s(this.outputText))])}),[],!1,null,null,null).exports,S={props:{diffMode:{type:String,required:!0},diffViewerMode:{type:String,required:!0},newPath:{type:String,required:!0},newSha:{type:String,required:!0},newSize:{type:Number,required:!1,default:0},oldPath:{type:String,required:!0},oldSha:{type:String,required:!0},oldSize:{type:Number,required:!1,default:0},projectPath:{type:String,required:!1,default:""},aMode:{type:String,required:!1,default:null},bMode:{type:String,required:!1,default:null}},computed:{viewer:function(){if(this.diffViewerMode===i.l.renamed)return w;if(this.diffMode===i.j.mode_changed)return O;if(!this.newPath)return null;switch(this.diffViewerMode){case i.l.image:return v;default:return _}},basePath:function(){return 0===this.projectPath.indexOf("/")?"":"".concat(gon.relative_url_root,"/")},fullOldPath:function(){return"".concat(this.basePath).concat(this.projectPath,"/-/raw/").concat(this.oldSha,"/").concat(this.oldPath)},fullNewPath:function(){return"".concat(this.basePath).concat(this.projectPath,"/-/raw/").concat(this.newSha,"/").concat(this.newPath)}}},C=Object(r.a)(S,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.viewer?n("div",{staticClass:"diff-file preview-container"},[n(e.viewer,{tag:"component",attrs:{"diff-mode":e.diffMode,"new-path":e.fullNewPath,"old-path":e.fullOldPath,"old-size":e.oldSize,"new-size":e.newSize,"project-path":e.projectPath,"a-mode":e.aMode,"b-mode":e.bMode}},[e._t("image-overlay",null,{slot:"image-overlay"})],2),e._v(" "),e._t("default")],2):e._e()}),[],!1,null,null,null);t.a=C.exports},699:function(e,t,n){"use strict";t.a={computed:{draftForDiscussion:function(){return function(){return{}}}},methods:{showDraft:function(){return!1},addReplyToReview:function(){},addToReview:function(){}}}},70:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n(24),n(49),n(56),n(40),n(90),n(18),n(36),n(41);var i=n(8),s=n.n(i),a=n(9);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=o(this,l(t).call(this)),s.a.bind("g p",(function(){return Object(a.a)(".shortcuts-project")})),s.a.bind("g v",(function(){return Object(a.a)(".shortcuts-project-activity")})),s.a.bind("g r",(function(){return Object(a.a)(".shortcuts-project-releases")})),s.a.bind("g f",(function(){return Object(a.a)(".shortcuts-tree")})),s.a.bind("g c",(function(){return Object(a.a)(".shortcuts-commits")})),s.a.bind("g j",(function(){return Object(a.a)(".shortcuts-builds")})),s.a.bind("g n",(function(){return Object(a.a)(".shortcuts-network")})),s.a.bind("g d",(function(){return Object(a.a)(".shortcuts-repository-charts")})),s.a.bind("g i",(function(){return Object(a.a)(".shortcuts-issues")})),s.a.bind("g b",(function(){return Object(a.a)(".shortcuts-issue-boards")})),s.a.bind("g m",(function(){return Object(a.a)(".shortcuts-merge_requests")})),s.a.bind("g w",(function(){return Object(a.a)(".shortcuts-wiki")})),s.a.bind("g s",(function(){return Object(a.a)(".shortcuts-snippets")})),s.a.bind("g k",(function(){return Object(a.a)(".shortcuts-kubernetes")})),s.a.bind("g e",(function(){return Object(a.a)(".shortcuts-environments")})),s.a.bind("g l",(function(){return Object(a.a)(".shortcuts-metrics")})),s.a.bind("i",(function(){return Object(a.a)(".shortcuts-new-issue")})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),t}(n(107).a)},700:function(e,t,n){"use strict";n(24),n(28),n(26),n(50),n(58),n(38),n(27);var i=n(22),s=n(16),a=n(209);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){var t=document.querySelector(e);return!!t&&(Object(s.N)(t),!0)}function u(e,t){var n=e.expandDiscussion,i='div.discussion[data-discussion-id="'.concat(t,'"]');return n({discussionId:t}),c(i)}function d(e,t){var n=t.id,i=t.diff_discussion;if(n){var s=window.mrTabs.currentAction;"diffs"===s&&i?function(e,t){var n=e.expandDiscussion,i='ul.notes[data-discussion-id="'.concat(t,'"]');a.a.$once("scrollToDiscussion",(function(){return c(i)})),n({discussionId:t})}(e,n):"show"===s?u(e,n):function(e,t){window.mrTabs.eventHub.$once("MergeRequestTabChange",(function(){setTimeout((function(){return u(e,t)}),0)})),window.mrTabs.tabShown("show")}(e,n)}}function p(e,t){var n=t(arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.currentDiscussionId,"diffs"===window.mrTabs.currentAction),i=e.getDiscussion(n);d(e,i),e.setCurrentDiscussionId(n)}t.a={computed:o({},Object(i.d)(["nextUnresolvedDiscussionId","previousUnresolvedDiscussionId","getDiscussion"]),{},Object(i.e)({currentDiscussionId:function(e){return e.notes.currentDiscussionId}})),methods:o({},Object(i.c)(["expandDiscussion","setCurrentDiscussionId"]),{jumpToNextDiscussion:function(){p(this,this.nextUnresolvedDiscussionId)},jumpToPreviousDiscussion:function(){p(this,this.previousUnresolvedDiscussionId)},jumpToNextRelativeDiscussion:function(e){p(this,this.nextUnresolvedDiscussionId,e)}})}},716:function(e,t,n){"use strict";var i=n(63),s=n(79),a=n(142),r=n(181),o=n(37),l=i.a.extend({name:"BProgressBar",mixins:[a.a],inject:{bvProgress:{default:function(){return{}}}},props:{value:{type:Number,default:0},label:{type:String,default:null},labelHtml:{type:String},max:{type:Number,default:null},precision:{type:Number,default:null},variant:{type:String,default:function(){return Object(s.b)("BProgressBar","variant")}},striped:{type:Boolean,default:null},animated:{type:Boolean,default:null},showProgress:{type:Boolean,default:null},showValue:{type:Boolean,default:null}},computed:{progressBarClasses:function(){return[this.computedVariant?"bg-".concat(this.computedVariant):"",this.computedStriped||this.computedAnimated?"progress-bar-striped":"",this.computedAnimated?"progress-bar-animated":""]},progressBarStyles:function(){return{width:this.value/this.computedMax*100+"%"}},computedProgress:function(){var e=Math.pow(10,this.computedPrecision);return Math.round(100*e*this.value/this.computedMax)/e},computedMax:function(){return Object(o.f)(this.max)?this.max:this.bvProgress.max||100},computedVariant:function(){return this.variant||this.bvProgress.variant},computedPrecision:function(){return Object(o.f)(this.precision)?this.precision:this.bvProgress.precision||0},computedStriped:function(){return Object(o.a)(this.striped)?this.striped:this.bvProgress.striped||!1},computedAnimated:function(){return Object(o.a)(this.animated)?this.animated:this.bvProgress.animated||!1},computedShowProgress:function(){return Object(o.a)(this.showProgress)?this.showProgress:this.bvProgress.showProgress||!1},computedShowValue:function(){return Object(o.a)(this.showValue)?this.showValue:this.bvProgress.showValue||!1}},render:function(e){var t=e();return this.hasNormalizedSlot("default")?t=this.normalizeSlot("default"):this.label||this.labelHtml?t=e("span",{domProps:Object(r.a)(this.labelHtml,this.label)}):this.computedShowProgress?t=this.computedProgress.toFixed(this.computedPrecision):this.computedShowValue&&(t=this.value.toFixed(this.computedPrecision)),e("div",{staticClass:"progress-bar",class:this.progressBarClasses,style:this.progressBarStyles,attrs:{role:"progressbar","aria-valuemin":"0","aria-valuemax":this.computedMax.toString(),"aria-valuenow":this.value.toFixed(this.computedPrecision)}},[t])}}),c=i.a.extend({name:"BProgress",mixins:[a.a],provide:function(){return{bvProgress:this}},props:{variant:{type:String,default:function(){return Object(s.b)("BProgress","variant")}},striped:{type:Boolean,default:!1},animated:{type:Boolean,default:!1},height:{type:String,default:null},precision:{type:Number,default:0},showProgress:{type:Boolean,default:!1},showValue:{type:Boolean,default:!1},max:{type:Number,default:100},value:{type:Number,default:0}},computed:{progressHeight:function(){return{height:this.height||null}}},render:function(e){var t=this.normalizeSlot("default");return t||(t=e(l,{props:{value:this.value,max:this.max,precision:this.precision,variant:this.variant,animated:this.animated,striped:this.striped,showProgress:this.showProgress,showValue:this.showValue}})),e("div",{class:["progress"],style:this.progressHeight},[t])}}),u=n(60);const d={components:{BProgress:c}};const p=n.n(u)()({render:function(){var e=this.$createElement;return(this._self._c||e)("b-progress",this._b({},"b-progress",this.$attrs,!1))},staticRenderFns:[]},void 0,d,void 0,!1,void 0,!1,void 0,void 0,void 0);t.a=p},723:function(e,t,n){var i=n(420),s=n(984),a=n(476),r=n(985),o=a((function(e){var t=i(e,r);return t.length&&t[0]===e[0]?s(t):[]}));e.exports=o},724:function(e,t,n){"use strict";var i=n(292),s=n(291),a=n(533),r=n(376),o=n(275);t.a=function(){var e=JSON.parse(document.querySelector(".js-sidebar-options").innerHTML);new i.a({full_path:e.fullPath}),new s.a,new a.a(e.currentUser),new o.a,r.a.initialize()}},725:function(e,t,n){"use strict";var i=n(526),s=n(0),a=n.n(s),r=n(17),o=(n(38),n(723)),l=n.n(o),c=(n(746),n(485)),u=n(346),d=n(135),p={components:{IssuableTimeTracker:c.a},data:function(){return{mediator:new i.a,store:new u.a}},mounted:function(){this.listenForQuickActions()},methods:{listenForQuickActions:function(){var e=this;a()(document).on("ajax:success",".gfm-form",this.quickActionListened),d.a.$on("timeTrackingUpdated",(function(t){e.quickActionListened(null,t)}))},quickActionListened:function(e,t){var n;(n=void 0!==t&&t.commands_changes?Object.keys(t.commands_changes):[])&&l()(["spend_time","time_estimate"],n).length&&this.mediator.fetch()}}},f=n(4),h=Object(f.a)(p,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"block"},[t("issuable-time-tracker",{attrs:{"time-estimate":this.store.timeEstimate,"time-spent":this.store.totalTimeSpent,"human-time-estimate":this.store.humanTimeEstimate,"human-time-spent":this.store.humanTotalTimeSpent,"limit-to-hours":this.store.timeTrackingLimitToHours,"root-path":this.store.rootPath}})],1)}),[],!1,null,null,null).exports,m=n(14),g=n(472),b=n(536),v=n(534),y=n(1),_={name:"SidebarAssignees",components:{AssigneeTitle:b.a,Assignees:v.a},props:{mediator:{type:Object,required:!0},field:{type:String,required:!0},signedIn:{type:Boolean,required:!1,default:!1},issuableType:{type:String,required:!1,default:"issue"}},data:function(){return{store:new u.a,loading:!1}},created:function(){this.removeAssignee=this.store.removeAssignee.bind(this.store),this.addAssignee=this.store.addAssignee.bind(this.store),this.removeAllAssignees=this.store.removeAllAssignees.bind(this.store),d.a.$on("sidebar.removeAssignee",this.removeAssignee),d.a.$on("sidebar.addAssignee",this.addAssignee),d.a.$on("sidebar.removeAllAssignees",this.removeAllAssignees),d.a.$on("sidebar.saveAssignees",this.saveAssignees)},beforeDestroy:function(){d.a.$off("sidebar.removeAssignee",this.removeAssignee),d.a.$off("sidebar.addAssignee",this.addAssignee),d.a.$off("sidebar.removeAllAssignees",this.removeAllAssignees),d.a.$off("sidebar.saveAssignees",this.saveAssignees)},methods:{assignSelf:function(){this.$el.parentElement.dispatchEvent(new Event("assignYourself")),this.mediator.assignYourself(),this.saveAssignees()},saveAssignees:function(){var e=this;this.loading=!0,this.mediator.saveAssignees(this.field).then((function(){e.loading=!1,Object(g.b)()})).catch((function(){return e.loading=!1,new m.a(Object(y.a)("Error occurred when saving assignees"))}))}}},w=Object(f.a)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("assignee-title",{attrs:{"number-of-assignees":e.store.assignees.length,loading:e.loading||e.store.isFetching.assignees,editable:e.store.editable,"show-toggle":!e.signedIn}}),e._v(" "),e.store.isFetching.assignees?e._e():n("assignees",{staticClass:"value",attrs:{"root-path":e.store.rootPath,users:e.store.assignees,editable:e.store.editable,"issuable-type":e.issuableType},on:{"assign-self":e.assignSelf}})],1)}),[],!1,null,null,null).exports,k=(n(35),n(99)),j=n(45),O={props:{isConfidential:{required:!0,type:Boolean},updateConfidentialAttribute:{required:!0,type:Function}},computed:{toggleButtonText:function(){return this.isConfidential?Object(y.a)("Turn Off"):Object(y.a)("Turn On")},updateConfidentialBool:function(){return!this.isConfidential}},methods:{closeForm:function(){d.a.$emit("closeConfidentialityForm"),a()(this.$el).trigger("hidden.gl.dropdown")},submitForm:function(){this.closeForm(),this.updateConfidentialAttribute(this.updateConfidentialBool)}}},S={components:{editFormButtons:Object(f.a)(O,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sidebar-item-warning-message-actions"},[n("button",{staticClass:"btn btn-default append-right-10",attrs:{type:"button"},on:{click:e.closeForm}},[e._v("\n    "+e._s(e.__("Cancel"))+"\n  ")]),e._v(" "),n("button",{staticClass:"btn btn-close",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.submitForm(t)}}},[e._v("\n    "+e._s(e.toggleButtonText)+"\n  ")])])}),[],!1,null,null,null).exports},props:{isConfidential:{required:!0,type:Boolean},updateConfidentialAttribute:{required:!0,type:Function}},computed:{confidentialityOnWarning:function(){return Object(y.d)("confidentiality|You are going to turn on the confidentiality. This means that only team members with <strong>at least Reporter access</strong> are able to see and leave comments on the issue.")},confidentialityOffWarning:function(){return Object(y.d)("confidentiality|You are going to turn off the confidentiality. This means <strong>everyone</strong> will be able to see and leave a comment on this issue.")}}},C=Object(f.a)(S,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dropdown show"},[n("div",{staticClass:"dropdown-menu sidebar-item-warning-message"},[n("div",[e.isConfidential?n("p",{domProps:{innerHTML:e._s(e.confidentialityOffWarning)}}):n("p",{domProps:{innerHTML:e._s(e.confidentialityOnWarning)}}),e._v(" "),n("edit-form-buttons",{attrs:{"is-confidential":e.isConfidential,"update-confidential-attribute":e.updateConfidentialAttribute}})],1)])])}),[],!1,null,null,null).exports,D=n(512),T={components:{editForm:C,Icon:j.a},directives:{tooltip:k.a},mixins:[D.a],props:{isConfidential:{required:!0,type:Boolean},isEditable:{required:!0,type:Boolean},service:{required:!0,type:Object}},data:function(){return{edit:!1}},computed:{confidentialityIcon:function(){return this.isConfidential?"eye-slash":"eye"},tooltipLabel:function(){return this.isConfidential?Object(y.a)("Confidential"):Object(y.a)("Not confidential")}},created:function(){d.a.$on("closeConfidentialityForm",this.toggleForm)},beforeDestroy:function(){d.a.$off("closeConfidentialityForm",this.toggleForm)},methods:{toggleForm:function(){this.edit=!this.edit},updateConfidentialAttribute:function(e){var t=this;this.service.update("issue",{confidential:e}).then((function(e){var n=e.data;return t.checkForSpam(n)})).then((function(){return window.location.reload()})).catch((function(e){"SpamError"===e.name?t.openRecaptcha():Object(m.a)(Object(y.a)("Something went wrong trying to change the confidentiality of this issue"))}))}}},E=Object(f.a)(T,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"block issuable-sidebar-item confidentiality"},[n("div",{directives:[{name:"tooltip",rawName:"v-tooltip"}],ref:"collapseIcon",staticClass:"sidebar-collapsed-icon",attrs:{title:e.tooltipLabel,"data-container":"body","data-placement":"left","data-boundary":"viewport"},on:{click:e.toggleForm}},[n("icon",{attrs:{name:e.confidentialityIcon,"aria-hidden":"true"}})],1),e._v(" "),n("div",{staticClass:"title hide-collapsed"},[e._v("\n    "+e._s(e.__("Confidentiality"))+"\n    "),e.isEditable?n("a",{ref:"editLink",staticClass:"float-right confidential-edit",attrs:{href:"#","data-track-event":"click_edit_button","data-track-label":"right_sidebar","data-track-property":"confidentiality"},on:{click:function(t){return t.preventDefault(),e.toggleForm(t)}}},[e._v("\n      "+e._s(e.__("Edit"))+"\n    ")]):e._e()]),e._v(" "),n("div",{staticClass:"value sidebar-item-value hide-collapsed"},[e.edit?n("editForm",{attrs:{"is-confidential":e.isConfidential,"update-confidential-attribute":e.updateConfidentialAttribute}}):e._e(),e._v(" "),e.isConfidential?n("div",{staticClass:"value sidebar-item-value hide-collapsed"},[n("icon",{staticClass:"sidebar-item-icon inline is-active",attrs:{size:16,name:"eye-slash","aria-hidden":"true"}}),e._v("\n      "+e._s(e.__("This issue is confidential"))+"\n    ")],1):n("div",{staticClass:"no-value sidebar-item-value"},[n("icon",{staticClass:"sidebar-item-icon inline",attrs:{size:16,name:"eye","aria-hidden":"true"}}),e._v("\n      "+e._s(e.__("Not confidential"))+"\n    ")],1)],1),e._v(" "),e.showRecaptcha?n("recaptcha-modal",{attrs:{html:e.recaptchaHTML},on:{close:e.closeRecaptcha}}):e._e()],1)}),[],!1,null,null,null).exports,x=n(93),P=n.n(x);n(321);function I(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function L(e){return e>0}var A=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mediator=t,this.$dropdownToggle=a()(n),this.$confirmButton=a()(i),this.onConfirmClickedWrapper=this.onConfirmClicked.bind(this)}var t,n,i;return t=e,(n=[{key:"init",value:function(){this.initDropdown(),this.addEventListeners()}},{key:"destroy",value:function(){this.removeEventListeners()}},{key:"initDropdown",value:function(){var e=this;this.$dropdownToggle.glDropdown({search:{fields:["name_with_namespace"]},showMenuAbove:!0,selectable:!0,filterable:!0,filterRemote:!0,multiSelect:!1,shouldPropagate:!1,data:function(t,n){e.mediator.fetchAutocompleteProjects(t).then(n).catch((function(){return new window.Flash(Object(y.a)("An error occurred while fetching projects autocomplete."))}))},renderRow:function(e){return'\n        <li>\n          <a href="#" class="js-move-issue-dropdown-item">\n            '.concat(P()(e.name_with_namespace),"\n          </a>\n        </li>\n      ")},clicked:function(t){var n=t.selectedObj,i=t.isMarking?n.id:0;e.mediator.setMoveToProjectId(i),e.$confirmButton.prop("disabled",!L(i))}})}},{key:"addEventListeners",value:function(){this.$confirmButton.on("click",this.onConfirmClickedWrapper)}},{key:"removeEventListeners",value:function(){this.$confirmButton.off("click",this.onConfirmClickedWrapper)}},{key:"onConfirmClicked",value:function(){var e=this;L(this.mediator.store.moveToProjectId)&&(this.$confirmButton.disable().addClass("is-loading"),this.mediator.moveIssue().catch((function(){window.Flash(Object(y.a)("An error occurred while moving the issue.")),e.$confirmButton.enable().removeClass("is-loading")})))}}])&&I(t.prototype,n),i&&I(t,i),e}(),N=n(434),q={props:{isLocked:{required:!0,type:Boolean},updateLockedAttribute:{required:!0,type:Function}},computed:{buttonText:function(){return this.isLocked?Object(y.a)("Unlock"):Object(y.a)("Lock")},toggleLock:function(){return!this.isLocked}},methods:{closeForm:function(){d.a.$emit("closeLockForm"),a()(this.$el).trigger("hidden.gl.dropdown")},submitForm:function(){this.closeForm(),this.updateLockedAttribute(this.toggleLock)}}},R={components:{editFormButtons:Object(f.a)(q,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sidebar-item-warning-message-actions"},[n("button",{staticClass:"btn btn-default append-right-10",attrs:{type:"button"},on:{click:e.closeForm}},[e._v("\n    "+e._s(e.__("Cancel"))+"\n  ")]),e._v(" "),n("button",{staticClass:"btn btn-close",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.submitForm(t)}}},[e._v("\n    "+e._s(e.buttonText)+"\n  ")])])}),[],!1,null,null,null).exports},mixins:[N.a],props:{isLocked:{required:!0,type:Boolean},updateLockedAttribute:{required:!0,type:Function}},computed:{lockWarning:function(){return Object(y.e)(Object(y.a)("Lock this %{issuableDisplayName}? Only <strong>project members</strong> will be able to comment."),{issuableDisplayName:this.issuableDisplayName})},unlockWarning:function(){return Object(y.e)(Object(y.a)("Unlock this %{issuableDisplayName}? <strong>Everyone</strong> will be able to comment."),{issuableDisplayName:this.issuableDisplayName})}}},B={components:{editForm:Object(f.a)(R,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dropdown show"},[n("div",{staticClass:"dropdown-menu sidebar-item-warning-message"},[e.isLocked?n("p",{staticClass:"text",domProps:{innerHTML:e._s(e.unlockWarning)}}):n("p",{staticClass:"text",domProps:{innerHTML:e._s(e.lockWarning)}}),e._v(" "),n("edit-form-buttons",{attrs:{"is-locked":e.isLocked,"update-locked-attribute":e.updateLockedAttribute}})],1)])}),[],!1,null,null,null).exports,Icon:j.a},directives:{tooltip:k.a},mixins:[N.a],props:{isLocked:{required:!0,type:Boolean},isEditable:{required:!0,type:Boolean},mediator:{required:!0,type:Object,validator:function(e){return e.service&&e.service.update&&e.store}}},computed:{lockIcon:function(){return this.isLocked?"lock":"lock-open"},isLockDialogOpen:function(){return this.mediator.store.isLockDialogOpen},tooltipLabel:function(){return this.isLocked?Object(y.a)("Locked"):Object(y.a)("Unlocked")}},created:function(){d.a.$on("closeLockForm",this.toggleForm)},beforeDestroy:function(){d.a.$off("closeLockForm",this.toggleForm)},methods:{toggleForm:function(){this.isEditable&&(this.mediator.store.isLockDialogOpen=!this.mediator.store.isLockDialogOpen)},updateLockedAttribute:function(e){var t=this;this.mediator.service.update(this.issuableType,{discussion_locked:e}).then((function(){return window.location.reload()})).catch((function(){return Object(m.a)(Object(y.e)(Object(y.a)("Something went wrong trying to change the locked state of this %{issuableDisplayName}"),{issuableDisplayName:t.issuableDisplayName}))}))}}},M=Object(f.a)(B,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"block issuable-sidebar-item lock"},[n("div",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"sidebar-collapsed-icon",attrs:{title:e.tooltipLabel,"data-container":"body","data-placement":"left","data-boundary":"viewport"},on:{click:e.toggleForm}},[n("icon",{staticClass:"sidebar-item-icon is-active",attrs:{name:e.lockIcon}})],1),e._v(" "),n("div",{staticClass:"title hide-collapsed"},[e._v("\n    "+e._s(e.sprintf(e.__("Lock %{issuableDisplayName}"),{issuableDisplayName:e.issuableDisplayName}))+"\n    "),e.isEditable?n("button",{staticClass:"float-right lock-edit",attrs:{type:"button","data-track-event":"click_edit_button","data-track-label":"right_sidebar","data-track-property":"lock_issue"},on:{click:function(t){return t.preventDefault(),e.toggleForm(t)}}},[e._v("\n      "+e._s(e.__("Edit"))+"\n    ")]):e._e()]),e._v(" "),n("div",{staticClass:"value sidebar-item-value hide-collapsed"},[e.isLockDialogOpen?n("edit-form",{attrs:{"is-locked":e.isLocked,"update-locked-attribute":e.updateLockedAttribute,"issuable-type":e.issuableType}}):e._e(),e._v(" "),e.isLocked?n("div",{staticClass:"value sidebar-item-value"},[n("icon",{staticClass:"sidebar-item-icon inline is-active",attrs:{size:16,name:"lock"}}),e._v("\n      "+e._s(e.__("Locked"))+"\n    ")],1):n("div",{staticClass:"no-value sidebar-item-value hide-collapsed"},[n("icon",{staticClass:"sidebar-item-icon inline",attrs:{size:16,name:"lock-open"}}),e._v(" "+e._s(e.__("Unlocked"))+"\n    ")],1)],1)])}),[],!1,null,null,null).exports,F=(n(69),n(72),n(760)),$=n(236),U={directives:{tooltip:k.a},components:{userAvatarImage:$.a,GlLoadingIcon:F.a},props:{loading:{type:Boolean,required:!1,default:!1},participants:{type:Array,required:!1,default:function(){return[]}},numberOfLessParticipants:{type:Number,required:!1,default:7},showParticipantLabel:{type:Boolean,required:!1,default:!0}},data:function(){return{isShowingMoreParticipants:!1}},computed:{lessParticipants:function(){return this.participants.slice(0,this.numberOfLessParticipants)},visibleParticipants:function(){return this.isShowingMoreParticipants?this.participants:this.lessParticipants},hasMoreParticipants:function(){return this.participants.length>this.numberOfLessParticipants},toggleLabel:function(){return this.isShowingMoreParticipants?Object(y.a)("- show less"):Object(y.e)(Object(y.a)("+ %{moreCount} more"),{moreCount:this.participants.length-this.numberOfLessParticipants})},participantLabel:function(){return Object(y.e)(Object(y.c)("%{count} participant","%{count} participants",this.participants.length),{count:this.loading?"":this.participantCount})},participantCount:function(){return this.participants.length}},methods:{toggleMoreParticipants:function(){this.isShowingMoreParticipants=!this.isShowingMoreParticipants},onClickCollapsedIcon:function(){this.$emit("toggleSidebar")}}},H={components:{participants:Object(f.a)(U,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.showParticipantLabel?n("div",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"sidebar-collapsed-icon",attrs:{title:e.participantLabel,"data-container":"body","data-placement":"left","data-boundary":"viewport"},on:{click:e.onClickCollapsedIcon}},[n("i",{staticClass:"fa fa-users",attrs:{"aria-hidden":"true"}}),e._v(" "),e.loading?n("gl-loading-icon",{staticClass:"js-participants-collapsed-loading-icon"}):n("span",{staticClass:"js-participants-collapsed-count"},[e._v(" "+e._s(e.participantCount)+" ")])],1):e._e(),e._v(" "),e.showParticipantLabel?n("div",{staticClass:"title hide-collapsed"},[e.loading?n("gl-loading-icon",{staticClass:"js-participants-expanded-loading-icon",attrs:{inline:!0}}):e._e(),e._v("\n    "+e._s(e.participantLabel)+"\n  ")],1):e._e(),e._v(" "),n("div",{staticClass:"participants-list hide-collapsed"},e._l(e.visibleParticipants,(function(e){return n("div",{key:e.id,staticClass:"participants-author js-participants-author"},[n("a",{staticClass:"author-link",attrs:{href:e.web_url}},[n("user-avatar-image",{attrs:{lazy:!0,"img-src":e.avatar_url,size:24,"tooltip-text":e.name,"css-classes":"avatar-inline","tooltip-placement":"bottom"}})],1)])})),0),e._v(" "),e.hasMoreParticipants?n("div",{staticClass:"participants-more hide-collapsed"},[n("button",{staticClass:"btn-transparent btn-blank js-toggle-participants-button",attrs:{type:"button"},on:{click:e.toggleMoreParticipants}},[e._v("\n      "+e._s(e.toggleLabel)+"\n    ")])]):e._e()])}),[],!1,null,null,null).exports},props:{mediator:{type:Object,required:!0}},data:function(){return{store:new u.a}}},V=Object(f.a)(H,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"block participants"},[t("participants",{attrs:{loading:this.store.isFetching.participants,participants:this.store.participants,"number-of-less-participants":7}})],1)}),[],!1,null,null,null).exports,z={components:{subscriptions:n(537).a},props:{mediator:{type:Object,required:!0}},data:function(){return{store:new u.a}},methods:{onToggleSubscription:function(){this.mediator.toggleSubscription().catch((function(){Object(m.a)(Object(y.a)("Error occurred when toggling the notification subscription"))}))}}},W=Object(f.a)(z,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"block subscriptions"},[t("subscriptions",{attrs:{loading:this.store.isFetching.subscriptions,"project-emails-disabled":this.store.projectEmailsDisabled,"subscribe-disabled-description":this.store.subscribeDisabledDescription,subscribed:this.store.subscribed},on:{toggleSubscription:this.onToggleSubscription}})],1)}),[],!1,null,null,null).exports,G=n(177);function Y(e){var t;!function(e){var t=document.getElementById("js-vue-sidebar-assignees");t&&new r.default({el:t,components:{SidebarAssignees:w},render:function(n){return n("sidebar-assignees",{props:{mediator:e,field:t.dataset.field,signedIn:t.hasAttribute("data-signed-in"),issuableType:gl.utils.isInIssuePage()?"issue":"merge_request"}})}})}(e),function(e){var t=document.getElementById("js-confidential-entry-point");if(t){var n=document.getElementById("js-confidential-issue-data"),i=JSON.parse(n.innerHTML);new(r.default.extend(E))({propsData:{isConfidential:i.is_confidential,isEditable:i.is_editable,service:e.service}}).$mount(t)}}(e),function(e){var t=document.getElementById("js-lock-entry-point");if(t){var n=document.getElementById("js-lock-issue-data"),i=JSON.parse(n.innerHTML);new(r.default.extend(M))({propsData:{isLocked:i.is_locked,isEditable:i.is_editable,mediator:e,issuableType:gl.utils.isInIssuePage()?"issue":"merge_request"}}).$mount(t)}}(e),function(e){var t=document.querySelector(".js-sidebar-participants-entry-point");t&&new r.default({el:t,components:{sidebarParticipants:V},render:function(t){return t("sidebar-participants",{props:{mediator:e}})}})}(e),function(e){var t=document.querySelector(".js-sidebar-subscriptions-entry-point");t&&new r.default({el:t,components:{sidebarSubscriptions:W},render:function(t){return t("sidebar-subscriptions",{props:{mediator:e}})}})}(e),new A(e,a()(".js-move-issue"),a()(".js-move-issue-confirmation-button")).init(),(t=document.getElementById("issuable-time-tracker"))&&new r.default({el:t,components:{SidebarTimeTracking:h},render:function(e){return e("sidebar-time-tracking",{})}})}r.default.use(G.a);t.a=function(){var e=new i.a(JSON.parse(document.querySelector(".js-sidebar-options").innerHTML));e.fetch(),Y(e)}},727:function(e,t,n){"use strict";var i={};n.r(i),n.d(i,"setStatus",(function(){return m})),n.d(i,"updateStatus",(function(){return g})),n.d(i,"updateResolveStatus",(function(){return b})),n.d(i,"updateIgnoreStatus",(function(){return v})),n.d(i,"default",(function(){return y}));var s={};n.r(s),n.d(s,"startPolling",(function(){return P})),n.d(s,"stopPolling",(function(){return I})),n.d(s,"restartPolling",(function(){return L})),n.d(s,"setIndexPath",(function(){return A})),n.d(s,"loadRecentSearches",(function(){return N})),n.d(s,"addRecentSearch",(function(){return q})),n.d(s,"clearRecentSearches",(function(){return R})),n.d(s,"searchByQuery",(function(){return M})),n.d(s,"filterByStatus",(function(){return F})),n.d(s,"sortByField",(function(){return $})),n.d(s,"setEndpoint",(function(){return U})),n.d(s,"fetchPaginatedResults",(function(){return H})),n.d(s,"removeIgnoredResolvedErrors",(function(){return V})),n.d(s,"default",(function(){return z}));var a={};n.r(a),n.d(a,"startPollingStacktrace",(function(){return ee})),n.d(a,"default",(function(){return ne}));var r={};n.r(r),n.d(r,"stacktrace",(function(){return ae})),n.d(r,"default",(function(){return re}));n(24),n(28),n(26),n(50),n(58),n(38),n(27);var o,l=n(17),c=n(22),u=(n(18),n(64),n(320),n(11)),d={getSentryData:function(e){var t=e.endpoint,n=e.params;return u.a.get(t,{params:n})},updateErrorStatus:function(e,t){return u.a.put(e,{status:t})}},p=n(14),f=n(33),h=n(1),m=function(e,t){(0,e.commit)("SET_ERROR_STATUS",t.toLowerCase())},g=function(e,t){var n=e.commit,i=t.endpoint,s=t.redirectUrl,a=t.status;return d.updateErrorStatus(i,a).then((function(e){return n("SET_ERROR_STATUS",a),s&&Object(f.s)(s),e.data.result})).catch((function(){return Object(p.a)(Object(h.a)("Failed to update issue status"))}))},b=function(e,t){var n=e.commit,i=e.dispatch;return n("SET_UPDATING_RESOLVE_STATUS",!0),i("updateStatus",t).finally((function(){n("SET_UPDATING_RESOLVE_STATUS",!1)}))},v=function(e,t){var n=e.commit,i=e.dispatch;return n("SET_UPDATING_IGNORE_STATUS",!0),i("updateStatus",t).finally((function(){n("SET_UPDATING_IGNORE_STATUS",!1)}))},y=function(){};function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w,k=(_(o={},"SET_UPDATING_IGNORE_STATUS",(function(e,t){e.updatingIgnoreStatus=t})),_(o,"SET_UPDATING_RESOLVE_STATUS",(function(e,t){e.updatingResolveStatus=t})),_(o,"SET_ERROR_STATUS",(function(e,t){e.errorStatus=t})),o),j=(n(89),"SET_ERRORS"),O="SET_INDEX_PATH",S="SET_LOADING",C="ADD_RECENT_SEARCH",D="CLEAR_RECENT_SEARCHES",T="LOAD_RECENT_SEARCHES",E="SET_PAGINATION",x=n(159);function P(e){var t=e.state,n=e.commit,i=e.dispatch;n(S,!0),(w=new x.a({resource:d,method:"getSentryData",data:{endpoint:t.endpoint,params:{search_term:t.searchQuery,sort:t.sortField,cursor:t.cursor,issue_status:t.statusFilter}},successCallback:function(e){var t=e.data;t&&(n(E,t.pagination),n(j,t.errors),n(S,!1),i("stopPolling"))},errorCallback:function(e){var t=e.response,i="";t&&t.data&&t.data.message&&(i=t.data.message),n(S,!1),Object(p.a)(Object(h.e)(Object(h.a)("Failed to load errors from Sentry. Error message: %{errorMessage}"),{errorMessage:i}))}})).makeRequest()}var I=function(){w&&w.stop()};function L(e){var t=e.commit;t(j,[]),t(S,!0),w&&w.restart()}function A(e,t){(0,e.commit)(O,t)}function N(e){(0,e.commit)(T)}function q(e,t){(0,e.commit)(C,t)}function R(e){(0,e.commit)(D)}var B,M=function(e,t){var n=e.commit,i=e.dispatch,s=t.trim();n("SET_CURSOR",null),n("SET_SEARCH_QUERY",s),n(C,s),i("stopPolling"),i("startPolling")},F=function(e,t){var n=e.commit,i=e.dispatch;n("SET_STATUS_FILTER",t),i("stopPolling"),i("startPolling")},$=function(e,t){var n=e.commit,i=e.dispatch;n("SET_CURSOR",null),n("SET_SORT_FIELD",t),i("stopPolling"),i("startPolling")},U=function(e,t){(0,e.commit)("SET_ENDPOINT",t)},H=function(e,t){var n=e.commit,i=e.dispatch;n("SET_CURSOR",t),i("stopPolling"),i("startPolling")},V=function(e,t){(0,e.commit)("REMOVE_IGNORED_RESOLVED_ERRORS",t)},z=function(){},W=(n(69),n(16)),G=n(71);function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var K,J=(Y(B={},j,(function(e,t){e.errors=Object(W.g)(t,{deep:!0})})),Y(B,S,(function(e,t){e.loading=t})),Y(B,O,(function(e,t){e.indexPath=t})),Y(B,C,(function(e,t){if(0!==t.length){var n=e.recentSearches.filter((function(e){return e!==t}));n.unshift(t),e.recentSearches=n.slice(0,5),G.a.isLocalStorageAccessSafe()&&localStorage.setItem("recent-searches".concat(e.indexPath),JSON.stringify(e.recentSearches))}})),Y(B,D,(function(e){e.recentSearches=[],G.a.isLocalStorageAccessSafe()&&localStorage.removeItem("recent-searches".concat(e.indexPath))})),Y(B,T,(function(e){var t=localStorage.getItem("recent-searches".concat(e.indexPath))||[];try{e.recentSearches=JSON.parse(t)}catch(t){throw e.recentSearches=[],t}})),Y(B,E,(function(e,t){e.pagination=t})),Y(B,"SET_CURSOR",(function(e,t){e.cursor=t})),Y(B,"SET_SORT_FIELD",(function(e,t){e.sortField=t})),Y(B,"SET_SEARCH_QUERY",(function(e,t){e.searchQuery=t})),Y(B,"SET_ENDPOINT",(function(e,t){e.endpoint=t})),Y(B,"REMOVE_IGNORED_RESOLVED_ERRORS",(function(e,t){e.errors=e.errors.filter((function(e){return e.id!==t}))})),Y(B,"SET_STATUS_FILTER",(function(e,t){e.statusFilter=t})),B),Q="SET_LOADING_STACKTRACE",X="SET_STACKTRACE_DATA",Z=function(e){e&&e.stop()};function ee(e,t){var n=e.commit;(K=new x.a({resource:d,method:"getSentryData",data:{endpoint:t},successCallback:function(e){var t=e.data;t&&(n(X,t.error),n(Q,!1),Z(K))},errorCallback:function(){n(Q,!1),Object(p.a)(Object(h.a)("Failed to load stacktrace."))}})).makeRequest()}var te,ne=function(){};function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var se=(ie(te={},Q,(function(e,t){e.loadingStacktrace=t})),ie(te,X,(function(e,t){e.stacktraceData=t})),te),ae=function(e){return e.stacktraceData.stack_trace_entries?e.stacktraceData.stack_trace_entries.reverse():[]},re=function(){};function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){ce(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}l.default.use(c.b);t.a=new c.b.Store({modules:{list:{namespaced:!0,state:{errors:[],loading:!0,endpoint:null,sortField:"last_seen",statusFilter:"unresolved",searchQuery:null,indexPath:"",recentSearches:[],pagination:{},cursor:null},actions:le({},i,{},s),mutations:le({},k,{},J)},details:{namespaced:!0,state:{stacktraceData:{},loadingStacktrace:!0,updatingResolveStatus:!1,updatingIgnoreStatus:!1,errorStatus:""},actions:le({},i,{},a),mutations:le({},k,{},se),getters:r}}})},73:function(e,t,n){"use strict";n(30),n(35),n(18),n(64);var i=n(0),s=n.n(i),a=n(32),r=(n(65),n(69),n(55),n(67),n(71));function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.projectSelectInput=s()(t),this.newItemBtn=s()(".new-project-item-link"),this.resourceType=this.newItemBtn.data("type"),this.resourceLabel=this.newItemBtn.data("label"),this.formattedText=this.deriveTextVariants(),this.groupId=this.projectSelectInput.data("groupId"),this.bindEvents(),this.initLocalStorage()}var t,i,a;return t=e,(i=[{key:"bindEvents",value:function(){var e=this;this.projectSelectInput.siblings(".new-project-item-select-button").on("click",(function(t){return e.openDropdown(t)})),this.newItemBtn.on("click",(function(t){e.getProjectFromLocalStorage()||(t.preventDefault(),e.openDropdown(t))})),this.projectSelectInput.on("change",(function(){return e.selectProject()}))}},{key:"initLocalStorage",value:function(){r.a.isLocalStorageAccessSafe()&&(this.localStorageKey=["group",this.groupId,this.formattedText.localStorageItemType,"recent-project"].join("-"),this.setBtnTextFromLocalStorage())}},{key:"openDropdown",value:function(e){n.e(239).then(n.t.bind(null,428,7)).then((function(){s()(e.currentTarget).siblings(".project-item-select").select2("open")})).catch((function(){}))}},{key:"selectProject",value:function(){var e=JSON.parse(this.projectSelectInput.val()),t={url:"".concat(e.url,"/").concat(this.projectSelectInput.data("relativePath")),name:e.name};this.setNewItemBtnAttributes(t),this.setProjectInLocalStorage(t)}},{key:"setBtnTextFromLocalStorage",value:function(){var e=this.getProjectFromLocalStorage();this.setNewItemBtnAttributes(e)}},{key:"setNewItemBtnAttributes",value:function(e){e?(this.newItemBtn.attr("href",e.url),this.newItemBtn.text("".concat(this.formattedText.defaultTextPrefix," in ").concat(e.name))):this.newItemBtn.text("Select project to create ".concat(this.formattedText.presetTextSuffix))}},{key:"getProjectFromLocalStorage",value:function(){var e=localStorage.getItem(this.localStorageKey);return JSON.parse(e)}},{key:"setProjectInLocalStorage",value:function(e){var t=JSON.stringify(e);localStorage.setItem(this.localStorageKey,t)}},{key:"deriveTextVariants",value:function(){var e=this.resourceLabel;return{localStorageItemType:"new-".concat(this.resourceType.split("_").join("-").slice(0,-1)),defaultTextPrefix:e,presetTextSuffix:this.resourceType.split("_").join(" ").slice(0,-1)}}}])&&o(t.prototype,i),a&&o(t,a),e}(),c=n(1),u=function(){s()(".ajax-project-select").each((function(e,t){var n,i=this,r=s()(t).data("simpleFilter")||!1,o=s()(t).data("select2");return this.groupId=s()(t).data("groupId"),this.userId=s()(t).data("userId"),this.includeGroups=s()(t).data("includeGroups"),this.allProjects=s()(t).data("allProjects")||!1,this.orderBy=s()(t).data("orderBy")||"id",this.withIssuesEnabled=s()(t).data("withIssuesEnabled"),this.withMergeRequestsEnabled=s()(t).data("withMergeRequestsEnabled"),this.withShared=void 0===s()(t).data("withShared")||s()(t).data("withShared"),this.includeProjectsInSubgroups=s()(t).data("includeProjectsInSubgroups")||!1,this.allowClear=s()(t).data("allowClear")||!1,n=Object(c.d)("ProjectSelect|Search for project"),this.includeGroups&&(n+=Object(c.d)("ProjectSelect| or group")),s()(t).select2({placeholder:n,minimumInputLength:0,query:function(e){var t,n=function(t){var n={results:t};return e.callback(n)};return t=i.includeGroups?function(t){return a.a.groups(e.term,{},(function(e){var i=e.concat(t);return n(i)}))}:n,i.groupId?a.a.groupProjects(i.groupId,e.term,{with_issues_enabled:i.withIssuesEnabled,with_merge_requests_enabled:i.withMergeRequestsEnabled,with_shared:i.withShared,include_subgroups:i.includeProjectsInSubgroups},t):i.userId?a.a.userProjects(i.userId,e.term,{with_issues_enabled:i.withIssuesEnabled,with_merge_requests_enabled:i.withMergeRequestsEnabled,with_shared:i.withShared,include_subgroups:i.includeProjectsInSubgroups},t):a.a.projects(e.term,{order_by:i.orderBy,with_issues_enabled:i.withIssuesEnabled,with_merge_requests_enabled:i.withMergeRequestsEnabled,membership:!i.allProjects},t)},id:function(e){return r?e.id:JSON.stringify({name:e.name,url:e.web_url})},text:function(e){return e.name_with_namespace||e.name},initSelection:function(e,t){return a.a.project(e.val()).then((function(e){var n=e.data;return t(n)}))},allowClear:this.allowClear,dropdownCssClass:"ajax-project-dropdown"}),o||r?t:new l(t)}))};t.a=function(){return n.e(239).then(n.t.bind(null,428,7)).then(u).catch((function(){}))}},733:function(e,t,n){"use strict";n(24),n(49),n(56),n(40),n(77),n(18),n(68),n(36),n(41);var i=n(259),s=n(345);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],i=!0,s=!1,a=void 0;try{for(var r,o=e[Symbol.iterator]();!(i=(r=o.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==o.return||o.return()}finally{if(s)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=Object.assign({},s.a),l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dropdownTrigger=t.dropdownTrigger,this.dropdownList=t.dropdownList,this.button=t.button}var t,n,s;return t=e,(n=[{key:"initDroplab",value:function(){this.reopenItem=this.dropdownList.querySelector(".reopen-item"),this.closeItem=this.dropdownList.querySelector(".close-item"),this.droplab=new i.a;var e=this.setConfig();this.droplab.init(this.dropdownTrigger,this.dropdownList,[o],e)}},{key:"updateButton",value:function(e){this.toggleButtonType(e),this.button.blur()}},{key:"toggleButtonType",value:function(e){var t=a(this.getButtonTypes(e),2),n=t[0],i=t[1];n.classList.remove("hidden"),n.classList.add("droplab-item-selected"),i.classList.add("hidden"),i.classList.remove("droplab-item-selected"),n.click()}},{key:"getButtonTypes",value:function(e){return e?[this.reopenItem,this.closeItem]:[this.closeItem,this.reopenItem]}},{key:"setDisable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e?(this.button.setAttribute("disabled","true"),this.dropdownTrigger.setAttribute("disabled","true")):(this.button.removeAttribute("disabled"),this.dropdownTrigger.removeAttribute("disabled"))}},{key:"setConfig",value:function(){return{InputSetter:[{input:this.button,valueAttribute:"data-text",inputAttribute:"data-value"},{input:this.button,valueAttribute:"data-text",inputAttribute:"title"},{input:this.button,valueAttribute:"data-button-class",inputAttribute:"class"},{input:this.dropdownTrigger,valueAttribute:"data-toggle-class",inputAttribute:"class"},{input:this.button,valueAttribute:"data-url",inputAttribute:"href"},{input:this.button,valueAttribute:"data-method",inputAttribute:"data-method"}]}}}])&&r(t.prototype,n),s&&r(t,s),e}();var c={initCloseReopenReport:function(){var e=document.querySelector(".js-issuable-close-dropdown");if(e){var t=e.querySelector(".js-issuable-close-toggle"),n=e.querySelector(".js-issuable-close-menu"),i=e.querySelector(".js-issuable-close-button"),s=new l({dropdownTrigger:t,dropdownList:n,button:i});return s.initDroplab(),s}}};t.a=c},746:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(0),s=n.n(i);function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cfg={callback:t.callback,startingInterval:t.startingInterval,maxInterval:t.maxInterval,hiddenInterval:t.hiddenInterval,incrementByFactorOf:t.incrementByFactorOf,lazyStart:t.lazyStart,immediateExecution:t.immediateExecution},this.state={intervalId:null,currentInterval:this.cfg.startingInterval,pageVisibility:"visible"},this.initInterval()}var t,n,i;return t=e,(n=[{key:"start",value:function(){var e=this,t=this.cfg,n=this.state;t.immediateExecution&&!this.isLoading&&(t.immediateExecution=!1,this.triggerCallback()),n.intervalId=window.setInterval((function(){e.isLoading||(e.triggerCallback(),e.getCurrentInterval()!==t.maxInterval&&(e.incrementInterval(),e.resume()))}),this.getCurrentInterval())}},{key:"cancel",value:function(){this.setCurrentInterval(this.cfg.startingInterval),this.stopTimer()}},{key:"onVisibilityHidden",value:function(){this.cfg.hiddenInterval?(this.setCurrentInterval(this.cfg.hiddenInterval),this.resume()):this.cancel()}},{key:"resume",value:function(){this.stopTimer(),this.start()}},{key:"onVisibilityVisible",value:function(){this.cancel(),this.start()}},{key:"destroy",value:function(){this.cancel(),document.removeEventListener("visibilitychange",this.handleVisibilityChange),s()(document).off("visibilitychange").off("beforeunload")}},{key:"initInterval",value:function(){this.cfg.lazyStart||this.start(),this.initVisibilityChangeHandling(),this.initPageUnloadHandling()}},{key:"triggerCallback",value:function(){var e=this;this.isLoading=!0,this.cfg.callback().then((function(){e.isLoading=!1})).catch((function(t){throw e.isLoading=!1,t}))}},{key:"initVisibilityChangeHandling",value:function(){document.addEventListener("visibilitychange",this.handleVisibilityChange.bind(this))}},{key:"initPageUnloadHandling",value:function(){var e=this;s()(document).on("beforeunload",(function(){return e.cancel()}))}},{key:"handleVisibilityChange",value:function(e){this.state.pageVisibility=e.target.visibilityState,(this.isPageVisible()?this.onVisibilityVisible:this.onVisibilityHidden).apply(this)}},{key:"getCurrentInterval",value:function(){return this.state.currentInterval}},{key:"setCurrentInterval",value:function(e){this.state.currentInterval=e}},{key:"incrementInterval",value:function(){var e=this.cfg,t=this.getCurrentInterval();if(!e.hiddenInterval||this.isPageVisible()){var n=t*e.incrementByFactorOf;n>e.maxInterval&&(n=e.maxInterval),this.setCurrentInterval(n)}}},{key:"isPageVisible",value:function(){return"visible"===this.state.pageVisibility}},{key:"stopTimer",value:function(){var e=this.state;e.intervalId=window.clearInterval(e.intervalId)}}])&&a(t.prototype,n),i&&a(t,i),e}()},752:function(e,t,n){"use strict";n(30);var i=n(0),s=n.n(i),a=n(257),r=n(110),o=n(1);t.a={methods:{initAutoSave:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[Object(o.d)("Autosave|Note"),Object(r.b)(e.noteable_type||e.noteableType),e.id];t&&(n=n.concat(t)),this.autosave=new a.a(s()(this.$refs.noteForm.$refs.textarea),n)},resetAutoSave:function(){this.autosave.reset()},setAutoSave:function(){this.autosave.save()},disposeAutoSave:function(){this.autosave.dispose()}}}},754:function(e,t,n){"use strict";n(24),n(28),n(26),n(104),n(69),n(50),n(58),n(38),n(18),n(64),n(122),n(27);var i=n(22),s=n(828),a=n(699),r=n(1),o=n(457),l=n(45),c=n(293),u=n(14),d=n(180),p=n(93),f=n.n(p),h=n(110),m=n(490),g=n(489);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y={name:"DiffDiscussionHeader",components:{userAvatarLink:d.a,noteEditedText:m.a,noteHeader:g.a},props:{discussion:{type:Object,required:!0}},computed:{notes:function(){return this.discussion.notes},firstNote:function(){return this.notes[0]},lastNote:function(){return this.notes[this.notes.length-1]},author:function(){return this.firstNote.author},resolvedText:function(){return this.discussion.resolved_by_push?Object(r.a)("Automatically resolved"):Object(r.a)("Resolved")},lastUpdatedBy:function(){return this.notes.length>1?this.lastNote.author:null},lastUpdatedAt:function(){return this.notes.length>1?this.lastNote.created_at:null},headerText:function(){var e='<a href="'.concat(f()(this.discussion.discussion_path),'">'),t=this.discussion.commit_id,n=t;t&&(n='<span class="commit-sha">'.concat(Object(h.q)(t),"</span>"));var i=this.discussion,s=i.for_commit,a=i.diff_discussion,o=i.active,l=Object(r.d)("MergeRequests|started a thread");return s?l=Object(r.d)("MergeRequests|started a thread on commit %{linkStart}%{commitDisplay}%{linkEnd}"):a&&t?l=o?Object(r.d)("MergeRequests|started a thread on commit %{linkStart}%{commitDisplay}%{linkEnd}"):Object(r.d)("MergeRequests|started a thread on an outdated change in commit %{linkStart}%{commitDisplay}%{linkEnd}"):a&&(l=o?Object(r.d)("MergeRequests|started a thread on %{linkStart}the diff%{linkEnd}"):Object(r.d)("MergeRequests|started a thread on %{linkStart}an old version of the diff%{linkEnd}")),Object(r.e)(l,{commitDisplay:n,linkStart:e,linkEnd:"</a>"},!1)}},methods:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(i.c)(["toggleDiscussion"]),{toggleDiscussionHandler:function(){this.toggleDiscussion({discussionId:this.discussion.id})}})},_=n(4),w=Object(_.a)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"discussion-header note-wrapper"},[e._m(0),e._v(" "),n("div",{staticClass:"timeline-content w-100"},[n("note-header",{attrs:{author:e.author,"created-at":e.firstNote.created_at,"note-id":e.firstNote.id,"include-toggle":!0,expanded:e.discussion.expanded},on:{toggleHandler:e.toggleDiscussionHandler}},[n("span",{domProps:{innerHTML:e._s(e.headerText)}})]),e._v(" "),e.discussion.resolved?n("note-edited-text",{attrs:{"edited-at":e.discussion.resolved_at,"edited-by":e.discussion.resolved_by,"action-text":e.resolvedText,"class-name":"discussion-headline-light js-discussion-headline"}}):e.lastUpdatedAt?n("note-edited-text",{attrs:{"edited-at":e.lastUpdatedAt,"edited-by":e.lastUpdatedBy,"action-text":e.__("Last updated"),"class-name":"discussion-headline-light js-discussion-headline"}}):e._e()],1)])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"timeline-icon align-self-start flex-shrink-0"},[this.author?t("user-avatar-link",{attrs:{"link-href":this.author.path,"img-src":this.author.avatar_url,"img-alt":this.author.name,"img-size":40}}):this._e()],1)}],!1,null,null,null).exports,k=n(552),j=n(523),O=(n(35),n(55),n(91),n(2532)),S=n(755),C=n(682),D=n(756),T=n(305),E=n(117);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){I(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L=/^(\+|-| )/,A={components:{DiffFileHeader:S.a,GlSkeletonLoading:O.a,DiffViewer:C.a,ImageDiffOverlay:D.a},props:{discussion:{type:Object,required:!0}},data:function(){return{error:!1}},computed:P({},Object(i.e)({projectPath:function(e){return e.diffs.projectPath}}),{diffMode:function(){return Object(T.f)(this.discussion.diff_file)},diffViewerMode:function(){return this.discussion.diff_file.viewer.name},isTextFile:function(){return this.diffViewerMode===E.l.text},hasTruncatedDiffLines:function(){return this.discussion.truncated_diff_lines&&0!==this.discussion.truncated_diff_lines.length}}),mounted:function(){this.hasTruncatedDiffLines||this.fetchDiff()},methods:P({},Object(i.c)(["fetchDiscussionDiffLines"]),{fetchDiff:function(){var e=this;this.error=!1,this.fetchDiscussionDiffLines(this.discussion).then(this.highlight).catch((function(){e.error=!0}))},trimChar:function(e){return e.replace(L,"")}}),userColorSchemeClass:window.gon.user_color_scheme},N=Object(_.a)(A,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"diff-file file-holder",class:{"text-file":e.isTextFile}},[n("diff-file-header",{attrs:{"discussion-path":e.discussion.discussion_path,"diff-file":e.discussion.diff_file,"can-current-user-fork":!1,expanded:!e.discussion.diff_file.viewer.collapsed}}),e._v(" "),e.isTextFile?n("div",{staticClass:"diff-content"},[n("table",{staticClass:"code js-syntax-highlight",class:e.$options.userColorSchemeClass},[e.hasTruncatedDiffLines?e._m(0):e._e(),e._v(" "),e.hasTruncatedDiffLines?e._e():n("tr",{staticClass:"line_holder line-holder-placeholder"},[n("td",{staticClass:"old_line diff-line-num"}),e._v(" "),n("td",{staticClass:"new_line diff-line-num"}),e._v(" "),e.error?n("td",{staticClass:"js-error-lazy-load-diff diff-loading-error-block"},[e._v("\n          "+e._s(e.error)+" Unable to load the diff\n          "),n("button",{staticClass:"btn-link btn-link-retry btn-no-padding js-toggle-lazy-diff-retry-button",on:{click:e.fetchDiff}},[e._v("\n            "+e._s(e.__("Try again"))+"\n          ")])]):n("td",{staticClass:"line_content js-success-lazy-load"},[n("span"),e._v(" "),n("gl-skeleton-loading"),e._v(" "),n("span")],1)]),e._v(" "),n("tr",{staticClass:"notes_holder"},[n("td",{staticClass:"notes-content",attrs:{colspan:"3"}},[e._t("default")],2)])],2)]):n("div",[n("diff-viewer",{attrs:{"diff-mode":e.diffMode,"diff-viewer-mode":e.diffViewerMode,"new-path":e.discussion.diff_file.new_path,"new-sha":e.discussion.diff_file.diff_refs.head_sha,"old-path":e.discussion.diff_file.old_path,"old-sha":e.discussion.diff_file.diff_refs.base_sha,"file-hash":e.discussion.diff_file.file_hash,"project-path":e.projectPath}},[n("image-diff-overlay",{attrs:{slot:"image-overlay",discussions:e.discussion,"file-hash":e.discussion.diff_file.file_hash,"show-comment-icon":!0,"should-toggle-discussion":!1,"badge-class":"image-comment-badge"},slot:"image-overlay"})],1),e._v(" "),e._t("default")],2)],1)}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return e._l(e.discussion.truncated_diff_lines,(function(t){return n("tr",{key:t.line_code,staticClass:"line_holder"},[n("td",{staticClass:"diff-line-num old_line",class:t.type},[e._v(e._s(t.old_line))]),e._v(" "),n("td",{staticClass:"diff-line-num new_line",class:t.type},[e._v(e._s(t.new_line))]),e._v(" "),n("td",{staticClass:"line_content",class:t.type,domProps:{innerHTML:e._s(e.trimChar(t.rich_text))}})])}))}],!1,null,null,null).exports,q=n(665),R=n(488),B=n(209),M=n(120),F=n(668),$=n(669),U=n(667),H=n(666),V=(n(46),n(808)),z=n.n(V),W=n(198),G={components:{Icon:l.a,UserAvatarLink:d.a,TimeAgoTooltip:W.a},props:{collapsed:{type:Boolean,required:!0},replies:{type:Array,required:!0}},computed:{lastReply:function(){return this.replies[this.replies.length-1]},uniqueAuthors:function(){var e=this.replies.map((function(e){return e.author||{}}));return z()(e,(function(e){return e.username}))},className:function(){return this.collapsed?"collapsed":"expanded"}},methods:{toggle:function(){this.$emit("toggle")}}},Y=Object(_.a)(G,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"replies-toggle js-toggle-replies",class:e.className},[e.collapsed?[n("icon",{attrs:{name:"chevron-right"},nativeOn:{click:function(t){return e.toggle(t)}}}),e._v(" "),n("div",e._l(e.uniqueAuthors,(function(e){return n("user-avatar-link",{key:e.username,attrs:{"link-href":e.path,"img-alt":e.name,"img-src":e.avatar_url,"img-size":26,"tooltip-text":e.name,"tooltip-placement":"bottom"}})})),1),e._v(" "),n("button",{staticClass:"btn btn-link js-replies-text qa-expand-replies",attrs:{type:"button"},on:{click:e.toggle}},[e._v("\n      "+e._s(e.replies.length)+" "+e._s(e.n__("reply","replies",e.replies.length))+"\n    ")]),e._v("\n    "+e._s(e.__("Last reply by"))+"\n    "),n("a",{staticClass:"btn btn-link author-link",attrs:{href:e.lastReply.author.path}},[e._v("\n      "+e._s(e.lastReply.author.name)+"\n    ")]),e._v(" "),n("time-ago-tooltip",{attrs:{time:e.lastReply.created_at,"tooltip-placement":"bottom"}})]:n("span",{staticClass:"collapse-replies-btn js-collapse-replies qa-collapse-replies",on:{click:e.toggle}},[n("icon",{attrs:{name:"chevron-down"}}),e._v(" "+e._s(e.s__("Notes|Collapse replies"))+"\n  ")],1)],2)}),[],!1,null,null,null).exports,K={functional:!0,props:{isDiffDiscussion:{type:Boolean,required:!1,default:!1}},render:function(e,t){var n=t.props,i=t.children;return n.isDiffDiscussion?e("li",{class:"discussion-collapsible bordered-box clearfix"},[e("ul",{class:"notes"},i)]):i}},J=Object(_.a)(K,void 0,void 0,!1,null,null,null).exports;function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){Z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ee={name:"DiscussionNotes",components:{ToggleRepliesWidget:Y,NoteEditedText:m.a,DiscussionNotesRepliesWrapper:J},props:{discussion:{type:Object,required:!0},isExpanded:{type:Boolean,required:!1,default:!1},diffLine:{type:Object,required:!1,default:null},line:{type:Object,required:!1,default:null},shouldGroupReplies:{type:Boolean,required:!1,default:!1},helpPagePath:{type:String,required:!1,default:""}},computed:X({},Object(i.d)(["userCanReply"]),{hasReplies:function(){return Boolean(this.replies.length)},replies:function(){return this.discussion.notes.slice(1)},firstNote:function(){return this.discussion.notes.slice(0,1)[0]},resolvedText:function(){return this.discussion.resolved_by_push?Object(r.a)("Automatically resolved"):Object(r.a)("Resolved")},commit:function(){return this.discussion.for_commit?{id:this.discussion.commit_id,url:this.discussion.discussion_path}:null}}),methods:X({},Object(i.c)(["toggleDiscussion"]),{componentName:function(e){return e.isPlaceholderNote?e.placeholderType===M.u?$.a:F.a:e.system?U.a:H.a},componentData:function(e){return e.isPlaceholderNote?e.notes[0]:e}})},te=Object(_.a)(ee,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"discussion-notes"},[n("ul",{staticClass:"notes"},[e.shouldGroupReplies?[n(e.componentName(e.firstNote),{tag:"component",attrs:{note:e.componentData(e.firstNote),line:e.line||e.diffLine,commit:e.commit,"help-page-path":e.helpPagePath,"show-reply-button":e.userCanReply},on:{handleDeleteNote:function(t){return e.$emit("deleteNote")},startReplying:function(t){return e.$emit("startReplying")}}},[e.discussion.resolved?n("note-edited-text",{attrs:{slot:"discussion-resolved-text","edited-at":e.discussion.resolved_at,"edited-by":e.discussion.resolved_by,"action-text":e.resolvedText,"class-name":"discussion-headline-light js-discussion-headline discussion-resolved-text"},slot:"discussion-resolved-text"}):e._e(),e._v(" "),e._t("avatar-badge",null,{slot:"avatar-badge"})],2),e._v(" "),n("discussion-notes-replies-wrapper",{attrs:{"is-diff-discussion":e.discussion.diff_discussion}},[e.hasReplies?n("toggle-replies-widget",{class:{"discussion-toggle-replies":e.discussion.diff_discussion},attrs:{collapsed:!e.isExpanded,replies:e.replies},on:{toggle:function(t){return e.toggleDiscussion({discussionId:e.discussion.id})}}}):e._e(),e._v(" "),e.isExpanded?e._l(e.replies,(function(t){return n(e.componentName(t),{key:t.id,tag:"component",attrs:{note:e.componentData(t),"help-page-path":e.helpPagePath,line:e.line},on:{handleDeleteNote:function(t){return e.$emit("deleteNote")}}})})):e._e(),e._v(" "),e._t("footer",null,{showReplies:e.isExpanded||!e.hasReplies})],2)]:[e._l(e.discussion.notes,(function(t,i){return n(e.componentName(t),{key:t.id,tag:"component",attrs:{note:e.componentData(t),"help-page-path":e.helpPagePath,line:e.diffLine},on:{handleDeleteNote:function(t){return e.$emit("deleteNote")}}},[0===i?e._t("avatar-badge",null,{slot:"avatar-badge"}):e._e()],2)})),e._v(" "),e._t("footer",null,{showReplies:e.isExpanded||!e.hasReplies})]],2)])}),[],!1,null,null,null).exports,ne=(n(309),n(758)),ie={name:"ResolveDiscussionButton",components:{GlLoadingIcon:n(760).a},props:{isResolving:{type:Boolean,required:!1,default:!1},buttonTitle:{type:String,required:!0}}},se=Object(_.a)(ie,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{ref:"button",staticClass:"btn btn-default ml-sm-2",attrs:{type:"button"},on:{click:function(t){return e.$emit("onClick")}}},[e.isResolving?n("gl-loading-icon",{ref:"isResolvingIcon",attrs:{inline:""}}):e._e(),e._v("\n  "+e._s(e.buttonTitle)+"\n")],1)}),[],!1,null,null,null).exports,ae=n(553),re={name:"ResolveWithIssueButton",components:{Icon:l.a,GlButton:ae.a},directives:{GlTooltip:s.a},props:{url:{type:String,required:!0}}},oe=Object(_.a)(re,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"btn-group",attrs:{role:"group"}},[t("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"new-issue-for-discussion discussion-create-issue-btn",attrs:{href:this.url,title:this.s__("MergeRequests|Resolve this thread in a new issue")}},[t("icon",{attrs:{name:"issue-new"}})],1)],1)}),[],!1,null,null,null).exports,le=n(700),ce={name:"JumpToNextDiscussionButton",components:{icon:l.a},directives:{GlTooltip:s.a},mixins:[le.a],props:{fromDiscussionId:{type:String,required:!0}}},ue=Object(_.a)(ce,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"btn-group",attrs:{role:"group"}},[n("button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],ref:"button",staticClass:"btn btn-default discussion-next-btn",attrs:{title:e.s__("MergeRequests|Jump to next unresolved thread"),"data-track-event":"click_button","data-track-label":"mr_next_unresolved_thread","data-track-property":"click_next_unresolved_thread"},on:{click:function(t){return e.jumpToNextRelativeDiscussion(e.fromDiscussionId)}}},[n("icon",{attrs:{name:"comment-next"}})],1)])}),[],!1,null,null,null).exports,de={name:"DiscussionActions",components:{ReplyPlaceholder:ne.a,ResolveDiscussionButton:se,ResolveWithIssueButton:oe,JumpToNextDiscussionButton:ue},props:{discussion:{type:Object,required:!0},isResolving:{type:Boolean,required:!0},resolveButtonTitle:{type:String,required:!0},resolveWithIssuePath:{type:String,required:!1,default:""},shouldShowJumpToNextDiscussion:{type:Boolean,required:!0}},computed:{resolvableNotes:function(){return this.discussion.notes.filter((function(e){return e.resolvable}))},userCanResolveDiscussion:function(){return this.resolvableNotes.every((function(e){return e.current_user&&e.current_user.can_resolve}))}}},pe=Object(_.a)(de,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"discussion-with-resolve-btn clearfix"},[n("reply-placeholder",{attrs:{"data-qa-selector":"discussion_reply_tab","button-text":e.s__("MergeRequests|Reply...")},on:{onClick:function(t){return e.$emit("showReplyForm")}}}),e._v(" "),e.userCanResolveDiscussion?n("div",{staticClass:"btn-group discussion-actions",attrs:{role:"group"}},[n("div",{staticClass:"btn-group"},[e.discussion.resolvable?n("resolve-discussion-button",{attrs:{"data-qa-selector":"resolve_discussion_button","is-resolving":e.isResolving,"button-title":e.resolveButtonTitle},on:{onClick:function(t){return e.$emit("resolve")}}}):e._e()],1),e._v(" "),e.discussion.resolvable&&e.resolveWithIssuePath?n("resolve-with-issue-button",{attrs:{url:e.resolveWithIssuePath}}):e._e()],1):e._e(),e._v(" "),e.discussion.resolvable&&e.shouldShowJumpToNextDiscussion?n("div",{staticClass:"btn-group discussion-actions ml-sm-2"},[n("jump-to-next-discussion-button",{attrs:{"from-discussion-id":e.discussion.id}})],1):e._e()],1)}),[],!1,null,null,null).exports;function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ge={name:"NoteableDiscussion",components:{icon:l.a,userAvatarLink:d.a,diffDiscussionHeader:w,noteSignedOutWidget:k.a,noteForm:j.a,DraftNote:function(){return n.e(4).then(n.bind(null,3230))},TimelineEntryItem:c.a,DiscussionNotes:te,DiscussionActions:pe},directives:{GlTooltip:s.a},mixins:[q.a,R.a,a.a],props:{discussion:{type:Object,required:!0},line:{type:Object,required:!1,default:null},renderDiffFile:{type:Boolean,required:!1,default:!0},alwaysExpanded:{type:Boolean,required:!1,default:!1},discussionsByDiffOrder:{type:Boolean,required:!1,default:!1},helpPagePath:{type:String,required:!1,default:""}},data:function(){return{isReplying:!1,isResolving:!1,resolveAsThread:!0}},computed:he({},Object(i.d)(["convertedDisscussionIds","getNoteableData","userCanReply","showJumpToNextDiscussion","getUserData"]),{currentUser:function(){return this.getUserData},isLoggedIn:function(){return Boolean(gon.current_user_id)},autosaveKey:function(){return Object(o.b)(this.firstNote.noteable_type,this.discussion.id)},newNotePath:function(){return this.getNoteableData.create_note_path},firstNote:function(){return this.discussion.notes.slice(0,1)[0]},shouldShowJumpToNextDiscussion:function(){return this.showJumpToNextDiscussion(this.discussionsByDiffOrder?"diff":"discussion")},shouldRenderDiffs:function(){return this.discussion.diff_discussion&&this.renderDiffFile},shouldGroupReplies:function(){return!this.shouldRenderDiffs},wrapperComponent:function(){return this.shouldRenderDiffs?N:"div"},wrapperComponentProps:function(){return this.shouldRenderDiffs?{discussion:this.discussion}:{}},isExpanded:function(){return this.discussion.expanded||this.alwaysExpanded},shouldHideDiscussionBody:function(){return this.shouldRenderDiffs&&!this.isExpanded},diffLine:function(){return this.line?this.line:this.discussion.diff_discussion&&this.discussion.truncated_diff_lines?this.discussion.truncated_diff_lines.slice(-1)[0]:null},resolveWithIssuePath:function(){return this.discussionResolved?"":this.discussion.resolve_with_issue_path}}),created:function(){B.a.$on("startReplying",this.onStartReplying)},beforeDestroy:function(){B.a.$off("startReplying",this.onStartReplying)},methods:he({},Object(i.c)(["saveNote","removePlaceholderNotes","toggleResolveNote","removeConvertedDiscussion"]),{showReplyForm:function(){this.isReplying=!0},cancelReplyForm:function(e,t){if(e&&t){var n=Object(r.d)("Notes|Are you sure you want to cancel creating this comment?");if(!window.confirm(n))return}this.convertedDisscussionIds.includes(this.discussion.id)&&this.removeConvertedDiscussion(this.discussion.id),this.isReplying=!1,Object(o.a)(this.autosaveKey)},saveReply:function(e,t,n){var i=this;if(!e)return this.cancelReplyForm(),void n();var s={in_reply_to_discussion_id:this.discussion.reply_id,target_type:this.getNoteableData.targetType,note:{note:e}};this.convertedDisscussionIds.includes(this.discussion.id)&&(s.return_discussion=!0),this.discussion.for_commit&&(s.note_project_id=this.discussion.project_id);var a={endpoint:this.newNotePath,flashContainer:this.$el,data:s};this.saveNote(a).then((function(e){!0!==e.hasFlash&&(i.isReplying=!1,Object(o.a)(i.autosaveKey)),n()})).catch((function(t){i.removePlaceholderNotes();var s=Object(r.a)("Your comment could not be submitted! Please check your network connection and try again.");Object(u.a)(s,"alert",i.$el),i.$refs.noteForm.note=e,n(t)}))},deleteNoteHandler:function(e){this.$emit("noteDeleted",this.discussion,e)},onStartReplying:function(e){this.discussion.id===e&&this.showReplyForm()}})},be=Object(_.a)(ge,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("timeline-entry-item",{staticClass:"note note-discussion"},[n("div",{staticClass:"timeline-content"},[n("div",{staticClass:"discussion js-discussion-container",attrs:{"data-discussion-id":e.discussion.id,"data-qa-selector":"discussion_content"}},[e.shouldRenderDiffs?n("diff-discussion-header",{attrs:{discussion:e.discussion}}):e._e(),e._v(" "),e.shouldHideDiscussionBody?e._e():n("div",{staticClass:"discussion-body"},[n(e.wrapperComponent,e._b({tag:"component",staticClass:"card discussion-wrapper"},"component",e.wrapperComponentProps,!1),[n("discussion-notes",{attrs:{discussion:e.discussion,"diff-line":e.diffLine,"help-page-path":e.helpPagePath,"is-expanded":e.isExpanded,line:e.line,"should-group-replies":e.shouldGroupReplies},on:{startReplying:e.showReplyForm,deleteNote:e.deleteNoteHandler},scopedSlots:e._u([{key:"footer",fn:function(t){var i=t.showReplies;return[e.showDraft(e.discussion.reply_id)?n("draft-note",{key:"draft_"+e.discussion.id,attrs:{draft:e.draftForDiscussion(e.discussion.reply_id)}}):i?n("div",{staticClass:"discussion-reply-holder clearfix",class:{"is-replying":e.isReplying}},[!e.isReplying&&e.userCanReply?n("user-avatar-link",{staticClass:"d-none d-sm-block",attrs:{"link-href":e.currentUser.path,"img-src":e.currentUser.avatar_url,"img-alt":e.currentUser.name,"img-size":40}}):e._e(),e._v(" "),!e.isReplying&&e.userCanReply?n("discussion-actions",{attrs:{discussion:e.discussion,"is-resolving":e.isResolving,"resolve-button-title":e.resolveButtonTitle,"resolve-with-issue-path":e.resolveWithIssuePath,"should-show-jump-to-next-discussion":e.shouldShowJumpToNextDiscussion},on:{showReplyForm:e.showReplyForm,resolve:e.resolveHandler}}):e._e(),e._v(" "),e.isReplying?n("div",{staticClass:"avatar-note-form-holder"},[e.currentUser?n("user-avatar-link",{staticClass:"d-none d-sm-block",attrs:{"link-href":e.currentUser.path,"img-src":e.currentUser.avatar_url,"img-alt":e.currentUser.name,"img-size":40}}):e._e(),e._v(" "),n("note-form",{ref:"noteForm",attrs:{discussion:e.discussion,"is-editing":!1,line:e.diffLine,"save-button-title":"Comment","autosave-key":e.autosaveKey},on:{handleFormUpdateAddToReview:e.addReplyToReview,handleFormUpdate:e.saveReply,cancelForm:e.cancelReplyForm}})],1):e._e(),e._v(" "),e.isLoggedIn?e._e():n("note-signed-out-widget")],1):e._e()]}}],null,!1,2106683913)},[e._t("avatar-badge",null,{slot:"avatar-badge"})],2)],1)],1)],1)])])}),[],!1,null,null,null);t.a=be.exports},755:function(e,t,n){"use strict";n(24),n(30),n(28),n(26),n(35),n(50),n(58),n(38),n(27);var i=n(93),s=n.n(i),a=n(22),r=n(760),o=n(553),l=n(828),c=n(378),u=n(158),d=n(45),p=n(328),f=n(110),h=n(1),m=n(117),g={components:{GlButton:o.a,Icon:d.a},directives:{GlTooltip:l.a},props:{editPath:{type:String,required:!0},canCurrentUserFork:{type:Boolean,required:!0},canModifyBlob:{type:Boolean,required:!1,default:!1}},methods:{handleEditClick:function(e){this.canCurrentUserFork&&!this.canModifyBlob&&(e.preventDefault(),this.$emit("showForkMessage"))}}},b=n(4),v=Object(b.a)(g,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.top",modifiers:{top:!0}}],staticClass:"js-edit-blob",attrs:{href:e.editPath,title:e.__("Edit file")},nativeOn:{click:function(t){return e.handleEditClick(t)}}},[n("icon",{attrs:{name:"pencil"}})],1)}),[],!1,null,null,null).exports,y=n(757),_=n(16);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O={components:{GlLoadingIcon:r.a,GlButton:o.a,ClipboardButton:u.a,EditButton:v,Icon:d.a,FileIcon:p.a,DiffStats:y.a},directives:{GlTooltip:l.a},props:{discussionPath:{type:String,required:!1,default:""},diffFile:{type:Object,required:!0},collapsible:{type:Boolean,required:!1,default:!1},addMergeRequestButtons:{type:Boolean,required:!1,default:!1},expanded:{type:Boolean,required:!1,default:!0},canCurrentUserFork:{type:Boolean,required:!0}},computed:k({},Object(a.d)("diffs",["diffHasExpandedDiscussions","diffHasDiscussions"]),{diffContentIDSelector:function(){return"#diff-content-".concat(this.diffFile.file_hash)},titleLink:function(){return this.diffFile.submodule?this.diffFile.submodule_tree_url||this.diffFile.submodule_link:this.discussionPath?this.discussionPath:this.diffContentIDSelector},filePath:function(){return this.diffFile.submodule?"".concat(this.diffFile.file_path," @ ").concat(Object(f.q)(this.diffFile.blob.id)):this.diffFile.deleted_file?Object(h.e)(Object(h.a)("%{filePath} deleted"),{filePath:this.diffFile.file_path},!1):this.diffFile.file_path},isUsingLfs:function(){return this.diffFile.stored_externally&&"lfs"===this.diffFile.external_storage},collapseIcon:function(){return this.expanded?"chevron-down":"chevron-right"},viewFileButtonText:function(){var e=s()(Object(f.q)(this.diffFile.content_sha));return Object(h.e)(Object(h.d)("MergeRequests|View file @ %{commitId}"),{commitId:e},!1)},viewReplacedFileButtonText:function(){var e=s()(Object(f.q)(this.diffFile.diff_refs.base_sha));return Object(h.e)(Object(h.d)("MergeRequests|View replaced file @ %{commitId}"),{commitId:'<span class="commit-sha">'.concat(e,"</span>")},!1)},gfmCopyText:function(){return"`".concat(this.diffFile.file_path,"`")},isFileRenamed:function(){return this.diffFile.renamed_file},isModeChanged:function(){return this.diffFile.viewer.name===m.l.mode_changed},expandDiffToFullFileTitle:function(){return this.diffFile.isShowingFullFile?Object(h.d)("MRDiff|Show changes only"):Object(h.d)("MRDiff|Show full file")}}),mounted:function(){Object(c.a)(this.$refs.header)},methods:k({},Object(a.c)("diffs",["toggleFileDiscussions","toggleFileDiscussionWrappers","toggleFullDiff"]),{handleToggleFile:function(){this.$emit("toggleFile")},showForkMessage:function(){this.$emit("showForkMessage")},handleFileNameClick:function(e){if(!(this.diffFile.submodule_tree_url||this.diffFile.submodule_link||this.discussionPath)){e.preventDefault();var t=this.diffContentIDSelector;Object(_.N)(document.querySelector(t)),window.location.hash=t}}})},S=Object(b.a)(O,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"header",staticClass:"js-file-title file-title file-title-flex-parent",on:{click:function(t){return t.target!==t.currentTarget?null:e.handleToggleFile(t)}}},[n("div",{staticClass:"file-header-content"},[e.collapsible?n("icon",{ref:"collapseIcon",staticClass:"diff-toggle-caret append-right-5",attrs:{name:e.collapseIcon,size:16,"aria-hidden":"true"},on:{click:function(t){return t.stopPropagation(),e.handleToggleFile(t)}}}):e._e(),e._v(" "),e._m(0),e._v(" "),n("clipboard-button",{attrs:{title:e.__("Copy file path"),text:e.diffFile.file_path,gfm:e.gfmCopyText,"css-class":"btn-default btn-transparent btn-clipboard","data-track-event":"click_copy_file_button","data-track-label":"diff_copy_file_path_button","data-track-property":"diff_copy_file"}}),e._v(" "),e.isModeChanged?n("small",{ref:"fileMode",staticClass:"mr-1"},[e._v("\n      "+e._s(e.diffFile.a_mode)+" → "+e._s(e.diffFile.b_mode)+"\n    ")]):e._e(),e._v(" "),e.isUsingLfs?n("span",{staticClass:"label label-lfs append-right-5"},[e._v(" "+e._s(e.__("LFS"))+" ")]):e._e()],1),e._v(" "),!e.diffFile.submodule&&e.addMergeRequestButtons?n("div",{staticClass:"file-actions d-none d-sm-flex align-items-center flex-wrap"},[n("diff-stats",{attrs:{"added-lines":e.diffFile.added_lines,"removed-lines":e.diffFile.removed_lines}}),e._v(" "),n("div",{staticClass:"btn-group",attrs:{role:"group"}},[e.diffFile.blob&&e.diffFile.blob.readable_text?[n("span",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:e.s__("MergeRequests|Toggle comments for this file")}},[n("gl-button",{ref:"toggleDiscussionsButton",staticClass:"js-btn-vue-toggle-comments btn",class:{active:e.diffHasExpandedDiscussions(e.diffFile)},attrs:{disabled:!e.diffHasDiscussions(e.diffFile),"data-qa-selector":"toggle_comments_button","data-track-event":"click_toggle_comments_button","data-track-label":"diff_toggle_comments_button","data-track-property":"diff_toggle_comments",type:"button"},on:{click:function(t){return e.toggleFileDiscussionWrappers(e.diffFile)}}},[n("icon",{attrs:{name:"comment"}})],1)],1),e._v(" "),e.diffFile.deleted_file?e._e():n("edit-button",{attrs:{"can-current-user-fork":e.canCurrentUserFork,"edit-path":e.diffFile.edit_path,"can-modify-blob":e.diffFile.can_modify_blob,"data-track-event":"click_toggle_edit_button","data-track-label":"diff_toggle_edit_button","data-track-property":"diff_toggle_edit"},on:{showForkMessage:e.showForkMessage}})]:e._e(),e._v(" "),e.diffFile.replaced_view_path?n("a",{ref:"replacedFileButton",staticClass:"btn view-file",attrs:{href:e.diffFile.replaced_view_path},domProps:{innerHTML:e._s(e.viewReplacedFileButtonText)}}):e._e(),e._v(" "),e.diffFile.is_fully_expanded?e._e():n("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.hover",modifiers:{hover:!0}}],ref:"expandDiffToFullFileButton",staticClass:"expand-file",attrs:{title:e.expandDiffToFullFileTitle,"data-track-event":"click_toggle_view_full_button","data-track-label":"diff_toggle_view_full_button","data-track-property":"diff_toggle_view_full"},on:{click:function(t){return e.toggleFullDiff(e.diffFile.file_path)}}},[e.diffFile.isLoadingFullFile?n("gl-loading-icon",{attrs:{color:"dark",inline:""}}):e.diffFile.isShowingFullFile?n("icon",{attrs:{name:"doc-changes"}}):n("icon",{attrs:{name:"doc-expand"}})],1),e._v(" "),n("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.hover",modifiers:{hover:!0}}],ref:"viewButton",staticClass:"view-file",attrs:{href:e.diffFile.view_path,target:"_blank","data-track-event":"click_toggle_view_sha_button","data-track-label":"diff_toggle_view_sha_button","data-track-property":"diff_toggle_view_sha",title:e.viewFileButtonText}},[n("icon",{attrs:{name:"doc-text"}})],1),e._v(" "),e.diffFile.external_url?n("a",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.hover",modifiers:{hover:!0}}],ref:"externalLink",staticClass:"btn btn-file-option",attrs:{href:e.diffFile.external_url,title:"View on "+e.diffFile.formatted_external_url,target:"_blank",rel:"noopener noreferrer","data-track-event":"click_toggle_external_button","data-track-label":"diff_toggle_external_button","data-track-property":"diff_toggle_external"}},[n("icon",{attrs:{name:"external-link"}})],1):e._e()],2)],1):e._e()])}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{ref:"titleWrapper",staticClass:"append-right-4",attrs:{id:"diffFile.file_path",href:e.titleLink},on:{click:e.handleFileNameClick}},[n("file-icon",{attrs:{"file-name":e.filePath,size:18,"aria-hidden":"true","css-classes":"append-right-5"}}),e._v(" "),e.isFileRenamed?n("span",[n("strong",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"file-title-name",attrs:{title:e.diffFile.old_path},domProps:{innerHTML:e._s(e.diffFile.old_path_html)}}),e._v("\n        →\n        "),n("strong",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"file-title-name",attrs:{title:e.diffFile.new_path},domProps:{innerHTML:e._s(e.diffFile.new_path_html)}})]):n("strong",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"file-title-name",attrs:{title:e.filePath,"data-container":"body"}},[e._v("\n        "+e._s(e.filePath)+"\n      ")])],1)}],!1,null,null,null);t.a=S.exports},756:function(e,t,n){"use strict";n(24),n(28),n(26),n(50),n(58),n(38),n(27);var i=n(445),s=n.n(i),a=n(22);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l={methods:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(a.c)(["toggleDiscussion"]),{clickedToggle:function(e){this.toggleDiscussion({discussionId:e.id})},toggleText:function(e,t){return t+1}})};function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p={name:"ImageDiffOverlay",components:{Icon:n(45).a},mixins:[l],props:{discussions:{type:[Array,Object],required:!0},fileHash:{type:String,required:!0},canComment:{type:Boolean,required:!1,default:!1},showCommentIcon:{type:Boolean,required:!1,default:!1},badgeClass:{type:String,required:!1,default:"badge badge-pill"},shouldToggleDiscussion:{type:Boolean,required:!1,default:!0}},computed:u({},Object(a.d)("diffs",["getDiffFileByHash","getCommentFormForDiffFile"]),{currentCommentForm:function(){return this.getCommentFormForDiffFile(this.fileHash)},allDiscussions:function(){return s()(this.discussions)?this.discussions:[this.discussions]}}),methods:u({},Object(a.c)("diffs",["openDiffFileCommentForm"]),{getImageDimensions:function(){return{width:this.$parent.width,height:this.$parent.height}},getPositionForObject:function(e){var t=e.x,n=e.y,i=e.width,s=e.height,a=this.getImageDimensions().width/i,r=this.getImageDimensions().height/s;return{x:Math.round(t*a),y:Math.round(n*r)}},getPosition:function(e){var t=this.getPositionForObject(e.position),n=t.x,i=t.y;return{left:"".concat(n,"px"),top:"".concat(i,"px")}},clickedImage:function(e,t){var n=this.getImageDimensions(),i=n.width,s=n.height;this.openDiffFileCommentForm({fileHash:this.fileHash,width:i,height:s,x:e,y:t})}})},f=n(4),h=Object(f.a)(p,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"position-absolute w-100 h-100 image-diff-overlay"},[e.canComment?n("button",{staticClass:"btn-transparent position-absolute image-diff-overlay-add-comment w-100 h-100 js-add-image-diff-note-button",attrs:{type:"button"},on:{click:function(t){return e.clickedImage(t.offsetX,t.offsetY)}}},[n("span",{staticClass:"sr-only"},[e._v(" "+e._s(e.__("Add image comment"))+" ")])]):e._e(),e._v(" "),e._l(e.allDiscussions,(function(t,i){return n("button",{key:t.id,staticClass:"js-image-badge",class:[e.badgeClass,{"is-draft":t.isDraft}],style:e.getPosition(t),attrs:{disabled:!e.shouldToggleDiscussion,type:"button"},on:{click:function(n){return e.clickedToggle(t)}}},[e.showCommentIcon?n("icon",{attrs:{name:"image-comment-dark"}}):[e._v("\n      "+e._s(e.toggleText(t,i))+"\n    ")]],2)})),e._v(" "),e.currentCommentForm?n("button",{staticClass:"btn-transparent comment-indicator",style:{left:e.currentCommentForm.x+"px",top:e.currentCommentForm.y+"px"},attrs:{"aria-label":e.__("Comment form position"),type:"button"}},[n("icon",{attrs:{name:"image-comment-dark"}})],1):e._e()],2)}),[],!1,null,null,null);t.a=h.exports},757:function(e,t,n){"use strict";n(72);var i=n(554),s=n.n(i),a=n(45),r=n(1),o={components:{Icon:a.a},props:{addedLines:{type:Number,required:!0},removedLines:{type:Number,required:!0},diffFilesLength:{type:Number,required:!1,default:null}},computed:{filesText:function(){return Object(r.c)("file","files",this.diffFilesLength)},isCompareVersionsHeader:function(){return Boolean(this.diffFilesLength)},hasDiffFiles:function(){return s()(this.diffFilesLength)&&this.diffFilesLength>=0}}},l=n(4),c=Object(l.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"diff-stats",class:{"is-compare-versions-header d-none d-lg-inline-flex":e.isCompareVersionsHeader,"d-inline-flex":!e.isCompareVersionsHeader}},[e.hasDiffFiles?n("div",{staticClass:"diff-stats-group"},[n("icon",{staticClass:"diff-stats-icon text-secondary",attrs:{name:"doc-code"}}),e._v(" "),n("span",{staticClass:"text-secondary bold"},[e._v(e._s(e.diffFilesLength)+" "+e._s(e.filesText))])],1):e._e(),e._v(" "),n("div",{staticClass:"diff-stats-group cgreen d-flex align-items-center",class:{bold:e.isCompareVersionsHeader}},[n("span",[e._v("+")]),e._v(" "),n("span",{staticClass:"js-file-addition-line"},[e._v(e._s(e.addedLines))])]),e._v(" "),n("div",{staticClass:"diff-stats-group cred d-flex align-items-center",class:{bold:e.isCompareVersionsHeader}},[n("span",[e._v("-")]),e._v(" "),n("span",{staticClass:"js-file-deletion-line"},[e._v(e._s(e.removedLines))])])])}),[],!1,null,null,null);t.a=c.exports},758:function(e,t,n){"use strict";var i={name:"ReplyPlaceholder",props:{buttonText:{type:String,required:!0}}},s=n(4),a=Object(s.a)(i,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("button",{ref:"button",staticClass:"js-vue-discussion-reply btn btn-text-field",attrs:{type:"button",title:e.s__("MergeRequests|Add a reply")},on:{click:function(t){return e.$emit("onClick")}}},[e._v("\n  "+e._s(e.buttonText)+"\n")])}),[],!1,null,null,null);t.a=a.exports},807:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));n(24),n(49),n(56),n(30),n(26),n(40),n(90),n(18),n(36),n(89),n(27),n(41);var i=n(0),s=n.n(i),a=n(8),r=n.n(a),o=n(376),l=n(107),c=n(734),u=n(16);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function f(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=f(this,h(t).call(this)),r.a.bind("a",(function(){return t.openSidebarDropdown("assignee")})),r.a.bind("m",(function(){return t.openSidebarDropdown("milestone")})),r.a.bind("l",(function(){return t.openSidebarDropdown("labels")})),r.a.bind("r",t.replyWithSelectedText),r.a.bind("e",t.editIssue),e}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,e),n=t,a=[{key:"replyWithSelectedText",value:function(){var e=s()(".js-main-target-form .js-vue-comment-form");if(!e.length||e.is(":hidden"))return!1;var t=Object(u.o)(document.querySelector("#content-body"));if(!t)return e.focus(),!1;var n=Boolean(t.querySelector(".md"));if(!n&&(t.originalNodes&&t.originalNodes.forEach((function(e){var t=e;do{t.matches&&t.matches(".md")&&(n=!0),t=t.parentNode}while(t&&!n)})),!n))return e.focus(),!1;var i=c.a.transformGFMSelection(t.cloneNode(!0)),a=document.createElement("blockquote");return a.appendChild(i),c.a.nodeToGFM(a).then((function(t){if(""===t.trim())return!1;var n=""!==e.val().trim()?"\n\n":"";e.val((function(e,i){return"".concat(i).concat(n).concat(t,"\n\n")})).trigger("input").trigger("change");var i=document.createEvent("Event");return i.initEvent("autosize:update",!0,!1),e.get(0).dispatchEvent(i),e.focus(),!1})).catch((function(){})),!1}},{key:"editIssue",value:function(){return document.querySelector(".js-issuable-edit").click(),!1}},{key:"openSidebarDropdown",value:function(e){return o.a.instance.openDropdown(e),!1}}],(i=null)&&p(n.prototype,i),a&&p(n,a),t}(l.a)},808:function(e,t,n){var i=n(475),s=n(1177);e.exports=function(e,t){return e&&e.length?s(e,i(t,2)):[]}},813:function(e,t,n){"use strict";n(24),n(1092),n(28),n(42),n(26),n(258),n(77),n(50),n(58),n(38),n(55),n(91),n(27);var i=n(22),s=n(33),a=n(14),r=n(120),o=n(209),l=n(666),c=n(754),u=n(553),d=n(45),p=n(1),f={components:{GlButton:u.a,Icon:d.a},computed:{timelineContent:function(){return Object(p.e)(Object(p.a)("You're only seeing %{startTag}other activity%{endTag} in the feed. To add a comment, switch to one of the following options."),{startTag:"<b>",endTag:"</b>"},!1)}},methods:{selectFilter:function(e){o.a.$emit("dropdownSelect",e)}}},h=n(4),m=Object(h.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"timeline-entry note note-wrapper discussion-filter-note js-discussion-filter-note"},[n("div",{staticClass:"timeline-icon d-none d-lg-flex"},[n("icon",{attrs:{name:"comment"}})],1),e._v(" "),n("div",{staticClass:"timeline-content"},[n("div",{ref:"timelineContent",domProps:{innerHTML:e._s(e.timelineContent)}}),e._v(" "),n("div",{staticClass:"discussion-filter-actions mt-2"},[n("gl-button",{ref:"showAllActivity",attrs:{variant:"default"},on:{click:function(t){return e.selectFilter(0)}}},[e._v("\n        "+e._s(e.__("Show all activity"))+"\n      ")]),e._v(" "),n("gl-button",{ref:"showComments",attrs:{variant:"default"},on:{click:function(t){return e.selectFilter(1)}}},[e._v("\n        "+e._s(e.__("Show comments only"))+"\n      ")])],1)])])}),[],!1,null,null,null).exports,g=n(667),b=(n(65),n(398),n(254)),v=n.n(b),y=n(0),_=n.n(y),w=n(157),k=n.n(w),j=n(293),O=n(257),S=n(110),C=n(472),D=n(670),T=n(470),E=n(180),x=n(154),P=n(552),I=n(301),L=n(434),A=n(487),N={components:{Icon:d.a,GlLink:I.a},mixins:[L.a,A.a],computed:{projectArchivedWarning:function(){return Object(p.a)("This project is archived and cannot be commented on.")},lockedIssueWarning:function(){return Object(p.e)(Object(p.a)("This %{issuableDisplayName} is locked. Only project members can comment."),{issuableDisplayName:this.issuableDisplayName})}}},q=Object(h.a)(N,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"disabled-comment text-center"},[n("span",{staticClass:"issuable-note-warning inline"},[n("icon",{staticClass:"icon",attrs:{size:16,name:"lock"}}),e._v(" "),e.isProjectArchived?n("span",[e._v("\n      "+e._s(e.projectArchivedWarning)+"\n      "),n("gl-link",{staticClass:"learn-more",attrs:{href:e.archivedProjectDocsPath,target:"_blank"}},[e._v("\n        "+e._s(e.__("Learn more"))+"\n      ")])],1):n("span",[e._v("\n      "+e._s(e.lockedIssueWarning)+"\n      "),n("gl-link",{staticClass:"learn-more",attrs:{href:e.lockedIssueDocsPath,target:"_blank"}},[e._v("\n        "+e._s(e.__("Learn more"))+"\n      ")])],1)],1)])}),[],!1,null,null,null).exports;function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){M(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var F={name:"CommentForm",components:{issueWarning:D.a,noteSignedOutWidget:P.a,discussionLockedWidget:q,markdownField:T.a,userAvatarLink:E.a,loadingButton:x.a,TimelineEntryItem:j.a},mixins:[A.a],props:{noteableType:{type:String,required:!0}},data:function(){return{note:"",noteType:r.b,isSubmitting:!1,isSubmitButtonDisabled:!0}},computed:B({},Object(i.d)(["getCurrentUserLastNote","getUserData","getNoteableData","getNotesData","openState"]),{},Object(i.e)(["isToggleStateButtonLoading"]),{noteableDisplayName:function(){return Object(S.l)(this.noteableType).toLowerCase()},isLoggedIn:function(){return this.getUserData.id},commentButtonTitle:function(){return this.noteType===r.b?Object(p.a)("Comment"):Object(p.a)("Start thread")},startDiscussionDescription:function(){return this.getNoteableData.noteableType===r.n?Object(p.a)("Discuss a specific suggestion or question that needs to be resolved."):Object(p.a)("Discuss a specific suggestion or question.")},isOpen:function(){return this.openState===r.r||this.openState===r.s},canCreateNote:function(){return this.getNoteableData.current_user.can_create_note},issueActionButtonTitle:function(){var e=this.isOpen?"close":"reopen";return this.note.length?Object(p.e)(Object(p.a)("%{actionText} & %{openOrClose} %{noteable}"),{actionText:this.commentButtonTitle,openOrClose:e,noteable:this.noteableDisplayName}):Object(p.e)(Object(p.a)("%{openOrClose} %{noteable}"),{openOrClose:Object(S.b)(e),noteable:this.noteableDisplayName})},actionButtonClassNames:function(){return{"btn-reopen":!this.isOpen,"btn-close":this.isOpen,"js-note-target-close":this.isOpen,"js-note-target-reopen":!this.isOpen}},markdownDocsPath:function(){return this.getNotesData.markdownDocsPath},quickActionsDocsPath:function(){return this.getNotesData.quickActionsDocsPath},markdownPreviewPath:function(){return this.getNoteableData.preview_note_path},author:function(){return this.getUserData},canToggleIssueState:function(){return this.getNoteableData.current_user.can_update&&this.getNoteableData.state!==r.m},endpoint:function(){return this.getNoteableData.create_note_path},issuableTypeTitle:function(){return this.noteableType===r.n?Object(p.a)("merge request"):Object(p.a)("issue")},trackingLabel:function(){return Object(S.k)("".concat(this.commentButtonTitle," button"))}}),watch:{note:function(e){this.setIsSubmitButtonDisabled(e,this.isSubmitting)},isSubmitting:function(e){this.setIsSubmitButtonDisabled(this.note,e)}},mounted:function(){var e=this;_()(document).on("issuable:change",(function(t,n){e.toggleIssueLocalState(n?r.a:r.s)})),this.initAutoSave()},methods:B({},Object(i.c)(["saveNote","stopPolling","restartPolling","removePlaceholderNotes","closeIssue","reopenIssue","toggleIssueLocalState","toggleStateButtonLoading"]),{setIsSubmitButtonDisabled:function(e,t){v()(e)||t?this.isSubmitButtonDisabled=!0:this.isSubmitButtonDisabled=!1},handleSave:function(e){var t=this;if(this.isSubmitting=!0,this.note.length){var n={endpoint:this.endpoint,flashContainer:this.$el,data:{note:{noteable_type:this.noteableType,noteable_id:this.getNoteableData.id,note:this.note},merge_request_diff_head_sha:this.getNoteableData.diff_head_sha}};this.noteType===r.e&&(n.data.note.type=r.h),this.note="",this.resizeTextarea(),this.stopPolling(),this.saveNote(n).then((function(){t.enableButton(),t.restartPolling(),t.discard(),e&&t.toggleIssueState()})).catch((function(){t.enableButton(),t.discard(!1);var e=Object(p.a)("Your comment could not be submitted! Please check your network connection and try again.");Object(a.a)(e,"alert",t.$el),t.note=n.data.note.note,t.removePlaceholderNotes()}))}else this.toggleIssueState()},enableButton:function(){this.isSubmitting=!1},toggleIssueState:function(){var e=this;this.isOpen?this.closeIssue().then((function(){e.enableButton(),Object(C.b)()})).catch((function(){e.enableButton(),e.toggleStateButtonLoading(!1),Object(a.a)(Object(p.e)(Object(p.a)("Something went wrong while closing the %{issuable}. Please try again later"),{issuable:e.noteableDisplayName}))})):this.reopenIssue().then((function(){e.enableButton(),Object(C.b)()})).catch((function(t){var n=t.data;e.enableButton(),e.toggleStateButtonLoading(!1);var i=Object(p.e)(Object(p.a)("Something went wrong while reopening the %{issuable}. Please try again later"),{issuable:e.noteableDisplayName});n&&(i=Object.values(n).join("\n")),Object(a.a)(i)}))},discard:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$refs.textarea.blur(),this.$refs.textarea.focus(),e&&(this.note="",this.resizeTextarea(),this.$refs.markdownField.previewMarkdown=!1),this.autosave.reset()},setNoteType:function(e){this.noteType=e},editCurrentUserLastNote:function(){if(""===this.note){var e=this.getCurrentUserLastNote;e&&o.a.$emit("enterEditMode",{noteId:e.id})}},initAutoSave:function(){if(this.isLoggedIn){var e=Object(S.b)(Object(S.c)(this.noteableType));this.autosave=new O.a(_()(this.$refs.textarea),[Object(p.a)("Note"),e,this.getNoteableData.id])}},resizeTextarea:function(){var e=this;this.$nextTick((function(){k.a.update(e.$refs.textarea)}))}})},$=Object(h.a)(F,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.isLoggedIn?e.canCreateNote?e.canCreateNote?n("ul",{staticClass:"notes notes-form timeline"},[n("timeline-entry-item",{staticClass:"note-form"},[n("div",{staticClass:"flash-container error-alert timeline-content"}),e._v(" "),n("div",{staticClass:"timeline-icon d-none d-sm-none d-md-block"},[e.author?n("user-avatar-link",{attrs:{"link-href":e.author.path,"img-src":e.author.avatar_url,"img-alt":e.author.name,"img-size":40}}):e._e()],1),e._v(" "),n("div",{staticClass:"timeline-content timeline-content-form"},[n("form",{ref:"commentForm",staticClass:"new-note common-note-form gfm-form js-main-target-form"},[n("div",{staticClass:"error-alert"}),e._v(" "),e.hasWarning(e.getNoteableData)?n("issue-warning",{attrs:{"is-locked":e.isLocked(e.getNoteableData),"is-confidential":e.isConfidential(e.getNoteableData),"locked-issue-docs-path":e.lockedIssueDocsPath,"confidential-issue-docs-path":e.confidentialIssueDocsPath}}):e._e(),e._v(" "),n("markdown-field",{ref:"markdownField",attrs:{"is-submitting":e.isSubmitting,"markdown-preview-path":e.markdownPreviewPath,"markdown-docs-path":e.markdownDocsPath,"quick-actions-docs-path":e.quickActionsDocsPath,"add-spacing-classes":!1}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.note,expression:"note"}],ref:"textarea",staticClass:"note-textarea js-vue-comment-form js-note-text\njs-gfm-input js-autosize markdown-area js-vue-textarea qa-comment-input",attrs:{slot:"textarea",id:"note-body",dir:"auto",disabled:e.isSubmitting,name:"note[note]","data-supports-quick-actions":"true","aria-label":e.__("Description"),placeholder:e.__("Write a comment or drag your files here…")},domProps:{value:e.note},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:e.editCurrentUserLastNote()},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.metaKey?e.handleSave():null},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?e.handleSave():null}],input:function(t){t.target.composing||(e.note=t.target.value)}},slot:"textarea"})]),e._v(" "),n("div",{staticClass:"note-form-actions"},[n("div",{staticClass:"float-left btn-group\nappend-right-10 comment-type-dropdown js-comment-type-dropdown droplab-dropdown"},[n("button",{staticClass:"btn btn-success js-comment-button js-comment-submit-button\n                    qa-comment-button",attrs:{disabled:e.isSubmitButtonDisabled,type:"submit","data-track-label":e.trackingLabel,"data-track-event":"click_button"},on:{click:function(t){return t.preventDefault(),e.handleSave()}}},[e._v("\n                  "+e._s(e.commentButtonTitle)+"\n                ")]),e._v(" "),n("button",{staticClass:"btn btn-success note-type-toggle js-note-new-discussion dropdown-toggle qa-note-dropdown",attrs:{disabled:e.isSubmitButtonDisabled,name:"button",type:"button","data-display":"static","data-toggle":"dropdown","aria-label":e.__("Open comment type dropdown")}},[n("i",{staticClass:"fa fa-caret-down toggle-icon",attrs:{"aria-hidden":"true"}})]),e._v(" "),n("ul",{staticClass:"note-type-dropdown dropdown-open-top dropdown-menu"},[n("li",{class:{"droplab-item-selected":"comment"===e.noteType}},[n("button",{staticClass:"btn btn-transparent",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.setNoteType("comment")}}},[n("i",{staticClass:"fa fa-check icon",attrs:{"aria-hidden":"true"}}),e._v(" "),n("div",{staticClass:"description"},[n("strong",[e._v(e._s(e.__("Comment")))]),e._v(" "),n("p",[e._v("\n                          "+e._s(e.sprintf(e.__("Add a general comment to this %{noteableDisplayName}."),{noteableDisplayName:e.noteableDisplayName}))+"\n                        ")])])])]),e._v(" "),n("li",{staticClass:"divider droplab-item-ignore"}),e._v(" "),n("li",{class:{"droplab-item-selected":"discussion"===e.noteType}},[n("button",{staticClass:"btn btn-transparent qa-discussion-option",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.setNoteType("discussion")}}},[n("i",{staticClass:"fa fa-check icon",attrs:{"aria-hidden":"true"}}),e._v(" "),n("div",{staticClass:"description"},[n("strong",[e._v(e._s(e.__("Start thread")))]),e._v(" "),n("p",[e._v(e._s(e.startDiscussionDescription))])])])])])]),e._v(" "),e.canToggleIssueState?n("loading-button",{attrs:{loading:e.isToggleStateButtonLoading,"container-class":[e.actionButtonClassNames,"btn btn-comment btn-comment-and-close js-action-button"],disabled:e.isToggleStateButtonLoading||e.isSubmitting,label:e.issueActionButtonTitle},on:{click:function(t){return e.handleSave(!0)}}}):e._e()],1)],1)])])],1):e._e():n("discussion-locked-widget",{attrs:{"issuable-type":e.issuableTypeTitle}}):n("note-signed-out-widget")],1)}),[],!1,null,null,null).exports,U=n(668),H=n(669),V={name:"SkeletonNote",components:{GlSkeletonLoading:n(2532).a,TimelineEntryItem:j.a}},z=Object(h.a)(V,(function(){var e=this.$createElement,t=this._self._c||e;return t("timeline-entry-item",{staticClass:"note note-wrapper",attrs:{"data-qa-selector":"skeleton_note"}},[t("div",{staticClass:"timeline-icon"}),this._v(" "),t("div",{staticClass:"timeline-content"},[t("div",{staticClass:"note-header"}),this._v(" "),t("div",{staticClass:"note-body"},[t("gl-skeleton-loading")],1)])])}),[],!1,null,null,null).exports,W=n(826),G=n(673);function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){J(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Q={name:"NotesApp",components:{noteableNote:l.a,noteableDiscussion:c.a,systemNote:g.a,commentForm:$,placeholderNote:U.a,placeholderSystemNote:H.a,skeletonLoadingContainer:z,discussionFilterNote:m},props:{noteableData:{type:Object,required:!0},notesData:{type:Object,required:!0},userData:{type:Object,required:!1,default:function(){return{}}},shouldShow:{type:Boolean,required:!1,default:!0},helpPagePath:{type:String,required:!1,default:""}},data:function(){return{isFetching:!1,currentFilter:null}},computed:K({},Object(i.d)(["isNotesFetched","discussions","convertedDisscussionIds","getNotesDataByProp","isLoading","commentsDisabled","getNoteableData","userCanReply","discussionTabCounter"]),{discussionTabCounterText:function(){return this.isLoading?"":this.discussionTabCounter},noteableType:function(){return this.noteableData.noteableType},allDiscussions:function(){if(this.isLoading){var e=parseInt(this.notesData.prerenderedNotesCount,10)||0;return new Array(e).fill({isSkeletonNote:!0})}return this.discussions},canReply:function(){return this.userCanReply&&!this.commentsDisabled}}),watch:{shouldShow:function(){this.isNotesFetched||this.fetchNotes()},discussionTabCounterText:function(e){this.discussionsCount&&(this.discussionsCount.textContent=e)}},created:function(){this.discussionsCount=document.querySelector(".js-discussions-count"),this.setNotesData(this.notesData),this.setNoteableData(this.noteableData),this.setUserData(this.userData),this.setTargetNoteHash(Object(s.d)()),o.a.$once("fetchNotesData",this.fetchNotes)},mounted:function(){var e=this;this.shouldShow&&this.fetchNotes();var t=this.$el.parentElement;t&&t.classList.contains("js-vue-notes-event")&&t.addEventListener("toggleAward",(function(t){var n=t.detail,i=n.awardName,s=n.noteId;e.toggleAward({awardName:i,noteId:s})})),window.addEventListener("hashchange",this.handleHashChanged)},updated:function(){var e=this;this.$nextTick((function(){Object(W.a)(e.$el.querySelectorAll(".gfm-project_member")),Object(G.a)(e.$el.querySelectorAll(".js-user-link"))}))},beforeDestroy:function(){this.stopPolling(),window.removeEventListener("hashchange",this.handleHashChanged)},methods:K({},Object(i.c)(["setLoadingState","fetchDiscussions","poll","toggleAward","setNotesData","setNoteableData","setUserData","setLastFetchedAt","setTargetNoteHash","toggleDiscussion","setNotesFetchedState","expandDiscussion","startTaskList","convertToDiscussion","stopPolling"]),{handleHashChanged:function(){this.checkLocationHash()&&this.setTargetNoteHash(Object(s.d)())},fetchNotes:function(){var e=this;return this.isFetching?null:(this.isFetching=!0,this.fetchDiscussions(this.getFetchDiscussionsConfig()).then(this.initPolling).then((function(){e.setLoadingState(!1),e.setNotesFetchedState(!0),o.a.$emit("fetchedNotesData"),e.isFetching=!1})).then(this.$nextTick).then(this.startTaskList).then(this.checkLocationHash).catch((function(){e.setLoadingState(!1),e.setNotesFetchedState(!0),Object(a.a)(Object(p.a)("Something went wrong while fetching comments. Please try again."))})))},initPolling:function(){this.isPollingInitialized||(this.setLastFetchedAt(this.getNotesDataByProp("lastFetchedAt")),this.poll(),this.isPollingInitialized=!0)},checkLocationHash:function(){var e=Object(s.d)(),t=e&&e.replace(/^note_/,"");if(t){var n=this.discussions.find((function(e){return e.notes.some((function(e){return e.id===t}))}));n&&this.expandDiscussion({discussionId:n.id})}return t},startReplying:function(e){return this.convertToDiscussion(e).then(this.$nextTick).then((function(){return o.a.$emit("startReplying",e)}))},getFetchDiscussionsConfig:function(){var e={path:this.getNotesDataByProp("discussionsPath")};return Object(s.a)(r.q)?Object.assign({},e,{filter:r.f,persistFilter:!1}):e}}),systemNote:r.u},X=Object(h.a)(Q,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.shouldShow,expression:"shouldShow"}],attrs:{id:"notes"}},[n("ul",{staticClass:"notes main-notes-list timeline",attrs:{id:"notes-list"}},[e._l(e.allDiscussions,(function(t){return[t.isSkeletonNote?n("skeleton-loading-container",{key:t.id}):t.isPlaceholderNote?[t.placeholderType===e.$options.systemNote?n("placeholder-system-note",{key:t.id,attrs:{note:t.notes[0]}}):n("placeholder-note",{key:t.id,attrs:{note:t.notes[0]}})]:t.individual_note&&!e.convertedDisscussionIds.includes(t.id)?[t.notes[0].system?n("system-note",{key:t.id,attrs:{note:t.notes[0]}}):n("noteable-note",{key:t.id,attrs:{note:t.notes[0],"show-reply-button":e.canReply},on:{startReplying:function(n){return e.startReplying(t.id)}}})]:n("noteable-discussion",{key:t.id,attrs:{discussion:t,"render-diff-file":!0,"help-page-path":e.helpPagePath}})]})),e._v(" "),n("discussion-filter-note",{directives:[{name:"show",rawName:"v-show",value:e.commentsDisabled,expression:"commentsDisabled"}]})],2),e._v(" "),e.commentsDisabled?e._e():n("comment-form",{attrs:{"noteable-type":e.noteableType}})],1)}),[],!1,null,null,null);t.a=X.exports},815:function(e,t,n){"use strict";n(30),n(72);var i=n(93),s=n.n(i),a=n(1233),r=n(1),o=n(158),l=n(328),c=n(45),u={components:{ClipboardButton:o.a,FileIcon:l.a,Icon:c.a},directives:{GlTooltip:a.a},props:{lines:{type:Array,required:!0},filePath:{type:String,required:!0},errorFn:{type:String,required:!1,default:""},errorLine:{type:Number,required:!1,default:0},errorColumn:{type:Number,required:!1,default:0},expanded:{type:Boolean,required:!1,default:!1}},data:function(){return{isExpanded:this.expanded}},computed:{hasCode:function(){return Boolean(this.lines.length)},collapseIcon:function(){return this.isExpanded?"chevron-down":"chevron-right"},errorFnText:function(){return this.errorFn?Object(r.e)(Object(r.a)("%{spanStart}in%{spanEnd} %{errorFn}"),{errorFn:"<strong>".concat(s()(this.errorFn),"</strong>"),spanStart:'<span class="text-tertiary">',spanEnd:"</span>"},!1):""},errorPositionText:function(){return this.errorLine?Object(r.e)(Object(r.a)("%{spanStart}at line%{spanEnd} %{errorLine}%{errorColumn}"),{errorLine:"<strong>".concat(this.errorLine,"</strong>"),errorColumn:this.errorColumn?":<strong>".concat(this.errorColumn,"</strong>"):"",spanStart:'<span class="text-tertiary">',spanEnd:"</span>"},!1):""},errorInfo:function(){return"".concat(this.errorFnText," ").concat(this.errorPositionText)}},methods:{isHighlighted:function(e){return e===this.errorLine},toggle:function(){this.isExpanded=!this.isExpanded},lineNum:function(e){return e[0]},lineCode:function(e){return e[1]}},userColorScheme:window.gon.user_color_scheme},d=n(4),p={components:{StackTraceEntry:Object(d.a)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"file-holder"},[n("div",{ref:"header",staticClass:"file-title file-title-flex-parent"},[n("div",{staticClass:"file-header-content d-flex align-content-center"},[e.hasCode?n("div",{staticClass:"d-inline-block cursor-pointer",on:{click:function(t){return e.toggle()}}},[n("icon",{staticClass:"append-right-5",attrs:{name:e.collapseIcon,size:16,"aria-hidden":"true"}})],1):e._e(),e._v(" "),n("file-icon",{attrs:{"file-name":e.filePath,size:18,"aria-hidden":"true","css-classes":"append-right-5"}}),e._v(" "),n("strong",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"file-title-name d-inline-block overflow-hidden text-truncate limited-width",attrs:{title:e.filePath,"data-container":"body"}},[e._v("\n        "+e._s(e.filePath)+"\n      ")]),e._v(" "),n("clipboard-button",{attrs:{title:e.__("Copy file path"),text:e.filePath,"css-class":"btn-default btn-transparent btn-clipboard position-static"}}),e._v(" "),n("span",{domProps:{innerHTML:e._s(e.errorInfo)}})],1)]),e._v(" "),e.isExpanded?n("table",{staticClass:"code js-syntax-highlight",class:e.$options.userColorScheme},[n("tbody",[e._l(e.lines,(function(t,i){return[n("tr",{key:"stacktrace-line-"+i,staticClass:"line_holder"},[n("td",{staticClass:"diff-line-num",class:{old:e.isHighlighted(e.lineNum(t))}},[e._v("\n            "+e._s(e.lineNum(t))+"\n          ")]),e._v(" "),n("td",{staticClass:"line_content",class:{old:e.isHighlighted(e.lineNum(t))},domProps:{innerHTML:e._s(e.lineCode(t))}})])]}))],2)]):e._e()])}),[],!1,null,null,null).exports},props:{entries:{type:Array,required:!0}},methods:{isFirstEntry:function(e){return 0===e}}},f=Object(d.a)(p,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"stacktrace"},e._l(e.entries,(function(t,i){return n("stack-trace-entry",{key:"stacktrace-entry-"+i,attrs:{lines:t.context,"file-path":t.filename,"error-line":t.lineNo,"error-fn":t.function,"error-column":t.colNo,expanded:e.isFirstEntry(i)}})})),1)}),[],!1,null,null,null);t.a=f.exports},816:function(e,t,n){"use strict";var i={};n.r(i),n.d(i,"expandDiscussion",(function(){return I})),n.d(i,"collapseDiscussion",(function(){return L})),n.d(i,"setNotesData",(function(){return A})),n.d(i,"setNoteableData",(function(){return N})),n.d(i,"setUserData",(function(){return q})),n.d(i,"setLastFetchedAt",(function(){return R})),n.d(i,"setInitialNotes",(function(){return B})),n.d(i,"setTargetNoteHash",(function(){return M})),n.d(i,"setNotesFetchedState",(function(){return F})),n.d(i,"toggleDiscussion",(function(){return $})),n.d(i,"fetchDiscussions",(function(){return U})),n.d(i,"updateDiscussion",(function(){return H})),n.d(i,"removeNote",(function(){return V})),n.d(i,"deleteNote",(function(){return z})),n.d(i,"updateNote",(function(){return W})),n.d(i,"updateOrCreateNotes",(function(){return G})),n.d(i,"replyToDiscussion",(function(){return Y})),n.d(i,"createNewNote",(function(){return K})),n.d(i,"removePlaceholderNotes",(function(){return J})),n.d(i,"resolveDiscussion",(function(){return Q})),n.d(i,"toggleResolveNote",(function(){return X})),n.d(i,"closeIssue",(function(){return Z})),n.d(i,"reopenIssue",(function(){return ee})),n.d(i,"toggleStateButtonLoading",(function(){return te})),n.d(i,"emitStateChangedEvent",(function(){return ne})),n.d(i,"toggleIssueLocalState",(function(){return ie})),n.d(i,"saveNote",(function(){return se})),n.d(i,"fetchData",(function(){return oe})),n.d(i,"poll",(function(){return le})),n.d(i,"stopPolling",(function(){return ce})),n.d(i,"restartPolling",(function(){return ue})),n.d(i,"toggleAward",(function(){return de})),n.d(i,"toggleAwardRequest",(function(){return pe})),n.d(i,"scrollToNoteIfNeeded",(function(){return fe})),n.d(i,"fetchDiscussionDiffLines",(function(){return he})),n.d(i,"updateMergeRequestWidget",(function(){return me})),n.d(i,"setLoadingState",(function(){return ge})),n.d(i,"filterDiscussion",(function(){return be})),n.d(i,"setCommentsDisabled",(function(){return ve})),n.d(i,"startTaskList",(function(){return ye})),n.d(i,"updateResolvableDiscussionsCounts",(function(){return _e})),n.d(i,"submitSuggestion",(function(){return we})),n.d(i,"convertToDiscussion",(function(){return ke})),n.d(i,"removeConvertedDiscussion",(function(){return je})),n.d(i,"setCurrentDiscussionId",(function(){return Oe})),n.d(i,"fetchDescriptionVersion",(function(){return Se})),n.d(i,"requestDescriptionVersion",(function(){return Ce})),n.d(i,"receiveDescriptionVersion",(function(){return De})),n.d(i,"receiveDescriptionVersionError",(function(){return Te})),n.d(i,"softDeleteDescriptionVersion",(function(){return Ee})),n.d(i,"requestDeleteDescriptionVersion",(function(){return xe})),n.d(i,"receiveDeleteDescriptionVersion",(function(){return Pe})),n.d(i,"receiveDeleteDescriptionVersionError",(function(){return Ie})),n.d(i,"default",(function(){return Le}));var s={};n.r(s),n.d(s,"discussions",(function(){return Be})),n.d(s,"convertedDisscussionIds",(function(){return Me})),n.d(s,"targetNoteHash",(function(){return Fe})),n.d(s,"getNotesData",(function(){return $e})),n.d(s,"isNotesFetched",(function(){return Ue})),n.d(s,"isLoading",(function(){return He})),n.d(s,"getNotesDataByProp",(function(){return Ve})),n.d(s,"getNoteableData",(function(){return ze})),n.d(s,"getNoteableDataByProp",(function(){return We})),n.d(s,"userCanReply",(function(){return Ge})),n.d(s,"openState",(function(){return Ye})),n.d(s,"getUserData",(function(){return Ke})),n.d(s,"getUserDataByProp",(function(){return Je})),n.d(s,"descriptionVersions",(function(){return Qe})),n.d(s,"notesById",(function(){return Xe})),n.d(s,"noteableType",(function(){return Ze})),n.d(s,"getCurrentUserLastNote",(function(){return nt})),n.d(s,"getDiscussionLastNote",(function(){return it})),n.d(s,"unresolvedDiscussionsCount",(function(){return st})),n.d(s,"resolvableDiscussionsCount",(function(){return at})),n.d(s,"showJumpToNextDiscussion",(function(){return rt})),n.d(s,"isDiscussionResolved",(function(){return ot})),n.d(s,"allResolvableDiscussions",(function(){return lt})),n.d(s,"resolvedDiscussionsById",(function(){return ct})),n.d(s,"unresolvedDiscussionsIdsByDate",(function(){return ut})),n.d(s,"unresolvedDiscussionsIdsByDiff",(function(){return dt})),n.d(s,"resolvedDiscussionCount",(function(){return pt})),n.d(s,"discussionTabCounter",(function(){return ft})),n.d(s,"unresolvedDiscussionsIdsOrdered",(function(){return ht})),n.d(s,"isLastUnresolvedDiscussion",(function(){return mt})),n.d(s,"findUnresolvedDiscussionIdNeighbor",(function(){return gt})),n.d(s,"nextUnresolvedDiscussionId",(function(){return bt})),n.d(s,"previousUnresolvedDiscussionId",(function(){return vt})),n.d(s,"firstUnresolvedDiscussionId",(function(){return yt})),n.d(s,"getDiscussion",(function(){return _t})),n.d(s,"commentsDisabled",(function(){return wt})),n.d(s,"default",(function(){return kt}));n(24),n(28),n(42),n(26),n(77),n(50),n(58),n(38),n(18),n(64),n(27);var a=n(17),r=n(0),o=n.n(r),l=n(125),c=n.n(l),u=n(11),d=n(377),p=n(14),f=n(159),h=(n(49),n(46),n(35),n(311),n(55),n(68),n(91),n(89),n(200)),m=n(305),g=n(1);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y,_=function(e,t){return e.filter((function(e){return e.id===t}))[0]},w=function(e){var t=Object(g.a)("Applying command"),n=(h.a.get(gl.GfmAutoComplete.dataSources.commands)||[]).filter((function(t){return new RegExp("/".concat(t.name)).test(e)}));if(n&&n.length)if(n.length>1)t=Object(g.a)("Applying multiple commands");else{var i=n[0].description.toLowerCase();t=Object(g.e)(Object(g.a)("Applying command to %{commandDescription}"),{commandDescription:i})}return t},k=function(e){return e.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(m.n)(e))}))},j=n(120),O=n(464),S=n(135),C=n(16),D=n(33),T=n(294),E=n(32);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=function(e,t){var n=e.commit,i=e.dispatch;t.discussionId&&i("diffs/renderFileForDiscussionId",t.discussionId,{root:!0}),n("EXPAND_DISCUSSION",t)},L=function(e,t){return(0,e.commit)("COLLAPSE_DISCUSSION",t)},A=function(e,t){return(0,e.commit)("SET_NOTES_DATA",t)},N=function(e,t){return(0,e.commit)("SET_NOTEABLE_DATA",t)},q=function(e,t){return(0,e.commit)("SET_USER_DATA",t)},R=function(e,t){return(0,e.commit)("SET_LAST_FETCHED_AT",t)},B=function(e,t){return(0,e.commit)("SET_INITIAL_DISCUSSIONS",t)},M=function(e,t){return(0,e.commit)("SET_TARGET_NOTE_HASH",t)},F=function(e,t){return(0,e.commit)("SET_NOTES_FETCHED_STATE",t)},$=function(e,t){return(0,e.commit)("TOGGLE_DISCUSSION",t)},U=function(e,t){var n=e.commit,i=e.dispatch,s=t.path,a=t.filter,r=t.persistFilter,o=void 0!==a?{params:{notes_filter:a,persist_filter:r}}:null;return u.a.get(s,o).then((function(e){var t=e.data;n("SET_INITIAL_DISCUSSIONS",t),i("updateResolvableDiscussionsCounts")}))},H=function(e,t){var n=e.commit,i=e.state;return n("UPDATE_DISCUSSION",t),_(i.discussions,t.id)},V=function(e,t){var n=e.commit,i=e.dispatch,s=e.state.discussions.find((function(e){return e.id===t.discussion_id}));n("DELETE_NOTE",t),i("updateMergeRequestWidget"),i("updateResolvableDiscussionsCounts"),Object(C.x)()&&i("diffs/removeDiscussionsFromDiff",s)},z=function(e,t){var n=e.dispatch;return u.a.delete(t.path).then((function(){n("removeNote",t)}))},W=function(e,t){var n=e.commit,i=e.dispatch,s=t.endpoint,a=t.note;return u.a.put(s,a).then((function(e){var t=e.data;n("UPDATE_NOTE",t),i("startTaskList")}))},G=function(e,t){var n=e.commit,i=e.state,s=e.getters,a=e.dispatch,r=s.notesById;t.forEach((function(e){if(r[e.id])n("UPDATE_NOTE",e);else if(e.type===j.h||e.type===j.d){_(i.discussions,e.discussion_id)?n("ADD_NEW_REPLY_TO_DISCUSSION",e):e.type===j.d?a("fetchDiscussions",{path:i.notesData.discussionsPath}):n("ADD_NEW_NOTE",e)}else n("ADD_NEW_NOTE",e)}))},Y=function(e,t){var n=e.commit,i=e.state,s=e.getters,a=e.dispatch,r=t.endpoint,o=t.data;return u.a.post(r,o).then((function(e){var t=e.data;return t.discussion?(n("UPDATE_DISCUSSION",t.discussion),G({commit:n,state:i,getters:s,dispatch:a},t.discussion.notes),a("updateMergeRequestWidget"),a("startTaskList"),a("updateResolvableDiscussionsCounts")):n("ADD_NEW_REPLY_TO_DISCUSSION",t),t}))},K=function(e,t){var n=e.commit,i=e.dispatch,s=t.endpoint,a=t.data;return u.a.post(s,a).then((function(e){var t=e.data;return t.errors||(n("ADD_NEW_NOTE",t),i("updateMergeRequestWidget"),i("startTaskList"),i("updateResolvableDiscussionsCounts")),t}))},J=function(e){return(0,e.commit)("REMOVE_PLACEHOLDER_NOTES")},Q=function(e,t){var n=e.state,i=e.dispatch,s=e.getters,a=t.discussionId,r=_(n.discussions,a),o=s.isDiscussionResolved(a);return r?o?Promise.resolve():i("toggleResolveNote",{endpoint:r.resolve_path,isResolved:o,discussion:!0}):Promise.reject()},X=function(e,t){var n=e.commit,i=e.dispatch,s=t.endpoint,a=t.isResolved,r=t.discussion,o=a?j.w:j.t,l=r?"UPDATE_DISCUSSION":"UPDATE_NOTE";return u.a[o](s).then((function(e){var t=e.data;n(l,t),i("updateResolvableDiscussionsCounts"),i("updateMergeRequestWidget")}))},Z=function(e){var t=e.commit,n=e.dispatch,i=e.state;return n("toggleStateButtonLoading",!0),u.a.put(i.notesData.closePath).then((function(e){var i=e.data;t("CLOSE_ISSUE"),n("emitStateChangedEvent",i),n("toggleStateButtonLoading",!1)}))},ee=function(e){var t=e.commit,n=e.dispatch,i=e.state;return n("toggleStateButtonLoading",!0),u.a.put(i.notesData.reopenPath).then((function(e){var i=e.data;t("REOPEN_ISSUE"),n("emitStateChangedEvent",i),n("toggleStateButtonLoading",!1)}))},te=function(e,t){return(0,e.commit)("TOGGLE_STATE_BUTTON_LOADING",t)},ne=function(e,t){var n=e.getters,i=new CustomEvent("issuable_vue_app:change",{detail:{data:t,isClosed:n.openState===j.a}});document.dispatchEvent(i)},ie=function(e,t){var n=e.commit;t===j.a?n("CLOSE_ISSUE"):t===j.s&&n("REOPEN_ISSUE")},se=function(e,t){var n,i=e.commit,s=e.dispatch,a=t.data.draft_note||t.data["note[note]"]||t.data.note.note,r=a,l=function(e){return/^\/\w+.*$/gm.test(e)}(r),c=t.data.in_reply_to_discussion_id,u=Object.assign({},t);!0===u.isDraft?(n=c?"batchComments/addDraftToDiscussion":"batchComments/createNewDraft",!u.draft_note&&t.note&&(u.draft_note=u.note,delete u.note)):n=c?"replyToDiscussion":"createNewNote",o()(".notes-form .flash-container").hide(),i("REMOVE_PLACEHOLDER_NOTES"),c&&(l&&(r=function(e){return e.replace(/^\/\w+.*$/gm,"").trim()}(r)),r.length&&i("SHOW_PLACEHOLDER_NOTE",{noteBody:r,replyId:c}),l&&i("SHOW_PLACEHOLDER_NOTE",{isSystemNote:!0,noteBody:w(a),replyId:c}));return s(n,u,{root:!0}).then((function(e){var n=e.errors,i=(n=void 0===n?{commands_only:null}:n).commands_only;return l&&i&&(y.makeRequest(),o()(".js-gfm-input").trigger("clear-commands-cache.atwho"),Object(p.a)(i||Object(g.a)("Commands applied"),"notice",t.flashContainer)),e})).then((function(e){var n=(e.commands_changes||{}).emoji_award;if(!n)return e;var i=o()(".js-awards-block").eq(0);return Object(O.b)().then((function(e){e.addAwardToEmojiBar(i,n),e.scrollToAwards()})).catch((function(){Object(p.a)(Object(g.a)("Something went wrong while adding your award. Please try again."),"alert",t.flashContainer)})).then((function(){return e}))})).then((function(e){var t=e.commands_changes,n=t||{},i=n.spend_time,s=n.time_estimate;return null==i&&null==s||S.a.$emit("timeTrackingUpdated",{commands_changes:t}),e})).then((function(e){return c&&i("REMOVE_PLACEHOLDER_NOTES"),e})).catch((function(e){if(e.response){var n=e.response.data,i=void 0===n?{}:n,s=i.errors,a=(void 0===s?{}:s).base,r=void 0===a?[]:a;if(r.length>0){var o=Object(g.e)(Object(g.a)("Your comment could not be submitted because %{error}"),{error:r[0].toLowerCase()});return Object(p.a)(o,"alert",t.flashContainer),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},i,{hasFlash:!0})}}throw e}))},ae=function(e,t,n,i,s){return e.notes&&e.notes.length&&(G({commit:t,state:n,getters:i,dispatch:s},e.notes),s("startTaskList")),t("SET_LAST_FETCHED_AT",e.last_fetched_at),e},re=function(e){return{endpoint:e.notesData.notesPath,options:{headers:{"X-Last-Fetched-At":e.lastFetchedAt?"".concat(e.lastFetchedAt):void 0}}}},oe=function(e){var t=e.commit,n=e.state,i=e.getters,s=re(n),a=s.endpoint,r=s.options;u.a.get(a,r).then((function(e){var s=e.data;return ae(s,t,n,i)})).catch((function(){return Object(p.a)(Object(g.a)("Something went wrong while fetching latest comments."))}))},le=function(e){var t=e.commit,n=e.state,i=e.getters,s=e.dispatch;y=new f.a({resource:{poll:function(){var e=re(n),t=e.endpoint,i=e.options;return u.a.get(t,i)}},method:"poll",successCallback:function(e){var a=e.data;return ae(a,t,n,i,s)},errorCallback:function(){return Object(p.a)(Object(g.a)("Something went wrong while fetching latest comments."))}}),c.a.hidden()?oe({commit:t,state:n,getters:i}):y.makeRequest(),c.a.change((function(){c.a.hidden()?y.stop():y.restart()}))},ce=function(){y&&y.stop()},ue=function(){y&&y.restart()},de=function(e,t){var n=e.commit,i=e.getters,s=t.awardName,a=t.noteId;n("TOGGLE_AWARD",{awardName:s,note:i.notesById[a]})},pe=function(e,t){var n=e.dispatch,i=t.endpoint,s=t.awardName;return u.a.post(i,{name:s}).then((function(){n("toggleAward",t)}))},fe=function(e,t){Object(C.z)(t[0])||Object(C.N)(t)},he=function(e,t){var n=e.commit;return u.a.get(t.truncated_diff_lines_path).then((function(e){var i=e.data;n("SET_DISCUSSION_DIFF_LINES",{discussionId:t.id,diffLines:i.truncated_diff_lines})}))},me=function(){T.a.$emit("mr.discussion.updated")},ge=function(e,t){(0,e.commit)("SET_NOTES_LOADING_STATE",t)},be=function(e,t){var n=e.dispatch,i=t.path,s=t.filter,a=t.persistFilter;n("setLoadingState",!0),n("fetchDiscussions",{path:i,filter:s,persistFilter:a}).then((function(){n("setLoadingState",!1),n("setNotesFetchedState",!0)})).catch((function(){n("setLoadingState",!1),n("setNotesFetchedState",!0),Object(p.a)(Object(g.a)("Something went wrong while fetching comments. Please try again."))}))},ve=function(e,t){(0,e.commit)("DISABLE_COMMENTS",t)},ye=function(e){var t=e.dispatch;return a.default.nextTick((function(){return new d.a({dataType:"note",fieldName:"note",selector:".notes .is-editable",onSuccess:function(){return t("startTaskList")}})}))},_e=function(e){return(0,e.commit)("UPDATE_RESOLVABLE_DISCUSSIONS_COUNTS")},we=function(e,t){var n=e.commit,i=e.dispatch,s=t.discussionId,a=t.noteId,r=t.suggestionId,o=t.flashContainer;return E.a.applySuggestion(r).then((function(){return n("APPLY_SUGGESTION",{discussionId:s,noteId:a,suggestionId:r})})).then((function(){return i("resolveDiscussion",{discussionId:s}).catch((function(){}))})).catch((function(e){var t=Object(g.a)("Something went wrong while applying the suggestion. Please try again."),n=e.response.data?"".concat(e.response.data.message,"."):t;Object(p.a)(Object(g.a)(n),"alert",o)}))},ke=function(e,t){return(0,e.commit)("CONVERT_TO_DISCUSSION",t)},je=function(e,t){return(0,e.commit)("REMOVE_CONVERTED_DISCUSSION",t)},Oe=function(e,t){return(0,e.commit)("SET_CURRENT_DISCUSSION_ID",t)},Se=function(e,t){var n=e.dispatch,i=t.endpoint,s=t.startingVersion,a=t.versionId,r=i;return s&&(r=Object(D.h)({start_version_id:s},r)),n("requestDescriptionVersion"),u.a.get(r).then((function(e){n("receiveDescriptionVersion",{descriptionVersion:e.data,versionId:a})})).catch((function(e){n("receiveDescriptionVersionError",e),Object(p.a)(Object(g.a)("Something went wrong while fetching description changes. Please try again."))}))},Ce=function(e){(0,e.commit)("REQUEST_DESCRIPTION_VERSION")},De=function(e,t){(0,e.commit)("RECEIVE_DESCRIPTION_VERSION",t)},Te=function(e,t){(0,e.commit)("RECEIVE_DESCRIPTION_VERSION_ERROR",t)},Ee=function(e,t){var n=e.dispatch,i=t.endpoint,s=t.startingVersion,a=t.versionId,r=i;return s&&(r=Object(D.h)({start_version_id:s},r)),n("requestDeleteDescriptionVersion"),u.a.delete(r).then((function(){n("receiveDeleteDescriptionVersion",a)})).catch((function(e){n("receiveDeleteDescriptionVersionError",e),Object(p.a)(Object(g.a)("Something went wrong while deleting description changes. Please try again."))}))},xe=function(e){(0,e.commit)("REQUEST_DELETE_DESCRIPTION_VERSION")},Pe=function(e,t){(0,e.commit)("RECEIVE_DELETE_DESCRIPTION_VERSION",P({},t,Object(g.a)("Deleted")))},Ie=function(e,t){(0,e.commit)("RECEIVE_DELETE_DESCRIPTION_VERSION_ERROR",t)},Le=function(){},Ae=(n(309),n(85),n(129),n(69),n(463)),Ne=n.n(Ae),qe=(n(145),function(e){var t=null,n=-1;return e.slice(0).reduce((function(e,i){var s=i.notes[0];if(function(e){return e.system&&e.note===j.c}(s))if(t){if(t){(function(e,t){var n=new Date(e.created_at),i=(new Date(t.created_at)-n)/1e3/60;return Math.ceil(i)})(t,s)>j.v||s.author.id!==t.author.id||t.description_version_deleted?(t=s,n=e.length):(s.start_description_version_id=t.description_version_id,e.splice(n,1),n=e.length)}}else t=s,n=e.length;return e.push(i),e}),[])});var Re,Be=function(e){return qe(e.discussions)},Me=function(e){return e.convertedDisscussionIds},Fe=function(e){return e.targetNoteHash},$e=function(e){return e.notesData},Ue=function(e){return e.isNotesFetched},He=function(e){return e.isLoading},Ve=function(e){return function(t){return e.notesData[t]}},ze=function(e){return e.noteableData},We=function(e){return function(t){return e.noteableData[t]}},Ge=function(e){return Boolean(e.noteableData.current_user.can_create_note)},Ye=function(e){return e.noteableData.state},Ke=function(e){return e.userData||{}},Je=function(e){return function(t){return e.userData&&e.userData[t]}},Qe=function(e){return e.descriptionVersions},Xe=function(e){return e.discussions.reduce((function(e,t){return t.notes.every((function(t){return Object.assign(e,(n={},i=t.id,s=t,i in n?Object.defineProperty(n,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[i]=s,n));var n,i,s})),e}),{})},Ze=function(e){var t=j.l,n=j.n,i=j.j;return e.noteableData.noteableType===i?i:e.noteableData.merge_params?n:t},et=function(e){return e.slice(0).reverse()},tt=function(e,t){return!e.system&&t.userData&&e.author&&e.author.id===t.userData.id},nt=function(e){return Ne()(et(e.discussions).map((function(e){return et(e.notes)}))).find((function(t){return tt(t,e)}))},it=function(e){return function(t){return et(t.notes).find((function(t){return tt(t,e)}))}},st=function(e){return e.unresolvedDiscussionsCount},at=function(e){return e.resolvableDiscussionsCount},rt=function(e,t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"discussion",n="discussion"!==e?t.unresolvedDiscussionsIdsByDiff:t.unresolvedDiscussionsIdsByDate;return n.length>1}},ot=function(e,t){return function(e){return void 0!==t.resolvedDiscussionsById[e]}},lt=function(e){return e.discussions.filter((function(e){return!e.individual_note&&e.resolvable}))},ct=function(e){var t={};return e.discussions.filter((function(e){return e.resolvable})).forEach((function(e){e.notes&&(e.notes.filter((function(e){return e.resolvable})).every((function(e){return e.resolved}))&&(t[e.id]=e))})),t},ut=function(e,t){return t.allResolvableDiscussions.filter((function(e){return!e.resolved})).sort((function(e,t){var n=new Date(e.notes[0].created_at),i=new Date(t.notes[0].created_at);return n<i?-1:n===i?0:1})).map((function(e){return e.id}))},dt=function(e,t){return t.allResolvableDiscussions.filter((function(e){return!e.resolved&&e.active})).sort((function(e,t){if(!e.diff_file||!t.diff_file)return 0;var n=e.diff_file.file_path.localeCompare(t.diff_file.file_path),i=[e.position.new_line,e.position.old_line],s=[t.position.new_line,t.position.old_line];return n<0||0===n&&Math.max(i[0],i[1])<Math.max(s[0],s[1])?-1:1})).map((function(e){return e.id}))},pt=function(e,t){var n=t.resolvedDiscussionsById;return Object.keys(n).length},ft=function(e){return e.discussions.reduce((function(e,t){return e+t.notes.filter((function(e){return!e.system&&!e.placeholder})).length}),0)},ht=function(e,t){return function(e){return e?t.unresolvedDiscussionsIdsByDiff:t.unresolvedDiscussionsIdsByDate}},mt=function(e,t){return function(e,n){var i=t.unresolvedDiscussionsIdsOrdered(n);return i[i.length-1]===e}},gt=function(e,t){return function(e){var n=e.discussionId,i=e.diffOrder,s=e.step,a=t.unresolvedDiscussionsIdsOrdered(i),r=a.indexOf(n)+s;return r<0&&s<0?a[a.length-1]:r===a.length&&s>0?a[0]:a[r]}},bt=function(e,t){return function(e,n){return t.findUnresolvedDiscussionIdNeighbor({discussionId:e,diffOrder:n,step:1})}},vt=function(e,t){return function(e,n){return t.findUnresolvedDiscussionIdNeighbor({discussionId:e,diffOrder:n,step:-1})}},yt=function(e,t){return function(e){return e?t.unresolvedDiscussionsIdsByDiff[0]:t.unresolvedDiscussionsIdsByDate[0]}},_t=function(e){return function(t){return e.discussions.find((function(e){return e.id===t}))}},wt=function(e){return e.commentsDisabled},kt=function(){};n(56),n(30),n(78),n(40),n(258),n(36),n(41);function jt(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function St(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ot(Object(n),!0).forEach((function(t){Ct(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ct(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],i=!0,s=!1,a=void 0;try{for(var r,o=e[Symbol.iterator]();!(i=(r=o.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==o.return||o.return()}finally{if(s)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Tt=(Ct(Re={},"ADD_NEW_NOTE",(function(e,t){var n=t.discussion?t.discussion.notes[0]:t,i=n.discussion_id,s=n.type,a=Dt(e.discussions.filter((function(e){return e.id===n.discussion_id})),1)[0],r=s===j.h||s===j.d;if(!a){var o={expanded:!0,id:i,individual_note:!r,notes:[n],reply_id:i};r&&Object(C.x)()&&(o.resolvable=n.resolvable,o.resolved=!1,o.active=!0,o.resolve_path=n.resolve_path,o.resolve_with_issue_path=n.resolve_with_issue_path,o.diff_discussion=!1),e.discussions.push(o)}})),Ct(Re,"ADD_NEW_REPLY_TO_DISCUSSION",(function(e,t){var n=_(e.discussions,t.discussion_id),i=n&&_(n.notes,t.id);n&&!i&&n.notes.push(t)})),Ct(Re,"DELETE_NOTE",(function(e,t){var n=_(e.discussions,t.discussion_id);if(n.individual_note)e.discussions.splice(e.discussions.indexOf(n),1);else{var i=_(n.notes,t.id);n.notes.splice(n.notes.indexOf(i),1),n.notes.length||e.discussions.splice(e.discussions.indexOf(n),1)}})),Ct(Re,"EXPAND_DISCUSSION",(function(e,t){var n=t.discussionId,i=_(e.discussions,n);Object.assign(i,{expanded:!0})})),Ct(Re,"COLLAPSE_DISCUSSION",(function(e,t){var n=t.discussionId,i=_(e.discussions,n);Object.assign(i,{expanded:!1})})),Ct(Re,"REMOVE_PLACEHOLDER_NOTES",(function(e){for(var t=e.discussions,n=t.length-1;n>=0;n-=1){var i=t[n],s=i.notes;if(s.length&&!i.individual_note)for(var a=s.length-1;a>=0;a-=1)s[a].isPlaceholderNote&&s.splice(a,1);else i.isPlaceholderNote&&t.splice(n,1)}})),Ct(Re,"SET_NOTES_DATA",(function(e,t){Object.assign(e,{notesData:t})})),Ct(Re,"SET_NOTEABLE_DATA",(function(e,t){Object.assign(e,{noteableData:t})})),Ct(Re,"SET_USER_DATA",(function(e,t){Object.assign(e,{userData:t})})),Ct(Re,"SET_INITIAL_DISCUSSIONS",(function(e,t){var n=t.reduce((function(t,n){var i=St({},n),s={};if(i.diff_file&&(s.file_hash=i.diff_file.file_hash,s.truncated_diff_lines=k(i.truncated_diff_lines||[])),i.individual_note&&i.notes.length>1)i.notes.forEach((function(e){t.push(St({},i,{},s,{notes:[e]}))}));else{var a=_(e.discussions,i.id);t.push(St({},i,{},s,{expanded:a?a.expanded:i.expanded}))}return t}),[]);Object.assign(e,{discussions:n})})),Ct(Re,"SET_LAST_FETCHED_AT",(function(e,t){Object.assign(e,{lastFetchedAt:t})})),Ct(Re,"SET_TARGET_NOTE_HASH",(function(e,t){Object.assign(e,{targetNoteHash:t})})),Ct(Re,"SHOW_PLACEHOLDER_NOTE",(function(e,t){var n=e.discussions,i=_(n,t.replyId);i&&(n=i.notes),n.push({individual_note:!0,isPlaceholderNote:!0,placeholderType:t.isSystemNote?j.u:j.o,notes:[{body:t.noteBody}]})})),Ct(Re,"TOGGLE_AWARD",(function(e,t){var n=t.awardName,i=t.note,s=e.userData,a=s.id,r=s.name,o=s.username,l=i.award_emoji.filter((function(e){return e.name===t.awardName&&e.user.id===a}));l.length?i.award_emoji.splice(i.award_emoji.indexOf(l[0]),1):i.award_emoji.push({name:n,user:{id:a,name:r,username:o}})})),Ct(Re,"TOGGLE_DISCUSSION",(function(e,t){var n=t.discussionId,i=t.forceExpanded,s=void 0===i?null:i,a=_(e.discussions,n);Object.assign(a,{expanded:null===s?!a.expanded:s})})),Ct(Re,"UPDATE_NOTE",(function(e,t){var n=_(e.discussions,t.discussion_id);if(n.individual_note)t.type===j.h&&(n.individual_note=!1),n.notes.splice(0,1,t);else{var i=_(n.notes,t.id);n.notes.splice(n.notes.indexOf(i),1,t)}})),Ct(Re,"APPLY_SUGGESTION",(function(e,t){var n=t.noteId,i=t.discussionId,s=t.suggestionId,a=_(e.discussions,i),r=_(a.notes,n);r.suggestions=r.suggestions.map((function(e){return St({},e,{applied:e.applied||e.id===s,appliable:!1})}))})),Ct(Re,"UPDATE_DISCUSSION",(function(e,t){var n=t,i=e.discussions.find((function(e){return e.id===n.id}));n.expanded=!0,n.diff_file&&Object.assign(n,{file_hash:n.diff_file.file_hash}),Object.assign(i,St({},n))})),Ct(Re,"CLOSE_ISSUE",(function(e){Object.assign(e.noteableData,{state:j.a})})),Ct(Re,"REOPEN_ISSUE",(function(e){Object.assign(e.noteableData,{state:j.s})})),Ct(Re,"TOGGLE_STATE_BUTTON_LOADING",(function(e,t){Object.assign(e,{isToggleStateButtonLoading:t})})),Ct(Re,"SET_NOTES_FETCHED_STATE",(function(e,t){Object.assign(e,{isNotesFetched:t})})),Ct(Re,"SET_NOTES_LOADING_STATE",(function(e,t){e.isLoading=t})),Ct(Re,"SET_DISCUSSION_DIFF_LINES",(function(e,t){var n=t.discussionId,i=t.diffLines;_(e.discussions,n).truncated_diff_lines=k(i)})),Ct(Re,"DISABLE_COMMENTS",(function(e,t){e.commentsDisabled=t})),Ct(Re,"UPDATE_RESOLVABLE_DISCUSSIONS_COUNTS",(function(e){e.resolvableDiscussionsCount=e.discussions.filter((function(e){return!e.individual_note&&e.resolvable})).length,e.unresolvedDiscussionsCount=e.discussions.filter((function(e){return!e.individual_note&&e.resolvable&&e.notes.some((function(e){return e.resolvable&&!e.resolved}))})).length})),Ct(Re,"CONVERT_TO_DISCUSSION",(function(e,t){var n=[].concat(jt(e.convertedDisscussionIds),[t]);Object.assign(e,{convertedDisscussionIds:n})})),Ct(Re,"REMOVE_CONVERTED_DISCUSSION",(function(e,t){var n=jt(e.convertedDisscussionIds);n.splice(n.indexOf(t),1),Object.assign(e,{convertedDisscussionIds:n})})),Ct(Re,"SET_CURRENT_DISCUSSION_ID",(function(e,t){e.currentDiscussionId=t})),Ct(Re,"REQUEST_DESCRIPTION_VERSION",(function(e){e.isLoadingDescriptionVersion=!0})),Ct(Re,"RECEIVE_DESCRIPTION_VERSION",(function(e,t){var n=t.descriptionVersion,i=t.versionId,s=St({},e.descriptionVersions,Ct({},i,n));Object.assign(e,{descriptionVersions:s,isLoadingDescriptionVersion:!1})})),Ct(Re,"RECEIVE_DESCRIPTION_VERSION_ERROR",(function(e){e.isLoadingDescriptionVersion=!1})),Ct(Re,"REQUEST_DELETE_DESCRIPTION_VERSION",(function(e){e.isLoadingDescriptionVersion=!0})),Ct(Re,"RECEIVE_DELETE_DESCRIPTION_VERSION",(function(e,t){e.isLoadingDescriptionVersion=!1,Object.assign(e.descriptionVersions,t)})),Ct(Re,"RECEIVE_DELETE_DESCRIPTION_VERSION_ERROR",(function(e){e.isLoadingDescriptionVersion=!1})),Re);t.a=function(){return{state:{discussions:[],convertedDisscussionIds:[],targetNoteHash:null,lastFetchedAt:null,currentDiscussionId:null,isToggleStateButtonLoading:!1,isNotesFetched:!1,isLoading:!0,isLoadingDescriptionVersion:!1,notesData:{markdownDocsPath:""},userData:{},noteableData:{current_user:{},preview_note_path:"path/to/preview"},commentsDisabled:!1,resolvableDiscussionsCount:0,unresolvedDiscussionsCount:0,descriptionVersions:{}},actions:i,getters:s,mutations:Tt}}},819:function(e,t,n){"use strict";n(46),n(38);var i=n(17),s=(n(24),n(28),n(42),n(26),n(72),n(50),n(58),n(27),n(0)),a=n.n(s),r=n(22),o=n(33),l=n(45),c=n(120),u=n(209);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h={components:{Icon:l.a},props:{filters:{type:Array,required:!0},selectedValue:{type:Number,default:c.f,required:!1}},data:function(){return{currentValue:Object(o.a)(c.q)?c.f:this.selectedValue,defaultValue:c.f,displayFilters:!0}},computed:p({},Object(r.d)(["getNotesDataByProp"]),{currentFilter:function(){var e=this;return this.currentValue?this.filters.find((function(t){return t.value===e.currentValue})):this.filters[0]}}),created:function(){if(window.mrTabs){var e=window.mrTabs,t=e.eventHub,n=e.currentTab;t.$on("MergeRequestTabChange",this.toggleFilters),this.toggleFilters(n)}u.a.$on("dropdownSelect",this.selectFilter),window.addEventListener("hashchange",this.handleLocationHash)},mounted:function(){this.toggleCommentsForm()},destroyed:function(){u.a.$off("dropdownSelect",this.selectFilter),window.removeEventListener("hashchange",this.handleLocationHash)},methods:p({},Object(r.c)(["filterDiscussion","setCommentsDisabled","setTargetNoteHash"]),{selectFilter:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=parseInt(e,10);this.toggleDropdown(),n!==this.currentValue&&(this.currentValue=n,this.filterDiscussion({path:this.getNotesDataByProp("discussionsPath"),filter:n,persistFilter:t}),this.toggleCommentsForm())},toggleDropdown:function(){a()(this.$refs.dropdownToggle).dropdown("toggle")},toggleCommentsForm:function(){this.setCommentsDisabled(this.currentValue===c.k)},toggleFilters:function(e){this.displayFilters=e===c.i},handleLocationHash:function(){var e=Object(o.d)();/^note_/.test(e)&&this.currentValue!==c.f&&(this.selectFilter(this.defaultValue,!1),this.toggleDropdown(),this.setTargetNoteHash(e))},filterType:function(e){return 0===e?c.g.ALL:1===e?c.g.COMMENTS:c.g.HISTORY}})},m=n(4),g=Object(m.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.displayFilters?n("div",{staticClass:"discussion-filter-container js-discussion-filter-container d-inline-block align-bottom full-width-mobile"},[n("button",{ref:"dropdownToggle",staticClass:"btn btn-sm qa-discussion-filter",attrs:{id:"discussion-filter-dropdown","data-toggle":"dropdown","aria-expanded":"false"}},[e._v("\n    "+e._s(e.currentFilter.title)+" "),n("icon",{attrs:{name:"chevron-down"}})],1),e._v(" "),n("div",{ref:"dropdownMenu",staticClass:"dropdown-menu dropdown-menu-selectable dropdown-menu-right",attrs:{"aria-labelledby":"discussion-filter-dropdown"}},[n("div",{staticClass:"dropdown-content"},[n("ul",e._l(e.filters,(function(t){return n("li",{key:t.value,attrs:{"data-filter-type":e.filterType(t.value)}},[n("button",{staticClass:"qa-filter-options",class:{"is-active":t.value===e.currentValue},attrs:{type:"button"},on:{click:function(n){return e.selectFilter(t.value)}}},[e._v("\n            "+e._s(t.title)+"\n          ")]),e._v(" "),t.value===e.defaultValue?n("div",{staticClass:"dropdown-divider"}):e._e()])})),0)])])]):e._e()}),[],!1,null,null,null).exports;t.a=function(e){var t=document.getElementById("js-vue-discussion-filter");if(t){var n=t.dataset,s=n.defaultFilter,a=n.notesFilters,r=a?JSON.parse(a):{},o={filters:Object.keys(r).map((function(e){return{title:e,value:r[e]}}))};return s&&(o.selectedValue=parseInt(s,10)),new i.default({el:t,name:"DiscussionFilter",components:{DiscussionFilter:g},store:e,render:function(e){return e("discussion-filter",{props:o})}})}return null}},820:function(e,t,n){"use strict";var i=n(17),s={props:{signedIn:{type:Boolean,required:!0},sidebarStatusClass:{type:String,required:!1,default:""}}},a=n(4),r=Object(a.a)(s,(function(){var e=this.$createElement;return(this._self._c||e)("aside",{staticClass:"right-sidebar js-right-sidebar js-issuable-sidebar",class:this.sidebarStatusClass,attrs:{"aria-live":"polite"}})}),[],!1,null,null,null).exports;t.a=function(){var e=document.getElementById("js-vue-issuable-sidebar");if(!e)return!1;var t=e.dataset.sidebarStatusClass,n=""===e.dataset.signedIn;return new i.default({el:e,components:{SidebarApp:r},render:function(e){return e("sidebar-app",{props:{signedIn:n,sidebarStatusClass:t}})}})}},822:function(e,t,n){"use strict";n(69),n(35),n(72);var i=n(828),s=n(1),a={components:{UserAvatarLink:n(180).a},directives:{GlTooltip:i.a},props:{assignees:{type:Array,required:!0},iconSize:{type:Number,required:!1,default:24},imgCssClasses:{type:String,required:!1,default:""},maxVisible:{type:Number,required:!1,default:3}},data:function(){return{maxAssignees:99}},computed:{assigneesToShow:function(){var e=this.assignees.length-this.numHiddenAssignees;return this.assignees.slice(0,e)},assigneesCounterTooltip:function(){return Object(s.e)(Object(s.a)("%{count} more assignees"),{count:this.numHiddenAssignees})},numHiddenAssignees:function(){return this.assignees.length>this.maxVisible?this.assignees.length-this.maxVisible+1:0},assigneeCounterLabel:function(){return this.numHiddenAssignees>this.maxAssignees?"".concat(this.maxAssignees,"+"):"+".concat(this.numHiddenAssignees)}},methods:{avatarUrlTitle:function(e){return Object(s.e)(Object(s.a)("Avatar for %{assigneeName}"),{assigneeName:e.name})},webUrl:function(e){return e.web_url||e.webUrl},avatarUrl:function(e){return e.avatar_url||e.avatarUrl}}},r=n(4),o=Object(r.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"issue-assignees"},[e._l(e.assigneesToShow,(function(t){return n("user-avatar-link",{key:t.id,staticClass:"js-no-trigger",attrs:{"link-href":e.webUrl(t),"img-alt":e.avatarUrlTitle(t),"img-css-classes":e.imgCssClasses,"img-src":e.avatarUrl(t),"img-size":e.iconSize,"tooltip-placement":"bottom"}},[n("span",{staticClass:"js-assignee-tooltip"},[n("span",{staticClass:"bold d-block"},[e._v(e._s(e.__("Assignee")))]),e._v(" "+e._s(t.name)+"\n      "),n("span",{staticClass:"text-white-50"},[e._v("@"+e._s(t.username))])])])})),e._v(" "),e.numHiddenAssignees>0?n("span",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"avatar-counter",attrs:{title:e.assigneesCounterTooltip,"data-placement":"bottom"}},[e._v(e._s(e.assigneeCounterLabel))]):e._e()],2)}),[],!1,null,null,null);t.a=o.exports},88:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));n(42),n(89);var i=n(0),s=n.n(i),a=n(51),r=n.n(a),o=n(1),l=n(33);n(28),n(78),n(40),n(46),n(129),n(35),n(77),n(18),n(36),n(41);var c=function(e){return e.reduce((function(e,t){var n=t.name,i=t.value;return Object.assign(e,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},n,i))}),{})},u=n(11),d=n(14),p=n(73);function f(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t=s()("ul.clone-options-dropdown"),n=s()("#project_clone"),i=s()(".js-git-clone-holder .js-clone-dropdown-label"),a=document.querySelector(".js-mobile-git-clone .js-clone-dropdown-label"),o=i.text().trim();o.length>0&&s()("a:contains('".concat(o,"')"),t).addClass("is-active"),s()("a",t).on("click",(function(e){e.preventDefault();var i=s()(e.currentTarget),r=i.attr("href"),o=i.data("cloneType");s()(".is-active",t).removeClass("is-active"),s()('a[data-clone-type="'.concat(o,'"]')).each((function(){var e=s()(this),t=e.find(".dropdown-menu-inner-title").text(),n=e.closest(".project-clone-holder").find(".js-clone-dropdown-label");e.toggleClass("is-active"),n.text(t)})),a?a.dataset.clipboardText=r:n.val(r),s()(".js-git-empty .js-clone").text(r)})),e.initRefSwitcher(),s()(".project-refs-select").on("change",(function(){return s()(this).parents("form").submit()})),s()(".hide-no-ssh-message").on("click",(function(e){return r.a.set("hide_no_ssh_message","false"),s()(this).parents(".no-ssh-key-message").remove(),e.preventDefault()})),s()(".hide-no-password-message").on("click",(function(e){return r.a.set("hide_no_password_message","false"),s()(this).parents(".no-password-message").remove(),e.preventDefault()})),s()(".hide-auto-devops-implicitly-enabled-banner").on("click",(function(e){var t=s()(this).data("project-id"),n="hide_auto_devops_implicitly_enabled_banner_".concat(t);return r.a.set(n,"false"),s()(this).parents(".auto-devops-implicitly-enabled-banner").remove(),e.preventDefault()})),e.projectSelectDropdown()}var t,n,i;return t=e,i=[{key:"projectSelectDropdown",value:function(){Object(p.a)(),s()(".project-item-select").on("click",(function(t){return e.changeProject(s()(t.currentTarget).val())}))}},{key:"changeProject",value:function(e){return window.location=e}},{key:"initRefSwitcher",value:function(){var e=document.createElement("li"),t=document.createElement("a");return t.href="#",s()(".js-project-refs-dropdown").each((function(){var n,i,a,r=s()(this),p=r.data("selected"),f=r.data("fieldName"),h=Boolean(r.data("visit")),m=r.closest("form"),g=m.attr("action"),b=Object(l.h)((n=m[0],i=new FormData(n),a=Array.from(i.keys()).map((function(e){var t=i.getAll(e);return{name:e,value:1===(t=t.filter((function(e){return e}))).length?t[0]:t}})),c(a)),g);return r.glDropdown({data:function(e,t){u.a.get(r.data("refsUrl"),{params:{ref:r.data("ref"),search:e}}).then((function(e){var n=e.data;return t(n)})).catch((function(){return Object(d.a)(Object(o.a)("An error occurred while getting projects"))}))},selectable:!0,filterable:!0,filterRemote:!0,filterByText:!0,inputFieldName:r.data("inputFieldName"),fieldName:f,renderRow:function(n){var i,s,a,r=e.cloneNode(!1),o=t.cloneNode(!1);return n===p&&(o.className="is-active"),o.textContent=n,o.dataset.ref=n,n.length>0&&h&&(o.href=Object(l.h)((a=n,(s=f)in(i={})?Object.defineProperty(i,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[s]=a,i),b)),r.appendChild(o),r},id:function(e,t){return t.attr("data-ref")},toggleLabel:function(e,t){return t.text().trim()},clicked:function(e){var t=e.e;h||t.preventDefault()}})}))}}],(n=null)&&f(t.prototype,n),i&&f(t,i),e}()},984:function(e,t,n){var i=n(1006),s=n(1111),a=n(1112),r=n(420),o=n(468),l=n(1007),c=Math.min;e.exports=function(e,t,n){for(var u=n?a:s,d=e[0].length,p=e.length,f=p,h=Array(p),m=1/0,g=[];f--;){var b=e[f];f&&t&&(b=r(b,o(t))),m=c(b.length,m),h[f]=!n&&(t||d>=120&&b.length>=120)?new i(f&&b):void 0}b=e[0];var v=-1,y=h[0];e:for(;++v<d&&g.length<m;){var _=b[v],w=t?t(_):_;if(_=n||0!==_?_:0,!(y?l(y,w):u(g,w,n))){for(f=p;--f;){var k=h[f];if(!(k?l(k,w):u(e[f],w,n)))continue e}y&&y.push(w),g.push(_)}}return g}},985:function(e,t,n){var i=n(1062);e.exports=function(e){return i(e)?e:[]}},99:function(e,t,n){"use strict";var i=n(0),s=n.n(i);n(358);t.a={bind:function(e){var t=localStorage.getItem("gl-tooltip-delay"),n=t?JSON.parse(t):0;s()(e).tooltip({trigger:"hover",delay:n})},componentUpdated:function(e){s()(e).tooltip("_fixTitle");var t=s()(e).data("bs.tooltip"),n=t.getTipElement();t.setElementContent(s()(n.querySelectorAll(".tooltip-inner")),t.getTitle())},unbind:function(e){s()(e).tooltip("dispose")}}}},[[2334,1,0,2,3]]]);
//# sourceMappingURL=pages.projects.issues.designs.7eb8898f.chunk.js.map