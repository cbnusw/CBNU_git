(this.webpackJsonp=this.webpackJsonp||[]).push([[202],{113:function(t,e,n){"use strict";n.r(e);var r=n(88),i=n(70),s=n(96);document.addEventListener("DOMContentLoaded",(function(){Object(s.a)(document,gon),new r.a,new i.a}))},158:function(t,e,n){"use strict";var r=n(828),i=n(553),s=n(103),a={name:"ClipboardButton",directives:{GlTooltip:r.a},components:{GlButton:i.a,GlIcon:s.a},props:{text:{type:String,required:!0},gfm:{type:String,required:!1,default:null},title:{type:String,required:!0},tooltipPlacement:{type:String,required:!1,default:"top"},tooltipContainer:{type:[String,Boolean],required:!1,default:!1},cssClass:{type:String,required:!1,default:"btn-default"}},computed:{clipboardText:function(){return null!==this.gfm?JSON.stringify({text:this.text,gfm:this.gfm}):this.text}}},o=n(4),c=Object(o.a)(a,(function(){var t=this.$createElement,e=this._self._c||t;return e("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip",value:{placement:this.tooltipPlacement,container:this.tooltipContainer},expression:"{ placement: tooltipPlacement, container: tooltipContainer }"}],class:this.cssClass,attrs:{title:this.title,"data-clipboard-text":this.clipboardText}},[e("gl-icon",{attrs:{name:"copy-to-clipboard"}})],1)}),[],!1,null,null,null);e.a=c.exports},198:function(t,e,n){"use strict";var r=n(828),i=n(189),s=(n(62),{directives:{GlTooltip:r.a},mixins:[i.a],props:{time:{type:String,required:!0},tooltipPlacement:{type:String,required:!1,default:"top"},cssClass:{type:String,required:!1,default:""}}}),a=n(4),o=Object(a.a)(s,(function(){var t=this.$createElement;return(this._self._c||t)("time",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.viewport",value:{placement:this.tooltipPlacement},expression:"{ placement: tooltipPlacement }",modifiers:{viewport:!0}}],class:this.cssClass,attrs:{title:this.tooltipTitle(this.time)},domProps:{textContent:this._s(this.timeFormatted(this.time))}})}),[],!1,null,null,null);e.a=o.exports},2414:function(t,e,n){n(105),n(113),t.exports=n(2458)},2458:function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"requestFunctionsLoading",(function(){return tt})),n.d(r,"receiveFunctionsSuccess",(function(){return et})),n.d(r,"receiveFunctionsPartial",(function(){return nt})),n.d(r,"receiveFunctionsTimeout",(function(){return rt})),n.d(r,"receiveFunctionsNoDataSuccess",(function(){return it})),n.d(r,"receiveFunctionsError",(function(){return st})),n.d(r,"receiveMetricsSuccess",(function(){return at})),n.d(r,"receiveMetricsNoPrometheus",(function(){return ot})),n.d(r,"receiveMetricsNoDataSuccess",(function(){return ct})),n.d(r,"receiveMetricsError",(function(){return ut})),n.d(r,"fetchFunctions",(function(){return lt})),n.d(r,"fetchMetrics",(function(){return pt})),n.d(r,"default",(function(){return dt}));var i={};n.r(i),n.d(i,"hasPrometheusMissingData",(function(){return ft})),n.d(i,"getFunctions",(function(){return ht})),n.d(i,"default",(function(){return mt}));var s=n(17),a=(n(24),n(28),n(26),n(50),n(58),n(38),n(27),n(22)),o=n(760),c=n(1),u=(n(49),n(35),n(55),n(67),n(540)),l=n.n(u),p=n(198),d={components:{ClipboardButton:n(158).a},props:{uri:{type:String,required:!0}}},f=n(4),h=Object(f.a)(d,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"clipboard-group"},[e("div",{staticClass:"url-text-field label label-monospace monospace"},[this._v(this._s(this.uri))]),this._v(" "),e("clipboard-button",{staticClass:"input-group-text js-clipboard-btn",attrs:{text:this.uri,title:this.s__("ServerlessURL|Copy URL")}})],1)}),[],!1,null,null,null).exports,m=n(33),v={components:{Timeago:p.a,Url:h},props:{func:{type:Object,required:!0}},computed:{name:function(){return this.func.name},description:function(){if(!l()(this.func.description))return"";var t=this.func.description.split("\n");return t.length>1?t[1]:t[0]},detailUrl:function(){return this.func.detail_url},targetUrl:function(){return this.func.url},image:function(){return this.func.image},timestamp:function(){return this.func.created_at}},methods:{checkClass:function(t){return null===t.closest(".no-expand")},openDetails:function(t){this.checkClass(t.target)&&Object(m.s)(this.detailUrl)}}},g=Object(f.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"group-row",attrs:{id:t.name}},[n("div",{staticClass:"group-row-contents py-2",attrs:{role:"button"},on:{click:t.openDetails}},[n("p",{staticClass:"float-right text-right"},[n("span",[t._v(t._s(t.image))]),n("br"),t._v(" "),n("timeago",{attrs:{time:t.timestamp}})],1),t._v(" "),n("b",[t._v(t._s(t.name))]),t._v(" "),t._l(t.description.split("\n"),(function(e){return n("div",{key:e},[t._v(t._s(e))])})),t._v(" "),n("url",{staticClass:"prepend-top-8 no-expand",attrs:{uri:t.targetUrl}})],2)])}),[],!1,null,null,null).exports,b={components:{ItemCaret:n(730).a,FunctionRow:g},props:{env:{type:Array,required:!0},envName:{type:String,required:!0}},data:function(){return{isOpen:!0}},computed:{envId:function(){return"*"===this.envName?"env-global":"env-".concat(this.envName)},isOpenClass:function(){return{"is-open":this.isOpen}}},methods:{toggleOpen:function(){this.isOpen=!this.isOpen}}},_=Object(f.a)(b,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"group-row has-children",class:t.isOpenClass,attrs:{id:t.envId}},[n("div",{staticClass:"group-row-contents d-flex justify-content-end align-items-center py-2",attrs:{role:"button"},on:{click:function(e){return e.stopPropagation(),t.toggleOpen(e)}}},[n("div",{staticClass:"folder-toggle-wrap d-flex align-items-center"},[n("item-caret",{attrs:{"is-group-open":t.isOpen}})],1),t._v(" "),n("div",{staticClass:"group-text flex-grow title namespace-title prepend-left-default"},[t._v("\n      "+t._s(t.envName)+"\n    ")])]),t._v(" "),t.isOpen?n("ul",{staticClass:"content-list group-list-tree"},t._l(t.env,(function(t,e){return n("function-row",{key:t.name,attrs:{index:e,func:t}})})),1):t._e()])}),[],!1,null,null,null).exports,y={props:{clustersPath:{type:String,required:!0},helpPath:{type:String,required:!0}}},j=Object(f.a)(y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row empty-state js-empty-state"},[n("div",{staticClass:"col-12"},[n("div",{staticClass:"text-content"},[n("h4",{staticClass:"state-title text-center"},[t._v("\n        "+t._s(t.s__("Serverless|Getting started with serverless"))+"\n      ")]),t._v(" "),n("p",{staticClass:"state-description"},[t._v("\n        "+t._s(t.s__("Serverless| In order to start using functions as a service,\n               you must first install Knative on your Kubernetes cluster."))+"\n\n        "),n("a",{attrs:{href:t.helpPath}},[t._v(" "+t._s(t.__("More information"))+" ")])]),t._v(" "),n("div",{staticClass:"text-center"},[n("a",{staticClass:"btn btn-success",attrs:{href:t.clustersPath}},[t._v("\n          "+t._s(t.s__("Serverless|Install Knative"))+"\n        ")])])])])])}),[],!1,null,null,null).exports;function O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(Object(n),!0).forEach((function(e){w(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function w(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var C={components:{EnvironmentRow:_,EmptyState:j,GlLoadingIcon:o.a},props:{clustersPath:{type:String,required:!0},helpPath:{type:String,required:!0},statusPath:{type:String,required:!0}},computed:S({},Object(a.e)(["installed","isLoading","hasFunctionData"]),{},Object(a.d)(["getFunctions"]),{checkingInstalled:function(){return"checking"===this.installed},isInstalled:function(){return!0===this.installed},noServerlessConfigFile:function(){return Object(c.e)(Object(c.d)("Serverless|Your repository does not have a corresponding %{startTag}serverless.yml%{endTag} file."),{startTag:"<code>",endTag:"</code>"},!1)},noGitlabYamlConfigured:function(){return Object(c.e)(Object(c.d)("Serverless|Your %{startTag}.gitlab-ci.yml%{endTag} file is not properly configured."),{startTag:"<code>",endTag:"</code>"},!1)},mismatchedServerlessFunctions:function(){return Object(c.e)(Object(c.d)("Serverless|The functions listed in the %{startTag}serverless.yml%{endTag} file don't match the namespace of your cluster."),{startTag:"<code>",endTag:"</code>"},!1)}}),created:function(){this.fetchFunctions({functionsPath:this.statusPath})},methods:S({},Object(a.c)(["fetchFunctions"]))},P=Object(f.a)(C,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"flex-grow",attrs:{id:"serverless-functions"}},[t.checkingInstalled?n("gl-loading-icon",{staticClass:"prepend-top-default append-bottom-default",attrs:{size:2}}):t.isInstalled?n("div",[t.hasFunctionData?n("div",[[n("div",{staticClass:"groups-list-tree-container js-functions-wrapper"},[n("ul",{staticClass:"content-list group-list-tree"},t._l(t.getFunctions,(function(t,e){return n("environment-row",{key:e,attrs:{env:t,"env-name":e}})})),1)])],t._v(" "),t.isLoading?n("gl-loading-icon",{staticClass:"prepend-top-default append-bottom-default js-functions-loader",attrs:{size:2}}):t._e()],2):n("div",{staticClass:"empty-state js-empty-state"},[n("div",{staticClass:"text-content"},[n("h4",{staticClass:"state-title text-center"},[t._v(t._s(t.s__("Serverless|No functions available")))]),t._v(" "),n("p",{staticClass:"state-description"},[t._v("\n          "+t._s(t.s__("Serverless|There is currently no function data available from Knative. This could be for a variety of reasons including:"))+"\n        ")]),t._v(" "),n("ul",[n("li",{domProps:{innerHTML:t._s(t.noServerlessConfigFile)}}),t._v(" "),n("li",{domProps:{innerHTML:t._s(t.noGitlabYamlConfigured)}}),t._v(" "),n("li",{domProps:{innerHTML:t._s(t.mismatchedServerlessFunctions)}}),t._v(" "),n("li",[t._v(t._s(t.s__("Serverless|The deploy job has not finished.")))])]),t._v(" "),n("p",[t._v("\n          "+t._s(t.s__("Serverless|If you believe none of these apply, please check back later as the function data may be in the process of becoming available."))+"\n        ")]),t._v(" "),n("div",{staticClass:"text-center"},[n("a",{staticClass:"btn btn-success",attrs:{href:t.helpPath}},[t._v("\n            "+t._s(t.s__("Serverless|Learn more about Serverless"))+"\n          ")])])])])]):n("empty-state",{attrs:{"clusters-path":t.clustersPath,"help-path":t.helpPath}})],1)}),[],!1,null,null,null).exports,E=(n(72),{props:{count:{type:Number,required:!0},color:{type:String,required:!1,default:"green"}},methods:{boxOffset:function(t){return 20*(t-1)}}}),T=Object(f.a)(E,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{width:t.boxOffset(t.count+1),height:20}},t._l(t.count,(function(e){return n("rect",{key:e,attrs:{width:"15",height:"15",rx:"5",ry:"5",fill:t.color,x:t.boxOffset(e),y:"0"}})})),0)}),[],!1,null,null,null).exports,I=(n(56),n(30),n(40),n(65),n(46),n(129),n(18),n(68),n(36),n(41),n(2530)),x=n(210),D=n.n(x),N=n(16);n(77);var R,q=function(t){return t.reduce((function(t,e){return Object.assign(t,(n={},r=e.environment_scope,i=(t[e.environment_scope]||[]).concat([e]),r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n));var n,r,i}),{})};function k(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,i=!1,s=void 0;try{for(var a,o=t[Symbol.iterator]();!(r=(a=o.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,s=t}finally{try{r||null==o.return||o.return()}finally{if(i)throw s}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var F={components:{GlAreaChart:I.a},inheritAttrs:!1,props:{graphData:{type:Object,required:!0,validator:function(t){return t.queries&&Array.isArray(t.queries)&&t.queries.filter((function(t){return!!Array.isArray(t.result)&&t.result.filter((function(t){return Array.isArray(t.values)})).length===t.result.length})).length===t.queries.length}},containerWidth:{type:Number,required:!0}},data:function(){return{tooltipPopoverTitle:"",tooltipPopoverContent:"",width:this.containerWidth}},computed:{chartData:function(){return this.graphData.queries.reduce((function(t,e){return t[e.unit]=e.result.reduce((function(t,e){return t.concat(e.values)}),[]),t}),{})},extractTimeData:function(){return this.chartData.requests.map((function(t){return t.time}))},generateSeries:function(){return{name:Object(c.a)("Invocations"),type:"line",data:this.chartData.requests.map((function(t){return[t.time,t.value]})),symbolSize:0}},getInterval:function(){var t=this.graphData.queries[0].result;if(0===t.length)return 1;var e=t[0].values.reduce((function(t,e){return e.value>t?e.value:t}),1);return e<5?e:5},chartOptions:function(){return{xAxis:{name:"time",type:"time",axisLabel:{formatter:function(t){return D()(t,"h:MM TT")}},data:this.extractTimeData,nameTextStyle:{padding:[18,0,0,0]}},yAxis:{name:this.yAxisLabel,nameTextStyle:{padding:[0,0,36,0]},splitNumber:this.getInterval},legend:{formatter:this.xAxisLabel},series:this.generateSeries}},xAxisLabel:function(){return this.graphData.queries.map((function(t){return t.label})).join(", ")},yAxisLabel:function(){var t=k(this.graphData.queries,1)[0];return"".concat(this.graphData.y_label," (").concat(t.unit,")")}},watch:{containerWidth:"onResize"},beforeDestroy:function(){window.removeEventListener("resize",R)},created:function(){R=Object(N.h)(this.onResize),window.addEventListener("resize",R)},methods:{formatTooltipText:function(t){var e=k(t.seriesData,1)[0];this.tooltipPopoverTitle=D()(t.value,"dd mmm yyyy, h:MMTT"),this.tooltipPopoverContent="".concat(this.yAxisLabel,": ").concat(e.value[1])},onResize:function(){var t=this.$refs.areaChart.$el.getBoundingClientRect().width;this.width=t}}},L=Object(f.a)(F,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"prometheus-graph"},[n("div",{staticClass:"prometheus-graph-header"},[n("h5",{ref:"graphTitle",staticClass:"prometheus-graph-title"},[t._v(t._s(t.graphData.title))]),t._v(" "),n("div",{ref:"graphWidgets",staticClass:"prometheus-graph-widgets"},[t._t("default")],2)]),t._v(" "),n("gl-area-chart",t._b({ref:"areaChart",attrs:{data:[],option:t.chartOptions,"format-tooltip-text":t.formatTooltipText,width:t.width,"include-legend-avg-max":!1}},"gl-area-chart",t.$attrs,!1),[n("template",{slot:"tooltipTitle"},[t._v(t._s(t.tooltipPopoverTitle))]),t._v(" "),n("template",{slot:"tooltipContent"},[t._v(t._s(t.tooltipPopoverContent))])],2)],1)}),[],!1,null,null,null).exports,M=n(553),A=n(301),U={components:{GlButton:M.a,GlLink:A.a},props:{clustersPath:{type:String,required:!0},helpPath:{type:String,required:!0},missingData:{type:Boolean,required:!0}},computed:{missingStateClass:function(){return this.missingData?"missing-prometheus-state":"empty-prometheus-state"},prometheusHelpPath:function(){return"".concat(this.helpPath,"#prometheus-support")},description:function(){return this.missingData?Object(c.d)("ServerlessDetails|Invocation metrics loading or not available at this time."):Object(c.d)("ServerlessDetails|Function invocation metrics require Prometheus to be installed first.")}}};function B(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function V(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?B(Object(n),!0).forEach((function(e){G(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function G(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var $={components:{PodBox:T,Url:h,AreaChart:L,MissingPrometheus:Object(f.a)(U,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row",class:t.missingStateClass},[n("div",{staticClass:"col-12"},[n("div",{staticClass:"text-content"},[n("h4",{staticClass:"state-title text-left"},[t._v(t._s(t.s__("ServerlessDetails|Invocations")))]),t._v(" "),n("p",{staticClass:"state-description"},[t._v("\n        "+t._s(t.description)+"\n        "),n("gl-link",{attrs:{href:t.prometheusHelpPath}},[t._v(t._s(t.s__("ServerlessDetails|More information")))]),t._v(".\n      ")],1),t._v(" "),t.missingData?t._e():n("div",{staticClass:"text-left"},[n("gl-button",{attrs:{href:t.clustersPath,variant:"success"}},[t._v("\n          "+t._s(t.s__("ServerlessDetails|Install Prometheus"))+"\n        ")])],1)])])])}),[],!1,null,null,null).exports},props:{func:{type:Object,required:!0},hasPrometheus:{type:Boolean,required:!1,default:!1},clustersPath:{type:String,required:!0},helpPath:{type:String,required:!0}},data:function(){return{elWidth:0}},computed:V({name:function(){return this.func.name},description:function(){return l()(this.func.description)?this.func.description:""},funcUrl:function(){return this.func.url},podCount:function(){return Number(this.func.podcount)||0}},Object(a.e)(["graphData","hasPrometheusData"]),{},Object(a.d)(["hasPrometheusMissingData"])),created:function(){this.fetchMetrics({metricsPath:this.func.metricsUrl,hasPrometheus:this.hasPrometheus})},mounted:function(){this.elWidth=this.$el.clientWidth},methods:V({},Object(a.c)(["fetchMetrics"]))},z=Object(f.a)($,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{attrs:{id:"serverless-function-details"}},[n("h3",{staticClass:"serverless-function-name"},[t._v(t._s(t.name))]),t._v(" "),n("div",{staticClass:"append-bottom-default serverless-function-description"},t._l(t.description.split("\n"),(function(e,r){return n("div",{key:r},[t._v(t._s(e))])})),0),t._v(" "),n("url",{attrs:{uri:t.funcUrl}}),t._v(" "),n("h4",[t._v(t._s(t.s__("ServerlessDetails|Kubernetes Pods")))]),t._v(" "),t.podCount>0?n("div",[n("p",[1==t.podCount?n("b",[t._v(t._s(t.podCount)+" "+t._s(t.s__("ServerlessDetails|pod in use")))]):n("b",[t._v(t._s(t.podCount)+" "+t._s(t.s__("ServerlessDetails|pods in use")))])]),t._v(" "),n("pod-box",{attrs:{count:t.podCount}}),t._v(" "),n("p",[t._v("\n      "+t._s(t.s__("ServerlessDetails|Number of Kubernetes pods in use over time based on necessity."))+"\n    ")])],1):n("div",[n("p",[t._v(t._s(t.s__("ServerlessDetails|No pods loaded at this time.")))])]),t._v(" "),t.hasPrometheusData?n("area-chart",{attrs:{"graph-data":t.graphData,"container-width":t.elWidth}}):t._e(),t._v(" "),!t.hasPrometheus||t.hasPrometheusMissingData?n("missing-prometheus",{attrs:{"help-path":t.helpPath,"clusters-path":t.clustersPath,"missing-data":t.hasPrometheusMissingData}}):t._e()],1)}),[],!1,null,null,null).exports,K=n(11),W=n(146),H=n(14);function J(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,i=!1,s=void 0;try{for(var a,o=t[Symbol.iterator]();!(r=(a=o.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,s=t}finally{try{r||null==o.return||o.return()}finally{if(i)throw s}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Q(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Y(Object(n),!0).forEach((function(e){X(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function X(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Z,tt=function(t){return(0,t.commit)("REQUEST_FUNCTIONS_LOADING")},et=function(t,e){return(0,t.commit)("RECEIVE_FUNCTIONS_SUCCESS",e)},nt=function(t,e){return(0,t.commit)("RECEIVE_FUNCTIONS_PARTIAL",e)},rt=function(t,e){return(0,t.commit)("RECEIVE_FUNCTIONS_TIMEOUT",e)},it=function(t,e){return(0,t.commit)("RECEIVE_FUNCTIONS_NODATA_SUCCESS",e)},st=function(t,e){return(0,t.commit)("RECEIVE_FUNCTIONS_ERROR",e)},at=function(t,e){return(0,t.commit)("RECEIVE_METRICS_SUCCESS",e)},ot=function(t){return(0,t.commit)("RECEIVE_METRICS_NO_PROMETHEUS")},ct=function(t,e){return(0,t.commit)("RECEIVE_METRICS_NODATA_SUCCESS",e)},ut=function(t,e){return(0,t.commit)("RECEIVE_METRICS_ERROR",e)},lt=function(t,e){var n=t.dispatch,r=e.functionsPath,i=0;n("requestFunctionsLoading"),Object(N.e)((function(t,e){K.a.get(r).then((function(r){var s;"checking"===r.data.knative_installed?(i+=1)<3?(null!==(s=r.data).functions&&s.functions.length&&n("receiveFunctionsPartial",s),t()):e("timeout"):e(r.data)})).catch(e)})).then((function(t){"timeout"===t?(n("receiveFunctionsTimeout"),Object(H.a)(Object(c.a)("Loading functions timed out. Please reload the page to try again."))):null!==t.functions&&t.functions.length?n("receiveFunctionsSuccess",t):n("receiveFunctionsNoDataSuccess",t)})).catch((function(t){n("receiveFunctionsError",t),Object(H.a)(t)}))},pt=function(t,e){var n=t.dispatch,r=e.metricsPath,i=e.hasPrometheus,s=0;i?Object(N.e)((function(t,e){K.a.get(r).then((function(r){r.status===W.a.NO_CONTENT?(s+=1)<3?t():(n("receiveMetricsNoDataSuccess"),e(null)):e(r.data)})).catch(e)})).then((function(t){if(null!==t){var e=t.metrics,r=t.metrics.queries.map((function(t){return Q({},t,{result:t.result.map((function(t){return Q({},t,{values:t.values.map((function(t){var e=J(t,2),n=e[0],r=e[1];return{time:new Date(1e3*n).toISOString(),value:Number(r)}}))})}))})}));e.queries=r,n("receiveMetricsSuccess",e)}})).catch((function(t){n("receiveMetricsError",t),Object(H.a)(t)})):n("receiveMetricsNoPrometheus")},dt=function(){},ft=function(t){return t.hasPrometheus&&!t.hasPrometheusData},ht=function(t){return q(t.functions)},mt=function(){};function vt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var gt=(vt(Z={},"REQUEST_FUNCTIONS_LOADING",(function(t){t.isLoading=!0})),vt(Z,"RECEIVE_FUNCTIONS_SUCCESS",(function(t,e){t.functions=e.functions,t.installed=e.knative_installed,t.isLoading=!1,t.hasFunctionData=!0})),vt(Z,"RECEIVE_FUNCTIONS_PARTIAL",(function(t,e){t.functions=e.functions,t.installed=!0,t.isLoading=!0,t.hasFunctionData=!0})),vt(Z,"RECEIVE_FUNCTIONS_TIMEOUT",(function(t){t.isLoading=!1})),vt(Z,"RECEIVE_FUNCTIONS_NODATA_SUCCESS",(function(t,e){t.isLoading=!1,t.installed=e.knative_installed,t.hasFunctionData=!1})),vt(Z,"RECEIVE_FUNCTIONS_ERROR",(function(t,e){t.error=e,t.hasFunctionData=!1,t.isLoading=!1})),vt(Z,"RECEIVE_METRICS_SUCCESS",(function(t,e){t.isLoading=!1,t.hasPrometheusData=!0,t.graphData=e})),vt(Z,"RECEIVE_METRICS_NODATA_SUCCESS",(function(t){t.isLoading=!1,t.hasPrometheusData=!1})),vt(Z,"RECEIVE_METRICS_ERROR",(function(t,e){t.hasPrometheusData=!1,t.error=e})),vt(Z,"RECEIVE_METRICS_NO_PROMETHEUS",(function(t){t.hasPrometheusData=!1,t.hasPrometheus=!1})),Z);s.default.use(a.b);var bt=function(){return new a.b.Store({actions:r,getters:i,mutations:gt,state:{error:null,installed:"checking",isLoading:!0,functions:[],hasFunctionData:!0,hasPrometheus:!0,hasPrometheusData:!1,graphData:{}}})};bt();function _t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var yt=function(){function t(){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),null!=document.querySelector(".js-serverless-function-details-page")){var e=document.querySelector(".js-serverless-function-details-page").dataset,n=e.serviceName,r=e.serviceDescription,i=e.serviceEnvironment,a=e.serviceUrl,o=e.serviceNamespace,c=e.servicePodcount,u=e.serviceMetricsUrl,l=e.prometheus,p=e.clustersPath,d=e.helpPath,f=document.querySelector("#js-serverless-function-details"),h={name:n,description:r,environment:i,url:a,namespace:o,podcount:c,metricsUrl:u};this.functionDetails=new s.default({el:f,store:bt(),render:function(t){return t(z,{props:{func:h,hasPrometheus:void 0!==l,clustersPath:p,helpPath:d}})}})}else{var m=document.querySelector(".js-serverless-functions-page").dataset,v=m.statusPath,g=m.clustersPath,b=m.helpPath,_=document.querySelector("#js-serverless-functions");this.functions=new s.default({el:_,store:bt(),render:function(t){return t(P,{props:{clustersPath:g,helpPath:b,statusPath:v}})}})}}var e,n,r;return e=t,(n=[{key:"destroy",value:function(){this.destroyed=!0,this.functions.$destroy(),this.functionDetails.$destroy()}}])&&_t(e.prototype,n),r&&_t(e,r),t}();document.addEventListener("DOMContentLoaded",(function(){new yt}))},70:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));n(24),n(49),n(56),n(40),n(90),n(18),n(36),n(41);var r=n(8),i=n.n(r),s=n(9);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=o(this,c(e).call(this)),i.a.bind("g p",(function(){return Object(s.a)(".shortcuts-project")})),i.a.bind("g v",(function(){return Object(s.a)(".shortcuts-project-activity")})),i.a.bind("g r",(function(){return Object(s.a)(".shortcuts-project-releases")})),i.a.bind("g f",(function(){return Object(s.a)(".shortcuts-tree")})),i.a.bind("g c",(function(){return Object(s.a)(".shortcuts-commits")})),i.a.bind("g j",(function(){return Object(s.a)(".shortcuts-builds")})),i.a.bind("g n",(function(){return Object(s.a)(".shortcuts-network")})),i.a.bind("g d",(function(){return Object(s.a)(".shortcuts-repository-charts")})),i.a.bind("g i",(function(){return Object(s.a)(".shortcuts-issues")})),i.a.bind("g b",(function(){return Object(s.a)(".shortcuts-issue-boards")})),i.a.bind("g m",(function(){return Object(s.a)(".shortcuts-merge_requests")})),i.a.bind("g w",(function(){return Object(s.a)(".shortcuts-wiki")})),i.a.bind("g s",(function(){return Object(s.a)(".shortcuts-snippets")})),i.a.bind("g k",(function(){return Object(s.a)(".shortcuts-kubernetes")})),i.a.bind("g e",(function(){return Object(s.a)(".shortcuts-environments")})),i.a.bind("g l",(function(){return Object(s.a)(".shortcuts-metrics")})),i.a.bind("i",(function(){return Object(s.a)(".shortcuts-new-issue")})),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,t),e}(n(107).a)},73:function(t,e,n){"use strict";n(30),n(35),n(18),n(64);var r=n(0),i=n.n(r),s=n(32),a=(n(65),n(69),n(55),n(67),n(71));function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.projectSelectInput=i()(e),this.newItemBtn=i()(".new-project-item-link"),this.resourceType=this.newItemBtn.data("type"),this.resourceLabel=this.newItemBtn.data("label"),this.formattedText=this.deriveTextVariants(),this.groupId=this.projectSelectInput.data("groupId"),this.bindEvents(),this.initLocalStorage()}var e,r,s;return e=t,(r=[{key:"bindEvents",value:function(){var t=this;this.projectSelectInput.siblings(".new-project-item-select-button").on("click",(function(e){return t.openDropdown(e)})),this.newItemBtn.on("click",(function(e){t.getProjectFromLocalStorage()||(e.preventDefault(),t.openDropdown(e))})),this.projectSelectInput.on("change",(function(){return t.selectProject()}))}},{key:"initLocalStorage",value:function(){a.a.isLocalStorageAccessSafe()&&(this.localStorageKey=["group",this.groupId,this.formattedText.localStorageItemType,"recent-project"].join("-"),this.setBtnTextFromLocalStorage())}},{key:"openDropdown",value:function(t){n.e(239).then(n.t.bind(null,428,7)).then((function(){i()(t.currentTarget).siblings(".project-item-select").select2("open")})).catch((function(){}))}},{key:"selectProject",value:function(){var t=JSON.parse(this.projectSelectInput.val()),e={url:"".concat(t.url,"/").concat(this.projectSelectInput.data("relativePath")),name:t.name};this.setNewItemBtnAttributes(e),this.setProjectInLocalStorage(e)}},{key:"setBtnTextFromLocalStorage",value:function(){var t=this.getProjectFromLocalStorage();this.setNewItemBtnAttributes(t)}},{key:"setNewItemBtnAttributes",value:function(t){t?(this.newItemBtn.attr("href",t.url),this.newItemBtn.text("".concat(this.formattedText.defaultTextPrefix," in ").concat(t.name))):this.newItemBtn.text("Select project to create ".concat(this.formattedText.presetTextSuffix))}},{key:"getProjectFromLocalStorage",value:function(){var t=localStorage.getItem(this.localStorageKey);return JSON.parse(t)}},{key:"setProjectInLocalStorage",value:function(t){var e=JSON.stringify(t);localStorage.setItem(this.localStorageKey,e)}},{key:"deriveTextVariants",value:function(){var t=this.resourceLabel;return{localStorageItemType:"new-".concat(this.resourceType.split("_").join("-").slice(0,-1)),defaultTextPrefix:t,presetTextSuffix:this.resourceType.split("_").join(" ").slice(0,-1)}}}])&&o(e.prototype,r),s&&o(e,s),t}(),u=n(1),l=function(){i()(".ajax-project-select").each((function(t,e){var n,r=this,a=i()(e).data("simpleFilter")||!1,o=i()(e).data("select2");return this.groupId=i()(e).data("groupId"),this.userId=i()(e).data("userId"),this.includeGroups=i()(e).data("includeGroups"),this.allProjects=i()(e).data("allProjects")||!1,this.orderBy=i()(e).data("orderBy")||"id",this.withIssuesEnabled=i()(e).data("withIssuesEnabled"),this.withMergeRequestsEnabled=i()(e).data("withMergeRequestsEnabled"),this.withShared=void 0===i()(e).data("withShared")||i()(e).data("withShared"),this.includeProjectsInSubgroups=i()(e).data("includeProjectsInSubgroups")||!1,this.allowClear=i()(e).data("allowClear")||!1,n=Object(u.d)("ProjectSelect|Search for project"),this.includeGroups&&(n+=Object(u.d)("ProjectSelect| or group")),i()(e).select2({placeholder:n,minimumInputLength:0,query:function(t){var e,n=function(e){var n={results:e};return t.callback(n)};return e=r.includeGroups?function(e){return s.a.groups(t.term,{},(function(t){var r=t.concat(e);return n(r)}))}:n,r.groupId?s.a.groupProjects(r.groupId,t.term,{with_issues_enabled:r.withIssuesEnabled,with_merge_requests_enabled:r.withMergeRequestsEnabled,with_shared:r.withShared,include_subgroups:r.includeProjectsInSubgroups},e):r.userId?s.a.userProjects(r.userId,t.term,{with_issues_enabled:r.withIssuesEnabled,with_merge_requests_enabled:r.withMergeRequestsEnabled,with_shared:r.withShared,include_subgroups:r.includeProjectsInSubgroups},e):s.a.projects(t.term,{order_by:r.orderBy,with_issues_enabled:r.withIssuesEnabled,with_merge_requests_enabled:r.withMergeRequestsEnabled,membership:!r.allProjects},e)},id:function(t){return a?t.id:JSON.stringify({name:t.name,url:t.web_url})},text:function(t){return t.name_with_namespace||t.name},initSelection:function(t,e){return s.a.project(t.val()).then((function(t){var n=t.data;return e(n)}))},allowClear:this.allowClear,dropdownCssClass:"ajax-project-dropdown"}),o||a?e:new c(e)}))};e.a=function(){return n.e(239).then(n.t.bind(null,428,7)).then(l).catch((function(){}))}},730:function(t,e,n){"use strict";var r={components:{icon:n(45).a},props:{isGroupOpen:{type:Boolean,required:!0,default:!1}},computed:{iconClass:function(){return this.isGroupOpen?"angle-down":"angle-right"}}},i=n(4),s=Object(i.a)(r,(function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"folder-caret append-right-4"},[e("icon",{attrs:{size:10,name:this.iconClass}})],1)}),[],!1,null,null,null);e.a=s.exports},88:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));n(42),n(89);var r=n(0),i=n.n(r),s=n(51),a=n.n(s),o=n(1),c=n(33);n(28),n(78),n(40),n(46),n(129),n(35),n(77),n(18),n(36),n(41);var u=function(t){return t.reduce((function(t,e){var n=e.name,r=e.value;return Object.assign(t,function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},n,r))}),{})},l=n(11),p=n(14),d=n(73);function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var h=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var e=i()("ul.clone-options-dropdown"),n=i()("#project_clone"),r=i()(".js-git-clone-holder .js-clone-dropdown-label"),s=document.querySelector(".js-mobile-git-clone .js-clone-dropdown-label"),o=r.text().trim();o.length>0&&i()("a:contains('".concat(o,"')"),e).addClass("is-active"),i()("a",e).on("click",(function(t){t.preventDefault();var r=i()(t.currentTarget),a=r.attr("href"),o=r.data("cloneType");i()(".is-active",e).removeClass("is-active"),i()('a[data-clone-type="'.concat(o,'"]')).each((function(){var t=i()(this),e=t.find(".dropdown-menu-inner-title").text(),n=t.closest(".project-clone-holder").find(".js-clone-dropdown-label");t.toggleClass("is-active"),n.text(e)})),s?s.dataset.clipboardText=a:n.val(a),i()(".js-git-empty .js-clone").text(a)})),t.initRefSwitcher(),i()(".project-refs-select").on("change",(function(){return i()(this).parents("form").submit()})),i()(".hide-no-ssh-message").on("click",(function(t){return a.a.set("hide_no_ssh_message","false"),i()(this).parents(".no-ssh-key-message").remove(),t.preventDefault()})),i()(".hide-no-password-message").on("click",(function(t){return a.a.set("hide_no_password_message","false"),i()(this).parents(".no-password-message").remove(),t.preventDefault()})),i()(".hide-auto-devops-implicitly-enabled-banner").on("click",(function(t){var e=i()(this).data("project-id"),n="hide_auto_devops_implicitly_enabled_banner_".concat(e);return a.a.set(n,"false"),i()(this).parents(".auto-devops-implicitly-enabled-banner").remove(),t.preventDefault()})),t.projectSelectDropdown()}var e,n,r;return e=t,r=[{key:"projectSelectDropdown",value:function(){Object(d.a)(),i()(".project-item-select").on("click",(function(e){return t.changeProject(i()(e.currentTarget).val())}))}},{key:"changeProject",value:function(t){return window.location=t}},{key:"initRefSwitcher",value:function(){var t=document.createElement("li"),e=document.createElement("a");return e.href="#",i()(".js-project-refs-dropdown").each((function(){var n,r,s,a=i()(this),d=a.data("selected"),f=a.data("fieldName"),h=Boolean(a.data("visit")),m=a.closest("form"),v=m.attr("action"),g=Object(c.h)((n=m[0],r=new FormData(n),s=Array.from(r.keys()).map((function(t){var e=r.getAll(t);return{name:t,value:1===(e=e.filter((function(t){return t}))).length?e[0]:e}})),u(s)),v);return a.glDropdown({data:function(t,e){l.a.get(a.data("refsUrl"),{params:{ref:a.data("ref"),search:t}}).then((function(t){var n=t.data;return e(n)})).catch((function(){return Object(p.a)(Object(o.a)("An error occurred while getting projects"))}))},selectable:!0,filterable:!0,filterRemote:!0,filterByText:!0,inputFieldName:a.data("inputFieldName"),fieldName:f,renderRow:function(n){var r,i,s,a=t.cloneNode(!1),o=e.cloneNode(!1);return n===d&&(o.className="is-active"),o.textContent=n,o.dataset.ref=n,n.length>0&&h&&(o.href=Object(c.h)((s=n,(i=f)in(r={})?Object.defineProperty(r,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[i]=s,r),g)),a.appendChild(o),a},id:function(t,e){return e.attr("data-ref")},toggleLabel:function(t,e){return e.text().trim()},clicked:function(t){var e=t.e;h||e.preventDefault()}})}))}}],(n=null)&&f(e.prototype,n),r&&f(e,r),t}()}},[[2414,1,0,2]]]);
//# sourceMappingURL=pages.projects.serverless.3f11ccd7.chunk.js.map