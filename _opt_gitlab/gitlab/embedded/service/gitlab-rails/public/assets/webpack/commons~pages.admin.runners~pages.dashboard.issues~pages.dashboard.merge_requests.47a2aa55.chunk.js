(this.webpackJsonp=this.webpackJsonp||[]).push([[16],{111:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=document,i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"container",set:function(e){o=e},get:function(){return o}}])&&r(t.prototype,n),i&&r(t,i),e}();t.a=new i},184:function(e,t,n){var r=n(108),o=n(271),i=n(215),a=n(296),s=n(344),c=n(419);r({target:"Reflect",stat:!0},{get:function e(t,n){var r,l,u=arguments.length<3?t:arguments[2];return i(t)===u?t[n]:(r=s.f(t,n))?a(r,"value")?r.value:void 0===r.get?void 0:r.get.call(u):o(l=c(t))?e(l,n,u):void 0}})},297:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(30),n(42),n(46),n(55),n(91);var r=n(1);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tokenKeys=t,this.alternativeTokenKeys=n,this.conditions=r,this.tokenKeysWithAlternative=this.tokenKeys.concat(this.alternativeTokenKeys)}var t,n,i;return t=e,(n=[{key:"get",value:function(){return this.tokenKeys}},{key:"getKeys",value:function(){return this.tokenKeys.map((function(e){return e.key}))}},{key:"getAlternatives",value:function(){return this.alternativeTokenKeys}},{key:"getConditions",value:function(){return this.conditions}},{key:"shouldUppercaseTokenName",value:function(e){var t=this.searchByKey(e.toLowerCase());return t&&t.uppercaseTokenName}},{key:"shouldCapitalizeTokenValue",value:function(e){var t=this.searchByKey(e.toLowerCase());return t&&t.capitalizeTokenValue}},{key:"searchByKey",value:function(e){return this.tokenKeys.find((function(t){return t.key===e}))||null}},{key:"searchBySymbol",value:function(e){return this.tokenKeys.find((function(t){return t.symbol===e}))||null}},{key:"searchByKeyParam",value:function(e){return this.tokenKeysWithAlternative.find((function(t){var n=t.key;return n=n.replace("-","_"),t.param&&(n+="_".concat(t.param)),e===n}))||null}},{key:"searchByConditionUrl",value:function(e){return this.conditions.find((function(t){return t.url===e}))||null}},{key:"searchByConditionKeyValue",value:function(e,t,n){return this.conditions.find((function(r){return r.tokenKey===e&&r.operator===t&&r.value.toLowerCase()===n.toLowerCase()}))||null}},{key:"addExtraTokensForIssues",value:function(){var e={formattedKey:Object(r.a)("Confidential"),key:"confidential",type:"string",param:"",symbol:"",icon:"eye-slash",tag:Object(r.a)("Yes or No"),lowercaseValueOnSubmit:!0,uppercaseTokenName:!1,capitalizeTokenValue:!0};this.tokenKeys.push(e),this.tokenKeysWithAlternative.push(e)}}])&&o(t.prototype,n),i&&o(t,i),e}()},307:function(e,t,n){"use strict";n(24),n(49),n(56),n(30),n(28),n(26),n(104),n(40),n(46),n(69),n(50),n(58),n(38),n(18),n(55),n(68),n(122),n(36),n(67),n(27),n(41);var r=n(463),o=n.n(r),i=n(297),a=n(1);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var p=[{formattedKey:Object(a.a)("Author"),key:"author",type:"string",param:"username",symbol:"@",icon:"pencil",tag:"@author"},{formattedKey:Object(a.a)("Assignee"),key:"assignee",type:"string",param:"username",symbol:"@",icon:"user",tag:"@assignee"},{formattedKey:Object(a.a)("Milestone"),key:"milestone",type:"string",param:"title",symbol:"%",icon:"clock",tag:"%milestone"},{formattedKey:Object(a.a)("Release"),key:"release",type:"string",param:"tag",symbol:"",icon:"rocket",tag:Object(a.a)("tag name")},{formattedKey:Object(a.a)("Label"),key:"label",type:"array",param:"name[]",symbol:"~",icon:"labels",tag:"~label"}];gon.current_user_id&&p.push({formattedKey:Object(a.a)("My-Reaction"),key:"my-reaction",type:"string",param:"emoji",symbol:"",icon:"thumb-up",tag:"emoji"});var d=[{formattedKey:Object(a.a)("Label"),key:"label",type:"string",param:"name",symbol:"~"}],h=o()([{url:"assignee_id=None",tokenKey:"assignee",value:Object(a.a)("None")},{url:"assignee_id=Any",tokenKey:"assignee",value:Object(a.a)("Any")},{url:"milestone_title=None",tokenKey:"milestone",value:Object(a.a)("None")},{url:"milestone_title=Any",tokenKey:"milestone",value:Object(a.a)("Any")},{url:"milestone_title=%23upcoming",tokenKey:"milestone",value:Object(a.a)("Upcoming")},{url:"milestone_title=%23started",tokenKey:"milestone",value:Object(a.a)("Started")},{url:"release_tag=None",tokenKey:"release",value:Object(a.a)("None")},{url:"release_tag=Any",tokenKey:"release",value:Object(a.a)("Any")},{url:"label_name[]=None",tokenKey:"label",value:Object(a.a)("None")},{url:"label_name[]=Any",tokenKey:"label",value:Object(a.a)("Any")},{url:"my_reaction_emoji=None",tokenKey:"my-reaction",value:Object(a.a)("None")},{url:"my_reaction_emoji=Any",tokenKey:"my-reaction",value:Object(a.a)("Any")}].map((function(e){var t=u(e.url.split("="),2),n=t[0],r=t[1],o=n.includes("[]"),i="not[".concat(o?n.slice(0,-2):n,"]").concat(o?"[]":"","=").concat(r);return[c({},e,{operator:"="}),c({},e,{operator:"!=",url:i})]}))),f=new i.a(p,d,h);t.a=f},355:function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return a})),n.d(t,"a",(function(){return s}));var r=38,o=40,i=13,a=27,s=8},435:function(e,t,n){"use strict";n.d(t,"a",(function(){return pt}));n(24),n(49),n(56),n(30),n(26),n(104),n(85),n(40),n(65),n(46),n(69),n(35),n(18),n(311),n(55),n(68),n(695),n(122),n(36),n(283),n(91),n(246),n(67),n(89),n(27),n(41);var r=n(219),o=n.n(r),i={issues:"issue-recent-searches",merge_requests:"merge-request-recent-searches"},a=n(16),s=n(307),c=n(33),l=n(14),u=n(111),p=n(17),d=new p.default,h=(n(498),n(297));function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var v=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"processTokens",value:function(e,t){var n=new RegExp("(".concat(t.join("|"),"):(=|!=)?([~%@]?)(?:('[^']*'{0,1})|(\"[^\"]*\"{0,1})|(\\S+))"),"g"),r=[],o=[],i=null,a=e.replace(n,(function(e,t,n,i,a,s,c){var l,u=a||s||c,p=i,d=n;return"~"!==u&&"%"!==u&&"@"!==u||(p=u,u=""),"!="!==u&&"="!==u||(d=u,u=""),l="".concat(t,":").concat(u),-1===o.indexOf(l)&&(o.push(l),r.push({key:t,value:u||"",symbol:p||"",operator:d||""})),""})).replace(/\s{2,}/g," ").trim()||"";if(r.length>0){var s=r[r.length-1],c="".concat(s.key,":").concat(s.operator).concat(s.symbol).concat(s.value);i=e.lastIndexOf(c)===e.length-c.length?s:a}else i=a;return{tokens:r,lastToken:i,searchToken:a}}}],(n=null)&&f(t.prototype,n),r&&f(t,r),e}(),y={name:"RecentSearchesDropdownContent",props:{items:{type:Array,required:!0},isLocalStorageAvailable:{type:Boolean,required:!1,default:!0},allowedKeys:{type:Array,required:!0}},computed:{processedItems:function(){var e=this;return this.items.map((function(t){var n=v.processTokens(t,e.allowedKeys),r=n.tokens,o=n.searchToken;return{text:t,tokens:r.map((function(e){return{prefix:"".concat(e.key,":"),operator:e.operator,suffix:"".concat(e.symbol).concat(e.value)}})),searchToken:o}}))},hasItems:function(){return this.items.length>0}},methods:{onItemActivated:function(e){d.$emit("recentSearchesItemSelected",e)},onRequestClearRecentSearches:function(e){e.stopPropagation(),d.$emit("requestClearRecentSearches")}}},k=n(4),m=Object(k.a)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.isLocalStorageAvailable?e.hasItems?n("ul",[e._l(e.processedItems,(function(t,r){return n("li",{key:"processed-items-"+r,ref:"dropdownItem",refInFor:!0},[n("button",{staticClass:"filtered-search-history-dropdown-item js-dropdown-button",attrs:{type:"button"},on:{click:function(n){return e.onItemActivated(t.text)}}},[n("span",e._l(t.tokens,(function(t,r){return n("span",{key:"dropdown-token-"+r,staticClass:"filtered-search-history-dropdown-token js-dropdown-token"},[n("span",{staticClass:"name"},[e._v(e._s(t.prefix))]),e._v(" "),n("span",{staticClass:"name"},[e._v(e._s(t.operator))]),e._v(" "),n("span",{staticClass:"value"},[e._v(e._s(t.suffix))])])})),0),e._v(" "),n("span",{staticClass:"filtered-search-history-dropdown-search-token"},[e._v("\n          "+e._s(t.searchToken)+"\n        ")])])])})),e._v(" "),n("li",{staticClass:"divider"}),e._v(" "),n("li",[n("button",{ref:"clearButton",staticClass:"filtered-search-history-clear-button",attrs:{type:"button"},on:{click:function(t){return e.onRequestClearRecentSearches(t)}}},[e._v("\n        "+e._s(e.__("Clear recent searches"))+"\n      ")])])],2):n("div",{ref:"dropdownNote",staticClass:"dropdown-info-note"},[e._v("\n    "+e._s(e.__("You don't have any recent searches"))+"\n  ")]):n("div",{ref:"localStorageNote",staticClass:"dropdown-info-note"},[e._v("\n    "+e._s(e.__("This feature requires local storage to be enabled"))+"\n  ")])])}),[],!1,null,null,null).exports;function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var b=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=t,this.service=n,this.wrapperElement=r}var t,n,r;return t=e,(n=[{key:"init",value:function(){this.bindEvents(),this.render()}},{key:"bindEvents",value:function(){this.onRequestClearRecentSearchesWrapper=this.onRequestClearRecentSearches.bind(this),d.$on("requestClearRecentSearches",this.onRequestClearRecentSearchesWrapper)}},{key:"unbindEvents",value:function(){d.$off("requestClearRecentSearches",this.onRequestClearRecentSearchesWrapper)}},{key:"render",value:function(){var e=this.store.state;this.vm=new p.default({el:this.wrapperElement,components:{RecentSearchesDropdownContent:m},data:function(){return e},template:'\n        <recent-searches-dropdown-content\n          :items="recentSearches"\n          :is-local-storage-available="isLocalStorageAvailable"\n          :allowed-keys="allowedKeys"\n          />\n      '})}},{key:"onRequestClearRecentSearches",value:function(){var e=this.store.setRecentSearches([]);this.service.save(e)}},{key:"destroy",value:function(){this.unbindEvents(),this.vm&&this.vm.$destroy()}}])&&g(t.prototype,n),r&&g(t,r),e}(),S=(n(77),n(525)),T=n.n(S);function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var O=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state=Object.assign({isLocalStorageAvailable:!0,recentSearches:[],allowedKeys:n},t)}var t,n,r;return t=e,(n=[{key:"addRecentSearch",value:function(e){return this.setRecentSearches([e].concat(this.state.recentSearches)),this.state.recentSearches}},{key:"setRecentSearches",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.map((function(e){return e.trim()}));return this.state.recentSearches=T()(t).slice(0,5),this.state.recentSearches}}])&&w(t.prototype,n),r&&w(t,r),e}(),E=(n(64),n(1));var j=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name="RecentSearchesServiceError",this.message=t||Object(E.a)("Recent Searches Service is unavailable")};j.prototype=Error.prototype;var C=j,I=n(71);function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var P=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"issuable-recent-searches";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.localStorageKey=t}var t,n,r;return t=e,r=[{key:"isAvailable",value:function(){return I.a.isLocalStorageAccessSafe()}}],(n=[{key:"fetch",value:function(){if(!e.isAvailable()){var t=new C;return Promise.reject(t)}var n=window.localStorage.getItem(this.localStorageKey),r=[];if(n&&n.length>0)try{r=JSON.parse(n)}catch(e){return Promise.reject(e)}return Promise.resolve(r)}},{key:"save",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.isAvailable()&&window.localStorage.setItem(this.localStorageKey,JSON.stringify(t))}}])&&L(t.prototype,n),r&&L(t,r),e}(),_=n(324),V=(n(28),n(50),n(58),n(38),n(90),n(184),{keydown:function(e){if(!this.destroyed){var t,n=e.detail.hook.list,r=n.data,o=e.detail.hook.trigger.value.toLowerCase(),i=e.detail.hook.config.Filter,a=[];r&&(t=i&&i.filterFunction&&"function"==typeof i.filterFunction?i.filterFunction:function(e){return e.droplab_hidden=-1===e[i.template].toLowerCase().indexOf(o),e},r.filter((function(e){return!e.droplab_hidden})).length!==(a=r.map((function(e){return t(e,o)}))).filter((function(e){return!e.droplab_hidden})).length&&(n.setData(a),n.currentIndex=0))}},debounceKeydown:function(e){[13,16,17,18,20,37,38,39,40,91,92,93].indexOf(e.detail.which||e.detail.keyCode)>-1||(this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(this.keydown.bind(this,e),200))},init:function(e){var t=e.config.Filter;t&&t.template&&(this.hook=e,this.destroyed=!1,this.eventWrapper={},this.eventWrapper.debounceKeydown=this.debounceKeydown.bind(this),this.hook.trigger.addEventListener("keydown.dl",this.eventWrapper.debounceKeydown),this.hook.trigger.addEventListener("mousedown.dl",this.eventWrapper.debounceKeydown))},destroy:function(){this.timeout&&clearTimeout(this.timeout),this.destroyed=!0,this.hook.trigger.removeEventListener("keydown.dl",this.eventWrapper.debounceKeydown),this.hook.trigger.removeEventListener("mousedown.dl",this.eventWrapper.debounceKeydown)}}),K=(n(374),n(258),n(145),n(495),n(42),n(72),n(93)),q=n.n(K),D=["author","assignee"],A="hint",x="operator",R=n(200),W=n(543);function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var N=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tokenValue=t,this.tokenType=n,this.tokenOperator=r}var t,r,o;return t=e,o=[{key:"replaceEpicTitle",value:function(e,t,n){var r=e,o=r.querySelector(".value");o&&(r.dataset.originalValue=o.innerText,o.innerText='"'.concat(t,'"::&').concat(n))}},{key:"setTokenStyle",value:function(e,t,n){var r=e;return r.style.backgroundColor=t,r.style.color=n,"#FFFFFF"===n&&r.querySelector(".remove-token").classList.add("inverted"),r}}],(r=[{key:"render",value:function(e,t){var n=this.tokenType,r=this.tokenValue;["none","any"].includes(r.toLowerCase())||("label"===n?this.updateLabelTokenColor(e):D.includes(n)?this.updateUserTokenAppearance(e,t):"my-reaction"===n?this.updateEmojiTokenAppearance(e,t):"epic"===n&&this.updateEpicLabel(e,t))}},{key:"updateUserTokenAppearance",value:function(e,t){var n=this.tokenValue,r=this.tokenValue.replace(/^@/,"");return W.a.retrieve(r).then((function(r){r&&(e.dataset.originalValue=n,t.innerHTML='\n          <img class="avatar s20" src="'.concat(r.avatar_url,'" alt="">\n          ').concat(q()(r.name),"\n        "))})).catch((function(){}))}},{key:"updateLabelTokenColor",value:function(t){var n=this.tokenValue,r=u.a.container.querySelector(".filtered-search"),o=r.dataset.labelsEndpoint,i=z.getEndpointWithQueryParams("".concat(o,".json"),r.dataset.endpointQueryParams);return R.a.retrieve(i).then((function(r){var o=(r||[]).find((function(e){return"~".concat($.getEscapedText(e.title))===n}));o&&e.setTokenStyle(t,o.color,o.text_color)})).catch((function(){return new l.a(Object(E.a)("An error occurred while fetching label colors."))}))}},{key:"updateEpicLabel",value:function(t){var n=this.tokenValue.replace(/^&/,""),r=u.a.container.querySelector(".filtered-search"),o=r.dataset.epicsEndpoint,i=z.getEndpointWithQueryParams("".concat(o,".json"),r.dataset.endpointQueryParams);return R.a.retrieve(i).then((function(r){var o=(r||[]).find((function(e){return e.id===Number(n)}));o&&e.replaceEpicTitle(t,o.title,o.id)})).catch((function(){return new l.a(Object(E.a)("An error occurred while adding formatted title for epic"))}))}},{key:"updateEmojiTokenAppearance",value:function(e,t){var r=e,o=t,i=this.tokenValue;return Promise.resolve().then(n.bind(null,447)).then((function(e){e.isEmojiNameValid(i)&&(r.dataset.originalValue=i,o.innerHTML=e.glEmojiTag(i))})).catch((function(){}))}}])&&F(t.prototype,r),o&&F(t,o),e}();function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var M,H,G,z=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getOperatorToken",value:function(t){var n=null;return e.permissibleOperatorValues.forEach((function(e){t.startsWith(e)&&(n=e)})),n}},{key:"getValueToken",value:function(t){var n=t;return e.permissibleOperatorValues.forEach((function(e){t.startsWith(e)&&(n=t.slice(e.length))})),n}},{key:"getLastVisualTokenBeforeInput",value:function(){var e=u.a.container.querySelector(".input-token"),t=e&&e.previousElementSibling;return{lastVisualToken:t,isLastVisualTokenValid:null===t||-1!==t.className.indexOf("filtered-search-term")||t&&null!==t.querySelector(".operator")&&null!==t.querySelector(".value")}}},{key:"unselectTokens",value:function(){var e=u.a.container.querySelectorAll(".js-visual-token .selectable.selected");[].forEach.call(e,(function(e){return e.classList.remove("selected")}))}},{key:"selectToken",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.classList.contains("selected");e.unselectTokens(),r&&!n||t.classList.add("selected")}},{key:"removeSelectedToken",value:function(){var e=u.a.container.querySelector(".js-visual-token .selected");if(e){var t=e.closest(".js-visual-token");t.parentElement.removeChild(t)}}},{key:"createVisualTokenElementHTML",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.canEdit,n=void 0===t||t,r=e.hasOperator,o=void 0!==r&&r,i=e.uppercaseTokenName,a=void 0!==i&&i,s=e.capitalizeTokenValue,c=void 0!==s&&s;return'\n      <div class="'.concat(n?"selectable":"hidden",'" role="button">\n        <div class="').concat(a?"text-uppercase":"",' name"></div>\n        ').concat(o?'<div class="operator"></div>':"",'\n        <div class="value-container">\n          <div class="').concat(c?"text-capitalize":"",' value"></div>\n          <div class="remove-token" role="button">\n            <i class="fa fa-close"></i>\n          </div>\n        </div>\n      </div>\n    ')}},{key:"renderVisualTokenValue",value:function(e,t,n,r){var o=t.toLowerCase(),i=e.querySelector(".value-container"),a=i.querySelector(".value");a.innerText=n,new N(n,o,r).render(i,a)}},{key:"addVisualTokenElement",value:function(t){var n=t.name,r=t.operator,o=t.value,i=t.options,a=void 0===i?{}:i,s=a.isSearchTerm,c=void 0!==s&&s,l=a.canEdit,p=a.uppercaseTokenName,d=a.capitalizeTokenValue,h=a.tokenClass,f=void 0===h?"search-token-".concat(n.toLowerCase()):h,v=document.createElement("li");v.classList.add("js-visual-token"),v.classList.add(c?"filtered-search-term":"filtered-search-token"),c||v.classList.add(f);var y=Boolean(r);if(o)v.innerHTML=e.createVisualTokenElementHTML({canEdit:l,uppercaseTokenName:p,operator:r,hasOperator:y,capitalizeTokenValue:d}),e.renderVisualTokenValue(v,n,o,r);else{var k='<div class="'.concat(p?"text-uppercase":"",' name"></div>'),m="";y&&(m='<div class="operator"></div>'),v.innerHTML=k+m}v.querySelector(".name").innerText=n,y&&(v.querySelector(".operator").innerText=r);var g=u.a.container.querySelector(".tokens-container"),b=u.a.container.querySelector(".filtered-search");g.insertBefore(v,b.parentElement)}},{key:"addValueToPreviousVisualTokenElement",value:function(t){var n=e.getLastVisualTokenBeforeInput(),r=n.lastVisualToken;if(!n.isLastVisualTokenValid&&r.classList.contains("filtered-search-token")){var o=e.getLastTokenPartial(),i=e.getLastTokenOperator();r.innerHTML=e.createVisualTokenElementHTML({hasOperator:Boolean(i)}),r.querySelector(".name").innerText=o,r.querySelector(".operator").innerText=i,e.renderVisualTokenValue(r,o,t,i)}}},{key:"addFilterVisualToken",value:function(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=o.canEdit,a=o.uppercaseTokenName,s=void 0!==a&&a,c=o.capitalizeTokenValue,l=void 0!==c&&c,p=e.getLastVisualTokenBeforeInput(),d=p.lastVisualToken,h=p.isLastVisualTokenValid,f=e.addVisualTokenElement;if(h)f({name:t,operator:n,value:r,options:{canEdit:i,uppercaseTokenName:s,capitalizeTokenValue:l}});else if(h||!d||d.querySelector(".operator")){var v=d.querySelector(".name").innerText,y=d.querySelector(".operator").innerText,k=u.a.container.querySelector(".tokens-container");k.removeChild(d);var m=r;m||n||(m=t),f({name:v,operator:y,value:m,options:{canEdit:i,uppercaseTokenName:s,capitalizeTokenValue:l}})}else{var g=u.a.container.querySelector(".tokens-container");g.removeChild(d),f({name:t,operator:n,value:r,options:{canEdit:i,uppercaseTokenName:s,capitalizeTokenValue:l}})}}},{key:"addSearchVisualToken",value:function(t){var n=e.getLastVisualTokenBeforeInput().lastVisualToken;n&&n.classList.contains("filtered-search-term")?n.querySelector(".name").innerText+=" ".concat(t):e.addVisualTokenElement({name:t,operator:null,value:null,options:{isSearchTerm:!0}})}},{key:"getLastTokenPartial",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=e.getLastVisualTokenBeforeInput(),r=n.lastVisualToken;if(!r)return"";var o=r.querySelector(".value-container"),i=o&&o.dataset.originalValue;if(i)return i;var a=r.querySelector(".value"),s=r.querySelector(".name"),c=a?a.innerText:"",l=s?s.innerText:"";if(t){var u=r.querySelector(".operator"),p=u?u.innerText:"";return c||p||l}return c||l}},{key:"getLastTokenOperator",value:function(){var t=e.getLastVisualTokenBeforeInput().lastVisualToken,n=t&&t.querySelector(".operator");return null==n?void 0:n.innerText}},{key:"removeLastTokenPartial",value:function(){var t=e.getLastVisualTokenBeforeInput().lastVisualToken;if(t){var n=t.querySelector(".value"),r=t.querySelector(".operator");if(n){var o=t.querySelector(".selectable"),i=t.querySelector(".value-container");o.removeChild(i),t.innerHTML=o.innerHTML}else r?t.removeChild(r):t.closest(".tokens-container").removeChild(t)}}},{key:"tokenizeInput",value:function(){var t=u.a.container.querySelector(".filtered-search"),n=e.getLastVisualTokenBeforeInput().isLastVisualTokenValid;t.value&&(n?e.addSearchVisualToken(t.value):e.addValueToPreviousVisualTokenElement(t.value),t.value="")}},{key:"getEndpointWithQueryParams",value:function(e,t){if(!t)return e;var n=Object(a.E)(JSON.parse(t));return"".concat(e,"?").concat(n)}},{key:"editToken",value:function(t){var n=u.a.container.querySelector(".filtered-search");e.tokenizeInput();var r=t.parentElement,o=n.parentElement;r.replaceChild(o,t);var i,a=t.querySelector(".name"),s=t.querySelector(".operator");if(t.classList.contains("filtered-search-token")){e.addFilterVisualToken(a.innerText,s.innerText,null,{uppercaseTokenName:a.classList.contains("text-uppercase")});var c=t.querySelector(".value-container");(i=c.dataset.originalValue)||(i=c.querySelector(".value").innerText)}i||(i=a.innerText),n.value=i;var l=new Event("input");n.dispatchEvent(l),n.focus()}},{key:"moveInputToTheRight",value:function(){var t=u.a.container.querySelector(".filtered-search");if(t){var n=t.parentElement,r=u.a.container.querySelector(".tokens-container");if(e.tokenizeInput(),!r.lastElementChild.isEqualNode(n)){if(!e.getLastVisualTokenBeforeInput().isLastVisualTokenValid){var o=e.getLastTokenPartial();e.removeLastTokenPartial(),e.addSearchVisualToken(o)}r.removeChild(n),r.appendChild(n)}}}}],(n=null)&&B(t.prototype,n),r&&B(t,r),e}();function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}G=["=","!="],(H="permissibleOperatorValues")in(M=z)?Object.defineProperty(M,H,{value:G,enumerable:!0,configurable:!0,writable:!0}):M[H]=G;var $=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getEscapedText",value:function(e){var t=e,n=-1!==e.indexOf(" "),r=-1!==e.indexOf('"');return n&&(t=r?"'".concat(e,"'"):'"'.concat(e,'"')),t}},{key:"filterWithSymbol",value:function(t,n,r){var o=r,i=e.getSearchInput(n),a=o.title.toLowerCase(),s=i.toLowerCase(),c="";s[0]===t&&(c=U(s,1)[0],s=s.slice(1)),'"'!==s[0]&&"'"!==s[0]||-1===a.indexOf(" ")||(s=s.slice(1));var l=c===t&&-1!==a.indexOf(s),u=-1!==a.indexOf("".concat(c).concat(s));return o.droplab_hidden=!u&&!l,o}},{key:"filterHint",value:function(t,n){var r=t.input,i=t.allowedKeys,a=n,s=e.getSearchQuery(r),c=v.processTokens(s,i),l=c.lastToken,u=c.tokens,p=l.key||l||"",d="array"===n.type,h=u.some((function(e){return e.key===n.hint})),f="search"===a.hint;if(f&&(a.droplab_hidden=!0),!d&&h)a.droplab_hidden=!0;else if(f||p&&" "!==o()(s.split(""))){if(p){var y=p.split(":"),k=o()(y[0].split(" ")),m=f?i.some((function(e){return e.startsWith(k.toLowerCase())})):-1===a.hint.indexOf(k.toLowerCase());a.droplab_hidden=!!k&&m}}else a.droplab_hidden=!1;return a}},{key:"setDataValueIfSelected",value:function(e,t,n){var r=n.getAttribute("data-value");return r&&st.addWordToInput({tokenName:e,tokenOperator:t,tokenValue:r,clicked:!0,options:{capitalizeTokenValue:n.hasAttribute("data-capitalize")}}),null!==r}},{key:"getVisualTokenValues",value:function(e){var t=e&&e.querySelector(".name").textContent.trim(),n=e&&e.querySelector(".value")&&e.querySelector(".value").textContent.trim();"label"===t&&n&&(n=n.replace(/^~("|')?(.*)/,"$2").replace(/("|')$/,""));var r=e&&e.querySelector(".operator");return{tokenName:t,tokenOperator:r&&r.textContent.trim(),tokenValue:n}}},{key:"getSearchQuery",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=u.a.container,n=[].slice.call(t.querySelectorAll(".tokens-container li")),r=[];if(e){var o=n.findIndex((function(e){return e.classList.contains("input-token")}));n.splice(o+1)}return n.forEach((function(e){if(e.classList.contains("js-visual-token")){var t=e.querySelector(".name"),n=e.querySelector(".operator"),o=e.querySelector(".value"),i=e.querySelector(".value-container"),a=o&&o.dataset.symbol?o.dataset.symbol:"",s="",c="";n&&(c=n.textContent.trim()),i&&i.dataset.originalValue?s=i.dataset.originalValue:o&&o.innerText&&(s=o.innerText),-1!==e.className.indexOf("filtered-search-token")?r.push("".concat(t.innerText.toLowerCase(),":").concat(c).concat(a).concat(s)):r.push(t.innerText)}else if(e.classList.contains("input-token")){var l=z.getLastVisualTokenBeforeInput().isLastVisualTokenValid,p=u.a.container.querySelector(".filtered-search"),d=p&&p.value;if(l)r.push(d);else{var h=r.pop();r.push("".concat(h).concat(d))}}})),r.map((function(e){return e.trim()})).join(" ")}},{key:"getSearchInput",value:function(t){var n=t.value,r=e.getInputSelectionPosition(t).right;return n.slice(0,r)}},{key:"getInputSelectionPosition",value:function(e){var t=e.selectionStart,n=e.value,r=(n=n.replace(/(('[^']*'{0,1})|("[^"]*"{0,1})|:\s+)/g,(function(e){return e.replace(/\s/g,"_")}))).slice(t).search(/\s/);r>=0?r+=t:r<0&&(r=n.length);var o=n.slice(0,r).search(/\S+$/);return 0===t?o=0:t===n.length&&o<0?o=n.length:o<0&&(o=t),{left:o,right:r}}}],(n=null)&&Q(t.prototype,n),r&&Q(t,r),e}();function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Y=function(){function e(t){var n=t.droplab,r=t.dropdown,o=t.input,i=t.filter;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.droplab=n,this.hookId=o&&o.id,this.input=o,this.filter=i,this.dropdown=r,this.loadingTemplate='<div class="filter-dropdown-loading">\n      <span class="spinner"></span>\n    </div>',this.bindEvents()}var t,n,r;return t=e,(n=[{key:"bindEvents",value:function(){this.itemClickedWrapper=this.itemClicked.bind(this),this.dropdown.addEventListener("click.dl",this.itemClickedWrapper)}},{key:"unbindEvents",value:function(){this.dropdown.removeEventListener("click.dl",this.itemClickedWrapper)}},{key:"getCurrentHook",value:function(){var e=this;return this.droplab.hooks.filter((function(t){return t.id===e.hookId}))[0]||null}},{key:"itemClicked",value:function(e,t){var n=e.detail.selected;if("LI"===n.tagName&&n.innerHTML){var r=z.getLastVisualTokenBeforeInput().lastVisualToken,o=$.getVisualTokenValues(r).tokenOperator;if(!$.setDataValueIfSelected(this.filter,o,n)){var i=t(n);st.addWordToInput({tokenName:this.filter,tokenOperator:o,tokenValue:i,clicked:!0})}this.resetFilters(),this.dismissDropdown(),this.dispatchInputEvent()}}},{key:"setAsDropdown",value:function(){this.input.setAttribute("data-dropdown-trigger","#".concat(this.dropdown.id))}},{key:"setOffset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;window.innerWidth>480?this.dropdown.style.left="".concat(e,"px"):this.dropdown.style.left="0px"}},{key:"renderContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.getCurrentHook();e&&t&&t.list.hidden&&t.list.show()}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.setAsDropdown();var n=this.getCurrentHook(),r=null===n;r||e?this.renderContent(t):n.list.list.id!==this.dropdown.id&&this.renderContent(t)}},{key:"dismissDropdown",value:function(){this.input.focus()}},{key:"dispatchInputEvent",value:function(){this.input.dispatchEvent(new CustomEvent("input",{bubbles:!0,cancelable:!0}))}},{key:"dispatchFormSubmitEvent",value:function(){this.input.form.dispatchEvent(new Event("submit"))}},{key:"hideDropdown",value:function(){var e=this.getCurrentHook();e&&e.list.hide()}},{key:"resetFilters",value:function(){var e=this.getCurrentHook();if(e){var t=e.list.data||[];if(!t)return;var n=t.map((function(e){var t=e;return t.droplab_hidden=!1,t}));e.list.render(n)}}}])&&J(t.prototype,n),r&&J(t,r),e}();function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ee(e,t){return!t||"object"!==X(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function te(e,t,n){return(te="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ne(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var oe=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=n.input,o=n.tokenKeys;return(e=ee(this,ne(t).call(this,n))).config={Filter:{template:"hint",filterFunction:$.filterHint.bind(null,{input:r,allowedKeys:o.getKeys()})}},e.tokenKeys=o,e}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}(t,e),n=t,(r=[{key:"itemClicked",value:function(e){var t=e.detail.selected;if("LI"===t.tagName)if(t.hasAttribute("data-value"))this.dismissDropdown();else if("submit"===t.getAttribute("data-action"))this.dismissDropdown(),this.dispatchFormSubmitEvent();else{var n=t.closest(".filter-dropdown-item").dataset,r=n.hint;if(n.tag.length){var o=this.input.value.split(" "),i=[];o.forEach((function(e,t){i.push(e),t===o.length-1&&-1!==r.indexOf(e.toLowerCase())&&i.pop()})),i.length>0&&z.addSearchVisualToken(i.join(" "));var a=r.replace(":",""),s=this.tokenKeys.searchByKey(a).uppercaseTokenName;st.addWordToInput({tokenName:a,clicked:!1,options:{uppercaseTokenName:s}})}this.dismissDropdown(),this.dispatchInputEvent()}}},{key:"renderContent",value:function(){var e=[{hint:"search",tag:"search",formattedKey:Object(E.a)("Search for this text"),icon:"".concat(gon.sprite_icons,"#search")}],n=this.tokenKeys.get().map((function(e){return{icon:"".concat(gon.sprite_icons,"#").concat(e.icon),hint:e.key,tag:":".concat(e.tag),type:e.type,formattedKey:e.formattedKey}})).concat(e);this.droplab.changeHookList(this.hookId,this.dropdown,[V],this.config),this.droplab.setData(this.hookId,n),te(ne(t.prototype),"renderContent",this).call(this)}},{key:"init",value:function(){this.droplab.addHook(this.input,this.dropdown,[V],this.config).init()}}])&&Z(n.prototype,r),o&&Z(n,o),t}(Y),ie={init:function(e){this.destroyed=!1,this.hook=e,this.notLoading(),this.eventWrapper={},this.eventWrapper.debounceTrigger=this.debounceTrigger.bind(this),this.hook.trigger.addEventListener("keydown.dl",this.eventWrapper.debounceTrigger),this.hook.trigger.addEventListener("focus",this.eventWrapper.debounceTrigger),this.trigger(!0)},notLoading:function(){this.loading=!1},debounceTrigger:function(e){var t=[16,17,18,20,37,38,39,40,91,93].indexOf(e.detail.which||e.detail.keyCode)>-1,n="focus"===e.type;t||this.loading||(this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(this.trigger.bind(this,n),200))},trigger:function(e){var t=this,n=this.hook.config.AjaxFilter,r=this.trigger.value;if(n&&n.endpoint&&n.searchKey){if(n.searchValueFunction&&(r=n.searchValueFunction()),n.loadingTemplate&&void 0===this.hook.list.data||0===this.hook.list.data.length){var o=this.hook.list.list.querySelector("[data-dynamic]"),i=document.createElement("div");i.innerHTML=n.loadingTemplate,i.setAttribute("data-loading-template",!0),this.listTemplate=o.outerHTML,o.outerHTML=i.outerHTML}if(e&&(r=""),n.searchKey===r)return this.list.show();this.loading=!0;var a=n.params||{};a[n.searchKey]=r;var s=n.endpoint+this.buildParams(a);return R.a.retrieve(s).then((function(e){t._loadData(e,n),n.onLoadingFinished&&n.onLoadingFinished(e)})).catch(n.onError)}},_loadData:function(e,t){var n=this.hook.list;if(t.loadingTemplate&&void 0===n.data||0===n.data.length){var r=n.list.querySelector("[data-loading-template]");r&&(r.outerHTML=this.listTemplate)}if(!this.destroyed){var o=n.list.children;1===o.length&&o[0].hasAttribute("data-dynamic")&&0===e.length&&n.hide(),n.setData.call(n,e)}this.notLoading(),n.currentIndex=0},buildParams:function(e){return e?"?"+Object.keys(e).map((function(t){return t+"="+(e[t]||"")})).join("&"):""},destroy:function(){this.timeout&&clearTimeout(this.timeout),this.destroyed=!0,this.hook.trigger.removeEventListener("keydown.dl",this.eventWrapper.debounceTrigger),this.hook.trigger.removeEventListener("focus",this.eventWrapper.debounceTrigger)}};function ae(e){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ce(e,t){return!t||"object"!==ae(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function le(e,t,n){return(le="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ue(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ue(e){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pe(e,t){return(pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var de=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=n.tokenKeys,o=n.endpoint,i=n.symbol;return(e=ce(this,ue(t).call(this,n))).tokenKeys=r,e.endpoint=o,e.symbol=i,e.config={AjaxFilter:e.ajaxFilterConfig()},e}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pe(e,t)}(t,e),n=t,(r=[{key:"ajaxFilterConfig",value:function(){return{endpoint:"".concat(gon.relative_url_root||"").concat(this.endpoint),searchKey:"search",searchValueFunction:this.getSearchInput.bind(this),loadingTemplate:this.loadingTemplate,onError:function(){Object(l.a)(Object(E.a)("An error occurred fetching the dropdown data."))}}}},{key:"itemClicked",value:function(e){le(ue(t.prototype),"itemClicked",this).call(this,e,(function(e){return e.querySelector(".dropdown-light-content").innerText.trim()}))}},{key:"renderContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.droplab.changeHookList(this.hookId,this.dropdown,[ie],this.config),le(ue(t.prototype),"renderContent",this).call(this,e)}},{key:"getSearchInput",value:function(){var e=$.getSearchInput(this.input),t=v.processTokens(e,this.tokenKeys.getKeys()).lastToken||"";return t[0]===this.symbol&&(t=t.slice(1)),'"'!==t[0]&&"'"!==t[0]||(t=t.slice(1)),t}},{key:"init",value:function(){this.droplab.addHook(this.input,this.dropdown,[ie],this.config).init()}}])&&se(n.prototype,r),o&&se(n,o),t}(Y);function he(e){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){ye(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function me(e,t){return!t||"object"!==he(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ge(e,t,n){return(ge="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=be(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Se(e,t){return(Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Te=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),me(this,be(t).call(this,ve({},e,{endpoint:"/autocomplete/users.json",symbol:"@"})))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Se(e,t)}(t,e),n=t,(r=[{key:"ajaxFilterConfig",value:function(){var e=this;return ve({},ge(be(t.prototype),"ajaxFilterConfig",this).call(this),{params:ve({active:!0,group_id:this.getGroupId(),project_id:this.getProjectId(),current_user:!0},this.projectOrGroupId()),onLoadingFinished:function(){e.hideCurrentUser()}})}},{key:"hideCurrentUser",value:function(){Object(_.a)(this.dropdown.querySelector(".js-current-user"),"hidden")}},{key:"getGroupId",value:function(){return this.input.getAttribute("data-group-id")}},{key:"getProjectId",value:function(){return this.input.getAttribute("data-project-id")}},{key:"projectOrGroupId",value:function(){var e=this.getProjectId(),t=this.getGroupId();return t?{group_id:t}:{project_id:e}}}])&&ke(n.prototype,r),o&&ke(n,o),t}(de),we={_loadData:function(e,t,n){if(t.loadingTemplate){var r=n.hook.list.list.querySelector("[data-loading-template]");r&&(r.outerHTML=n.listTemplate)}n.destroyed||n.hook.list[t.method].call(n.hook.list,e)},preprocessing:function(e,t){var n=t;return e.preprocessing&&!t.preprocessed&&(n=e.preprocessing(t),R.a.override(e.endpoint,n)),n},init:function(e){var t=this;t.destroyed=!1;var n=e.config.Ajax;if(this.hook=e,n&&n.endpoint&&n.method&&("setData"===n.method||"addData"===n.method)){if(n.loadingTemplate){var r=e.list.list.querySelector("[data-dynamic]"),o=document.createElement("div");o.innerHTML=n.loadingTemplate,o.setAttribute("data-loading-template",""),this.listTemplate=r.outerHTML,r.outerHTML=o.outerHTML}return R.a.retrieve(n.endpoint).then(t.preprocessing.bind(null,n)).then((function(e){return t._loadData(e,n,t)})).catch(n.onError)}},destroy:function(){this.destroyed=!0}};function Oe(e){return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function je(e,t){return!t||"object"!==Oe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ce(e,t,n){return(Ce="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ie(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Ie(e){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Le(e,t){return(Le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Pe=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=n.input,o=n.endpoint,i=n.symbol,a=n.preprocessing;return(e=je(this,Ie(t).call(this,n))).symbol=i,e.config={Ajax:{endpoint:o,method:"setData",loadingTemplate:e.loadingTemplate,preprocessing:a,onError:function(){new l.a(Object(E.a)("An error occurred fetching the dropdown data."))}},Filter:{filterFunction:$.filterWithSymbol.bind(null,e.symbol,r),template:"title"}},e}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Le(e,t)}(t,e),n=t,(r=[{key:"itemClicked",value:function(e){var n=this;Ce(Ie(t.prototype),"itemClicked",this).call(this,e,(function(e){var t=e.querySelector(".js-data-value").innerText.trim();return"".concat(n.symbol).concat($.getEscapedText(t))}))}},{key:"renderContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.droplab.changeHookList(this.hookId,this.dropdown,[we,V],this.config),Ce(Ie(t.prototype),"renderContent",this).call(this,e)}},{key:"init",value:function(){this.droplab.addHook(this.input,this.dropdown,[we,V],this.config).init()}}])&&Ee(n.prototype,r),o&&Ee(n,o),t}(Y);n(78);function _e(e){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ve(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qe(e,t){return!t||"object"!==_e(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function De(e,t,n){return(De="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ae(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Ae(e){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xe(e,t){return(xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Re=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=qe(this,Ae(t).call(this,r))).config={Ajax:{endpoint:"".concat(gon.relative_url_root||"","/autocomplete/award_emojis"),method:"setData",loadingTemplate:e.loadingTemplate,onError:function(){new l.a(Object(E.a)("An error occurred fetching the dropdown data."))}},Filter:{template:"name"}},Promise.resolve().then(n.bind(null,447)).then((function(t){var n=t.glEmojiTag;e.glEmojiTag=n})).catch((function(){})),e.unbindEvents(),e.bindEvents(),e}var r,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xe(e,t)}(t,e),r=t,(o=[{key:"bindEvents",value:function(){De(Ae(t.prototype),"bindEvents",this).call(this),this.listRenderedWrapper=this.listRendered.bind(this),this.dropdown.addEventListener("render.dl",this.listRenderedWrapper)}},{key:"unbindEvents",value:function(){this.dropdown.removeEventListener("render.dl",this.listRenderedWrapper),De(Ae(t.prototype),"unbindEvents",this).call(this)}},{key:"listRendered",value:function(){this.replaceEmojiElement()}},{key:"itemClicked",value:function(e){De(Ae(t.prototype),"itemClicked",this).call(this,e,(function(e){var t=e.querySelector(".js-data-value").innerText.trim();return $.getEscapedText(t)}))}},{key:"renderContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.droplab.changeHookList(this.hookId,this.dropdown,[we,V],this.config),De(Ae(t.prototype),"renderContent",this).call(this,e)}},{key:"replaceEmojiElement",value:function(){var e=this;this.glEmojiTag&&Ve(this.dropdown.querySelectorAll(".filter-dropdown-item")).forEach((function(t){var n=t.querySelector(".js-data-value");if(null!==n){var r=n.innerText,o=e.glEmojiTag(r);t.querySelector("gl-emoji").outerHTML=o}}))}},{key:"init",value:function(){this.droplab.addHook(this.input,this.dropdown,[we,V],this.config).init()}}])&&Ke(r.prototype,o),i&&Ke(r,i),t}(Y);function We(e){return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ne(e,t){return!t||"object"!==We(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Be(e,t,n){return(Be="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Me(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Me(e){return(Me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function He(e,t){return(He=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ge=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ne(this,Me(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&He(e,t)}(t,e),n=t,(r=[{key:"renderContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.droplab.changeHookList(this.hookId,this.dropdown,[],this.config),Be(Me(t.prototype),"renderContent",this).call(this,e)}}])&&Fe(n.prototype,r),o&&Fe(n,o),t}(Y);function ze(e){return(ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qe(e,t){return!t||"object"!==ze(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $e(e,t,n){return($e="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Je(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Je(e){return(Je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ye(e,t){return(Ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Xe=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=n.input,o=n.tokenKeys;return(e=Qe(this,Je(t).call(this,n))).config={Filter:{filterFunction:$.filterWithSymbol.bind(null,"",r),template:"title"}},e.tokenKeys=o,e}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ye(e,t)}(t,e),n=t,(r=[{key:"itemClicked",value:function(e){var t=e.detail.selected;if("LI"===t.tagName&&t.hasAttribute("data-value")){var n=t.dataset.value;z.removeLastTokenPartial(),st.addWordToInput({tokenName:this.filter,tokenOperator:n,clicked:!1})}this.dismissDropdown(),this.dispatchInputEvent()}},{key:"renderContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.filter=z.getLastTokenPartial();var n=[{tag:"equal",type:"string",title:"=",help:Object(E.a)("is")},{tag:"not-equal",type:"string",title:"!=",help:Object(E.a)("is not")}];this.droplab.changeHookList(this.hookId,this.dropdown,[V],this.config),this.droplab.setData(this.hookId,n),$e(Je(t.prototype),"renderContent",this).call(this,e)}},{key:"init",value:function(){this.droplab.addHook(this.input,this.dropdown,[V],this.config).init()}}])&&Ue(n.prototype,r),o&&Ue(n,o),t}(Y);function Ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function et(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var nt=function(){function e(t){var n=t.container,r=t.runnerTagsEndpoint,o=t.labelsEndpoint,i=t.milestonesEndpoint,a=t.releasesEndpoint,s=t.groupsOnly,c=t.includeAncestorGroups,l=t.includeDescendantGroups;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=n,this.runnerTagsEndpoint=r,this.labelsEndpoint=o,this.milestonesEndpoint=i,this.releasesEndpoint=a,this.groupsOnly=s,this.includeAncestorGroups=c,this.includeDescendantGroups=l,this.filteredSearchInput=this.container.querySelector(".filtered-search")}var t,n,r;return t=e,(n=[{key:"getAllowedMappings",value:function(e){return this.buildMappings(e,this.getMappings())}},{key:"buildMappings",value:function(e,t){var n={hint:{reference:null,gl:oe,element:this.container.querySelector("#js-dropdown-hint")},operator:{reference:null,gl:Xe,element:this.container.querySelector("#js-dropdown-operator")}};return e.forEach((function(e){t[e]&&(n[e]=t[e])})),n}},{key:"getMappings",value:function(){return{author:{reference:null,gl:Te,element:this.container.querySelector("#js-dropdown-author")},assignee:{reference:null,gl:Te,element:this.container.querySelector("#js-dropdown-assignee")},milestone:{reference:null,gl:Pe,extraArguments:{endpoint:this.getMilestoneEndpoint(),symbol:"%"},element:this.container.querySelector("#js-dropdown-milestone")},release:{reference:null,gl:Pe,extraArguments:{endpoint:this.getReleasesEndpoint(),symbol:"",preprocessing:function(e){return e.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(n),!0).forEach((function(t){et(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{title:e.tag})}))}},element:this.container.querySelector("#js-dropdown-release")},label:{reference:null,gl:Pe,extraArguments:{endpoint:this.getLabelsEndpoint(),symbol:"~",preprocessing:$.duplicateLabelPreprocessing},element:this.container.querySelector("#js-dropdown-label")},"my-reaction":{reference:null,gl:Re,element:this.container.querySelector("#js-dropdown-my-reaction")},wip:{reference:null,gl:Pe,element:this.container.querySelector("#js-dropdown-wip")},confidential:{reference:null,gl:Pe,element:this.container.querySelector("#js-dropdown-confidential")},status:{reference:null,gl:Ge,element:this.container.querySelector("#js-dropdown-admin-runner-status")},type:{reference:null,gl:Ge,element:this.container.querySelector("#js-dropdown-admin-runner-type")},tag:{reference:null,gl:de,extraArguments:{endpoint:this.getRunnerTagsEndpoint(),symbol:"~"},element:this.container.querySelector("#js-dropdown-runner-tag")},"target-branch":{reference:null,gl:Pe,extraArguments:{endpoint:this.getMergeRequestTargetBranchesEndpoint(),symbol:""},element:this.container.querySelector("#js-dropdown-target-branch")}}}},{key:"getMilestoneEndpoint",value:function(){return"".concat(this.milestonesEndpoint,".json")}},{key:"getReleasesEndpoint",value:function(){return"".concat(this.releasesEndpoint,".json")}},{key:"getLabelsEndpoint",value:function(){var e="".concat(this.labelsEndpoint,".json?");return this.groupsOnly&&(e="".concat(e,"only_group_labels=true&")),this.includeAncestorGroups&&(e="".concat(e,"include_ancestor_groups=true&")),this.includeDescendantGroups&&(e="".concat(e,"include_descendant_groups=true")),e}},{key:"getRunnerTagsEndpoint",value:function(){return"".concat(this.runnerTagsEndpoint,".json")}},{key:"getMergeRequestTargetBranchesEndpoint",value:function(){var e="".concat(gon.relative_url_root||"","/autocomplete/merge_request_target_branches.json"),t={group_id:this.getGroupId(),project_id:this.getProjectId()};return Object(c.h)(t,e)}},{key:"getGroupId",value:function(){return this.filteredSearchInput.getAttribute("data-group-id")||""}},{key:"getProjectId",value:function(){return this.filteredSearchInput.getAttribute("data-project-id")||""}}])&&tt(t.prototype,n),r&&tt(t,r),e}(),rt=n(259);function ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function it(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function at(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var st=function(){function e(t){var n=t.runnerTagsEndpoint,r=void 0===n?"":n,o=t.labelsEndpoint,i=void 0===o?"":o,a=t.milestonesEndpoint,s=void 0===a?"":a,c=t.releasesEndpoint,l=void 0===c?"":c,p=t.epicsEndpoint,d=void 0===p?"":p,f=t.tokenizer,v=t.page,y=t.isGroup,k=t.isGroupAncestor,m=t.isGroupDecendent,g=t.filteredSearchTokenKeys;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var b=function(e){return e.replace(/\/$/,"")};this.container=u.a.container,this.runnerTagsEndpoint=b(r),this.labelsEndpoint=b(i),this.milestonesEndpoint=b(s),this.releasesEndpoint=b(l),this.epicsEndpoint=b(d),this.tokenizer=f,this.filteredSearchTokenKeys=g||h.a,this.filteredSearchInput=this.container.querySelector(".filtered-search"),this.page=v,this.groupsOnly=y,this.includeAncestorGroups=k,this.includeDescendantGroups=m,this.setupMapping(),this.cleanupWrapper=this.cleanup.bind(this),document.addEventListener("beforeunload",this.cleanupWrapper)}var t,n,r;return t=e,r=[{key:"addWordToInput",value:function(e){var t=e.tokenName,n=e.tokenOperator,r=void 0===n?"":n,o=e.tokenValue,i=void 0===o?"":o,a=e.clicked,s=void 0!==a&&a,c=e.options,l=void 0===c?{}:c,p=l.uppercaseTokenName,d=void 0!==p&&p,h=l.capitalizeTokenValue,f=void 0!==h&&h,v=u.a.container.querySelector(".filtered-search");z.addFilterVisualToken(t,r,i,{uppercaseTokenName:d,capitalizeTokenValue:f}),v.value="",s&&z.moveInputToTheRight()}}],(n=[{key:"cleanup",value:function(){this.droplab&&(this.droplab.destroy(),this.droplab=null),this.setupMapping(),document.removeEventListener("beforeunload",this.cleanupWrapper)}},{key:"setupMapping",value:function(){var e=this.filteredSearchTokenKeys.getKeys(),t=new nt(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ot(Object(n),!0).forEach((function(t){it(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this));this.mapping=t.getAllowedMappings(e)}},{key:"updateCurrentDropdownOffset",value:function(){this.updateDropdownOffset(this.currentDropdown)}},{key:"updateDropdownOffset",value:function(e){var t=this.filteredSearchInput.getBoundingClientRect().left-this.container.querySelector(".scroll-container").getBoundingClientRect().left,n=this.mapping[e].element.clientWidth||240,r=this.container.querySelector(".scroll-container").clientWidth-n;r<t&&(t=r),this.mapping[e].reference.setOffset(t)}},{key:"load",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.mapping[e],r=n.gl,o=n.element,i=!1;if(!n.reference){var a={droplab:this.droplab,dropdown:o,input:this.filteredSearchInput,tokenKeys:this.filteredSearchTokenKeys,filter:e},s=n.extraArguments||{},c=Object.assign({},a,s);n.reference=new(Function.prototype.bind.apply(r,[null,c]))}t&&n.reference.init(),this.currentDropdown!==A&&this.currentDropdown!==x||(i=!0),this.updateDropdownOffset(e),n.reference.render(t,i),this.currentDropdown=e}},{key:"loadDropdown",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=!1;if(this.droplab||(t=!0,this.droplab=new rt.a),e!==x){var n=this.filteredSearchTokenKeys.searchByKey(e.toLowerCase()),r=n&&this.currentDropdown!==n.key&&this.mapping[n.key],o=!n&&this.currentDropdown!==A;if(r||o){var i=n&&n.key?n.key:A;this.load(i,t)}}else this.load(e,t)}},{key:"setDropdown",value:function(){var e=$.getSearchQuery(!0),t=this.tokenizer.processTokens(e,this.filteredSearchTokenKeys.getKeys()),n=t.lastToken,r=t.searchToken;if(this.currentDropdown&&this.updateCurrentDropdownOffset(),n===r&&null!==n){var i=n.split(":"),a=o()(i[0].split(" ")),s=o()(i[1]),c=z.permissibleOperatorValues.includes(s&&s.trim()),l="";if(i.length>1){var u=z.getLastTokenOperator();l=c&&u?a:x}this.loadDropdown(l)}else if(n){var p=z.getLastTokenOperator();this.loadDropdown(p?n.key:x)}else this.loadDropdown(A)}},{key:"resetDropdowns",value:function(){this.currentDropdown&&(this.mapping[this.currentDropdown].reference.hideDropdown(),this.setDropdown(),this.mapping[this.currentDropdown].reference.resetFilters(),this.updateDropdownOffset(this.currentDropdown))}},{key:"destroyDroplab",value:function(){this.droplab.destroy()}}])&&at(t.prototype,n),r&&at(t,r),e}(),ct=n(355);function lt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var pt=function(){function e(t){var n=t.page,r=t.isGroup,o=void 0!==r&&r,a=t.isGroupAncestor,c=void 0===a||a,l=t.isGroupDecendent,p=void 0!==l&&l,d=t.filteredSearchTokenKeys,h=void 0===d?s.a:d,f=t.stateFiltersSelector,v=void 0===f?".issues-state-filters":f;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isGroup=o,this.isGroupAncestor=c,this.isGroupDecendent=p,this.states=["opened","closed","merged","all"],this.page=n,this.container=u.a.container,this.filteredSearchInput=this.container.querySelector(".filtered-search"),this.filteredSearchInputForm=this.filteredSearchInput.form,this.clearSearchButton=this.container.querySelector(".clear-search"),this.tokensContainer=this.container.querySelector(".tokens-container"),this.filteredSearchTokenKeys=h,this.stateFiltersSelector=v,this.filteredSearchInput.dataset.multipleAssignees&&this.filteredSearchTokenKeys.enableMultipleAssignees&&this.filteredSearchTokenKeys.enableMultipleAssignees(),!this.filteredSearchInput.dataset.epicsEndpoint&&this.filteredSearchTokenKeys.removeEpicToken&&this.filteredSearchTokenKeys.removeEpicToken(),this.recentSearchesStore=new O({isLocalStorageAvailable:P.isAvailable(),allowedKeys:this.filteredSearchTokenKeys.getKeys()}),this.searchHistoryDropdownElement=document.querySelector(".js-filtered-search-history-dropdown");var y=this.searchHistoryDropdownElement?this.searchHistoryDropdownElement.dataset.fullPath:"project",k="".concat(y,"-").concat(i[this.page]);this.recentSearchesService=new P(k)}var t,n,r;return t=e,(n=[{key:"setup",value:function(){var e=this;if(this.fetchingRecentSearchesPromise=this.recentSearchesService.fetch().catch((function(e){if("RecentSearchesServiceError"!==e.name)return new l.a(Object(E.a)("An error occurred while parsing recent searches")),[]})).then((function(t){if(t){var n=e.recentSearchesStore.setRecentSearches(e.recentSearchesStore.state.recentSearches.concat(t));e.recentSearchesService.save(n)}})),this.filteredSearchInput){this.tokenizer=v;var t=this.filteredSearchInput.dataset,n=t.runnerTagsEndpoint,r=void 0===n?"":n,o=t.labelsEndpoint,i=void 0===o?"":o,a=t.milestonesEndpoint,s=void 0===a?"":a,c=t.releasesEndpoint,u=void 0===c?"":c,p=t.epicsEndpoint,d=void 0===p?"":p;this.dropdownManager=new st({runnerTagsEndpoint:r,labelsEndpoint:i,milestonesEndpoint:s,releasesEndpoint:u,epicsEndpoint:d,tokenizer:this.tokenizer,page:this.page,isGroup:this.isGroup,isGroupAncestor:this.isGroupAncestor,isGroupDecendent:this.isGroupDecendent,filteredSearchTokenKeys:this.filteredSearchTokenKeys}),this.recentSearchesRoot=new b(this.recentSearchesStore,this.recentSearchesService,this.searchHistoryDropdownElement),this.recentSearchesRoot.init(),this.bindEvents(),this.loadSearchParamsFromURL(),this.dropdownManager.setDropdown(),this.cleanupWrapper=this.cleanup.bind(this),document.addEventListener("beforeunload",this.cleanupWrapper)}}},{key:"cleanup",value:function(){this.unbindEvents(),document.removeEventListener("beforeunload",this.cleanupWrapper),this.recentSearchesRoot&&this.recentSearchesRoot.destroy()}},{key:"bindStateEvents",value:function(){var e=this;this.stateFilters=document.querySelector(".container-fluid ".concat(this.stateFiltersSelector)),this.stateFilters&&(this.searchStateWrapper=this.searchState.bind(this),this.applyToStateFilters((function(t){t.addEventListener("click",e.searchStateWrapper)})))}},{key:"unbindStateEvents",value:function(){var e=this;this.stateFilters&&this.applyToStateFilters((function(t){t.removeEventListener("click",e.searchStateWrapper)}))}},{key:"applyToStateFilters",value:function(e){var t=this;this.stateFilters.querySelectorAll("a[data-state]").forEach((function(n){t.states.indexOf(n.dataset.state)>-1&&e(n)}))}},{key:"bindEvents",value:function(){this.handleFormSubmit=this.handleFormSubmit.bind(this),this.setDropdownWrapper=this.dropdownManager.setDropdown.bind(this.dropdownManager),this.toggleClearSearchButtonWrapper=this.toggleClearSearchButton.bind(this),this.handleInputPlaceholderWrapper=this.handleInputPlaceholder.bind(this),this.handleInputVisualTokenWrapper=this.handleInputVisualToken.bind(this),this.checkForEnterWrapper=this.checkForEnter.bind(this),this.onClearSearchWrapper=this.onClearSearch.bind(this),this.checkForBackspaceWrapper=this.checkForBackspace.call(this),this.removeSelectedTokenKeydownWrapper=this.removeSelectedTokenKeydown.bind(this),this.unselectEditTokensWrapper=this.unselectEditTokens.bind(this),this.editTokenWrapper=this.editToken.bind(this),this.tokenChange=this.tokenChange.bind(this),this.addInputContainerFocusWrapper=this.addInputContainerFocus.bind(this),this.removeInputContainerFocusWrapper=this.removeInputContainerFocus.bind(this),this.onrecentSearchesItemSelectedWrapper=this.onrecentSearchesItemSelected.bind(this),this.removeTokenWrapper=this.removeToken.bind(this),this.filteredSearchInputForm.addEventListener("submit",this.handleFormSubmit),this.filteredSearchInput.addEventListener("input",this.setDropdownWrapper),this.filteredSearchInput.addEventListener("input",this.toggleClearSearchButtonWrapper),this.filteredSearchInput.addEventListener("input",this.handleInputPlaceholderWrapper),this.filteredSearchInput.addEventListener("keyup",this.handleInputVisualTokenWrapper),this.filteredSearchInput.addEventListener("keydown",this.checkForEnterWrapper),this.filteredSearchInput.addEventListener("keyup",this.checkForBackspaceWrapper),this.filteredSearchInput.addEventListener("click",this.tokenChange),this.filteredSearchInput.addEventListener("keyup",this.tokenChange),this.filteredSearchInput.addEventListener("focus",this.addInputContainerFocusWrapper),this.tokensContainer.addEventListener("click",this.removeTokenWrapper),this.tokensContainer.addEventListener("click",this.editTokenWrapper),this.clearSearchButton.addEventListener("click",this.onClearSearchWrapper),document.addEventListener("click",this.unselectEditTokensWrapper),document.addEventListener("click",this.removeInputContainerFocusWrapper),document.addEventListener("keydown",this.removeSelectedTokenKeydownWrapper),d.$on("recentSearchesItemSelected",this.onrecentSearchesItemSelectedWrapper),this.bindStateEvents()}},{key:"unbindEvents",value:function(){this.filteredSearchInputForm.removeEventListener("submit",this.handleFormSubmit),this.filteredSearchInput.removeEventListener("input",this.setDropdownWrapper),this.filteredSearchInput.removeEventListener("input",this.toggleClearSearchButtonWrapper),this.filteredSearchInput.removeEventListener("input",this.handleInputPlaceholderWrapper),this.filteredSearchInput.removeEventListener("keyup",this.handleInputVisualTokenWrapper),this.filteredSearchInput.removeEventListener("keydown",this.checkForEnterWrapper),this.filteredSearchInput.removeEventListener("keyup",this.checkForBackspaceWrapper),this.filteredSearchInput.removeEventListener("click",this.tokenChange),this.filteredSearchInput.removeEventListener("keyup",this.tokenChange),this.filteredSearchInput.removeEventListener("focus",this.addInputContainerFocusWrapper),this.tokensContainer.removeEventListener("click",this.removeTokenWrapper),this.tokensContainer.removeEventListener("click",this.editTokenWrapper),this.clearSearchButton.removeEventListener("click",this.onClearSearchWrapper),document.removeEventListener("click",this.unselectEditTokensWrapper),document.removeEventListener("click",this.removeInputContainerFocusWrapper),document.removeEventListener("keydown",this.removeSelectedTokenKeydownWrapper),d.$off("recentSearchesItemSelected",this.onrecentSearchesItemSelectedWrapper),this.unbindStateEvents()}},{key:"checkForBackspace",value:function(){var e=this,t=0;return function(n){if(8===n.keyCode||46===n.keyCode){var r=z.getLastVisualTokenBeforeInput().lastVisualToken,o=$.getVisualTokenValues(r),i=o.tokenName,a=o.tokenValue,s=i&&e.canEdit&&e.canEdit(i,a);""===e.filteredSearchInput.value&&r&&s&&2===(t+=1)&&(t=0,e.filteredSearchInput.value=z.getLastTokenPartial(!0),z.removeLastTokenPartial()),e.dropdownManager.updateCurrentDropdownOffset()}else t=0}}},{key:"checkForEnter",value:function(e){if(38===e.keyCode||40===e.keyCode){var t=this.filteredSearchInput.selectionStart;e.preventDefault(),this.filteredSearchInput.setSelectionRange(t,t)}if(13===e.keyCode){var n=this.dropdownManager.mapping[this.dropdownManager.currentDropdown].element.querySelectorAll(".droplab-item-active");e.preventDefault(),n.length||(this.isHandledAsync?(e.stopImmediatePropagation(),this.filteredSearchInput.blur(),this.dropdownManager.resetDropdowns()):this.dropdownManager.destroyDroplab(),this.search())}}},{key:"addInputContainerFocus",value:function(){Object(_.a)(this.filteredSearchInput.closest(".filtered-search-box"),"focus")}},{key:"removeInputContainerFocus",value:function(e){var t=this.filteredSearchInput.closest(".filtered-search-box"),n=t&&t.contains(e.target),r=null!==e.target.closest(".filter-dropdown"),o=null!==e.target.closest("ul[data-dropdown]");n||r||o||!t||t.classList.remove("focus")}},{key:"removeToken",value:function(e){if(e.target.closest(".remove-token")){e.preventDefault(),e.stopImmediatePropagation();var t=e.target.closest(".selectable");z.selectToken(t,!0),this.removeSelectedToken()}}},{key:"unselectEditTokens",value:function(e){var t=this.container.querySelector(".filtered-search-box"),n=t&&t.contains(e.target),r=null!==e.target.closest(".filter-dropdown"),o=e.target.classList.contains("tokens-container");(!n&&!r||o)&&(z.moveInputToTheRight(),this.dropdownManager.resetDropdowns())}},{key:"editToken",value:function(e){var t=e.target.closest(".js-visual-token"),n=t&&t.querySelector(".name").textContent.trim(),r=this.canEdit&&this.canEdit(n);t&&r&&(e.preventDefault(),e.stopPropagation(),z.editToken(t),this.tokenChange())}},{key:"toggleClearSearchButton",value:function(){var e=$.getSearchQuery(),t=this.clearSearchButton.classList.contains("hidden");0!==e.length||t?e.length&&t&&this.clearSearchButton.classList.remove("hidden"):this.clearSearchButton.classList.add("hidden")}},{key:"handleInputPlaceholder",value:function(){var e=$.getSearchQuery(),t=Object(E.a)("Search or filter results..."),n=this.filteredSearchInput.placeholder;0===e.length&&n!==t?this.filteredSearchInput.placeholder=t:e.length>0&&""!==n&&(this.filteredSearchInput.placeholder="")}},{key:"removeSelectedTokenKeydown",value:function(e){8!==e.keyCode&&46!==e.keyCode||this.removeSelectedToken()}},{key:"removeSelectedToken",value:function(){z.removeSelectedToken(),this.handleInputPlaceholder(),this.toggleClearSearchButton(),this.dropdownManager.updateCurrentDropdownOffset()}},{key:"onClearSearch",value:function(e){e.preventDefault(),this.clearSearch()}},{key:"clearSearch",value:function(){var e=this;this.filteredSearchInput.value="";var t=[];[].forEach.call(this.tokensContainer.children,(function(n){var r=n.classList.contains("js-visual-token");if(r){var o=$.getVisualTokenValues(n),i=o.tokenName,a=o.tokenValue;r=e.canEdit&&e.canEdit(i,a)}r&&t.push(n)})),t.forEach((function(e){e.parentElement.removeChild(e)})),this.clearSearchButton.classList.add("hidden"),this.handleInputPlaceholder(),this.dropdownManager.resetDropdowns(),this.isHandledAsync&&this.search()}},{key:"handleInputVisualToken",value:function(e){var t=this;if(e.keyCode!==ct.a){var n=this.filteredSearchInput,r=this.tokenizer.processTokens(n.value,this.filteredSearchTokenKeys.getKeys()),i=r.tokens,a=r.searchToken,s=z.getLastVisualTokenBeforeInput().isLastVisualTokenValid;if(s){i.forEach((function(e){n.value=n.value.replace("".concat(e.key,":").concat(e.operator).concat(e.symbol).concat(e.value),""),z.addFilterVisualToken(e.key,e.operator,"".concat(e.symbol).concat(e.value),{uppercaseTokenName:t.filteredSearchTokenKeys.shouldUppercaseTokenName(e.key),capitalizeTokenValue:t.filteredSearchTokenKeys.shouldCapitalizeTokenValue(e.key)})}));var c=a.split(":");if(c.length>1){var l=c[0].split(" "),u=o()(l);if(l.length>1){l.pop();var p=l.join(" ");n.value=n.value.replace(p,""),z.addSearchVisualToken(p)}z.addFilterVisualToken(u,null,null,{uppercaseTokenName:this.filteredSearchTokenKeys.shouldUppercaseTokenName(u),capitalizeTokenValue:this.filteredSearchTokenKeys.shouldCapitalizeTokenValue(u)}),n.value=n.value.replace("".concat(u,":"),"")}}else if(s||z.getLastTokenOperator()){if(a.match(/([~%@]{0,1}".+")|([~%@]{0,1}'.+')|^((?![~%@]')(?![~%@]")(?!')(?!")).*/g)&&" "===n.value[n.value.length-1]){var d=z.getLastTokenPartial();z.addFilterVisualToken(a,null,null,{capitalizeTokenValue:this.filteredSearchTokenKeys.shouldCapitalizeTokenValue(d)}),n.value=n.value.replace(a,"").trim()}}else{var h=z.getLastTokenPartial(),f=a&&a.trim();z.permissibleOperatorValues.includes(f)&&(z.removeLastTokenPartial(),z.addFilterVisualToken(h,f,null,{capitalizeTokenValue:this.filteredSearchTokenKeys.shouldCapitalizeTokenValue(h)}),n.value=n.value.replace(a,"").trim())}}}},{key:"handleFormSubmit",value:function(e){e.preventDefault(),this.search()}},{key:"saveCurrentSearchQuery",value:function(){var e=this;this.fetchingRecentSearchesPromise.then((function(){var t=$.getSearchQuery();if(t.length>0){var n=e.recentSearchesStore.addRecentSearch(t);e.recentSearchesService.save(n)}})).catch((function(){}))}},{key:"getAllParams",value:function(e){return this.modifyUrlParams?this.modifyUrlParams(e):e}},{key:"transformParams",value:function(t){var n=this,r=new RegExp(/not\[(\w+)\]\[?\]?=(.*)/);return t.map((function(t){var o=t.match(r);if(o&&3===o.length){var i=o[1];if(e.notTransformableQueryParams.includes(i)||n.filteredSearchTokenKeys.searchByConditionUrl(t))return t;var a=o[2],s=encodeURIComponent("!=");return"".concat(i,"=").concat(s).concat(a)}var c=lt(t.split("="),2),l=c[0],u=c[1];if(e.notTransformableQueryParams.includes(l)||n.filteredSearchTokenKeys.searchByConditionUrl(t))return t;var p=encodeURIComponent("=");return"".concat(l,"=").concat(p).concat(u)}))}},{key:"loadSearchParamsFromURL",value:function(){var e=this,t=Object(a.p)(),n=this.transformParams(t),r=this.getAllParams(n),o=this.getUsernameParams(),i=!1;r.forEach((function(t){var n=t.split("="),r=decodeURIComponent(n[0]),a=n[1],s=e.filteredSearchTokenKeys.searchByConditionUrl(t);if(s){i=!0;var c=e.canEdit&&e.canEdit(s.tokenKey);z.addFilterVisualToken(s.tokenKey,s.operator,s.value,{canEdit:c})}else{var l=a?decodeURIComponent(a.replace(/\+/g," ")):a,u=e.filteredSearchTokenKeys.searchByKeyParam(r);if(u){var p=u.key,d=u.symbol,h="";-1!==l.indexOf(" ")&&(h=-1===l.indexOf('"')?'"':"'"),i=!0;var f=e.canEdit&&e.canEdit(p,l),v=u.uppercaseTokenName,y=u.capitalizeTokenValue,k=z.getOperatorToken(l),m=z.getValueToken(l);z.addFilterVisualToken(p,k,"".concat(d).concat(h).concat(m).concat(h),{canEdit:f,uppercaseTokenName:v,capitalizeTokenValue:y})}else if(u||"assignee_id"!==r)if(u||"author_id"!==r)u||"search"!==r||(i=!0,e.filteredSearchInput.value=l);else{var g=parseInt(a,10);if(o[g]){i=!0;var b=e.canEdit&&e.canEdit("author"),S=z.getOperatorToken(o[g]),T=z.getValueToken(o[g]);z.addFilterVisualToken("author",S,"@".concat(T),{canEdit:b})}}else{var w=parseInt(a,10);if(o[w]){i=!0;var O=e.canEdit&&e.canEdit("assignee"),E=z.getOperatorToken(o[w]),j=z.getValueToken(o[w]);z.addFilterVisualToken("assignee",E,"@".concat(j),{canEdit:O})}}}})),this.saveCurrentSearchQuery(),i&&(this.clearSearchButton.classList.remove("hidden"),this.handleInputPlaceholder())}},{key:"searchState",value:function(e){e.preventDefault();var t=e.currentTarget;t.blur();var n=t.dataset&&t.dataset.state;n&&this.search(n)}},{key:"search",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=[],r=$.getSearchQuery();this.saveCurrentSearchQuery();var o=this.filteredSearchTokenKeys.getKeys(),i=this.tokenizer.processTokens(r,o),s=i.tokens,l=i.searchToken,u=t||Object(a.m)("state")||"opened";if(n.push("state=".concat(u)),s.forEach((function(t){var r=e.filteredSearchTokenKeys.searchByConditionKeyValue(t.key,t.operator,t.value),o=e.filteredSearchTokenKeys.searchByKey(t.key)||{},i=o.param,a=t.key.replace("-","_"),s=i?"".concat(a,"_").concat(i):a,c="";if(r)c=r.url;else{var l=t.value;if(o.lowercaseValueOnSubmit&&(l=l.toLowerCase()),("'"===l[0]&&"'"===l[l.length-1]||'"'===l[0]&&'"'===l[l.length-1])&&(l=l.slice(1,l.length-1)),"!="===t.operator){var u=s.endsWith("[]");c="not[".concat(u?s.slice(0,-2):s,"]").concat(u?"[]":"","=").concat(encodeURIComponent(l))}else c="".concat(s,"=").concat(encodeURIComponent(l))}n.push(c)})),l){var p=l.split(" ").map((function(e){return encodeURIComponent(e)})).join("+");n.push("search=".concat(p))}var d="?scope=all&utf8=%E2%9C%93&".concat(n.join("&"));this.updateObject?this.updateObject(d):Object(c.s)(d)}},{key:"getUsernameParams",value:function(){var e={};try{var t=this.filteredSearchInput.getAttribute("data-username-params");JSON.parse(t).forEach((function(t){e[t.id]=t.username}))}catch(e){}return e}},{key:"tokenChange",value:function(){var e=this.dropdownManager.mapping[this.dropdownManager.currentDropdown];if(e){var t=e.reference;this.setDropdownWrapper(),t.dispatchInputEvent()}}},{key:"onrecentSearchesItemSelected",value:function(e){this.clearSearch(),this.filteredSearchInput.value=e,this.filteredSearchInput.dispatchEvent(new CustomEvent("input")),this.search()}},{key:"canEdit",value:function(){return!0}}])&&ut(t.prototype,n),r&&ut(t,r),e}();!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(pt,"notTransformableQueryParams",["scope","utf8","state","search"])},494:function(e,t,n){"use strict";var r=n(467),o=n(343),i=n(223),a=n(546),s=n(459),c=Math.min,l=[].lastIndexOf,u=!!l&&1/[1].lastIndexOf(1,-0)<0,p=a("lastIndexOf"),d=s("indexOf",{ACCESSORS:!0,1:0}),h=u||!p||!d;e.exports=h?function(e){if(u)return l.apply(this,arguments)||0;var t=r(this),n=i(t.length),a=n-1;for(arguments.length>1&&(a=c(a,o(arguments[1]))),a<0&&(a=n+a);a>=0;a--)if(a in t&&t[a]===e)return a||0;return-1}:l},498:function(e,t,n){var r=n(108),o=n(494);r({target:"Array",proto:!0,forced:o!==[].lastIndexOf},{lastIndexOf:o})},520:function(e,t,n){"use strict";var r=n(435);t.a=function(e){var t=e.page,n=e.filteredSearchTokenKeys,o=e.isGroup,i=e.isGroupAncestor,a=e.isGroupDecendent,s=e.stateFiltersSelector;r.a&&document.querySelector(".filtered-search")&&new r.a({page:t,isGroup:o,isGroupAncestor:i,isGroupDecendent:a,filteredSearchTokenKeys:n,stateFiltersSelector:s}).setup()}},521:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={MERGE_REQUESTS:"merge_requests",ISSUES:"issues",ADMIN_RUNNERS:"admin/runners"}}}]);
//# sourceMappingURL=commons~pages.admin.runners~pages.dashboard.issues~pages.dashboard.merge_requests.47a2aa55.chunk.js.map