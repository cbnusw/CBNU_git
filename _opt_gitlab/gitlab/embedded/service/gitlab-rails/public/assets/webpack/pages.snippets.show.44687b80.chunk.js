(this.webpackJsonp=this.webpackJsonp||[]).push([[225],{112:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var i=1024,a="hidden"},1141:function(e,t,n){"use strict";n(30),n(55),n(246);var i=n(1),a=n(16);function r(e,t){e.classList.add("is-active"),t.classList.remove("is-active")}t.a=function(){var e=document.querySelector(".js-share-btn");if(e){var t=document.querySelector(".js-embed-btn"),n=document.querySelector(".js-snippet-url-area"),o=document.querySelector(".js-embed-action"),s=n.getAttribute("data-url");n.addEventListener("click",(function(){return n.select()})),e.addEventListener("click",(function(){r(e,t),n.value=s,o.innerText=Object(i.a)("Share")})),t.addEventListener("click",(function(){var l=Object(a.I)(s),c="".concat(l.origin+Object(a.J)(s)),d=l.search,u='<script src="'.concat(c,".js").concat(d,'"><\/script>');r(t,e),n.value=u,o.innerText=Object(i.a)("Embed")}))}}},1142:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetSnippetQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"ids"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"snippets"},arguments:[{kind:"Argument",name:{kind:"Name",value:"ids"},value:{kind:"Variable",name:{kind:"Name",value:"ids"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"SnippetBase"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Project"},directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Author"},directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:357}};i.loc.source={body:"#import '../fragments/snippetBase.fragment.graphql'\n#import '../fragments/project.fragment.graphql'\n#import \"~/graphql_shared/fragments/author.fragment.graphql\"\n\nquery GetSnippetQuery($ids: [ID!]) {\n  snippets(ids: $ids) {\n    edges {\n      node {\n        ...SnippetBase\n        ...Project\n        author {\n          ...Author\n        }\n      }\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function r(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)}))}i.definitions=i.definitions.concat(r(n(1392).definitions)),i.definitions=i.definitions.concat(r(n(1393).definitions)),i.definitions=i.definitions.concat(r(n(1394).definitions));var o={};function s(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),o[e.name.value]=t}})),e.exports=i,e.exports.GetSnippetQuery=function(e,t){var n={kind:e.kind,definitions:[s(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);for(var i=o[t]||new Set,a=new Set,r=new Set(i);r.size>0;){var l=r;r=new Set,l.forEach((function(e){a.has(e)||(a.add(e),(o[e]||new Set).forEach((function(e){r.add(e)})))}))}return a.forEach((function(t){var i=s(e,t);i&&n.definitions.push(i)})),n}(i,"GetSnippetQuery")},1143:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DeleteSnippet"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"destroySnippet"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"errors"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:88}};n.loc.source={body:"mutation DeleteSnippet($id: ID!) {\n  destroySnippet(input: {id: $id}) {\n    errors\n  }\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.DeleteSnippet=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);for(var r=i[t]||new Set,o=new Set,s=new Set(r);s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"DeleteSnippet")},1144:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CanCreatePersonalSnippet"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userPermissions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createSnippet"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:102}};n.loc.source={body:"query CanCreatePersonalSnippet {\n  currentUser {\n    userPermissions {\n      createSnippet\n    }\n  }\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.CanCreatePersonalSnippet=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);for(var r=i[t]||new Set,o=new Set,s=new Set(r);s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"CanCreatePersonalSnippet")},1145:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CanCreateProjectSnippet"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"fullPath"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"project"},arguments:[{kind:"Argument",name:{kind:"Name",value:"fullPath"},value:{kind:"Variable",name:{kind:"Name",value:"fullPath"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userPermissions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createSnippet"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:134}};n.loc.source={body:"query CanCreateProjectSnippet($fullPath: ID!) {\n  project(fullPath: $fullPath) {\n    userPermissions {\n      createSnippet\n    }\n  }\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.CanCreateProjectSnippet=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);for(var r=i[t]||new Set,o=new Set,s=new Set(r);s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"CanCreateProjectSnippet")},1146:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"SnippetBlobFull"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"ids"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"snippets"},arguments:[{kind:"Argument",name:{kind:"Name",value:"ids"},value:{kind:"Variable",name:{kind:"Name",value:"ids"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"blob"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"binary"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"rawPath"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"size"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"simpleViewer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"BlobViewer"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"richViewer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"BlobViewer"},directives:[]}]}}]}}]}}]}}]}}]}}],loc:{start:0,end:412}};i.loc.source={body:"#import '~/graphql_shared/fragments/blobviewer.fragment.graphql'\n\nquery SnippetBlobFull($ids: [ID!]) {\n  snippets(ids: $ids) {\n    edges {\n      node {\n        id\n        blob {\n          binary\n          name\n          path\n          rawPath\n          size\n          simpleViewer {\n            ...BlobViewer\n          }\n          richViewer {\n            ...BlobViewer\n          }\n        }\n      }\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(n(1395).definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})));var r={};function o(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),r[e.name.value]=t}})),e.exports=i,e.exports.SnippetBlobFull=function(e,t){var n={kind:e.kind,definitions:[o(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);for(var i=r[t]||new Set,a=new Set,s=new Set(i);s.size>0;){var l=s;s=new Set,l.forEach((function(e){a.has(e)||(a.add(e),(r[e]||new Set).forEach((function(e){s.add(e)})))}))}return a.forEach((function(t){var i=o(e,t);i&&n.definitions.push(i)})),n}(i,"SnippetBlobFull")},1147:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"SnippetBlobContent"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"ids"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"rich"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"snippets"},arguments:[{kind:"Argument",name:{kind:"Name",value:"ids"},value:{kind:"Variable",name:{kind:"Name",value:"ids"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"blob"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"richData"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"rich"}}}]}]},{kind:"Field",name:{kind:"Name",value:"plainData"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"skip"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"rich"}}}]}]}]}}]}}]}}]}}]}}],loc:{start:0,end:238}};n.loc.source={body:"query SnippetBlobContent($ids: [ID!], $rich: Boolean!) {\n  snippets(ids: $ids) {\n    edges {\n      node {\n        id\n        blob {\n          richData @include(if: $rich)\n          plainData @skip(if: $rich)\n        }\n      }\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.SnippetBlobContent=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);for(var r=i[t]||new Set,o=new Set,s=new Set(r);s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"SnippetBlobContent")},1153:function(e,t,n){"use strict";var i=n(17),a=n(177),r=n(442),o=n(436),s=n(1142),l=n.n(s),c=n(1),d=n(25),u=n(60),p=n.n(u);const f={props:{entityId:{type:Number,required:!1,default:0},entityName:{type:String,required:!1,default:""},src:{type:String,required:!1,default:""},alt:{type:String,required:!1,default:"avatar"},size:{type:Number,required:!1,default:d.g[1],validator:function(e){return d.g.includes(e)}},shape:{type:String,required:!1,default:d.f.circle}},computed:{sizeClass:function(){return"gl-avatar-s".concat(this.size)},isCircle:function(){return this.shape===d.f.circle},identiconBackgroundClass:function(){var e=this.entityId%7+1;return"gl-avatar-identicon-bg".concat(e)},identiconText:function(){return this.entityName?this.entityName.charAt(0).toUpperCase():""}}};var h=p()({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.src?n("img",{class:["gl-avatar",{"gl-avatar-circle":e.isCircle},e.sizeClass],attrs:{src:e.src,alt:e.alt}}):n("div",{class:["gl-avatar gl-avatar-identicon",{"gl-avatar-circle":e.isCircle},e.sizeClass,e.identiconBackgroundClass]},[e._v("\n  "+e._s(e.identiconText)+"\n")])},staticRenderFns:[]},void 0,f,void 0,!1,void 0,!1,void 0,void 0,void 0),m=n(103),v=n(2533),g=n(553),b=n(2535),y=n(327),k=n(760),w=n(1236),j=n(1237),S=n(198),_=n(1143),x=n.n(_),C=n(1144),N=n.n(C),O=n(1145),E=n.n(O),T={components:{GlAvatar:h,GlIcon:m.a,GlSprintf:v.a,GlButton:g.a,GlModal:b.a,GlAlert:y.a,GlLoadingIcon:k.a,GlDropdown:w.a,GlDropdownItem:j.a,TimeAgoTooltip:S.a},apollo:{canCreateSnippet:{query:function(){return this.snippet.project?E.a:N.a},variables:function(){return{fullPath:this.snippet.project?this.snippet.project.fullPath:void 0}},update:function(e){return this.snippet.project?e.project.userPermissions.createSnippet:e.currentUser.userPermissions.createSnippet}}},props:{snippet:{type:Object,required:!0}},data:function(){return{isDeleting:!1,errorMessage:"",canCreateSnippet:!1}},computed:{personalSnippetActions:function(){return[{condition:this.snippet.userPermissions.updateSnippet,text:Object(c.a)("Edit"),href:this.editLink,click:void 0,variant:"outline-info",cssClass:void 0},{condition:this.snippet.userPermissions.adminSnippet,text:Object(c.a)("Delete"),href:void 0,click:this.showDeleteModal,variant:"outline-danger",cssClass:"btn-inverted btn-danger ml-2"},{condition:this.canCreateSnippet,text:Object(c.a)("New snippet"),href:this.snippet.project?"".concat(this.snippet.project.webUrl,"/snippets/new"):"/snippets/new",click:void 0,variant:"outline-success",cssClass:"btn-inverted btn-success ml-2"}]},editLink:function(){return"".concat(this.snippet.webUrl,"/edit")},visibility:function(){return this.snippet.visibilityLevel},snippetVisibilityLevelDescription:function(){switch(this.visibility){case"private":return null!==this.snippet.project?Object(c.a)("The snippet is visible only to project members."):Object(c.a)("The snippet is visible only to me.");case"internal":return Object(c.a)("The snippet is visible to any logged in user.");default:return Object(c.a)("The snippet can be accessed without any authentication.")}},visibilityLevelIcon:function(){switch(this.visibility){case"private":return"lock";case"internal":return"shield";default:return"earth"}}},methods:{redirectToSnippets:function(){window.location.pathname="dashboard/snippets"},closeDeleteModal:function(){this.$refs.deleteModal.hide()},showDeleteModal:function(){this.$refs.deleteModal.show()},deleteSnippet:function(){var e=this;this.isDeleting=!0,this.$apollo.mutate({mutation:x.a,variables:{id:this.snippet.id}}).then((function(){e.isDeleting=!1,e.errorMessage=void 0,e.closeDeleteModal(),e.redirectToSnippets()})).catch((function(t){e.isDeleting=!1,e.errorMessage=t.message}))}}},D=n(4),B=Object(D.a)(T,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"detail-page-header"},[n("div",{staticClass:"detail-page-header-body"},[n("div",{staticClass:"snippet-box qa-snippet-box has-tooltip d-flex align-items-center append-right-5 mb-1",attrs:{title:e.snippetVisibilityLevelDescription,"data-container":"body"}},[n("span",{staticClass:"sr-only"},[e._v("\n        "+e._s(e.s__("VisibilityLevel|"+e.visibility))+"\n      ")]),e._v(" "),n("gl-icon",{attrs:{name:e.visibilityLevelIcon,size:14}})],1),e._v(" "),n("div",{staticClass:"creator"},[n("gl-sprintf",{attrs:{message:e.__("Authored %{timeago} by %{author}")},scopedSlots:e._u([{key:"timeago",fn:function(){return[n("time-ago-tooltip",{attrs:{time:e.snippet.createdAt,"tooltip-placement":"bottom","css-class":"snippet_updated_ago"}})]},proxy:!0},{key:"author",fn:function(){return[n("a",{staticClass:"d-inline",attrs:{href:e.snippet.author.webUrl}},[n("gl-avatar",{attrs:{size:24,src:e.snippet.author.avatarUrl}}),e._v(" "),n("span",{staticClass:"bold"},[e._v(e._s(e.snippet.author.name))])],1)]},proxy:!0}])})],1)]),e._v(" "),n("div",{staticClass:"detail-page-header-actions"},[n("div",{staticClass:"d-none d-sm-block"},[e._l(e.personalSnippetActions,(function(t,i){return[t.condition?n("gl-button",{key:i,class:t.cssClass,attrs:{variant:t.variant,href:t.href||void 0},on:{click:function(e){t.click&&t.click()}}},[e._v("\n          "+e._s(t.text)+"\n        ")]):e._e()]}))],2),e._v(" "),n("div",{staticClass:"d-block d-sm-none dropdown"},[n("gl-dropdown",{staticClass:"w-100",attrs:{text:e.__("Options"),"toggle-class":"text-center"}},e._l(e.personalSnippetActions,(function(t,i){return n("gl-dropdown-item",{key:i,attrs:{href:t.href||void 0},on:{click:function(e){t.click&&t.click()}}},[e._v(e._s(t.text))])})),1)],1)]),e._v(" "),n("gl-modal",{ref:"deleteModal",attrs:{"modal-id":"delete-modal",title:"Example title"},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v(e._s(e.__("Delete snippet?")))]},proxy:!0},{key:"modal-footer",fn:function(){return[n("gl-button",{on:{click:e.closeDeleteModal}},[e._v(e._s(e.__("Cancel")))]),e._v(" "),n("gl-button",{attrs:{variant:"danger",disabled:e.isDeleting,"data-qa-selector":"delete_snippet_button"},on:{click:e.deleteSnippet}},[e.isDeleting?n("gl-loading-icon",{attrs:{inline:""}}):e._e(),e._v("\n        "+e._s(e.__("Delete snippet"))+"\n      ")],1)]},proxy:!0}])},[e._v(" "),e.errorMessage?n("gl-alert",{staticClass:"mb-2",attrs:{variant:"danger"},on:{dismiss:function(t){e.errorMessage=""}}},[e._v(e._s(e.errorMessage))]):e._e(),e._v(" "),n("gl-sprintf",{attrs:{message:e.__("Are you sure you want to delete %{name}?")},scopedSlots:e._u([{key:"name",fn:function(){return[n("strong",[e._v(e._s(e.snippet.title))])]},proxy:!0}])})],1)],1)}),[],!1,null,null,null).exports,F={components:{TimeAgoTooltip:S.a,GlSprintf:v.a},props:{snippet:{type:Object,required:!0}}},L=Object(D.a)(F,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"snippet-header limited-header-width"},[n("h2",{staticClass:"snippet-title prepend-top-0 mb-3",attrs:{"data-qa-selector":"snippet_title"}},[e._v("\n    "+e._s(e.snippet.title)+"\n  ")]),e._v(" "),e.snippet.description?n("div",{staticClass:"description",attrs:{"data-qa-selector":"snippet_description"}},[n("div",{staticClass:"md js-snippet-description",domProps:{innerHTML:e._s(e.snippet.descriptionHtml)}})]):e._e(),e._v(" "),e.snippet.updatedAt!==e.snippet.createdAt?n("small",{staticClass:"edited-text"},[n("gl-sprintf",{attrs:{message:e.__("Edited %{timeago}")},scopedSlots:e._u([{key:"timeago",fn:function(){return[n("time-ago-tooltip",{attrs:{time:e.snippet.updatedAt,"tooltip-placement":"bottom"}})]},proxy:!0}],null,!1,393044039)})],1):e._e()])}),[],!1,null,null,null).exports,P=n(1578),V=n(809),A=n(810),I=n(289),$={props:{value:{type:[String,Number],default:""}},data:function(){return{localValue:this.stringifyValue(this.value)}},watch:{value:function(e){e!==this.localValue&&(this.localValue=this.stringifyValue(e))},localValue:function(e){e!==this.value&&this.$emit("input",e)}},mounted:function(){var e=this,t=this.stringifyValue(this.value);if(this.activeOption){var n=this.predefinedOptions.find((function(t){return t.name===e.activeOption}));this.localValue=n.value}else t!==this.localValue&&(this.localValue=t)},methods:{stringifyValue:function(e){return null==e?"":String(e)}}};const q={name:"GlFormInputGroup",components:{BInputGroup:P.a,BInputGroupPrepend:V.a,BInputGroupAppend:A.a,BFormInput:I.a,GlDropdown:w.a,GlDropdownItem:j.a},mixins:[$],props:{selectOnClick:{type:Boolean,required:!1,default:!1},predefinedOptions:{type:Array,required:!1,default:function(){return[{value:"",name:""}]},validator:function(e){return e.every((function(e){return Object.keys(e).includes("name","value")}))}}},data:function(){return{activeOption:this.predefinedOptions&&this.predefinedOptions[0].name}},methods:{handleClick:function(){this.selectOnClick&&this.$refs.input.$el.select()},updateValue:function(e){var t=e.name,n=e.value;this.activeOption=t,this.localValue=n}}};var z={components:{GlFormInputGroup:p()({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-input-group",[n("b-input-group-prepend",[e._t("prepend"),e._v(" "),e.activeOption?n("gl-dropdown",{attrs:{text:e.activeOption}},e._l(e.predefinedOptions,(function(t){return n("gl-dropdown-item",{key:t.value,attrs:{active:e.activeOption===t.name},on:{click:function(n){return e.updateValue(t)}}},[e._v("\n          "+e._s(t.name)+"\n        ")])})),1):e._e()],2),e._v(" "),n("b-form-input",e._g(e._b({ref:"input",staticClass:"gl-form-input",on:{click:e.handleClick},model:{value:e.localValue,callback:function(t){e.localValue=t},expression:"localValue"}},"b-form-input",e.$attrs,!1),e.$listeners)),e._v(" "),n("b-input-group-append",[e._t("append")],2)],1)],1)},staticRenderFns:[]},void 0,q,void 0,!1,void 0,!1,void 0,void 0,void 0),GlButton:g.a,GlIcon:m.a},props:{url:{type:String,required:!0}},data:function(){return{optionValues:[{name:Object(c.a)("Embed"),value:"<script src='".concat(this.url,".js'><\/script>")},{name:Object(c.a)("Share"),value:this.url}]}}},M=Object(D.a)(z,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("gl-form-input-group",{attrs:{id:"embeddable-text","predefined-options":e.optionValues,readonly:"","select-on-click":""},scopedSlots:e._u([{key:"append",fn:function(){return[n("gl-button",{attrs:{"new-style":"","data-clipboard-target":"#embeddable-text"}},[n("gl-icon",{attrs:{name:"copy-to-clipboard",title:e.__("Copy")}})],1)]},proxy:!0}])})}),[],!1,null,null,null).exports,G=(Object(c.a)("Private"),Object(c.a)("The snippet is visible only to me."),Object(c.a)("The snippet is visible only to project members."),Object(c.a)("Internal"),Object(c.a)("The snippet is visible to any logged in user."),Object(c.a)("Public"),Object(c.a)("The snippet can be accessed without any authentication."),n(1221)),R=n(828),H=Object(c.a)("Copy file contents"),W=Object(c.a)("Open raw"),U=Object(c.a)("Download"),Q=Object(c.a)("Display source"),K=Object(c.a)("Display rendered file"),J={components:{GlIcon:m.a,GlButtonGroup:G.a,GlButton:g.a},directives:{GlTooltip:R.a},props:{value:{type:String,default:"simple",required:!1}},computed:{isSimpleViewer:function(){return"simple"===this.value},isRichViewer:function(){return"rich"===this.value}},methods:{switchToViewer:function(e){e!==this.value&&this.$emit("input",e)}},SIMPLE_BLOB_VIEWER:"simple",RICH_BLOB_VIEWER:"rich",SIMPLE_BLOB_VIEWER_TITLE:Q,RICH_BLOB_VIEWER_TITLE:K},Y=Object(D.a)(J,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("gl-button-group",{staticClass:"js-blob-viewer-switcher ml-2"},[n("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.hover",modifiers:{hover:!0}}],class:{active:e.isSimpleViewer},attrs:{"aria-label":e.$options.SIMPLE_BLOB_VIEWER_TITLE,title:e.$options.SIMPLE_BLOB_VIEWER_TITLE,selected:e.isSimpleViewer},on:{click:function(t){return e.switchToViewer(e.$options.SIMPLE_BLOB_VIEWER)}}},[n("gl-icon",{attrs:{name:"code",size:14}})],1),e._v(" "),n("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.hover",modifiers:{hover:!0}}],class:{active:e.isRichViewer},attrs:{"aria-label":e.$options.RICH_BLOB_VIEWER_TITLE,title:e.$options.RICH_BLOB_VIEWER_TITLE,selected:e.isRichViewer},on:{click:function(t){return e.switchToViewer(e.$options.RICH_BLOB_VIEWER)}}},[n("gl-icon",{attrs:{name:"document",size:14}})],1)],1)}),[],!1,null,null,null).exports,X={components:{GlIcon:m.a,GlButtonGroup:G.a,GlButton:g.a},directives:{GlTooltip:R.a},props:{rawPath:{type:String,required:!0},activeViewer:{type:String,default:"simple",required:!1}},computed:{downloadUrl:function(){return"".concat(this.rawPath,"?inline=false")},copyDisabled:function(){return"rich"===this.activeViewer}},BTN_COPY_CONTENTS_TITLE:H,BTN_DOWNLOAD_TITLE:U,BTN_RAW_TITLE:W},Z=Object(D.a)(X,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("gl-button-group",[n("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.hover",modifiers:{hover:!0}}],attrs:{"aria-label":e.$options.BTN_COPY_CONTENTS_TITLE,title:e.$options.BTN_COPY_CONTENTS_TITLE,disabled:e.copyDisabled,"data-clipboard-target":"#blob-code-content"}},[n("gl-icon",{attrs:{name:"copy-to-clipboard",size:14}})],1),e._v(" "),n("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.hover",modifiers:{hover:!0}}],attrs:{"aria-label":e.$options.BTN_RAW_TITLE,title:e.$options.BTN_RAW_TITLE,href:e.rawPath,target:"_blank"}},[n("gl-icon",{attrs:{name:"doc-code",size:14}})],1),e._v(" "),n("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.hover",modifiers:{hover:!0}}],attrs:{"aria-label":e.$options.BTN_DOWNLOAD_TITLE,title:e.$options.BTN_DOWNLOAD_TITLE,href:e.downloadUrl,target:"_blank"}},[n("gl-icon",{attrs:{name:"download",size:14}})],1)],1)}),[],!1,null,null,null).exports,ee=n(328),te=n(158),ne=n(310),ie={components:{FileIcon:ee.a,ClipboardButton:te.a},props:{blob:{type:Object,required:!0}},computed:{blobSize:function(){return Object(ne.b)(this.blob.size)},gfmCopyText:function(){return"`".concat(this.blob.path,"`")}}},ae={components:{ViewerSwitcher:Y,DefaultActions:Z,BlobFilepath:Object(D.a)(ie,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"file-header-content d-flex align-items-center lh-100"},[e._t("filepathPrepend"),e._v(" "),n("file-icon",{attrs:{"file-name":e.blob.path,size:18,"aria-hidden":"true","css-classes":"mr-2"}}),e._v(" "),e.blob.name?n("strong",{staticClass:"file-title-name qa-file-title-name mr-1 js-blob-header-filepath"},[e._v(e._s(e.blob.name))]):e._e(),e._v(" "),n("small",{staticClass:"mr-2"},[e._v(e._s(e.blobSize))]),e._v(" "),n("clipboard-button",{attrs:{text:e.blob.path,gfm:e.gfmCopyText,title:e.__("Copy file path"),"css-class":"btn-clipboard btn-transparent lh-100 position-static"}})],2)}),[],!1,null,null,null).exports},props:{blob:{type:Object,required:!0},hideDefaultActions:{type:Boolean,required:!1,default:!1},hideViewerSwitcher:{type:Boolean,required:!1,default:!1},activeViewerType:{type:String,required:!1,default:"simple"}},data:function(){return{viewer:this.hideViewerSwitcher?null:this.activeViewerType}},computed:{showViewerSwitcher:function(){return!this.hideViewerSwitcher&&Boolean(this.blob.simpleViewer&&this.blob.richViewer)},showDefaultActions:function(){return!this.hideDefaultActions}},watch:{viewer:function(e,t){this.hideViewerSwitcher||e===t||this.$emit("viewer-changed",e)}},methods:{proxyCopyRequest:function(){this.$emit("copy")}}},re=Object(D.a)(ae,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"js-file-title file-title-flex-parent"},[n("blob-filepath",{attrs:{blob:e.blob},scopedSlots:e._u([{key:"filepathPrepend",fn:function(){return[e._t("prepend")]},proxy:!0}],null,!0)}),e._v(" "),n("div",{staticClass:"file-actions d-none d-sm-block"},[e.showViewerSwitcher?n("viewer-switcher",{model:{value:e.viewer,callback:function(t){e.viewer=t},expression:"viewer"}}):e._e(),e._v(" "),e._t("actions"),e._v(" "),e.showDefaultActions?n("default-actions",{attrs:{"raw-path":e.blob.rawPath,"active-viewer":e.viewer},on:{copy:e.proxyCopyRequest}}):e._e()],2)],1)}),[],!1,null,null,null).exports,oe={props:{content:{type:String,required:!0},type:{type:String,required:!0}}},se=n(469),le={mixins:[oe],mounted:function(){Object(se.b)(this.$refs.content,this.type)}},ce=Object(D.a)(le,(function(){var e=this.$createElement;return(this._self._c||e)("div",{ref:"content",domProps:{innerHTML:this._s(this.content)}})}),[],!1,null,null,null).exports,de=(n(55),n(67),{components:{GlIcon:m.a},mixins:[oe],data:function(){return{highlightedLine:null}},computed:{lineNumbers:function(){return this.content.split("\n").length}},mounted:function(){var e=window.location.hash;e&&this.scrollToLine(e,!0)},methods:{scrollToLine:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e&&this.$el.querySelector(e),i=this.highlightedLine;n&&(i&&i.classList.remove("hll"),n.classList.add("hll"),this.highlightedLine=n,t&&n.scrollIntoView({behavior:"smooth",block:"center"}))}},userColorScheme:window.gon.user_color_scheme}),ue=Object(D.a)(de,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"file-content code js-syntax-highlight qa-file-content",class:e.$options.userColorScheme},[n("div",{staticClass:"line-numbers"},e._l(e.lineNumbers,(function(t){return n("a",{key:t,staticClass:"diff-line-num js-line-number",attrs:{id:"L"+t,href:"#LC"+t,"data-line-number":t},on:{click:function(n){return e.scrollToLine("#LC"+t)}}},[n("gl-icon",{attrs:{size:12,name:"link"}}),e._v("\n      "+e._s(t)+"\n    ")],1)})),0),e._v(" "),n("div",{staticClass:"blob-content"},[n("pre",{staticClass:"code highlight"},[n("code",{attrs:{id:"blob-code-content"},domProps:{innerHTML:e._s(e.content)}})])])])}),[],!1,null,null,null).exports,pe={props:{viewerError:{type:String,required:!0}}},fe=Object(D.a)(pe,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"file-content code"},[t("div",{staticClass:"text-center py-4",domProps:{innerHTML:this._s(this.viewerError)}})])}),[],!1,null,null,null).exports,he={components:{GlLoadingIcon:k.a,BlobContentError:fe},props:{content:{type:String,default:"",required:!1},loading:{type:Boolean,default:!0,required:!1},activeViewer:{type:Object,required:!0}},computed:{viewer:function(){switch(this.activeViewer.type){case"rich":return ce;default:return ue}},viewerError:function(){return this.activeViewer.renderError}}},me=Object(D.a)(he,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"blob-viewer",attrs:{"data-type":this.activeViewer.type}},[this.loading?t("gl-loading-icon",{staticClass:"my-4 mx-auto",attrs:{size:"md",color:"dark"}}):[this.viewerError?t("blob-content-error",{attrs:{"viewer-error":this.viewerError}}):t(this.viewer,{ref:"contentViewer",tag:"component",attrs:{content:this.content,type:this.activeViewer.fileType}})]],2)}),[],!1,null,null,null).exports,ve=n(1146),ge=n.n(ve),be=n(1147),ye=n.n(be),ke={components:{BlobEmbeddable:M,BlobHeader:re,BlobContent:me,GlLoadingIcon:k.a},apollo:{blob:{query:ge.a,variables:function(){return{ids:this.snippet.id}},update:function(e){return e.snippets.edges[0].node.blob},result:function(e){var t=e.data.snippets.edges[0].node.blob.richViewer?"rich":"simple";this.switchViewer(t,!0)}},blobContent:{query:ye.a,variables:function(){return{ids:this.snippet.id,rich:"rich"===this.activeViewerType}},update:function(e){return e.snippets.edges[0].node.blob.richData||e.snippets.edges[0].node.blob.plainData}}},props:{snippet:{type:Object,required:!0}},data:function(){return{blob:{},blobContent:"",activeViewerType:window.location.hash?"simple":""}},computed:{embeddable:function(){return"public"===this.snippet.visibilityLevel},isBlobLoading:function(){return this.$apollo.queries.blob.loading},isContentLoading:function(){return this.$apollo.queries.blobContent.loading},viewer:function(){var e=this.blob,t=e.richViewer,n=e.simpleViewer;return"rich"===this.activeViewerType?t:n}},methods:{switchViewer:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.activeViewerType=t&&window.location.hash?"simple":e}}},we=Object(D.a)(ke,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.embeddable?n("blob-embeddable",{staticClass:"mb-3",attrs:{url:e.snippet.webUrl}}):e._e(),e._v(" "),e.isBlobLoading?n("gl-loading-icon",{staticClass:"prepend-top-20 append-bottom-20",attrs:{label:e.__("Loading blob"),size:"lg"}}):n("article",{staticClass:"file-holder snippet-file-content"},[n("blob-header",{attrs:{blob:e.blob,"active-viewer-type":e.viewer.type},on:{"viewer-changed":e.switchViewer}}),e._v(" "),n("blob-content",{attrs:{loading:e.isContentLoading,content:e.blobContent,"active-viewer":e.viewer}})],1)],1)}),[],!1,null,null,null).exports,je={components:{SnippetHeader:B,SnippetTitle:L,GlLoadingIcon:k.a,SnippetBlob:we},apollo:{snippet:{query:l.a,variables:function(){return{ids:this.snippetGid}},update:function(e){return e.snippets.edges[0].node}}},props:{snippetGid:{type:String,required:!0}},data:function(){return{snippet:{}}},computed:{isLoading:function(){return this.$apollo.queries.snippet.loading}}},Se=Object(D.a)(je,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"js-snippet-view"},[this.isLoading?t("gl-loading-icon",{staticClass:"loading-animation prepend-top-20 append-bottom-20",attrs:{label:this.__("Loading snippet"),size:2}}):[t("snippet-header",{attrs:{snippet:this.snippet}}),this._v(" "),t("snippet-title",{attrs:{snippet:this.snippet}}),this._v(" "),t("snippet-blob",{attrs:{snippet:this.snippet}})]],2)}),[],!1,null,null,null).exports;i.default.use(r.a),i.default.use(a.a);t.a=function(){var e=document.getElementById("js-snippet-view");if(!e)return!1;var t=e.dataset.snippetGid,n=new r.a({defaultClient:Object(o.a)()});return new i.default({el:e,apolloProvider:n,render:function(e){return e(Se,{props:{snippetGid:t}})}})}},1221:function(e,t,n){"use strict";var i=n(63),a=n(102),r=n(79);var o={vertical:{type:Boolean,default:!1},size:{type:String,default:function(){return Object(r.b)("BButton","size")}},tag:{type:String,default:"div"},ariaRole:{type:String,default:"group"}},s=i.a.extend({name:"BButtonGroup",functional:!0,props:o,render:function(e,t){var n,i,r,o=t.props,s=t.data,l=t.children;return e(o.tag,Object(a.a)(s,{class:(n={"btn-group":!o.vertical,"btn-group-vertical":o.vertical},i="btn-group-".concat(o.size),r=Boolean(o.size),i in n?Object.defineProperty(n,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[i]=r,n),attrs:{role:o.ariaRole}}),l)}}),l=n(60);const c={components:{BButtonGroup:s}};const d=n.n(l)()({render:function(){var e=this.$createElement;return(this._self._c||e)("b-button-group",this._g(this._b({},"b-button-group",this.$attrs,!1),this.$listeners),[this._t("default")],2)},staticRenderFns:[]},void 0,c,void 0,!1,void 0,!1,void 0,void 0,void 0);t.a=d},1392:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"SnippetBase"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Snippet"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"descriptionHtml"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"visibilityLevel"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"webUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userPermissions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"adminSnippet"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updateSnippet"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:190}};n.loc.source={body:"fragment SnippetBase on Snippet {\n  id\n  title\n  description\n  descriptionHtml\n  createdAt\n  updatedAt\n  visibilityLevel\n  webUrl\n  userPermissions {\n    adminSnippet\n    updateSnippet\n  }\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},1393:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"Project"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Snippet"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"project"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"fullPath"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"webUrl"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:71}};n.loc.source={body:"fragment Project on Snippet {\n  project {\n    fullPath\n    webUrl\n  }\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},1394:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"Author"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"webUrl"},arguments:[],directives:[]}]}}],loc:{start:0,end:67}};n.loc.source={body:"fragment Author on User {\n  avatarUrl\n  name\n  username\n  webUrl\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},1395:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"BlobViewer"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SnippetBlobViewer"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"collapsed"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"renderError"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tooLarge"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fileType"},arguments:[],directives:[]}]}}],loc:{start:0,end:100}};n.loc.source={body:"fragment BlobViewer on SnippetBlobViewer {\n  collapsed\n  renderError\n  tooLarge\n  type\n  fileType\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},150:function(e,t,n){"use strict";var i=n(37);t.a={props:{state:{type:Boolean,default:null}},computed:{computedState:function(){return Object(i.a)(this.state)?this.state:null},stateClass:function(){var e=this.computedState;return!0===e?"is-valid":!1===e?"is-invalid":null}}}},153:function(e,t,n){"use strict";var i=n(295),a=n(103),r=n(203),o=n(25),s=n(60),l=n.n(s);const c={components:{BButton:i.a,GlIcon:a.a},mixins:[r.a],props:{category:{type:String,required:!1,default:o.q.tertiary,validator:function(e){return Object.keys(o.q).includes(e)}},variant:{type:String,required:!1,default:o.t.default,validator:function(e){return Object.keys(o.t).includes(e)}},size:{type:String,required:!1,default:o.r.medium,validator:function(e){return Object.keys(o.r).includes(e)}},selected:{type:Boolean,required:!1,default:!1},icon:{type:String,required:!1,default:""},label:{type:Boolean,required:!1,default:!1}},computed:{hasIcon:function(){return""!==this.icon},hasIconOnly:function(){return 0===Object.keys(this.$slots).length&&this.hasIcon},buttonClasses:function(){return{"btn-icon":this.hasIconOnly,"button-ellipsis-horizontal":this.hasIconOnly&&"ellipsis_h"===this.icon,"btn-secondary":this.category===o.q.secondary,"new-gl-button":this.variant!==o.t.link,"btn-label":this.label,selected:this.selected}},buttonSize:function(){return o.s[this.size]}}};const d=l()({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-button",e._g(e._b({class:e.buttonClasses,attrs:{rel:e.relType,target:e.target,variant:e.variant,size:e.buttonSize}},"b-button",e.$attrs,!1),e.$listeners),[e.hasIcon?n("gl-icon",{attrs:{name:e.icon}}):e._e(),e._v(" "),e._t("emoji"),e._v(" "),e._t("default")],2)},staticRenderFns:[]},void 0,c,void 0,!1,void 0,!1,void 0,void 0,void 0);t.a=d},1578:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n(63),a=n(102),r=n(79),o=n(181),s=n(353),l=n(809),c=n(810),d=n(544);function u(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var p={id:{type:String},size:{type:String,default:function(){return Object(r.b)("BInputGroup","size")}},prepend:{type:String},prependHtml:{type:String},append:{type:String},appendHtml:{type:String},tag:{type:String,default:"div"}},f=i.a.extend({name:"BInputGroup",functional:!0,props:p,render:function(e,t){var n,i,r,p=t.props,f=t.data,h=t.slots,m=t.scopedSlots,v=h(),g=m||{},b=[];return p.prepend||p.prependHtml||Object(s.a)("prepend",g,v)?b.push(e(l.a,[p.prepend||p.prependHtml?e(d.a,{domProps:Object(o.a)(p.prependHtml,p.prepend)}):e(),Object(s.b)("prepend",{},g,v)||e()])):b.push(e()),Object(s.a)("default",g,v)?b.push.apply(b,u(Object(s.b)("default",{},g,v))):b.push(e()),p.append||p.appendHtml||Object(s.a)("append",g,v)?b.push(e(c.a,[p.append||p.appendHtml?e(d.a,{domProps:Object(o.a)(p.appendHtml,p.append)}):e(),Object(s.b)("append",{},g,v)||e()])):b.push(e()),e(p.tag,Object(a.a)(f,{staticClass:"input-group",class:(n={},i="input-group-".concat(p.size),r=Boolean(p.size),i in n?Object.defineProperty(n,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[i]=r,n),attrs:{id:p.id||null,role:"group"}}),b)}})},158:function(e,t,n){"use strict";var i=n(828),a=n(553),r=n(103),o={name:"ClipboardButton",directives:{GlTooltip:i.a},components:{GlButton:a.a,GlIcon:r.a},props:{text:{type:String,required:!0},gfm:{type:String,required:!1,default:null},title:{type:String,required:!0},tooltipPlacement:{type:String,required:!1,default:"top"},tooltipContainer:{type:[String,Boolean],required:!1,default:!1},cssClass:{type:String,required:!1,default:"btn-default"}},computed:{clipboardText:function(){return null!==this.gfm?JSON.stringify({text:this.text,gfm:this.gfm}):this.text}}},s=n(4),l=Object(s.a)(o,(function(){var e=this.$createElement,t=this._self._c||e;return t("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip",value:{placement:this.tooltipPlacement,container:this.tooltipContainer},expression:"{ placement: tooltipPlacement, container: tooltipContainer }"}],class:this.cssClass,attrs:{title:this.title,"data-clipboard-text":this.clipboardText}},[t("gl-icon",{attrs:{name:"copy-to-clipboard"}})],1)}),[],!1,null,null,null);t.a=l.exports},166:function(e,t,n){"use strict";var i=n(44);t.a={props:{name:{type:String},id:{type:String},disabled:{type:Boolean},required:{type:Boolean,default:!1},form:{type:String,default:null},autofocus:{type:Boolean,default:!1}},mounted:function(){this.handleAutofocus()},activated:function(){this.handleAutofocus()},methods:{handleAutofocus:function(){var e=this;this.$nextTick((function(){Object(i.t)((function(){var t=e.$el;e.autofocus&&Object(i.p)(t)&&(Object(i.q)(t,"input, textarea, select")||(t=Object(i.u)("input, textarea, select",t)),t&&t.focus&&t.focus())}))}))}}}},167:function(e,t,n){"use strict";var i=n(79);t.a={props:{size:{type:String,default:function(){return Object(i.b)("formControls","size")}}},computed:{sizeFormClass:function(){return[this.size?"form-control-".concat(this.size):null]},sizeBtnClass:function(){return[this.size?"btn-".concat(this.size):null]}}}},198:function(e,t,n){"use strict";var i=n(828),a=n(189),r=(n(62),{directives:{GlTooltip:i.a},mixins:[a.a],props:{time:{type:String,required:!0},tooltipPlacement:{type:String,required:!1,default:"top"},cssClass:{type:String,required:!1,default:""}}}),o=n(4),s=Object(o.a)(r,(function(){var e=this.$createElement;return(this._self._c||e)("time",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.viewport",value:{placement:this.tooltipPlacement},expression:"{ placement: tooltipPlacement }",modifiers:{viewport:!0}}],class:this.cssClass,attrs:{title:this.tooltipTitle(this.time)},domProps:{textContent:this._s(this.timeFormatted(this.time))}})}),[],!1,null,null,null);t.a=s.exports},205:function(e,t,n){"use strict";var i=n(37);t.a={model:{prop:"value",event:"update"},props:{value:{type:[String,Number],default:""},ariaInvalid:{type:[Boolean,String],default:!1},readonly:{type:Boolean,default:!1},plaintext:{type:Boolean,default:!1},autocomplete:{type:String,default:null},placeholder:{type:String,default:null},formatter:{type:Function,default:null},lazyFormatter:{type:Boolean,default:!1},trim:{type:Boolean,default:!1},number:{type:Boolean,default:!1},lazy:{type:Boolean,default:!1},debounce:{type:[Number,String],default:0}},data:function(){return{localValue:this.stringifyValue(this.value),vModelValue:this.value}},computed:{computedDebounce:function(){return Math.max(parseInt(this.debounce,10)||0,0)},computedClass:function(){return[{"custom-range":"range"===this.type,"form-control-plaintext":this.plaintext&&"range"!==this.type&&"color"!==this.type,"form-control":!this.plaintext&&"range"!==this.type||"color"===this.type},this.sizeFormClass,this.stateClass]},computedAriaInvalid:function(){return this.ariaInvalid&&"false"!==this.ariaInvalid?!0===this.ariaInvalid?"true":this.ariaInvalid:!1===this.computedState?"true":null}},watch:{value:function(e){var t=this.stringifyValue(e);t!==this.localValue&&e!==this.vModelValue&&(this.clearDebounce(),this.localValue=t,this.vModelValue=e)}},mounted:function(){this.$_inputDebounceTimer=null,this.$on("hook:beforeDestroy",this.clearDebounce);var e=this.value,t=this.stringifyValue(e);t!==this.localValue&&e!==this.vModelValue&&(this.localValue=t,this.vModelValue=e)},methods:{clearDebounce:function(){clearTimeout(this.$_inputDebounceTimer),this.$_inputDebounceTimer=null},stringifyValue:function(e){return Object(i.k)(e)?"":String(e)},formatValue:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e=this.stringifyValue(e),this.lazyFormatter&&!n||!Object(i.d)(this.formatter)||(e=this.formatter(e,t)),e},modifyValue:function(e){if(this.trim&&(e=e.trim()),this.number){var t=parseFloat(e);e=isNaN(t)?e:t}return e},updateValue:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.lazy,a=this.computedDebounce;if((!i||n)&&(e=this.modifyValue(e))!==this.vModelValue){this.clearDebounce();var r=function(){t.vModelValue=e,t.$emit("update",e)};a>0&&!i&&!n?this.$_inputDebounceTimer=setTimeout(r,a):r()}},onInput:function(e){if(!e.target.composing){var t=e.target.value,n=this.formatValue(t,e);!1===n||e.defaultPrevented?e.preventDefault():(this.localValue=n,this.updateValue(n),this.$emit("input",n))}},onChange:function(e){if(!e.target.composing){var t=e.target.value,n=this.formatValue(t,e);!1===n||e.defaultPrevented?e.preventDefault():(this.localValue=n,this.updateValue(n,!0),this.$emit("change",n))}},onBlur:function(e){var t=e.target.value,n=this.formatValue(t,e,!0);!1!==n&&(this.localValue=this.stringifyValue(this.modifyValue(n)),this.updateValue(n,!0)),this.$emit("blur",e)},focus:function(){this.disabled||this.$el.focus()},blur:function(){this.disabled||this.$el.blur()}}}},206:function(e,t,n){"use strict";t.a={computed:{selectionStart:{cache:!1,get:function(){return this.$refs.input.selectionStart},set:function(e){this.$refs.input.selectionStart=e}},selectionEnd:{cache:!1,get:function(){return this.$refs.input.selectionEnd},set:function(e){this.$refs.input.selectionEnd=e}},selectionDirection:{cache:!1,get:function(){return this.$refs.input.selectionDirection},set:function(e){this.$refs.input.selectionDirection=e}}},methods:{select:function(){var e;(e=this.$refs.input).select.apply(e,arguments)},setSelectionRange:function(){var e;(e=this.$refs.input).setSelectionRange.apply(e,arguments)},setRangeText:function(){var e;(e=this.$refs.input).setRangeText.apply(e,arguments)}}}},207:function(e,t,n){"use strict";t.a={computed:{validity:{cache:!1,get:function(){return this.$refs.input.validity}},validationMessage:{cache:!1,get:function(){return this.$refs.input.validationMessage}},willValidate:{cache:!1,get:function(){return this.$refs.input.willValidate}}},methods:{setCustomValidity:function(){var e;return(e=this.$refs.input).setCustomValidity.apply(e,arguments)},checkValidity:function(){var e;return(e=this.$refs.input).checkValidity.apply(e,arguments)},reportValidity:function(){var e;return(e=this.$refs.input).reportValidity.apply(e,arguments)}}}},208:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));n(42),n(26),n(77),n(38),n(27);var i=n(0),a=n.n(i),r=n(157),o=n.n(r),s=n(164),l=(n(28),n(85),n(46),n(55),n(91),n(67),n(233),n(94)),c=n.n(l),d=n(20),u=n.n(d);n(441),n(24),n(49),n(56),n(78),n(104),n(40),n(65),n(145),n(18),n(68),n(122),n(36),n(89),n(41);function p(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function f(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.columnWidths=[],this.rows=[],this.tableFound=this.parseTable()}var t,n,i;return t=e,(n=[{key:"isTable",value:function(){return this.tableFound}},{key:"convertToTableMarkdown",value:function(){var e=this;this.calculateColumnWidths();var t=this.rows.map((function(t){return"| ".concat(t.map((function(t,n){return e.formatColumn(t,n)})).join(" | ")," |")}));return t.splice(1,0,this.generateHeaderBreak()),t.join("\n")}},{key:"parseTable",value:function(){if(!this.data.types.includes("text/html")||!this.data.types.includes("text/plain"))return!1;var e=this.data.getData("text/html");if(this.doc=(new DOMParser).parseFromString(e,"text/html"),1!==this.doc.querySelectorAll("table").length)return!1;var t=this.data.getData("text/plain").trim().split(/[\n\u0085\u2028\u2029]|\r\n?/g);return this.doc.querySelectorAll("tr").length===t.length&&(this.rows=t.map((function(e){return e.split("\t")})),this.normalizeRows(),!!this.columnCountsMatch())}},{key:"normalizeRows",value:function(){var e=this.rows.map((function(e){return e.length})),t=Math.max.apply(Math,f(e));this.rows.forEach((function(e){for(;e.length<t;)e.push("")}))}},{key:"calculateColumnWidths",value:function(){var e=this;this.columnWidths=this.rows[0].map((function(t,n){return function(e,t){return Math.max.apply(Math,f(e.map((function(e){return e[t].length}))))}(e.rows,n)}))}},{key:"columnCountsMatch",value:function(){var e=this.rows[0].length,t=0;return this.doc.querySelectorAll("table tr").forEach((function(e){t=Math.max(e.cells.length,t)})),e===t}},{key:"formatColumn",value:function(e,t){return e+Array(this.columnWidths[t]-e.length+1).join(" ")}},{key:"generateHeaderBreak",value:function(){var e=this,t=this.columnWidths.map((function(t,n){return Array(e.columnWidths[n]+3).join("-")}));return"|".concat(t.join("|"),"|")}}])&&p(t.prototype,n),i&&p(t,i),e}(),m=n(178),v=n(11),g=n(1);function b(e){return!e||u.a.isString(e)?e:e.message}function y(e){var t,n,i,r,o,s,l,d=e.find(".button-attach-file"),p=e.find(".attaching-file-message"),f=e.find(".button-cancel-uploading-files"),y=e.find(".retry-uploading-link"),k=e.find(".uploading-progress"),w=e.find(".uploading-error-container"),j=e.find(".uploading-error-message"),S=e.find(".uploading-progress-container"),_=e.data("uploads-path")||window.uploads_path||null,x=gon.max_file_size||10,C=e.find(".js-gfm-input");C.wrap('<div class="div-dropzone"></div>'),C.on("paste",(function(e){return t(e)}));var N=C.closest(".md-area");e.setupMarkdownPreview();var O=e.find(".div-dropzone");if(O.parent().addClass("div-dropzone-wrapper"),O.append('<div class="div-dropzone-hover"></div>'),O.find(".div-dropzone-hover").append('<i class="fa fa-paperclip div-dropzone-icon"></i>'),!_)return O.addClass("js-invalid-dropzone"),null;var E=O.dropzone({url:_,dictDefaultMessage:"",clickable:!0,paramName:"file",maxFilesize:x,uploadMultiple:!1,headers:m.a.headers,previewContainer:!1,processing:function(){return a()(".div-dropzone-alert").alert("close")},dragover:function(){N.addClass("is-dropzone-hover"),e.find(".div-dropzone-hover").css("opacity",.7)},dragleave:function(){N.removeClass("is-dropzone-hover"),e.find(".div-dropzone-hover").css("opacity",0)},drop:function(){N.removeClass("is-dropzone-hover"),e.find(".div-dropzone-hover").css("opacity",0),C.focus()},success:function(e,t){var a=this.getQueuedFiles().length+this.getUploadingFiles().length,r=a>=1;n(t.link.markdown,r),a||d.removeClass("hide"),i(t.link.url)},error:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(g.a)("Attaching the file failed."),n=arguments.length>2?arguments[2]:void 0,i=b(t||n.responseText);w.removeClass("hide"),j.html(i),d.addClass("hide"),f.addClass("hide")},totaluploadprogress:function(e){r(this.files,p),k.text("".concat(Math.round(e),"%"))},sending:function(){d.addClass("hide"),w.addClass("hide"),S.removeClass("hide"),f.removeClass("hide")},removedfile:function(){d.removeClass("hide"),f.addClass("hide"),S.addClass("hide"),w.addClass("hide")},queuecomplete:function(){a()(".dz-preview").remove(),a()(".markdown-area").trigger("input"),S.addClass("hide"),f.addClass("hide")}}),T=a()(E[0]).children("textarea");f.on("click",(function(e){e.preventDefault(),e.stopPropagation(),c.a.forElement(O.get(0)).removeAllFiles(!0)})),y.on("click",(function(e){var t=c.a.forElement(e.target.closest(".js-main-target-form").querySelector(".div-dropzone")),n=t.files;e.preventDefault(),t.removeAllFiles(!0),n.map((function(e){var n=e;return n.status===c.a.ERROR&&(n.status=void 0,n.accepted=void 0),t.addFile(n)}))})),t=function(e){var t=e.originalEvent,i=t.clipboardData;if(i&&i.items){var a=new h(i);if(a.isTable()){e.preventDefault();var r=a.convertToTableMarkdown();n(r)}else{var c=o(t);if(c){e.preventDefault();var d=s(t)||"image.png",u="{{".concat(d,"}}");return n(u),l(c.getAsFile(),d)}}}},o=function(e){for(var t=0;t<e.clipboardData.items.length;){var n=e.clipboardData.items[t];if(-1!==n.type.indexOf("image"))return n;t+=1}return!1},n=function(e,t){var n=e;t&&(n+="\n\n");var i=T.get(0),r=i.selectionStart,o=i.selectionEnd,s=a()(T).val().length,l=a()(T).val().substring(0,r),c=a()(T).val().substring(o,s);return a()(T).val(l+n+c),i.setSelectionRange(r+n.length,o+n.length),i.style.height="".concat(i.scrollHeight,"px"),C.get(0).dispatchEvent(new Event("input")),C.trigger("input")},i=function(t){a()(e).append('<input type="hidden" name="files[]" value="'.concat(u.a.escape(t),'">'))},s=function(e){var t;return window.clipboardData&&window.clipboardData.getData?t=window.clipboardData.getData("Text"):e.clipboardData&&e.clipboardData.getData&&(t=e.clipboardData.getData("text/plain")),(t=t.split("\r"))[0]};var D=function(){return S.addClass("hide")};return l=function(t,n){var i=new FormData;i.append("file",t,n),S.removeClass("hide"),e.find(".div-dropzone-alert").alert("close"),v.a.post(_,i).then((function(e){var t=e.data.link.markdown;!function(e,t){var n=a()(T),i=n.get(0),r=i.selectionStart,o=i.selectionEnd,s="{{".concat(e,"}}");n.val((function(e,n){return n.replace(s,t)})),i.setSelectionRange(r-s.length+t.length,o-s.length+t.length),n.trigger("change")}(n,t),D()})).catch((function(e){var t;t=e.response.data.message,w.removeClass("hide"),j.html(t),D()}))},r=function(e,t){var n=e.filter((function(e){return"uploading"===e.status||"queued"===e.status})).length,i=Object(g.c)("Attaching a file","Attaching %d files",n);t.text("".concat(i," -"))},e.find(".markdown-selector").click((function(e){e.preventDefault(),a()(this).closest(".gfm-form").find(".div-dropzone").click(),C.focus()})),O.get(0)?c.a.forElement(O.get(0)):null}c.a.autoDiscover=!1;var k=n(199);function w(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var j=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.form=t,this.textarea=this.form.find("textarea.js-gfm-input"),this.enableGFM=Object.assign({},s.b,i);var a=gl.GfmAutoComplete&&gl.GfmAutoComplete.dataSources||{};Object.keys(this.enableGFM).forEach((function(e){"emojis"!==e&&(n.enableGFM[e]=Boolean(a[e]))})),this.destroy(),this.setupForm(),this.form.data("glForm",this)}var t,n,i;return t=e,(n=[{key:"destroy",value:function(){this.clearEventListeners(),this.autoComplete&&this.autoComplete.destroy(),this.form.data("glForm",null)}},{key:"setupForm",value:function(){var e=this.form.is(":not(.gfm-form)");this.form.removeClass("js-new-note-form"),e&&(this.form.find(".div-dropzone").remove(),this.form.addClass("gfm-form"),gl.utils.disableButtonIfEmptyField(this.form.find(".js-note-text"),this.form.find(".js-comment-button, .js-note-new-discussion")),this.autoComplete=new s.a(gl.GfmAutoComplete&&gl.GfmAutoComplete.dataSources),this.autoComplete.setup(this.form.find(".js-gfm-input"),this.enableGFM),y(this.form),o()(this.textarea)),this.addEventListeners(),Object(k.b)(this.form),this.form.show(),this.isAutosizeable&&this.setupAutosize()}},{key:"setupAutosize",value:function(){var e=this;this.textarea.off("autosize:resized").on("autosize:resized",this.setHeightData.bind(this)),this.textarea.off("mouseup.autosize").on("mouseup.autosize",this.destroyAutosize.bind(this)),setTimeout((function(){o()(e.textarea),e.textarea.css("resize","vertical")}),0)}},{key:"setHeightData",value:function(){this.textarea.data("height",this.textarea.outerHeight())}},{key:"destroyAutosize",value:function(){var e=this.textarea.outerHeight();this.textarea.data("height")!==e&&(o.a.destroy(this.textarea),this.textarea.data("height",e),this.textarea.outerHeight(e),this.textarea.css("max-height",window.outerHeight))}},{key:"clearEventListeners",value:function(){this.textarea.off("focus"),this.textarea.off("blur"),Object(k.c)(this.form)}},{key:"addEventListeners",value:function(){this.textarea.on("focus",(function(){a()(this).closest(".md-area").addClass("is-focused")})),this.textarea.on("blur",(function(){a()(this).closest(".md-area").removeClass("is-focused")}))}}])&&w(t.prototype,n),i&&w(t,i),e}()},218:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));n(42);var i=n(0),a=n.n(i),r=(n(439),n(94)),o=n.n(r),s=n(8),l=n.n(s);n(440);function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}o.a.autoDiscover=!1;var d=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.active_backdrop=null,this.active_textarea=null,a()(document).on("click",".js-zen-enter",(function(e){return e.preventDefault(),a()(e.currentTarget).trigger("zen_mode:enter")})),a()(document).on("click",".js-zen-leave",(function(e){return e.preventDefault(),a()(e.currentTarget).trigger("zen_mode:leave")})),a()(document).on("zen_mode:enter",(function(e){t.enter(a()(e.target).closest(".md-area").find(".zen-backdrop"))})),a()(document).on("zen_mode:leave",(function(){t.exit()})),a()(document).on("keydown",(function(e){if(27===e.keyCode)return e.preventDefault(),a()(document).trigger("zen_mode:leave")}))}var t,n,i;return t=e,(n=[{key:"enter",value:function(e){l.a.pause(),this.active_backdrop=a()(e),this.active_backdrop.addClass("fullscreen"),this.active_textarea=this.active_backdrop.find("textarea"),this.active_textarea.removeAttr("style"),this.active_textarea.focus()}},{key:"exit",value:function(){if(this.active_textarea){l.a.unpause(),this.active_textarea.closest(".zen-backdrop").removeClass("fullscreen"),this.scrollTo(this.active_textarea),this.active_textarea=null,this.active_backdrop=null;var e=a()(".div-dropzone");e&&!e.hasClass("js-invalid-dropzone")&&o.a.forElement(".div-dropzone").enable()}}},{key:"scrollTo",value:function(e){return a.a.scrollTo(e,0,{offset:-150})}}])&&c(t.prototype,n),i&&c(t,i),e}()},233:function(e,t,n){"use strict";var i=n(108),a=n(348);i({target:"String",proto:!0,forced:n(349)("link")},{link:function(e){return a(this,"a","href",e)}})},2450:function(e,t,n){n(105),e.exports=n(2451)},2451:function(e,t,n){"use strict";n.r(t);var i=n(718),a=n(469),r=n(218),o=n(761),s=n(1141),l=n(1153);document.addEventListener("DOMContentLoaded",(function(){gon.features.snippetsVue?(Object(l.a)(),Object(o.a)()):(new i.a,new a.a,Object(o.a)(),new r.a,Object(s.a)())}))},257:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(65);var i=n(71);function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=function(){function e(t,n,a){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.field=t,this.isLocalStorageAvailable=i.a.isLocalStorageAccessSafe(),null!=n.join&&(n=n.join("/")),this.key="autosave/".concat(n),this.fallbackKey=a,this.field.data("autosave",this),this.restore(),this.field.on("input",(function(){return r.save()}))}var t,n,r;return t=e,(n=[{key:"restore",value:function(){if(this.isLocalStorageAvailable&&this.field.length){var e=window.localStorage.getItem(this.key),t=window.localStorage.getItem(this.fallbackKey);e?this.field.val(e):t&&this.field.val(t),this.field.trigger("input");var n=new Event("change",{bubbles:!0,cancelable:!1}),i=this.field.get(0);i&&i.dispatchEvent(n)}}},{key:"save",value:function(){if(this.field.length){var e=this.field.val();return this.isLocalStorageAvailable&&e?(this.fallbackKey&&window.localStorage.setItem(this.fallbackKey,e),window.localStorage.setItem(this.key,e)):this.reset()}}},{key:"reset",value:function(){if(this.isLocalStorageAvailable)return window.localStorage.removeItem(this.fallbackKey),window.localStorage.removeItem(this.key)}},{key:"dispose",value:function(){this.field.off("input")}}])&&a(t.prototype,n),r&&a(t,r),e}()},289:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n(63),a=n(163),r=n(166),o=n(167),s=n(150),l=n(205),c=n(206),d=n(207),u=n(100),p=n(44);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(n,!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=["text","password","email","number","url","tel","search","range","color","date","time","datetime","datetime-local","month","week"],g=i.a.extend({name:"BFormInput",mixins:[a.a,r.a,o.a,s.a,l.a,c.a,d.a],props:{type:{type:String,default:"text",validator:function(e){return Object(u.a)(v,e)}},noWheel:{type:Boolean,default:!1},min:{type:[String,Number],default:null},max:{type:[String,Number],default:null},step:{type:[String,Number],default:null},list:{type:String,default:null}},computed:{localType:function(){return Object(u.a)(v,this.type)?this.type:"text"}},watch:{noWheel:function(e){this.setWheelStopper(e)}},mounted:function(){this.setWheelStopper(this.noWheel)},deactivated:function(){this.setWheelStopper(!1)},activated:function(){this.setWheelStopper(this.noWheel)},beforeDestroy:function(){this.setWheelStopper(!1)},methods:{setWheelStopper:function(e){var t=this.$el;e?(Object(p.f)(t,"focus",this.onWheelFocus),Object(p.f)(t,"blur",this.onWheelBlur)):(Object(p.e)(t,"focus",this.onWheelFocus),Object(p.e)(t,"blur",this.onWheelBlur),Object(p.e)(document,"wheel",this.stopWheel))},onWheelFocus:function(e){Object(p.f)(document,"wheel",this.stopWheel)},onWheelBlur:function(e){Object(p.e)(document,"wheel",this.stopWheel)},stopWheel:function(e){e.preventDefault(),this.$el.blur()}},render:function(e){return e("input",{ref:"input",class:this.computedClass,directives:[{name:"model",rawName:"v-model",value:this.localValue,expression:"localValue"}],attrs:{id:this.safeId(),name:this.name,form:this.form||null,type:this.localType,disabled:this.disabled,placeholder:this.placeholder,required:this.required,autocomplete:this.autocomplete||null,readonly:this.readonly||this.plaintext,min:this.min,max:this.max,step:this.step,list:"password"!==this.localType?this.list:null,"aria-required":this.required?"true":null,"aria-invalid":this.computedAriaInvalid},domProps:{value:this.localValue},on:h({},this.$listeners,{input:this.onInput,change:this.onChange,blur:this.onBlur})})}})},310:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s}));n(24),n(49),n(56),n(30),n(40),n(72),n(740),n(430),n(548),n(18),n(55),n(68),n(36),n(67),n(41);var i=n(112),a=n(1);function r(e){return e/(i.a*i.a)}function o(e){return e/(i.a*i.a*i.a)}function s(e){return e<i.a?Object(a.e)(Object(a.a)("%{size} bytes"),{size:e}):e<i.a*i.a?Object(a.e)(Object(a.a)("%{size} KiB"),{size:(t=e,t/i.a).toFixed(2)}):e<i.a*i.a*i.a?Object(a.e)(Object(a.a)("%{size} MiB"),{size:r(e).toFixed(2)}):Object(a.e)(Object(a.a)("%{size} GiB"),{size:o(e).toFixed(2)});var t}},312:function(e,t,n){var i=n(651),a=0;e.exports=function(e){var t=++a;return i(e)+t}},327:function(e,t,n){"use strict";var i=n(103),a=n(153),r=n(25),o=n(60),s=n.n(o);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){l(e,t,n[t])}))}return e}const d={components:{GlIcon:i.a,GlNewButton:a.a},props:{title:{type:String,required:!1,default:""},dismissible:{type:Boolean,required:!1,default:!0},dismissLabel:{type:String,required:!1,default:"Dismiss"},variant:{type:String,required:!1,default:r.c.info,validator:function(e){return Object.keys(r.c).includes(e)}},primaryButtonLink:{type:String,required:!1,default:""},primaryButtonText:{type:String,required:!1,default:""},secondaryButtonLink:{type:String,required:!1,default:""},secondaryButtonText:{type:String,required:!1,default:""}},computed:{iconName:function(){return r.b[this.variant]},shouldRenderActions:function(){return Boolean(this.$slots.actions||this.actionButtons.length)},actionButtons:function(){return[{text:this.primaryButtonText,attrs:{href:this.primaryButtonLink,variant:r.a[this.variant].primary,category:r.q.primary},listeners:{click:this.primaryButtonClicked}},{text:this.secondaryButtonText,attrs:{href:this.secondaryButtonLink,variant:r.a[this.variant].secondary,category:r.q.secondary},listeners:{click:this.secondaryButtonClicked}}].reduce((function(e,t){if(!t.text)return e;var n=c({},t.attrs);return n.href||delete n.href,e.push(c({},t,{attrs:n})),e}),[])},variantClass:function(){return"gl-alert-".concat(this.variant)}},methods:{primaryButtonClicked:function(e){this.$emit("primaryAction",e)},secondaryButtonClicked:function(e){this.$emit("secondaryAction",e)},onDismiss:function(){this.$emit("dismiss")}}};const u=s()({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["gl-alert",e.variantClass],attrs:{role:"alert"}},[n("gl-icon",{class:{"gl-alert-icon":!0,"gl-alert-icon-no-title":!e.title},attrs:{name:e.iconName}}),e._v(" "),e.dismissible?n("button",{ref:"dismiss",staticClass:"gl-alert-dismiss",attrs:{type:"button","aria-label":e.dismissLabel},on:{click:e.onDismiss}},[n("gl-icon",{attrs:{name:"close"}})],1):e._e(),e._v(" "),e.title?n("h4",{staticClass:"gl-alert-title"},[e._v(e._s(e.title))]):e._e(),e._v(" "),n("div",{staticClass:"gl-alert-body"},[e._t("default")],2),e._v(" "),e.shouldRenderActions?n("div",{staticClass:"gl-alert-actions"},[e._t("actions",e._l(e.actionButtons,(function(t,i){return n("gl-new-button",e._g(e._b({key:i,staticClass:"gl-alert-action"},"gl-new-button",t.attrs,!1),t.listeners),[e._v("\n        "+e._s(t.text)+"\n      ")])})))],2):e._e()],1)},staticRenderFns:[]},void 0,d,void 0,!1,void 0,!1,void 0,void 0,void 0);t.a=u},328:function(e,t,n){"use strict";n(30),n(72);var i=n(760),a=(n(55),n(67),{html:"html",htm:"html",html_vm:"html",asp:"html",jade:"pug",pug:"pug",md:"markdown","md.rendered":"markdown",markdown:"markdown","markdown.rendered":"markdown",rst:"markdown",blink:"blink",css:"css",scss:"sass",sass:"sass",less:"less",json:"json",yaml:"yaml","YAML-tmLanguage":"yaml",yml:"yaml",xml:"xml",plist:"xml",xsd:"xml",dtd:"xml",xsl:"xml",xslt:"xml",resx:"xml",iml:"xml",xquery:"xml",tmLanguage:"xml",manifest:"xml",project:"xml",png:"image",jpeg:"image",jpg:"image",gif:"image",svg:"image",ico:"image",tif:"image",tiff:"image",psd:"image",psb:"image",ami:"image",apx:"image",bmp:"image",bpg:"image",brk:"image",cur:"image",dds:"image",dng:"image",exr:"image",fpx:"image",gbr:"image",img:"image",jbig2:"image",jb2:"image",jng:"image",jxr:"image",pbm:"image",pgf:"image",pic:"image",raw:"image",webp:"image",js:"javascript",ejs:"javascript",esx:"javascript",jsx:"react",tsx:"react",ini:"settings",dlc:"settings",dll:"settings",config:"settings",conf:"settings",properties:"settings",prop:"settings",settings:"settings",option:"settings",props:"settings",toml:"settings",prefs:"settings","sln.dotsettings":"settings","sln.dotsettings.user":"settings",ts:"typescript","d.ts":"typescript-def",marko:"markojs",pdf:"pdf",xlsx:"table",xls:"table",csv:"table",tsv:"table",vscodeignore:"vscode",vsixmanifest:"vscode",vsix:"vscode","code-workplace":"vscode",suo:"visualstudio",sln:"visualstudio",csproj:"visualstudio",vb:"visualstudio",pdb:"database",sql:"database",pks:"database",pkb:"database",accdb:"database",mdb:"database",sqlite:"database",cs:"csharp",zip:"zip",tar:"zip",gz:"zip",xz:"zip",bzip2:"zip",gzip:"zip","7z":"zip",rar:"zip",tgz:"zip",exe:"exe",msi:"exe",java:"java",jar:"java",jsp:"java",c:"c",m:"c",h:"h",cc:"cpp",cpp:"cpp",mm:"cpp",cxx:"cpp",hpp:"hpp",go:"go",py:"python",url:"url",sh:"console",ksh:"console",csh:"console",tcsh:"console",zsh:"console",bash:"console",bat:"console",cmd:"console",ps1:"powershell",psm1:"powershell",psd1:"powershell",ps1xml:"powershell",psc1:"powershell",pssc:"powershell",gradle:"gradle",doc:"word",docx:"word",rtf:"word",cer:"certificate",cert:"certificate",crt:"certificate",pub:"key",key:"key",pem:"key",asc:"key",gpg:"key",woff:"font",woff2:"font",ttf:"font",eot:"font",suit:"font",otf:"font",bmap:"font",fnt:"font",odttf:"font",ttc:"font",font:"font",fonts:"font",sui:"font",ntf:"font",mrf:"font",lib:"lib",bib:"lib",rb:"ruby",erb:"ruby",fs:"fsharp",fsx:"fsharp",fsi:"fsharp",fsproj:"fsharp",swift:"swift",ino:"arduino",dockerignore:"docker",dockerfile:"docker",tex:"tex",cls:"tex",sty:"tex",pptx:"powerpoint",ppt:"powerpoint",pptm:"powerpoint",potx:"powerpoint",pot:"powerpoint",potm:"powerpoint",ppsx:"powerpoint",ppsm:"powerpoint",pps:"powerpoint",ppam:"powerpoint",ppa:"powerpoint",webm:"movie",mkv:"movie",flv:"movie",vob:"movie",ogv:"movie",ogg:"movie",gifv:"movie",avi:"movie",mov:"movie",qt:"movie",wmv:"movie",yuv:"movie",rm:"movie",rmvb:"movie",mp4:"movie",m4v:"movie",mpg:"movie",mp2:"movie",mpeg:"movie",mpe:"movie",mpv:"movie",m2v:"movie",vdi:"virtual",vbox:"virtual","vbox-prev":"virtual",ics:"email",mp3:"music",flac:"music",m4a:"music",wma:"music",aiff:"music",coffee:"coffee",txt:"document",graphql:"graphql",rs:"rust",raml:"raml",xaml:"xaml",hs:"haskell",kt:"kotlin",kts:"kotlin",patch:"git",lua:"lua",clj:"clojure",cljs:"clojure",groovy:"groovy",r:"r",rmd:"r",dart:"dart",as:"actionscript",mxml:"mxml",ahk:"autohotkey",swf:"flash",swc:"swc",cmake:"cmake",asm:"assembly",a51:"assembly",inc:"assembly",nasm:"assembly",s:"assembly",ms:"assembly",agc:"assembly",ags:"assembly",aea:"assembly",argus:"assembly",mitigus:"assembly",binsource:"assembly",vue:"vue",ml:"ocaml",mli:"ocaml",cmx:"ocaml","js.map":"javascript-map","css.map":"css-map",lock:"lock",hbs:"handlebars",mustache:"handlebars",pl:"perl",pm:"perl",hx:"haxe","spec.ts":"test-ts","test.ts":"test-ts","ts.snap":"test-ts","spec.tsx":"test-jsx","test.tsx":"test-jsx","tsx.snap":"test-jsx","spec.jsx":"test-jsx","test.jsx":"test-jsx","jsx.snap":"test-jsx","spec.js":"test-js","test.js":"test-js","js.snap":"test-js","routing.ts":"angular-routing","routing.js":"angular-routing","module.ts":"angular","module.js":"angular","ng-template":"angular","component.ts":"angular-component","component.js":"angular-component","guard.ts":"angular-guard","guard.js":"angular-guard","service.ts":"angular-service","service.js":"angular-service","pipe.ts":"angular-pipe","pipe.js":"angular-pipe","filter.js":"angular-pipe","directive.ts":"angular-directive","directive.js":"angular-directive","resolver.ts":"angular-resolver","resolver.js":"angular-resolver",pp:"puppet",ex:"elixir",exs:"elixir",ls:"livescript",erl:"erlang",twig:"twig",jl:"julia",elm:"elm",pure:"purescript",tpl:"smarty",styl:"stylus",re:"reason",rei:"reason",cmj:"bucklescript",merlin:"merlin",v:"verilog",vhd:"verilog",sv:"verilog",svh:"verilog",nb:"mathematica",wl:"wolframlanguage",wls:"wolframlanguage",njk:"nunjucks",nunjucks:"nunjucks",robot:"robot",sol:"solidity",au3:"autoit",haml:"haml",yang:"yang",tf:"terraform","tf.json":"terraform",tfvars:"terraform",tfstate:"terraform","blade.php":"laravel","inky.php":"laravel",applescript:"applescript",cake:"cake",feature:"cucumber",nim:"nim",nimble:"nim",apib:"apiblueprint",apiblueprint:"apiblueprint",tag:"riot",vfl:"vfl",kl:"kl",pcss:"postcss",sss:"postcss",todo:"todo",cfml:"coldfusion",cfc:"coldfusion",lucee:"coldfusion",cabal:"cabal",nix:"nix",slim:"slim",http:"http",rest:"http",rql:"restql",restql:"restql",kv:"kivy",graphcool:"graphcool",sbt:"sbt","reducer.ts":"ngrx-reducer","rootReducer.ts":"ngrx-reducer","state.ts":"ngrx-state","actions.ts":"ngrx-actions","effects.ts":"ngrx-effects",cr:"crystal","drone.yml":"drone",cu:"cuda",cuh:"cuda",log:"log"}),r={".jscsrc":"json",".jshintrc":"json","tsconfig.json":"json","tslint.json":"json","composer.lock":"json",".jsbeautifyrc":"json",".esformatter":"json","cdp.pid":"json",".htaccess":"xml",".jshintignore":"settings",".buildignore":"settings",makefile:"settings",".mrconfig":"settings",".yardopts":"settings","gradle.properties":"gradle",gradlew:"gradle","gradle-wrapper.properties":"gradle",license:"certificate","license.md":"certificate","license.md.rendered":"certificate","license.txt":"certificate",licence:"certificate","licence.md":"certificate","licence.md.rendered":"certificate","licence.txt":"certificate",dockerfile:"docker","docker-compose.yml":"docker",".mailmap":"email",".gitignore":"git",".gitconfig":"git",".gitattributes":"git",".gitmodules":"git",".gitkeep":"git","git-history":"git",".Rhistory":"r","cmakelists.txt":"cmake","cmakecache.txt":"cmake","angular-cli.json":"angular",".angular-cli.json":"angular",".vfl":"vfl",".kl":"kl","postcss.config.js":"postcss",".postcssrc.js":"postcss","project.graphcool":"graphcool","webpack.js":"webpack","webpack.ts":"webpack","webpack.base.js":"webpack","webpack.base.ts":"webpack","webpack.config.js":"webpack","webpack.config.ts":"webpack","webpack.common.js":"webpack","webpack.common.ts":"webpack","webpack.config.common.js":"webpack","webpack.config.common.ts":"webpack","webpack.config.common.babel.js":"webpack","webpack.config.common.babel.ts":"webpack","webpack.dev.js":"webpack","webpack.dev.ts":"webpack","webpack.config.dev.js":"webpack","webpack.config.dev.ts":"webpack","webpack.config.dev.babel.js":"webpack","webpack.config.dev.babel.ts":"webpack","webpack.prod.js":"webpack","webpack.prod.ts":"webpack","webpack.server.js":"webpack","webpack.server.ts":"webpack","webpack.client.js":"webpack","webpack.client.ts":"webpack","webpack.config.server.js":"webpack","webpack.config.server.ts":"webpack","webpack.config.client.js":"webpack","webpack.config.client.ts":"webpack","webpack.config.production.babel.js":"webpack","webpack.config.production.babel.ts":"webpack","webpack.config.prod.babel.js":"webpack","webpack.config.prod.babel.ts":"webpack","webpack.config.prod.js":"webpack","webpack.config.prod.ts":"webpack","webpack.config.production.js":"webpack","webpack.config.production.ts":"webpack","webpack.config.staging.js":"webpack","webpack.config.staging.ts":"webpack","webpack.config.babel.js":"webpack","webpack.config.babel.ts":"webpack","webpack.config.base.babel.js":"webpack","webpack.config.base.babel.ts":"webpack","webpack.config.base.js":"webpack","webpack.config.base.ts":"webpack","webpack.config.staging.babel.js":"webpack","webpack.config.staging.babel.ts":"webpack","webpack.config.coffee":"webpack","webpack.config.test.js":"webpack","webpack.config.test.ts":"webpack","webpack.config.vendor.js":"webpack","webpack.config.vendor.ts":"webpack","webpack.config.vendor.production.js":"webpack","webpack.config.vendor.production.ts":"webpack","webpack.test.js":"webpack","webpack.test.ts":"webpack","webpack.dist.js":"webpack","webpack.dist.ts":"webpack","webpackfile.js":"webpack","webpackfile.ts":"webpack","ionic.config.json":"ionic",".io-config.json":"ionic","gulpfile.js":"gulp","gulpfile.ts":"gulp","gulpfile.babel.js":"gulp","package.json":"nodejs","package-lock.json":"nodejs",".nvmrc":"nodejs",".npmignore":"npm",".npmrc":"npm",".yarnrc":"yarn","yarn.lock":"yarn",".yarnclean":"yarn",".yarn-integrity":"yarn","yarn-error.log":"yarn","androidmanifest.xml":"android",".env":"tune",".env.example":"tune",".babelrc":"babel","contributing.md":"contributing","contributing.md.rendered":"contributing","readme.md":"readme","readme.md.rendered":"readme",changelog:"changelog","changelog.md":"changelog","changelog.md.rendered":"changelog",CREDITS:"credits","credits.txt":"credits","credits.md":"credits","credits.md.rendered":"credits",".flowconfig":"flow","favicon.png":"favicon","karma.conf.js":"karma","karma.conf.ts":"karma","karma.conf.coffee":"karma","karma.config.js":"karma","karma.config.ts":"karma","karma-main.js":"karma","karma-main.ts":"karma",".bithoundrc":"bithound","appveyor.yml":"appveyor",".travis.yml":"travis","protractor.conf.js":"protractor","protractor.conf.ts":"protractor","protractor.conf.coffee":"protractor","protractor.config.js":"protractor","protractor.config.ts":"protractor","fuse.js":"fusebox",procfile:"heroku",".editorconfig":"editorconfig",".gitlab-ci.yml":"gitlab",".bowerrc":"bower","bower.json":"bower",".eslintrc.js":"eslint",".eslintrc.yaml":"eslint",".eslintrc.yml":"eslint",".eslintrc.json":"eslint",".eslintrc":"eslint",".eslintignore":"eslint","code_of_conduct.md":"conduct","code_of_conduct.md.rendered":"conduct",".watchmanconfig":"watchman","aurelia.json":"aurelia","mocha.opts":"mocha",jenkinsfile:"jenkins","firebase.json":"firebase",".firebaserc":"firebase",Rakefile:"ruby","rollup.config.js":"rollup","rollup.config.ts":"rollup","rollup-config.js":"rollup","rollup-config.ts":"rollup","rollup.config.prod.js":"rollup","rollup.config.prod.ts":"rollup","rollup.config.dev.js":"rollup","rollup.config.dev.ts":"rollup","rollup.config.prod.vendor.js":"rollup","rollup.config.prod.vendor.ts":"rollup",".hhconfig":"hack",".stylelintrc":"stylelint","stylelint.config.js":"stylelint",".stylelintrc.json":"stylelint",".stylelintrc.yaml":"stylelint",".stylelintrc.yml":"stylelint",".stylelintrc.js":"stylelint",".stylelintignore":"stylelint",".codeclimate.yml":"code-climate",".prettierrc":"prettier","prettier.config.js":"prettier",".prettierrc.js":"prettier",".prettierrc.json":"prettier",".prettierrc.yaml":"prettier",".prettierrc.yml":"prettier","nodemon.json":"nodemon",".sonarrc":"sonar",browserslist:"browserlist",".browserslistrc":"browserlist",".snyk":"snyk",".drone.yml":"drone"};var o={components:{icon:n(45).a,GlLoadingIcon:i.a},props:{fileName:{type:String,required:!0},folder:{type:Boolean,required:!1,default:!1},opened:{type:Boolean,required:!1,default:!1},loading:{type:Boolean,required:!1,default:!1},size:{type:Number,required:!1,default:16},cssClasses:{type:String,required:!1,default:""}},computed:{spriteHref:function(){var e,t=(e=this.fileName,r[e]||a[e?e.split(".").pop():""]||""||"file");return"".concat(gon.sprite_file_icons,"#").concat(t)},folderIconName:function(){return this.opened?"folder-open":"folder"},iconSizeClass:function(){return this.size?"s".concat(this.size):""}}},s=n(4),l=Object(s.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[e.loading||e.folder?e._e():n("svg",{class:[e.iconSizeClass,e.cssClasses]},[n("use",e._b({},"use",{"xlink:href":e.spriteHref},!1))]),e._v(" "),!e.loading&&e.folder?n("icon",{staticClass:"folder-icon",attrs:{name:e.folderIconName,size:e.size}}):e._e(),e._v(" "),e.loading?n("gl-loading-icon",{attrs:{inline:!0}}):e._e()],1)}),[],!1,null,null,null);t.a=l.exports},345:function(e,t,n){"use strict";n(26),n(27);var i={init:function(e){this.hook=e,this.destroyed=!1,this.config=e.config.InputSetter||(this.hook.config.InputSetter={}),this.eventWrapper={},this.addEvents()},addEvents:function(){this.eventWrapper.setInputs=this.setInputs.bind(this),this.hook.list.list.addEventListener("click.dl",this.eventWrapper.setInputs)},removeEvents:function(){this.hook.list.list.removeEventListener("click.dl",this.eventWrapper.setInputs)},setInputs:function(e){var t=this;if(!this.destroyed){var n=e.detail.selected;Array.isArray(this.config)||(this.config=[this.config]),this.config.forEach((function(e){return t.setInput(e,n)}))}},setInput:function(e,t){var n=e.input||this.hook.trigger,i=t.getAttribute(e.valueAttribute),a=e.inputAttribute;return n.hasAttribute(a)?n.setAttribute(a,i):"INPUT"===n.tagName?n.value=i:n.textContent=i},destroy:function(){this.destroyed=!0,this.removeEvents()}};t.a=i},377:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n(24),n(49),n(56),n(40),n(65),n(18),n(36),n(41);var i=n(0),a=n.n(i),r=(n(681),n(1)),o=n(11),s=n(14);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.selector=t.selector,this.dataType=t.dataType,this.fieldName=t.fieldName,this.lockVersion=t.lockVersion,this.taskListContainerSelector="".concat(this.selector," .js-task-list-container"),this.updateHandler=this.update.bind(this),this.onSuccess=t.onSuccess||function(){},this.onError=t.onError||function(e){var t="";return e.response.data&&"object"===c(e.response.data)&&(t=e.response.data.errors.join(" ")),new s.a(t||Object(r.a)("Update failed"),"alert")},this.init()}var t,n,i;return t=e,(n=[{key:"init",value:function(){this.disable(),a()(this.taskListContainerSelector).taskList("enable"),a()(document).on("tasklist:changed",this.taskListContainerSelector,this.updateHandler)}},{key:"getTaskListTarget",value:function(e){return e&&e.currentTarget?a()(e.currentTarget):a()(this.taskListContainerSelector)}},{key:"disableTaskListItems",value:function(e){this.getTaskListTarget(e).taskList("disable")}},{key:"enableTaskListItems",value:function(e){this.getTaskListTarget(e).taskList("enable")}},{key:"disable",value:function(){this.disableTaskListItems(),a()(document).off("tasklist:changed",this.taskListContainerSelector)}},{key:"update",value:function(e){var t,n=this,i=a()(e.target),r=e.detail,s=r.index,c=r.checked,d=r.lineNumber,u=r.lineSource,p={};return p[this.dataType]=(l(t={},this.fieldName,i.val()),l(t,"lock_version",this.lockVersion),l(t,"update_task",{index:s,checked:c,line_number:d,line_source:u}),t),this.disableTaskListItems(e),o.a.patch(i.data("updateUrl")||a()("form.js-issuable-update").attr("action"),p).then((function(t){var i=t.data;return n.lockVersion=i.lock_version,n.enableTaskListItems(e),n.onSuccess(i)})).catch((function(t){var i=t.response;return n.enableTaskListItems(e),n.onError(i.data)}))}}])&&d(t.prototype,n),i&&d(t,i),e}()},469:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return u}));n(26),n(78),n(85),n(18),n(64),n(36),n(27);var i=n(0),a=n.n(i),r=(n(558),n(14)),o=n(16),s=n(11),l=n(1);function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var d=function(e,t){e&&t&&function(e){switch(e){case"balsamiq":return Promise.all([n.e(14),n.e(20),n.e(21),n.e(31),n.e(37)]).then(n.bind(null,1080));case"notebook":return Promise.all([n.e(33),n.e(234),n.e(43)]).then(n.bind(null,1077));case"openapi":return Promise.all([n.e(236),n.e(44)]).then(n.bind(null,1081));case"pdf":return Promise.all([n.e(14),n.e(21),n.e(32),n.e(237),n.e(227)]).then(n.bind(null,1078));case"sketch":return Promise.all([n.e(14),n.e(20),n.e(21),n.e(240),n.e(229)]).then(n.bind(null,1082));case"stl":return Promise.all([n.e(241),n.e(230)]).then(n.bind(null,1079));default:return Promise.resolve()}}(t).then((function(t){return null==t?void 0:t.default(e)})).catch((function(e){throw Object(r.a)(Object(l.a)("Error loading file viewer.")),e}))},u=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=document.querySelector('.blob-viewer[data-type="rich"]'),i=null==n?void 0:null===(t=n.dataset)||void 0===t?void 0:t.richType;e.initAuxiliaryViewer(),d(n,i),this.initMainViewers()}var t,n,i;return t=e,i=[{key:"initAuxiliaryViewer",value:function(){var t=document.querySelector('.blob-viewer[data-type="auxiliary"]');t&&e.loadViewer(t)}},{key:"loadViewer",value:function(e){var t=e,n=t.getAttribute("data-url");return!n||t.getAttribute("data-loaded")||t.getAttribute("data-loading")?Promise.resolve(t):(t.setAttribute("data-loading","true"),s.a.get(n).then((function(e){var n=e.data;return t.innerHTML=n.html,t.setAttribute("data-loaded","true"),t})))}}],(n=[{key:"initMainViewers",value:function(){this.$fileHolder=a()(".file-holder"),this.$fileHolder.length&&(this.switcher=document.querySelector(".js-blob-viewer-switcher"),this.switcherBtns=document.querySelectorAll(".js-blob-viewer-switch-btn"),this.copySourceBtn=document.querySelector(".js-copy-blob-source-btn"),this.simpleViewer=this.$fileHolder[0].querySelector('.blob-viewer[data-type="simple"]'),this.richViewer=this.$fileHolder[0].querySelector('.blob-viewer[data-type="rich"]'),this.initBindings(),this.switchToInitialViewer())}},{key:"switchToInitialViewer",value:function(){var e=this.$fileHolder[0].querySelector(".blob-viewer:not(.hidden)").getAttribute("data-type");this.switcher&&0===window.location.hash.indexOf("#L")&&(e="simple"),this.switchToViewer(e)}},{key:"initBindings",value:function(){var e=this;this.switcherBtns.length&&Array.from(this.switcherBtns).forEach((function(t){t.addEventListener("click",e.switchViewHandler.bind(e))})),this.copySourceBtn&&this.copySourceBtn.addEventListener("click",(function(){return e.copySourceBtn.classList.contains("disabled")?e.copySourceBtn.blur():e.switchToViewer("simple")}))}},{key:"switchViewHandler",value:function(e){var t=e.currentTarget;e.preventDefault(),this.switchToViewer(t.getAttribute("data-viewer"))}},{key:"toggleCopyButtonState",value:function(){this.copySourceBtn&&(this.simpleViewer.getAttribute("data-loaded")?(this.copySourceBtn.setAttribute("title",Object(l.a)("Copy file contents")),this.copySourceBtn.classList.remove("disabled")):this.activeViewer===this.simpleViewer?(this.copySourceBtn.setAttribute("title",Object(l.a)("Wait for the file to load to copy its contents")),this.copySourceBtn.classList.add("disabled")):(this.copySourceBtn.setAttribute("title",Object(l.a)("Switch to the source to copy the file contents")),this.copySourceBtn.classList.add("disabled")),a()(this.copySourceBtn).tooltip("_fixTitle"))}},{key:"switchToViewer",value:function(t){var n=this,i=this.$fileHolder[0].querySelector(".blob-viewer[data-type='".concat(t,"']"));if(this.activeViewer!==i){var s=document.querySelector(".js-blob-viewer-switch-btn.active"),c=document.querySelector(".js-blob-viewer-switch-btn[data-viewer='".concat(t,"']")),d=this.$fileHolder[0].querySelector(".blob-viewer:not([data-type='".concat(t,"'])"));s&&s.classList.remove("active"),c&&(c.classList.add("active"),c.blur()),d&&d.classList.add("hidden"),i.classList.remove("hidden"),this.activeViewer=i,this.toggleCopyButtonState(),e.loadViewer(i).then((function(e){a()(e).renderGFM(),n.$fileHolder.trigger("highlight:line"),Object(o.q)(),n.toggleCopyButtonState()})).catch((function(){return new r.a(Object(l.a)("Error loading viewer"))}))}}}])&&c(t.prototype,n),i&&c(t,i),e}()},491:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return c}));var i=n(63),a=n(102),r=n(544);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l={id:{type:String,default:null},tag:{type:String,default:"div"},isText:{type:Boolean,default:!1}},c=i.a.extend({name:"BInputGroupAddon",functional:!0,props:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(n,!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},l,{append:{type:Boolean,default:!1}}),render:function(e,t){var n=t.props,i=t.data,o=t.children;return e(n.tag,Object(a.a)(i,{class:{"input-group-append":n.append,"input-group-prepend":!n.append},attrs:{id:n.id}}),n.isText?[e(r.a,o)]:o)}})},544:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(63),a=n(102),r={tag:{type:String,default:"div"}},o=i.a.extend({name:"BInputGroupText",functional:!0,props:r,render:function(e,t){var n=t.props,i=t.data,r=t.children;return e(n.tag,Object(a.a)(i,{staticClass:"input-group-text"}),r)}})},550:function(e,t,n){"use strict";n.d(t,"a",(function(){return $}));n(24),n(49),n(30),n(28),n(42),n(65),n(35),n(38),n(18),n(64),n(1039),n(311),n(55),n(68),n(91),n(67),n(89);var i=n(312),a=n.n(i),r=n(93),o=n.n(r),s=n(0),l=n.n(s),c=n(51),d=n.n(c),u=n(157),p=n.n(u),f=(n(1002),n(838),n(17)),h=n(2532),m=n(200),v=n(379),g=n(11),b=n(33),y=n(14),k=n(164),w=(n(77),n(259)),j=n(345);function S(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var _=Object.assign({},j.a),x=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dropdownTrigger=t.dropdownTrigger,this.dropdownList=t.dropdownList,this.noteTypeInput=t.noteTypeInput,this.submitButton=t.submitButton,this.closeButton=t.closeButton,this.reopenButton=t.reopenButton}var t,n,i;return t=e,(n=[{key:"initDroplab",value:function(){this.droplab=new w.a;var e=this.setConfig();this.droplab.init(this.dropdownTrigger,this.dropdownList,[_],e)}},{key:"setConfig",value:function(){var e={InputSetter:[{input:this.noteTypeInput,valueAttribute:"data-value"},{input:this.submitButton,valueAttribute:"data-submit-text"}]};return this.closeButton&&e.InputSetter.push({input:this.closeButton,valueAttribute:"data-close-text"},{input:this.closeButton,valueAttribute:"data-close-text",inputAttribute:"data-alternative-text"}),this.reopenButton&&e.InputSetter.push({input:this.reopenButton,valueAttribute:"data-reopen-text"},{input:this.reopenButton,valueAttribute:"data-reopen-text",inputAttribute:"data-alternative-text"}),e}}])&&S(t.prototype,n),i&&S(t,i),e}(),C=n(208),N=n(464),O=n(257),E=n(377),T=n(16),D=n(62),B=n(1);function F(e,t,n){return(F=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return n&&L(a,n.prototype),a}).apply(null,arguments)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function V(e,t,n){return t&&P(e.prototype,t),n&&P(e,n),e}function A(e){return e.replace(/\r\n/g,"\n")}window.autosize=p.a;var I=/^\/\w+.*$/gm,$=function(){function e(t,n,i,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:k.b;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.updateTargetButtons=this.updateTargetButtons.bind(this),this.updateComment=this.updateComment.bind(this),this.visibilityChange=this.visibilityChange.bind(this),this.cancelDiscussionForm=this.cancelDiscussionForm.bind(this),this.onAddDiffNote=this.onAddDiffNote.bind(this),this.onAddImageDiffNote=this.onAddImageDiffNote.bind(this),this.setupDiscussionNoteForm=this.setupDiscussionNoteForm.bind(this),this.onReplyToDiscussionNote=this.onReplyToDiscussionNote.bind(this),this.removeNote=this.removeNote.bind(this),this.cancelEdit=this.cancelEdit.bind(this),this.updateNote=this.updateNote.bind(this),this.addDiscussionNote=this.addDiscussionNote.bind(this),this.addNoteError=this.addNoteError.bind(this),this.addNote=this.addNote.bind(this),this.resetMainTargetForm=this.resetMainTargetForm.bind(this),this.refresh=this.refresh.bind(this),this.keydownNoteText=this.keydownNoteText.bind(this),this.toggleCommitList=this.toggleCommitList.bind(this),this.postComment=this.postComment.bind(this),this.clearFlashWrapper=this.clearFlash.bind(this),this.onHashChange=this.onHashChange.bind(this),this.notes_url=t,this.note_ids=n,this.enableGFM=r,this.updatedNotesTrackingMap={},this.last_fetched_at=i,this.noteable_url=document.URL,this.notesCountBadge||(this.notesCountBadge=l()(".issuable-details").find(".notes-tab .badge")),this.basePollingInterval=15e3,this.maxPollingSteps=4,this.$wrapperEl=Object(T.x)()?l()(document).find(".diffs"):l()(document),this.cleanBinding(),this.addBinding(),this.setPollingInterval(),this.setupMainTargetNoteForm(r),this.taskList=new E.a({dataType:"note",fieldName:"note",selector:".notes"}),this.collapseLongCommitList(),this.setViewType(a),"merge_requests"===Object(T.l)(1)&&l()(".note-edit-form").clone().addClass("mr-note-edit-form").insertAfter(".note-edit-form");var o=Object(b.d)(),s=o&&document.getElementById(o);s&&this.loadLazyDiff({currentTarget:s})}return V(e,null,[{key:"initialize",value:function(t,n,i,a,r){this.instance||(this.instance=new e(t,n,i,a,r))}},{key:"getInstance",value:function(){return this.instance}}]),V(e,[{key:"setViewType",value:function(e){this.view=d.a.get("diff_view")||e}},{key:"addBinding",value:function(){this.$wrapperEl.on("click",".js-note-edit",this.showEditForm.bind(this)),this.$wrapperEl.on("click",".note-edit-cancel",this.cancelEdit),this.$wrapperEl.on("click",".js-comment-submit-button",this.postComment),this.$wrapperEl.on("click",".js-comment-save-button",this.updateComment),this.$wrapperEl.on("keyup input",".js-note-text",this.updateTargetButtons),this.$wrapperEl.on("click",".js-comment-resolve-button",this.postComment),this.$wrapperEl.on("click",".js-note-delete",this.removeNote),this.$wrapperEl.on("click",".js-note-attachment-delete",this.removeAttachment),this.$wrapperEl.on("change",".js-note-attachment-input",this.updateFormAttachment),this.$wrapperEl.on("click",".js-discussion-reply-button",this.onReplyToDiscussionNote),this.$wrapperEl.on("click",".js-add-diff-note-button",this.onAddDiffNote),this.$wrapperEl.on("click",".js-add-image-diff-note-button",this.onAddImageDiffNote),this.$wrapperEl.on("click",".js-close-discussion-note-form",this.cancelDiscussionForm),this.$wrapperEl.on("click",".system-note-commit-list-toggler",this.toggleCommitList),this.$wrapperEl.on("click",".js-toggle-lazy-diff",this.loadLazyDiff),this.$wrapperEl.on("click",".js-toggle-lazy-diff-retry-button",this.onClickRetryLazyLoad.bind(this)),this.$wrapperEl.on("visibilitychange",this.visibilityChange),this.$wrapperEl.on("issuable:change",this.refresh),this.$wrapperEl.on("ajax:success",".js-main-target-form",this.addNote),this.$wrapperEl.on("ajax:success",".js-discussion-note-form",this.addDiscussionNote),this.$wrapperEl.on("ajax:success",".js-main-target-form",this.resetMainTargetForm),this.$wrapperEl.on("ajax:complete",".js-main-target-form",this.reenableTargetFormSubmitButton),this.$wrapperEl.on("keydown",".js-note-text",this.keydownNoteText),l()(window).on("hashchange",this.onHashChange)}},{key:"cleanBinding",value:function(){this.$wrapperEl.off("click",".js-note-edit"),this.$wrapperEl.off("click",".note-edit-cancel"),this.$wrapperEl.off("click",".js-note-delete"),this.$wrapperEl.off("click",".js-note-attachment-delete"),this.$wrapperEl.off("click",".js-discussion-reply-button"),this.$wrapperEl.off("click",".js-add-diff-note-button"),this.$wrapperEl.off("click",".js-add-image-diff-note-button"),this.$wrapperEl.off("visibilitychange"),this.$wrapperEl.off("keyup input",".js-note-text"),this.$wrapperEl.off("click",".js-note-target-reopen"),this.$wrapperEl.off("click",".js-note-target-close"),this.$wrapperEl.off("keydown",".js-note-text"),this.$wrapperEl.off("click",".js-comment-resolve-button"),this.$wrapperEl.off("click",".system-note-commit-list-toggler"),this.$wrapperEl.off("click",".js-toggle-lazy-diff"),this.$wrapperEl.off("click",".js-toggle-lazy-diff-retry-button"),this.$wrapperEl.off("ajax:success",".js-main-target-form"),this.$wrapperEl.off("ajax:success",".js-discussion-note-form"),this.$wrapperEl.off("ajax:complete",".js-main-target-form"),l()(window).off("hashchange",this.onHashChange)}},{key:"keydownNoteText",value:function(e){var t,n,i;if(!Object(T.B)(e)){var a=l()(e.target);switch(e.which){case 38:if(""!==a.val())return;if((i=l()("li.note[data-author-id='".concat(gon.current_user_id,"'][data-editable]:last"),a.closest(".note, .notes_holder, #notes"))).length)return i.find(".js-note-edit").trigger("click",[!0,i]);break;case 27:if((t=a.closest(".js-discussion-note-form")).length){if(""!==a.val()&&!window.confirm(Object(B.a)("Are you sure you want to cancel creating this comment?")))return;return void this.removeDiscussionNoteForm(t)}if((n=a.closest(".note")).length){if(a.closest("form").data("originalNote")!==a.val()&&!window.confirm(Object(B.a)("Are you sure you want to cancel editing this comment?")))return;return this.removeNoteEditForm(n)}}}}},{key:"initRefresh",value:function(){var t=this;e.interval&&clearInterval(e.interval),e.interval=setInterval((function(){return t.refresh()}),this.pollingInterval)}},{key:"refresh",value:function(){if(!document.hidden)return this.getContent()}},{key:"getContent",value:function(){var e=this;this.refreshing||(this.refreshing=!0,g.a.get("".concat(this.notes_url,"?html=true"),{headers:{"X-Last-Fetched-At":this.last_fetched_at}}).then((function(t){var n=t.data,i=n.notes;e.last_fetched_at=n.last_fetched_at,e.setPollingInterval(n.notes.length),l.a.each(i,(function(t,n){return e.renderNote(n)})),e.refreshing=!1})).catch((function(){e.refreshing=!1})))}},{key:"setPollingInterval",value:function(e){null==e&&(e=!0);var t=this.basePollingInterval*Math.pow(2,this.maxPollingSteps-1);return e?this.pollingInterval=this.basePollingInterval:this.pollingInterval<t&&(this.pollingInterval*=2),this.initRefresh()}},{key:"handleQuickActions",value:function(t){var n;t.commands_changes&&("merge"in t.commands_changes&&e.checkMergeRequestStatus(),"emoji_award"in t.commands_changes&&(n=l()(".js-awards-block").eq(0),Object(N.b)().then((function(e){e.addAwardToEmojiBar(n,t.commands_changes.emoji_award),e.scrollToAwards()})).catch((function(){}))))}},{key:"setupNewNote",value:function(t){Object(D.l)(t.find(".js-timeago"),!1),this.collapseLongCommitList(),this.taskList.init(),e.updateNoteTargetSelector(t),this.$noteToCleanHighlight=t}},{key:"onHashChange",value:function(){this.$noteToCleanHighlight&&e.updateNoteTargetSelector(this.$noteToCleanHighlight),this.$noteToCleanHighlight=null}},{key:"renderNote",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l()(".main-notes-list");if(t.discussion_html)return this.renderDiscussionNote(t,n);if(t.valid){var a=i.find("#note_".concat(t.id));if(e.isNewNote(t,this.note_ids)){if(Object(T.x)())return;this.note_ids.push(t.id),i.length&&i.find(".system-note.being-posted").remove();var r=e.animateAppendNote(t.html,i);return this.setupNewNote(r),this.refresh(),this.updateNotesCount(1)}if(e.isUpdatedNote(t,a)){var o=a.hasClass("is-editing"),s=A(a.find(".original-note-content").text().trim()),c=a.find(".js-note-text"),d=c.val(),u=A(t.note),p=d===s||d===u;if(o&&p)c.val(t.note),this.updatedNotesTrackingMap[t.id]=t;else if(o&&!p)this.putConflictEditWarningInPlace(t,a),this.updatedNotesTrackingMap[t.id]=t;else{var f=e.animateUpdateNote(t.html,a);this.setupNewNote(f)}}}else t.errors&&t.errors.commands_only&&(t.commands_changes&&Object.keys(t.commands_changes).length>0&&i.find(".system-note.being-posted").remove(),this.addFlash(t.errors.commands_only,"notice",this.parentTimeline.get(0)),this.refresh())}},{key:"isParallelView",value:function(){return"parallel"===d.a.get("diff_view")}},{key:"renderDiscussionNote",value:function(t,n){var i,a;if(e.isNewNote(t,this.note_ids)){this.note_ids.push(t.id);var r=n||l()('.js-discussion-note-form[data-discussion-id="'.concat(t.discussion_id,'"]'));a=r.length||!t.discussion_line_code?r.closest("tr"):l()("#".concat(t.discussion_line_code)),t.on_image&&(a=r);var o=this.isParallelView()?r.find("#line_type").val():"old",s=a.prevAll(".line_holder").first().find(".js-avatar-container.".concat(o,"_line"));if((i=l()('.notes[data-discussion-id="'.concat(t.discussion_id,'"]'))).length||(i=r.closest(".discussion").find(".notes")),0===i.length)if(t.diff_discussion_html){var c=l()(t.diff_discussion_html).renderGFM();if(!this.isParallelView()||a.hasClass("js-temp-notes-holder")||t.on_image)a.after(c);else{var d=c.find('.notes[data-discussion-id="'.concat(t.discussion_id,'"]')),u=d.closest(".notes-content").attr("class").split(" ").join(".");a.find(".".concat(u," .content")).append(d.closest(".content").children())}}else e.animateAppendNote(t.discussion_html,l()(".main-notes-list"));else e.animateAppendNote(t.html,i);return void 0!==gl.diffNotesCompileComponents&&t.discussion_resolvable&&(gl.diffNotesCompileComponents(),this.renderDiscussionAvatar(s,t)),Object(D.l)(l()(".js-timeago"),!1),e.checkMergeRequestStatus(),this.updateNotesCount(1)}}},{key:"getLineHolder",value:function(e){return l()(e).closest(".notes_holder").prevAll(".line_holder").first().get(0)}},{key:"renderDiscussionAvatar",value:function(e,t){var n=e.find(".diff-comment-avatar-holders");n.length||((n=document.createElement("diff-note-avatars")).setAttribute("discussion-id",t.discussion_id),e.append(n),gl.diffNotesCompileComponents())}},{key:"resetMainTargetForm",value:function(e){var t=l()(".js-main-target-form");t.find(".js-errors").remove(),t.find(".js-md-write-button").click(),t.find(".js-note-text").val("").trigger("input"),t.find(".js-note-text").data("autosave").reset();var n=document.createEvent("Event");n.initEvent("autosize:update",!0,!1),t.find(".js-autosize")[0].dispatchEvent(n),this.updateTargetButtons(e)}},{key:"reenableTargetFormSubmitButton",value:function(){return l()(".js-main-target-form").find(".js-note-text").trigger("input")}},{key:"setupMainTargetNoteForm",value:function(t){var n=l()(".js-new-note-form");this.formClone=n.clone(),this.setupNoteForm(n,t),n.removeClass("js-new-note-form"),n.addClass("js-main-target-form"),n.find("#note_line_code").remove(),n.find("#note_position").remove(),n.find("#note_type").val(""),n.find("#note_project_id").remove(),n.find("#in_reply_to_discussion_id").remove(),n.find(".js-comment-resolve-button").closest("comment-and-resolve-btn").remove(),this.parentTimeline=n.parents(".timeline"),n.length&&e.initCommentTypeToggle(n.get(0))}},{key:"setupNoteForm",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k.b;this.glForm=new C.a(e,t);var n=e.find(".js-note-text"),i=[Object(B.d)("NoteForm|Note"),e.find("#note_noteable_type").val(),e.find("#note_noteable_id").val(),e.find("#note_commit_id").val(),e.find("#note_type").val(),e.find("#note_project_id").val(),e.find("#in_reply_to_discussion_id").val(),e.find("#note_line_code").val(),e.find("#note_position").val()];return new O.a(n,i)}},{key:"addNote",value:function(e,t){return this.renderNote(t)}},{key:"addNoteError",value:function(e){var t;return e.hasClass("js-main-target-form")?t=e.parents(".timeline"):e.hasClass("js-discussion-note-form")&&(t=e.closest(".discussion-notes").find(".notes")),this.addFlash(Object(B.a)("Your comment could not be submitted! Please check your network connection and try again."),"alert",t.get(0))}},{key:"updateNoteError",value:function(){new y.a(Object(B.a)("Your comment could not be updated! Please check your network connection and try again."))}},{key:"addDiscussionNote",value:function(e,t,n){if(null!=e.attr("data-resolve-all")){var i=e.data("discussionId"),a=e.data("noteableIid");null!=ResolveService&&ResolveService.toggleResolveForDiscussion(a,i)}this.renderNote(t,e),n&&this.removeDiscussionNoteForm(e)}},{key:"updateNote",value:function(e,t){var n=l()(e.html);this.revertNoteEditForm(t),n.renderGFM(),l()(".note-row-".concat(e.id)).replaceWith(n),this.setupNewNote(n),void 0!==gl.diffNotesCompileComponents&&gl.diffNotesCompileComponents()}},{key:"checkContentToAllowEditing",value:function(e){var t=e.find(".original-note-content").text().trim(),n=!0;e.find(".js-note-text").val()===t?this.removeNoteEditForm(e):(Object(T.z)(e.get(0))||Object(T.N)(e),e.find(".js-finish-edit-warning").show(),n=!1);return n}},{key:"showEditForm",value:function(e){e.preventDefault();var t=l()(e.target),n=l()(this.getEditFormSelector(t)),i=t.closest(".note"),a=l()(".note.is-editing:visible");if(a.length&&!this.checkContentToAllowEditing(a))return;i.find(".js-note-attachment-delete").show(),n.addClass("current-note-edit-form"),i.addClass("is-editing"),this.putEditFormInPlace(t)}},{key:"cancelEdit",value:function(e){e.preventDefault();var t=l()(e.target),n=t.closest(".note"),i=n.attr("data-note-id");if(this.revertNoteEditForm(t),this.updatedNotesTrackingMap[i]){var a=l()(this.updatedNotesTrackingMap[i].html);n.replaceWith(a),this.setupNewNote(a),delete this.updatedNotesTrackingMap[i]}else n.find(".js-finish-edit-warning").hide(),this.removeNoteEditForm(n)}},{key:"revertNoteEditForm",value:function(e){e=e||l()(".note.is-editing:visible");var t=this.getEditFormSelector(e),n=l()(t);n.insertBefore(".diffs"),n.find(".js-comment-save-button").enable(),n.find(".js-finish-edit-warning").hide()}},{key:"getEditFormSelector",value:function(e){var t=".note-edit-form:not(.mr-note-edit-form)";return e.parents("#diffs").length&&(t=".note-edit-form.mr-note-edit-form"),t}},{key:"removeNoteEditForm",value:function(e){var t=e.find(".diffs .current-note-edit-form");return e.removeClass("is-editing"),t.removeClass("current-note-edit-form"),t.find(".js-finish-edit-warning").hide(),t.find(".js-note-text").val(t.find("form.edit-note").data("originalNote"))}},{key:"removeNote",value:function(t){var n=l()(t.currentTarget).closest(".note").attr("id");return l()('.note[id="'.concat(n,'"]')).each((function(e,t){var i=l()(t),a=i.closest(".discussion-notes"),r=l()(".notes",a).data("discussionId");if(void 0!==gl.diffNotesCompileComponents&&gl.diffNoteApps[n]&&gl.diffNoteApps[n].$destroy(),i.remove(),0===a.find(".note").length){var o=a.closest("tr");if(a.closest(".timeline-entry").remove(),l()(".js-diff-avatars-".concat(r)).trigger("remove.vue"),o.find(".discussion-notes").length>1||0===o.length){var s=a.closest(".diff-file");if(s.length>0){var c=new CustomEvent("removeBadge.imageDiff",{detail:{badgeNumber:a.index()+1}});s[0].dispatchEvent(c)}a.remove()}else o.length>0&&o.remove()}})),e.checkMergeRequestStatus(),this.updateNotesCount(-1)}},{key:"removeAttachment",value:function(){var e=l()(this).closest(".note");return e.find(".note-attachment").remove(),e.find(".note-body > .note-text").show(),e.find(".note-header").show(),e.find(".diffs .current-note-edit-form").remove()}},{key:"onReplyToDiscussionNote",value:function(e){this.replyToDiscussionNote(e.target)}},{key:"replyToDiscussionNote",value:function(e){var t=this.cleanForm(this.formClone.clone()),n=l()(e).closest(".js-discussion-reply-button");return n.closest(".discussion-reply-holder").hide().after(t),this.setupDiscussionNoteForm(n,t)}},{key:"setupDiscussionNoteForm",value:function(e,t){var n=e.closest(".text-file");0===n.length&&(n=e.closest(".image"));var i=e.data("discussionId");(i&&(t.attr("data-discussion-id",i),t.find("#in_reply_to_discussion_id").val(i)),t.find("#note_project_id").val(e.data("discussionProjectId")),t.attr("data-line-code",e.data("lineCode")),t.find("#line_type").val(e.data("lineType")),t.find("#note_noteable_type").val(n.data("noteableType")),t.find("#note_noteable_id").val(n.data("noteableId")),t.find("#note_commit_id").val(n.data("commitId")),t.find("#note_type").val(e.data("noteType")),t.find("#note_line_code").val(e.data("lineCode")),t.find("#note_position").val(e.attr("data-position")),t.prepend('<div class="avatar-note-form-holder"><div class="content"><a href="'.concat(o()(gon.current_username),'" class="user-avatar-link d-none d-sm-block"><img class="avatar s40" src="').concat(encodeURI(gon.current_user_avatar_url),'" alt="').concat(o()(gon.current_user_fullname),'" /></a></div></div>')).append("</div>").find(".js-close-discussion-note-form").show().removeClass("hide"),t.find(".js-note-target-close").remove(),t.find(".js-note-new-discussion").remove(),this.setupNoteForm(t),t.removeClass("js-main-target-form").addClass("discussion-form js-discussion-note-form"),void 0!==gl.diffNotesCompileComponents)&&(t.find("comment-and-resolve-btn").attr(":discussion-id","'".concat(i,"'")),gl.diffNotesCompileComponents());t.find(".js-note-text").focus(),t.find(".js-comment-resolve-button").attr("data-discussion-id",i)}},{key:"onAddDiffNote",value:function(e){e.preventDefault();var t=e.currentTarget||e.target,n=l()(t),i=!n.hasClass("js-diff-comment-avatar");this.toggleDiffNote({target:n,lineType:t.dataset.lineType,showReplyInput:i,currentUsername:gon.current_username,currentUserAvatar:gon.current_user_avatar_url,currentUserFullname:gon.current_user_fullname})}},{key:"onAddImageDiffNote",value:function(e){var t,n=l()(e.currentTarget||e.target),i=n.closest(".diff-file"),a=new CustomEvent("click.imageDiff",{detail:e});i[0].dispatchEvent(a);var r=n.closest(".diff-viewer").find(".note-container"),o=r.find("> .discussion-form");0===o.length?(t=this.cleanForm(this.formClone.clone())).appendTo(r):t=o,this.setupDiscussionNoteForm(n,t)}},{key:"toggleDiffNote",value:function(e){var t,n,i,a,r=e.target,o=e.lineType,s=e.forceShow,c=e.showReplyInput,d=void 0!==c&&c,u=l()(r),p=u.closest("tr"),f=p.next(),h=p;f.is(".notes_holder")&&(h=f);var m=f.is(".notes_holder");t=!1;var v="";a='<tr class="notes_holder js-temp-notes-holder"><td class="notes-content" colspan="3"><div class="content"></div></td></tr>',this.isParallelView()&&(v=".".concat(o),a='<tr class="notes_holder js-temp-notes-holder"><td class="notes_line old"></td><td class="notes-content parallel old"><div class="content"></div></td><td class="notes_line new"></td><td class="notes-content parallel new"><div class="content"></div></td></tr>');var g=".notes-content".concat(v," .content"),b=h.find(g);if(m&&d)h.show(),(b=h.find(g)).length&&(b.show(),(i=b.find(".js-discussion-reply-button:visible")).length?this.replyToDiscussionNote(i[0]):0===b.find(".js-discussion-note-form").length&&(t=!0));else if(d)p.after(a),b=(h=p.next()).find(g),t=!0;else{var y=h.find(".content:not(:empty)").is(":visible"),k=!0===s||!y&&!(!0===s||!1===s);h.toggleClass("hide",!k),b.toggleClass("hide",!k)}if(t)return(n=this.cleanForm(this.formClone.clone())).appendTo(b),this.setupDiscussionNoteForm(u,n)}},{key:"removeDiscussionNoteForm",value:function(e){var t=e.closest("tr");return e.data("glForm").destroy(),e.find(".js-note-text").data("autosave").reset(),e.prev(".discussion-reply-holder").show(),t.is(".js-temp-notes-holder")?t.remove():e.remove()}},{key:"cancelDiscussionForm",value:function(e){e.preventDefault();var t=l()(e.target).closest(".js-discussion-note-form");if(0===l()(e.target).closest(".discussion-notes").length){var n=t.closest(".diff-file");if(n.length>0){var i=new CustomEvent("blur.imageDiff",{detail:e});n[0].dispatchEvent(i)}}return this.removeDiscussionNoteForm(t)}},{key:"updateFormAttachment",value:function(){var e=l()(this).closest("form"),t=l()(this).val().replace(/^.*[\\\/]/,"");return e.find(".js-attachment-filename").text(t)}},{key:"visibilityChange",value:function(){return this.refresh()}},{key:"updateTargetButtons",value:function(e){var t,n,i=l()(e.target),a=i.parents("form"),r=a.find(".js-note-target-reopen"),o=a.find(".js-note-target-close");i.val().trim().length>0?(n=r.attr("data-alternative-text"),t=o.attr("data-alternative-text"),r.text()!==n&&r.text(n),o.text()!==t&&o.text(t),r.is(":not(.btn-comment-and-reopen)")&&r.addClass("btn-comment-and-reopen"),o.is(":not(.btn-comment-and-close)")&&o.addClass("btn-comment-and-close")):(n=r.data("originalText"),t=o.data("originalText"),r.text()!==n&&r.text(n),o.text()!==t&&o.text(t),r.is(".btn-comment-and-reopen")&&r.removeClass("btn-comment-and-reopen"),o.is(".btn-comment-and-close")&&o.removeClass("btn-comment-and-close"))}},{key:"putEditFormInPlace",value:function(e){var t=l()(this.getEditFormSelector(e)),n=e.closest(".note");t.insertAfter(n.find(".note-text"));var i=n.find(".original-note-content"),a=i.text().trim(),r=i.data("postUrl"),o=i.data("targetId"),s=i.data("targetType");this.glForm=new C.a(t.find("form"),this.enableGFM),t.find("form").attr("action","".concat(r,"?html=true")).attr("data-remote","true"),t.find(".js-form-target-id").val(o),t.find(".js-form-target-type").val(s),t.find(".js-note-text").focus().val(a),t.find(".js-md-write-button").trigger("click"),t.find(".referenced-users").hide()}},{key:"putConflictEditWarningInPlace",value:function(e,t){if(0===t.find(".js-conflict-edit-warning").length){var n='<a href="#note_'.concat(e.id,'" target="_blank" rel="noopener noreferrer">');l()('<div class="js-conflict-edit-warning alert alert-danger">\n        '.concat(Object(B.e)(Object(B.d)("Notes|This comment has changed since you started editing, please review the %{open_link}updated comment%{close_link} to ensure information is not lost"),{open_link:n,close_link:"</a>"}),"\n      </div>")).insertAfter(t.find(".note-text"))}}},{key:"updateNotesCount",value:function(e){return this.notesCountBadge.text(parseInt(this.notesCountBadge.text(),10)+e)}},{key:"onClickRetryLazyLoad",value:function(e){var t=l()(e.currentTarget);return t.prop("disabled",!0),this.loadLazyDiff(e).then((function(){t.prop("disabled",!1)}))}},{key:"loadLazyDiff",value:function(t){var n=l()(t.currentTarget).closest(".js-toggle-container");if(e.renderPlaceholderComponent(n),n.find(".js-toggle-lazy-diff").removeClass("js-toggle-lazy-diff"),0!==n.find("tbody").length){var i=n.find(".file-holder").data("linesPath"),a=n.find(".js-error-lazy-load-diff"),r=n.find(".js-success-lazy-load");return i?g.a.get(i).then((function(t){var i=t.data;r.removeClass("hidden"),a.addClass("hidden"),e.renderDiffContent(n,i)})).catch((function(){r.addClass("hidden"),a.removeClass("hidden")})):Promise.resolve()}}},{key:"toggleCommitList",value:function(e){var t=l()(e.currentTarget),n=t.siblings(".system-note-commit-list");t.find(".fa").toggleClass("fa-angle-down").toggleClass("fa-angle-up"),n.toggleClass("hide-shade")}},{key:"collapseLongCommitList",value:function(){var e=l()("#notes-list").find("li.system-note").has("ul");l.a.each(e,(function(e,t){var n=l()(t),i=n.find(".note-text").find("p").first().text().replace(":","");n.find(".note-header .system-note-message").html(i),n.find("li").length>3?(n.find(".note-text").addClass("system-note-commit-list"),n.find(".system-note-commit-list-toggler").show()):n.find(".note-text").addClass("system-note-commit-list hide-shade")}))}},{key:"addFlash",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.flashContainer=F(y.a,t)}},{key:"clearFlash",value:function(){this.flashContainer&&(this.flashContainer.style.display="none",this.flashContainer=null)}},{key:"cleanForm",value:function(e){return e.find(".js-comment-type-dropdown").removeClass("btn-group"),e.find(".dropdown-menu").remove(),e}},{key:"getFormData",value:function(e){var t=e.find(".js-note-text").val();return{formData:e.serialize(),formContent:o()(t),formAction:e.attr("action"),formContentOriginal:t}}},{key:"hasQuickActions",value:function(e){return I.test(e)}},{key:"stripQuickActions",value:function(e){return e.replace(I,"").trim()}},{key:"getQuickActionDescription",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=n.filter((function(t){return new RegExp("/".concat(t.name)).test(e)}));if(i&&i.length)if(i.length>1)t=Object(B.a)("Applying multiple commands");else{var a=i[0].description.toLowerCase();t=Object(B.e)(Object(B.a)("Applying command to %{commandDescription}"),{commandDescription:a})}else t=Object(B.a)("Applying command");return t}},{key:"createPlaceholderNote",value:function(e){var t=e.formContent,n=e.uniqueId,i=e.isDiscussionNote,a=e.currentUsername,r=e.currentUserFullname,s=e.currentUserAvatar,c=i?"discussion":"",d=l()('<li id="'.concat(n,'" class="note being-posted fade-in-half timeline-entry">\n         <div class="timeline-entry-inner">\n            <div class="timeline-icon">\n               <a href="/').concat(o()(a),'">\n                 <img class="avatar s40" src="').concat(s,'" />\n               </a>\n            </div>\n            <div class="timeline-content ').concat(c,'">\n               <div class="note-header">\n                  <div class="note-header-info">\n                     <a href="/').concat(o()(a),'">\n                       <span class="d-none d-sm-inline-block bold">').concat(o()(a),'</span>\n                       <span class="note-headline-light">').concat(o()(a),'</span>\n                     </a>\n                  </div>\n               </div>\n               <div class="note-body">\n                 <div class="note-text">\n                   <p>').concat(t,"</p>\n                 </div>\n               </div>\n            </div>\n         </div>\n      </li>"));return d.find(".d-none.d-sm-inline-block").text(o()(r)),d.find(".note-headline-light").text("@".concat(o()(a))),d}},{key:"createPlaceholderSystemNote",value:function(e){var t=e.formContent,n=e.uniqueId;return l()('<li id="'.concat(n,'" class="note system-note timeline-entry being-posted fade-in-half">\n         <div class="timeline-entry-inner">\n           <div class="timeline-content">\n             <i>').concat(t,"</i>\n           </div>\n         </div>\n       </li>"))}},{key:"postComment",value:function(e){var t=this;e.preventDefault();var n=l()(e.target);n.prop("disabled",!0);var i,r,o,s,c=n.parents("form"),d=c.find(".js-note-target-close"),u="discussion"===n.parent().find("li.droplab-item-selected").attr("id"),p=c.hasClass("js-main-target-form"),f=c.hasClass("js-discussion-note-form"),h=n.hasClass("js-comment-resolve-button"),v=this.getFormData(c),b=v.formData,y=v.formContent,k=v.formAction,w=v.formContentOriginal,j=!1;return f?o=c.parent(".discussion-notes").find(".notes"):p&&(o=l()("ul.main-notes-list")),h&&c.find(".js-comment-submit-button").disable(),s=y,this.hasQuickActions(y)&&(s=this.stripQuickActions(y),j=!0),s&&(i=a()("tempNote_"),o.append(this.createPlaceholderNote({formContent:s,uniqueId:i,isDiscussionNote:u,currentUsername:gon.current_username,currentUserFullname:gon.current_user_fullname,currentUserAvatar:gon.current_user_avatar_url}))),j&&(r=a()("tempSystemNote_"),o.append(this.createPlaceholderSystemNote({formContent:this.getQuickActionDescription(y,m.a.get(gl.GfmAutoComplete.dataSources.commands)),uniqueId:r}))),o.length&&(p?this.resetMainTargetForm(e):f&&this.removeDiscussionNoteForm(c)),d.text(d.data("originalText")),g.a.post("".concat(k,"?html=true"),b).then((function(a){var r=a.data;n.prop("disabled",!1),o.find("#".concat(i)).remove();var s=c.closest(".diff-file");if(s.length>0){var l=new CustomEvent("blur.imageDiff",{detail:e});s[0].dispatchEvent(l)}if(j&&c.find("textarea.js-note-text").trigger("clear-commands-cache.atwho"),t.clearFlashWrapper(),f){o.find(".flash-container").remove(),h&&c.attr("data-discussion-id",n.data("discussionId")).attr("data-resolve-all","true").attr("data-project-path",n.data("projectPath"));var d=0===o.length;if(t.addDiscussionNote(c,r,d),d){var u=c.find("#note_position").val();if(s.length>0&&u.length>0){var m=JSON.parse(u),v=m.x,g=m.y,b=m.width,y=m.height,k=new CustomEvent("addBadge.imageDiff",{detail:{x:v,y:g,width:b,height:y,noteId:"note_".concat(r.id),discussionId:r.discussion_id}});s[0].dispatchEvent(k)}}o.length&&o.append('<div class="flash-container" style="display: none;"></div>')}else p&&(t.addNote(c,r),t.reenableTargetFormSubmitButton(e));r.commands_changes&&t.handleQuickActions(r),c.trigger("ajax:success",[r])})).catch((function(){o.find("#".concat(i)).remove(),n.prop("disabled",!1);var a=new CustomEvent("blur.imageDiff",{detail:e}),s=c.closest(".diff-file");if(s.length&&s[0].dispatchEvent(a),j&&o.find("#".concat(r)).remove(),f&&o.length){var l=o.parent().find(".js-discussion-reply-button");t.replyToDiscussionNote(l[0]),c=o.parent().find("form")}c.find(".js-note-text").val(w),t.reenableTargetFormSubmitButton(e),t.addNoteError(c)}))}},{key:"updateComment",value:function(e){var t=this;e.preventDefault();var n=l()(e.target).parents("form"),i=n.find(".js-note-target-close"),a=n.parents(".note.is-editing"),r=a.find(".js-task-list-container").find(".note-text"),s=this.getFormData(n),c=s.formData,d=s.formContent,u=s.formAction,p=r.html();return r.html(d),a.removeClass("is-editing fade-in-full").addClass("being-posted fade-in-half"),a.find(".note-headline-meta a").html('<span class="spinner align-text-bottom"></span>'),g.a.post("".concat(u,"?html=true"),c).then((function(e){var n=e.data;t.updateNote(n,a)})).catch((function(){r.html(o()(p)),a.removeClass("being-posted fade-in"),a.find(".spinner").remove(),t.updateNoteError()})),i.text(i.data("originalText"))}}],[{key:"initCommentTypeToggle",value:function(e){var t=e.querySelector(".js-comment-type-dropdown .dropdown-toggle"),n=e.querySelector(".js-comment-type-dropdown .dropdown-menu"),i=e.querySelector("#note_type"),a=e.querySelector(".js-comment-type-dropdown .js-comment-submit-button"),r=e.querySelector(".js-note-target-close"),o=e.querySelector(".js-note-target-reopen");new x({dropdownTrigger:t,dropdownList:n,noteTypeInput:i,submitButton:a,closeButton:r,reopenButton:o}).initDroplab()}},{key:"updateNoteTargetSelector",value:function(e){var t=Object(b.d)(),n=Boolean(t&&e.filter("#".concat(t)).length>0);e.toggleClass("target",n)}},{key:"renderPlaceholderComponent",value:function(e){var t=e.find(".js-code-placeholder").get(0);new f.default({el:t,components:{GlSkeletonLoading:h.a},render:function(e){return e("gl-skeleton-loading")}})}},{key:"renderDiffContent",value:function(e,t){var n=t.discussion_html,i=l()(n).find(".line_holder");i.addClass("fade-in"),e.find(".diff-content > table > tbody").prepend(i);var a=e.find(".file-holder");e.find(".line-holder-placeholder").remove(),Object(v.a)(a)}},{key:"isNewNote",value:function(e,t){return-1===l.a.inArray(e.id,t)}},{key:"isUpdatedNote",value:function(e,t){return A(e.note.trim())!==A(t.find(".original-note-content").first().text().trim())}},{key:"checkMergeRequestStatus",value:function(){"merge_requests"===Object(T.l)(1)&&gl.mrWidget&&gl.mrWidget.checkStatus()}},{key:"animateAppendNote",value:function(e,t){var n=l()(e);return n.addClass("fade-in-full").renderGFM(),t.append(n),n}},{key:"animateUpdateNote",value:function(e,t){var n=l()(e);return n.addClass("fade-in").renderGFM(),t.replaceWith(n),n}}]),e}();window.Notes=$},681:function(e,t,n){(function(t){window,e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,n){var i,a,r,o,s=[].indexOf;i=function(e){return Array.prototype.slice.apply(e)},r=function(e,t){for(;e&&!e.classList.contains(t);)e=e.parentNode;return e},o=function(e,t){var n;return"function"==typeof Event?(n=new Event(e,{bubbles:!0,cancelable:!0})).detail=t:(n=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,t),n},a=function(){class e{constructor(e){this.el=e,this.container=r(this.el,"js-task-list-container"),this.field=this.container.querySelector(".js-task-list-field"),this.container.addEventListener("change",e=>{if(e.target.classList.contains("task-list-item-checkbox"))return this.updateTaskList(e.target)}),this.enable()}enable(){var e;if(this.container.querySelectorAll(".js-task-list-field").length>0)return i(this.container.querySelectorAll(".task-list-item")).forEach((function(e){return e.classList.add("enabled")})),i(this.container.querySelectorAll(".task-list-item-checkbox")).forEach((function(e){return e.disabled=!1})),this.container.classList.add("is-task-list-enabled"),e=o("tasklist:enabled"),this.container.dispatchEvent(e)}disable(){var e;return i(this.container.querySelectorAll(".task-list-item")).forEach((function(e){return e.classList.remove("enabled")})),i(this.container.querySelectorAll(".task-list-item-checkbox")).forEach((function(e){return e.disabled=!0})),this.container.classList.remove("is-task-list-enabled"),e=o("tasklist:disabled"),this.container.dispatchEvent(e)}updateTaskList(t){var n,a,r,s,l,c,d;if(r=this.container.querySelectorAll(".task-list-item-checkbox"),s=1+i(r).indexOf(t),n=o("tasklist:change",{index:s,checked:t.checked}),this.field.dispatchEvent(n),!n.defaultPrevented)return({result:d,lineNumber:l,lineSource:c}=e.updateSource(this.field.value,s,t.checked,t)),this.field.value=d,n=o("change"),this.field.dispatchEvent(n),a=o("tasklist:changed",{index:s,checked:t.checked,lineNumber:l,lineSource:c}),this.field.dispatchEvent(a)}static escapePattern(e){return e.replace(/([\[\]])/g,"\\$1").replace(/\s/,"\\s").replace("x","[xX]")}static updateSource(e,t,n,i){return i.parentElement.hasAttribute("data-sourcepos")?this._updateSourcePosition(e,i,n):this._updateSourceRegex(e,t,n)}static _updateSourcePosition(e,t,n){var i,a,r,o,s;return o=e.split("\n"),s=t.parentElement.getAttribute("data-sourcepos"),r=o[(a=parseInt(s.split(":")[0]))-1],i=n?r.replace(this.incompletePattern,this.complete):r.replace(this.completePattern,this.incomplete),o[a-1]=i,{result:o.join("\n"),lineNumber:a,lineSource:r}}static _updateSourceRegex(e,t,n){var i,a,r,o,l,c,d,u;return u=e.split("\n"),i=e.replace(/\r/g,"").replace(this.itemsInParasPattern,"").split("\n"),o=0,r=!1,{result:function(){var e,p,f;for(f=[],a=e=0,p=u.length;e<p;a=++e)l=u[a],r?l.match(this.endFencesPattern)&&(r=!1):l.match(this.startFencesPattern)?r=!0:s.call(i,l)>=0&&l.trim().match(this.itemPattern)&&(o+=1)===t&&(c=a+1,d=l,l=n?l.replace(this.incompletePattern,this.complete):l.replace(this.completePattern,this.incomplete)),f.push(l);return f}.call(this).join("\n"),lineNumber:c,lineSource:d}}}return e.incomplete="[ ]",e.complete="[x]",e.incompletePattern=RegExp(`${e.escapePattern(e.incomplete)}`),e.completePattern=RegExp(`${e.escapePattern(e.complete)}`),e.itemPattern=RegExp(`^(?:\\s*(?:>\\s*)*(?:[-+*]|(?:\\d+\\.)))\\s*(${e.escapePattern(e.complete)}|${e.escapePattern(e.incomplete)})\\s`),e.startFencesPattern=/^`{3}.*$/,e.endFencesPattern=/^`{3}$/,e.itemsInParasPattern=RegExp(`^(${e.escapePattern(e.complete)}|${e.escapePattern(e.incomplete)}).+$`,"g"),e}.call(this),void 0!==t&&(t.fn.taskList=function(e){return this.each((function(n,i){var r;if((r=t(i).data("task-list"))||(r=new a(i),t(i).data("task-list",r),e&&"enable"!==e))return r[e||"enable"]()}))}),e.exports=a}])}).call(this,n(0))},718:function(e,t,n){"use strict";n(30),n(55),n(283);var i=n(0),a=n.n(i),r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.highlightLineClass=e.highlightLineClass||"hll",e.fileHolderSelector=e.fileHolderSelector||".file-holder",e.scrollFileHolder=e.scrollFileHolder||!1,e.hash=e.hash||window.location.hash,this.options=e,this._hash=e.hash,this.highlightLineClass=e.highlightLineClass,this.setHash=this.setHash.bind(this),this.highlightLine=this.highlightLine.bind(this),this.clickHandler=this.clickHandler.bind(this),this.highlightHash=this.highlightHash.bind(this),this.bindEvents(),this.highlightHash()};r.prototype.bindEvents=function(){var e=a()(this.options.fileHolderSelector);e.on("click","a[data-line-number]",this.clickHandler),e.on("highlight:line",this.highlightHash)},r.prototype.highlightHash=function(e){var t;if(e&&"string"==typeof e&&(this._hash=e),this.clearHighlight(),""!==this._hash&&(t=this.hashToRange(this._hash))[0]){this.highlightRange(t);var n="#L".concat(t[0]),i={offset:-150};this.options.scrollFileHolder?a()(this.options.fileHolderSelector).scrollTo(n,i):a.a.scrollTo(n,i)}},r.prototype.clickHandler=function(e){var t;e.preventDefault(),this.clearHighlight();var n=a()(e.target).closest("a").data("lineNumber"),i=this.hashToRange(this._hash);return i[0]&&e.shiftKey?e.shiftKey?(t=n<i[0]?[n,i[0]]:[i[0],n],this.setHash(t[0],t[1]),this.highlightRange(t)):void 0:(this.setHash(n),this.highlightLine(n))},r.prototype.clearHighlight=function(){return a()(".".concat(this.highlightLineClass)).removeClass(this.highlightLineClass)},r.prototype.hashToRange=function(e){var t=e.match(/^#?L(\d+)(?:-(\d+))?$/);return t&&t.length?[parseInt(t[1],10),t[2]?parseInt(t[2],10):null]:[null,null]},r.prototype.highlightLine=function(e){return a()("#LC".concat(e)).addClass(this.highlightLineClass)},r.prototype.highlightRange=function(e){if(e[1]){for(var t=[],n=e[0]<=e[1]?e:e.reverse(),i=e[0];i<=n[1];i+=1)t.push(this.highlightLine(i));return t}return this.highlightLine(e[0])},r.prototype.setHash=function(e,t){var n;return n=t?"#L".concat(e,"-").concat(t):"#L".concat(e),this._hash=n,this.__setLocationHash__(n)},r.prototype.__setLocationHash__=function(e){return window.history.pushState({url:e},document.title,e)},t.a=r},761:function(e,t,n){"use strict";var i=n(550);t.a=function(){var e=document.querySelector(".js-notes-data"),t=JSON.parse(e.innerHTML),n=t.notesUrl,a=t.notesIds,r=t.now,o=t.diffView,s=t.enableGFM;i.a.initialize(n,a,r,o,s)}},809:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(63),a=n(102),r=n(491);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(n,!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=i.a.extend({name:"BInputGroupPrepend",functional:!0,props:r.b,render:function(e,t){var n=t.props,i=t.data,o=t.children;return e(r.a,Object(a.a)(i,{props:s({},n,{append:!1})}),o)}})},810:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(63),a=n(102),r=n(491);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(n,!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=i.a.extend({name:"BInputGroupAppend",functional:!0,props:r.b,render:function(e,t){var n=t.props,i=t.data,o=t.children;return e(r.a,Object(a.a)(i,{props:s({},n,{append:!0})}),o)}})}},[[2450,1,0,3,10]]]);
//# sourceMappingURL=pages.snippets.show.44687b80.chunk.js.map