(this.webpackJsonp=this.webpackJsonp||[]).push([[161,8,10,16],{111:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=document,a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,(n=[{key:"container",set:function(e){i=e},get:function(){return i}}])&&r(t.prototype,n),a&&r(t,a),e}();t.a=new a},113:function(e,t,n){"use strict";n.r(t);var r=n(88),i=n(70),a=n(96);document.addEventListener("DOMContentLoaded",(function(){Object(a.a)(document,gon),new r.a,new i.a}))},1136:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(0),i=n.n(r),a=n(11),o=n(14),s=n(1),l=n(731);function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l.a.init(t),e.resetIncomingEmailToken()}var t,n,r;return t=e,r=[{key:"resetIncomingEmailToken",value:function(){var e=i()(".incoming-email-token-reset");e.on("click",(function(t){t.preventDefault(),e.text(Object(s.d)("EmailToken|resetting...")),a.a.put(e.attr("href")).then((function(t){var n=t.data;i()("#issuable_email").val(n.new_address).focus(),e.text(Object(s.d)("EmailToken|reset it"))})).catch((function(){Object(o.a)(Object(s.a)("There was an error when reseting email token.")),e.text(Object(s.d)("EmailToken|reset it"))}))}))}}],(n=null)&&c(t.prototype,n),r&&c(t,r),e}()},1137:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={MERGE_REQUEST:"merge_request_",ISSUE:"issue_"}},121:function(e,t,n){"use strict";n(28),n(26),n(85),n(27);function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store={columns:3,issues:[],issuesCount:!1,selectedIssues:[],showAddIssuesModal:!1,activeTab:"all",selectedList:null,searchTerm:"",loading:!1,loadingNewPage:!1,filterLoading:!1,page:1,perPage:50,filter:{path:""}}}var t,n,i;return t=e,(n=[{key:"selectedCount",value:function(){return this.getSelectedIssues().length}},{key:"toggleIssue",value:function(e){var t=e,n=t.selected;t.selected=!n,n?this.removeSelectedIssue(t):this.addSelectedIssue(t)}},{key:"toggleAll",value:function(){var e=this,t=this.selectedCount()!==this.store.issues.length;this.store.issues.forEach((function(n){var r=n;r.selected!==t&&(r.selected=t,t?e.addSelectedIssue(n):e.removeSelectedIssue(n))}))}},{key:"getSelectedIssues",value:function(){return this.store.selectedIssues.filter((function(e){return e.selected}))}},{key:"addSelectedIssue",value:function(e){-1===this.selectedIssueIndex(e)&&this.store.selectedIssues.push(e)}},{key:"removeSelectedIssue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];("all"===this.store.activeTab||t)&&(this.store.selectedIssues=this.store.selectedIssues.filter((function(t){return t.id!==e.id})))}},{key:"purgeUnselectedIssues",value:function(){var e=this;this.store.selectedIssues.forEach((function(t){t.selected||e.removeSelectedIssue(t,!0)}))}},{key:"selectedIssueIndex",value:function(e){return this.store.selectedIssues.indexOf(e)}},{key:"findSelectedIssue",value:function(e){return this.store.selectedIssues.filter((function(t){return t.id===e.id}))[0]}}])&&r(t.prototype,n),i&&r(t,i),e}();t.a=new i},176:function(e,t,n){"use strict";n(30),n(42),n(26),n(85),n(46),n(27);var r=n(0),i=n.n(r),a=n(20),o=n.n(a),s=n(11),l=n(14),c=n(1);t.a={init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.form,n=e.issues,r=e.prefixId;this.prefixId=r||"issue_",this.form=t||this.getElement(".bulk-update"),this.$labelDropdown=this.form.find(".js-label-select"),this.issues=n||this.getElement(".issues-list .issue"),this.willUpdateLabels=!1,this.bindEvents()},bindEvents:function(){return this.form.off("submit").on("submit",this.onFormSubmit.bind(this))},onFormSubmit:function(e){return e.preventDefault(),this.submit()},submit:function(){var e=this;s.a[this.form.attr("method")](this.form.attr("action"),this.getFormDataAsObject()).then((function(){return window.location.reload()})).catch((function(){return e.onFormSubmitFailure()}))},onFormSubmitFailure:function(){return this.form.find('[type="submit"]').enable(),new l.a(Object(c.a)("Issue update failed"))},getSelectedIssues:function(){return this.issues.has(".selected-issuable:checked")},getLabelsFromSelection:function(){var e=[];return this.getSelectedIssues().map((function(){var t=i()(this).data("labels");if(t)return t.map((function(t){if(-1===e.indexOf(t))return e.push(t)}))})),e},getUnmarkedIndeterminedLabels:function(){var e=[],t=this.$labelDropdown.data("indeterminate");return this.getLabelsFromSelection().forEach((function(n){-1===t.indexOf(n)&&e.push(n)})),e},getFormDataAsObject:function(){var e={update:{state_event:this.form.find('input[name="update[state_event]"]').val(),assignee_ids:[this.form.find('input[name="update[assignee_ids][]"]').val()],milestone_id:this.form.find('input[name="update[milestone_id]"]').val(),issuable_ids:this.form.find('input[name="update[issuable_ids]"]').val(),subscription_event:this.form.find('input[name="update[subscription_event]"]').val(),add_label_ids:[],remove_label_ids:[]}};return this.willUpdateLabels&&(e.update.add_label_ids=this.$labelDropdown.data("marked"),e.update.remove_label_ids=this.$labelDropdown.data("unmarked")),e},setOriginalDropdownData:function(){var e=i()(".bulk-update .js-label-select");e.data("common",this.getOriginalCommonIds()),e.data("marked",this.getOriginalMarkedIds()),e.data("indeterminate",this.getOriginalIndeterminateIds())},getOriginalCommonIds:function(){var e=this,t=[];return this.getElement(".selected-issuable:checked").each((function(n,r){t.push(e.getElement("#".concat(e.prefixId).concat(r.dataset.id)).data("labels"))})),o.a.intersection.apply(this,t)},getOriginalMarkedIds:function(){var e=this,t=[];return this.getElement(".selected-issuable:checked").each((function(n,r){t.push(e.getElement("#".concat(e.prefixId).concat(r.dataset.id)).data("labels"))})),o.a.intersection.apply(this,t)},getOriginalIndeterminateIds:function(){var e=this,t=[],n=[],r=[];return this.getElement(".selected-issuable:checked").each((function(i,a){(r=e.getElement("#".concat(e.prefixId).concat(a.dataset.id)).data("labels")).forEach((function(e){-1===t.indexOf(e)&&t.push(e)})),n.push(r)})),n.unshift(t),o.a.difference(t,o.a.intersection.apply(this,n))},getElement:function(e){return this.scopeEl=this.scopeEl||i()(".content"),this.scopeEl.find(e)}}},184:function(e,t,n){var r=n(108),i=n(271),a=n(215),o=n(296),s=n(344),l=n(419);r({target:"Reflect",stat:!0},{get:function e(t,n){var r,c,u=arguments.length<3?t:arguments[2];return a(t)===u?t[n]:(r=s.f(t,n))?o(r,"value")?r.value:void 0===r.get?void 0:r.get.call(u):i(c=l(t))?e(c,n,u):void 0}})},2338:function(e,t,n){n(105),n(113),e.exports=n(2339)},2339:function(e,t,n){"use strict";n.r(t);var r=n(307),i=n(1136),a=n(70),o=n(248),s=n(520),l=n(521),c=n(1137),u=n(749);document.addEventListener("DOMContentLoaded",(function(){r.a.addExtraTokensForIssues(),Object(s.a)({page:l.a.ISSUES,filteredSearchTokenKeys:r.a}),new i.a(c.a.ISSUE),new a.a,new o.a,Object(u.a)()}))},248:function(e,t,n){"use strict";n(24),n(49),n(56),n(30),n(28),n(42),n(26),n(85),n(40),n(46),n(69),n(145),n(35),n(18),n(64),n(55),n(36),n(283),n(91),n(89),n(27),n(41);var r=n(0),i=n.n(r),a=n(20),o=n.n(a),s=n(11),l=n(1),c=n(121),u=n(16);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){var r=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},h=i()(t||".js-user-search");this.users=this.users.bind(this),this.user=this.user.bind(this),this.usersPath="/autocomplete/users.json",this.userPath="/autocomplete/users/:id.json",null!=e&&("object"===d(e)?this.currentUser=e:this.currentUser=JSON.parse(e));var p=a.handleClick,f=this;h.each((function(e,t){var n=r,a={},d=i()(t);a.projectId=d.data("projectId"),a.groupId=d.data("groupId"),a.showCurrentUser=d.data("currentUser"),a.todoFilter=d.data("todoFilter"),a.todoStateFilter=d.data("todoStateFilter"),a.iid=d.data("iid"),a.issuableType=d.data("issuableType");var h=d.data("nullUser"),f=d.data("nullUserDefault"),v=d.data("showMenuAbove"),m=d.data("anyUser"),g=d.data("firstUser");a.authorId=d.data("authorId");var b,y,k,w=d.data("defaultLabel"),S=d.data("issueUpdate"),E=d.closest(".selectbox"),O=E.closest(".block"),T=d.data("abilityName"),j=O.find(".value"),C=O.find(".sidebar-collapsed-user"),_=O.find(".block-loading").fadeOut(),I=f&&h?0:null,D=d.data("selected");void 0===D&&(D=I);var L=function(){var e=d.closest(".selectbox").find("input[name='".concat(d.data("fieldName"),"'][value=0]"));e&&e.remove();var t=d.data("currentUserInfo")||{},r=n.currentUser||{},i=d.data("fieldName"),a=t.name,s=t.id||r.id,l=o.a.template('\n        <input type="hidden" name="<%- fieldName %>"\n          data-meta="<%- userName %>"\n          value="<%- userId %>" />\n        ')({fieldName:i,userName:a,userId:s});E?d.parent().before(l):d.after(l)};O[0]&&O[0].addEventListener("assignYourself",L);var x=function(){return E.find('input[name="'.concat(d.data("fieldName"),'"]'))},P=function(){return x().map((function(e,t){return parseInt(t.value,10)})).get()},A=function(){var e=d.data("maxSelect");if(e){var t=P();if(t.length>e){var n=t[0];d.closest(".selectbox").find("input[name='".concat(d.data("fieldName"),"'][value=").concat(n,"]")).remove(),emitSidebarEvent("sidebar.removeAssignee",{id:n})}}},N=function(e,t){var n=P().filter((function(e){return 0!==e})),r=x().map((function(e,t){return{name:t.dataset.meta,value:parseInt(t.value,10)}})).filter((function(e){return 0!==e.id})).get(0);if(0===n.length)return Object(l.d)("UsersSelect|Unassigned");if(1===n.length)return r.name;if(t){var i=n.filter((function(t){return t!==e.id}));return Object(l.e)(Object(l.d)("UsersSelect|%{name} + %{length} more"),{name:e.name,length:i.length})}return Object(l.e)(Object(l.d)("UsersSelect|%{name} + %{length} more"),{name:r.name,length:n.length-1})};return i()(".assign-to-me-link").on("click",(function(e){if(e.preventDefault(),i()(e.currentTarget).hide(),d.data("multiSelect")){L(),A();var t=d.data("currentUserInfo");d.find(".dropdown-toggle-text").text(N(t)).removeClass("is-default")}else{var n=i()('input[name="'.concat(d.data("fieldName"),'"]'));n.val(gon.current_user_id),D=n.val(),d.find(".dropdown-toggle-text").text(gon.current_user_fullname).removeClass("is-default")}})),O.on("click",".js-assign-yourself",(function(e){return e.preventDefault(),b(n.currentUser.id)})),b=function(e){var t={};return t[T]={},t[T].assignee_id=null!=e?e:null,_.removeClass("hidden").fadeIn(),d.trigger("loading.gl.dropdown"),s.a.put(S,t).then((function(e){var t=e.data,n={},r=n.name;return d.trigger("loaded.gl.dropdown"),_.fadeOut(),t.assignee?(n={name:t.assignee.name,username:t.assignee.username,avatar:t.assignee.avatar_url},r=o.a.escape(n.name)):(n={name:Object(l.d)("UsersSelect|Unassigned"),username:"",avatar:""},r=Object(l.d)("UsersSelect|Assignee")),j.html(y(n)),C.attr("title",r).tooltip("_fixTitle"),C.html(k(n))}))},k=o.a.template('<% if( avatar ) { %> <a class="author-link" href="/<%- username %>"> <img width="24" class="avatar avatar-inline s24" alt="" src="<%- avatar %>"> </a> <% } else { %> <i class="fa fa-user"></i> <% } %>'),y=o.a.template('<% if (username) { %> <a class="author-link bold" href="/<%- username %>"> <% if( avatar ) { %> <img width="32" class="avatar avatar-inline s32" alt="" src="<%- avatar %>"> <% } %> <span class="author"><%- name %></span> <span class="username"> @<%- username %> </span> </a> <% } else { %> <span class="no-value assign-yourself">\n      '.concat(Object(l.e)(Object(l.d)("UsersSelect|No assignee - %{openingTag} assign yourself %{closingTag}"),{openingTag:'<a href="#" class="js-assign-yourself">',closingTag:"</a>"}),"</span> <% } %>")),d.glDropdown({showMenuAbove:v,data:function(e,t){var r=this;return n.users(e,a,(function(n){(r.instance||r.options.instance).options.processData(e,n,t)}))},processData:function(e,t,n){var r,i,a,s,c,p,f=t;if(d.hasClass("js-multiselect")&&0===e.length){var b=x(),y=o.a.uniq(b,!1,(function(e){return e.value})).filter((function(e){var t=parseInt(e.value,10);return!f.find((function(e){return e.id===t}))&&0!==t})).map((function(e){var t=parseInt(e.value,10),n=e.dataset,r=n.avatarUrl,i=n.avatar_url,a=n.name,o=n.username,s=n.canMerge;return{avatar_url:r||i,id:t,name:a,username:o,can_merge:Object(u.F)(s)}}));f=t.concat(y)}if(0===e.length){if(p=0,g)for(i=0,a=f.length;i<a;i+=1)if((c=f[i]).username===g){f.splice(i,1),f.unshift(c);break}if(h&&(p+=1,f.unshift({beforeDivider:!0,name:Object(l.d)("UsersSelect|Unassigned"),id:0})),m&&(p+=1,!0===(s=m)&&(s=Object(l.d)("UsersSelect|Any User")),r={beforeDivider:!0,name:s,id:null},f.unshift(r)),p&&f.splice(p,0,{type:"divider"}),d.hasClass("js-multiselect")){var k=P().filter((function(e){return 0!==e}));if(k.length>0){d.data("dropdownHeader")&&(p+=1,f.splice(p,0,{type:"header",content:d.data("dropdownHeader")}));var w=f.filter((function(e){return-1!==k.indexOf(e.id)})).sort((function(e,t){return e.name>t.name}));f=f.filter((function(e){return-1===k.indexOf(e.id)})),w.forEach((function(e){p+=1,f.splice(p,0,e)})),f.splice(p+1,0,{type:"divider"})}}}n(f),v&&d.data("glDropdown").positionMenuAbove()},filterable:!0,filterRemote:!0,search:{fields:["name","username"]},selectable:!0,fieldName:d.data("fieldName"),toggleLabel:function(e,t,n){var r=n.filterInput.val();if(this.multiSelect&&""===r){var a=n.filteredFullData(),o=n.parseData.bind(n);this.processData(r,a,o)}return this.multiSelect?N(e,i()(t).hasClass("is-active")):e&&"id"in e&&i()(t).hasClass("is-active")?(d.find(".dropdown-toggle-text").removeClass("is-default"),e.text?e.text:e.name):(d.find(".dropdown-toggle-text").addClass("is-default"),w)},defaultLabel:w,hidden:function(){d.hasClass("js-multiselect")&&emitSidebarEvent("sidebar.saveAssignees"),d.data("alwaysShowSelectbox")||(E.hide(),O=E.closest(".block"),(j=O.find(".value")).css("display",""))},multiSelect:d.hasClass("js-multiselect"),inputMeta:d.data("inputMeta"),clicked:function(e){var t=e.$el,n=e.e,r=e.isMarking,a=e.selectedObj;if(t.tooltip("dispose"),d.hasClass("js-multiselect")){var o=t.hasClass("is-active"),s=d.closest(".selectbox").find("input[name='".concat(d.data("fieldName"),"'][value!=0]"));if(A(),a.beforeDivider&&"unassigned"===a.name.toLowerCase())s.each((function(e,t){t.remove()})),emitSidebarEvent("sidebar.removeAllAssignees");else if(o){emitSidebarEvent("sidebar.addAssignee",a);var l=d.closest(".selectbox").find("input[name='".concat(d.data("fieldName"),"'][value=0]"));l&&l.remove()}else 0===s.length&&this.addInput(d.data("fieldName"),0,{}),emitSidebarEvent("sidebar.removeAssignee",a);P().find((function(e){return e===gon.current_user_id}))?i()(".assign-to-me-link").hide():i()(".assign-to-me-link").show()}var u=i()("body").attr("data-page"),h="projects:issues:index"===u,f=u==u&&"projects:merge_requests:index"===u;if(d.hasClass("js-filter-bulk-update")||d.hasClass("js-issuable-form-dropdown")){n.preventDefault();var v=a.id!==D;(D=v?a.id:I)===gon.current_user_id?i()(".assign-to-me-link").hide():i()(".assign-to-me-link").show()}else{if(t.closest(".add-issues-modal").length)c.a.store.filter[d.data("fieldName")]=a.id;else if(p)n.preventDefault(),p(a,r);else{if(d.hasClass("js-filter-submit")&&(h||f))return Issuable.filterResults(d.closest("form"));if(d.hasClass("js-filter-submit"))return d.closest("form").submit();if(!d.hasClass("js-multiselect")){var m=d.closest(".selectbox").find("input[name='".concat(d.data("fieldName"),"']")).val();return b(m)}}d.data("maxSelect")&&P().length===d.data("maxSelect")&&d.dropdown("toggle")}},id:function(e){return e.id},opened:function(e){var t=i()(e.currentTarget),n=P();function r(e){t.find('li[data-user-id="'.concat(e,'"] .dropdown-menu-user-link')).addClass("is-active")}d.hasClass("js-issue-board-sidebar")&&0===n.length&&this.addInput(d.data("fieldName"),0,{}),t.find(".is-active").removeClass("is-active"),n.length>0?P().forEach((function(e){return r(e)})):d.hasClass("js-issue-board-sidebar")?r(0):r(D)},updateLabel:d.data("dropdownTitle"),renderRow:function(e){var t=e.username?"@".concat(e.username):"",r=e.avatar_url?e.avatar_url:gon.default_avatar_url,i=!1;if(this.multiSelect){i=P().find((function(t){return e.id===t}));var s=this.fieldName;d.closest(".selectbox").find("input[name='".concat(s,"'][value='").concat(e.id,"']")).length&&(i=!0)}else i=e.id===D;var l="";return null!=e.beforeDivider?"<li><a href='#' class='".concat(!0===i?"is-active":"","'>").concat(o.a.escape(e.name),"</a></li>"):l="<img src='".concat(r,"' class='avatar avatar-inline m-0' width='32' />"),n.renderRow(a.issuableType,e,i,t,l)}})})),n.e(239).then(n.t.bind(null,428,7)).then((function(){i()(".ajax-users-select").each((function(e,t){var n={};n.skipLdap=i()(t).hasClass("skip_ldap"),n.projectId=i()(t).data("projectId"),n.groupId=i()(t).data("groupId"),n.showCurrentUser=i()(t).data("currentUser"),n.authorId=i()(t).data("authorId"),n.skipUsers=i()(t).data("skipUsers");var r=i()(t).data("nullUser"),a=i()(t).data("anyUser"),o=i()(t).data("emailUser"),s=i()(t).data("firstUser");return i()(t).select2({placeholder:Object(l.a)("Search for a user"),multiple:i()(t).hasClass("multiselect"),minimumInputLength:0,query:function(e){return f.users(e.term,n,(function(t){var n,i={results:t};if(0===e.term.length){if(s)for(var c=i.results,u=0,d=c.length;u<d;u+=1){var h=c[u];if(h.username===s){i.results.splice(u,1),i.results.unshift(h);break}}if(r){var p={name:Object(l.d)("UsersSelect|Unassigned"),id:0};i.results.unshift(p)}if(a){!0===(n=a)&&(n=Object(l.d)("UsersSelect|Any User"));var f={name:n,id:null};i.results.unshift(f)}}if(o&&0===i.results.length&&e.term.match(/^[^@]+@[^@]+$/)){var v=e.term.trim(),m={name:Object(l.e)(Object(l.a)('Invite "%{trimmed}" by email'),{trimmed:v}),username:v,id:v,invite:!0};i.results.unshift(m)}return e.callback(i)}))},initSelection:function(){var e=1<=arguments.length?[].slice.call(arguments,0):[];return f.initSelection.apply(f,e)},formatResult:function(){var e=1<=arguments.length?[].slice.call(arguments,0):[];return f.formatResult.apply(f,e)},formatSelection:function(){var e=1<=arguments.length?[].slice.call(arguments,0):[];return f.formatSelection.apply(f,e)},dropdownCssClass:"ajax-users-dropdown",escapeMarkup:function(e){return e}})}))})).catch((function(){}))}window.emitSidebarEvent=window.emitSidebarEvent||i.a.noop,h.prototype.initSelection=function(e,t){var n=i()(e).val();return"0"===n?t({name:Object(l.d)("UsersSelect|Unassigned")}):""!==n?this.user(n,t):void 0},h.prototype.formatResult=function(e){var t=gon.default_avatar_url;return e.avatar_url&&(t=e.avatar_url),"\n    <div class='user-result'>\n      <div class='user-image'>\n        <img class='avatar avatar-inline s32' src='".concat(t,"'>\n      </div>\n      <div class='user-info'>\n        <div class='user-name dropdown-menu-user-full-name'>\n          ").concat(o.a.escape(e.name),"\n        </div>\n        <div class='user-username dropdown-menu-user-username text-secondary'>\n          ").concat(e.invite?"":"@".concat(o.a.escape(e.username)),"\n        </div>\n      </div>\n    </div>\n  ")},h.prototype.formatSelection=function(e){return o.a.escape(e.name)},h.prototype.user=function(e,t){if(!/^\d+$/.test(e))return!1;var n=this.buildUrl(this.userPath);return n=n.replace(":id",e),s.a.get(n).then((function(e){var n=e.data;t(n)}))},h.prototype.users=function(e,t,n){var r=this.buildUrl(this.usersPath),i={search:e,active:!0,project_id:t.projectId||null,group_id:t.groupId||null,skip_ldap:t.skipLdap||null,todo_filter:t.todoFilter||null,todo_state_filter:t.todoStateFilter||null,current_user:t.showCurrentUser||null,author_id:t.authorId||null,skip_users:t.skipUsers||null};return"merge_request"===t.issuableType&&(i.merge_request_iid=t.iid||null),s.a.get(r,{params:i}).then((function(e){var t=e.data;n(t)}))},h.prototype.buildUrl=function(e){return null!=gon.relative_url_root&&(e=gon.relative_url_root.replace(/\/$/,"")+e),e},h.prototype.renderRow=function(e,t,n,r,i){var a="merge_request"!==e||t.can_merge?"":Object(l.a)("Cannot merge"),s=a?"has-tooltip":"",c="".concat(!0===n?"is-active":""," ").concat(s),u=a?'data-container="body" data-placement="left" data-title="'.concat(a,'"'):"";return"\n    <li data-user-id=".concat(t.id,'>\n      <a href="#" class="dropdown-menu-user-link d-flex align-items-center ').concat(c,'" ').concat(u,">\n        ").concat(this.renderRowAvatar(e,t,i),'\n        <span class="d-flex flex-column overflow-hidden">\n          <strong class="dropdown-menu-user-full-name">\n            ').concat(o.a.escape(t.name),"\n          </strong>\n          ").concat(r?'<span class="dropdown-menu-user-username">'.concat(r,"</span>"):"","\n        </span>\n      </a>\n    </li>\n  ")},h.prototype.renderRowAvatar=function(e,t,n){if(t.beforeDivider)return n;var r="merge_request"!==e||t.can_merge?"":'<i class="fa fa-exclamation-triangle merge-icon"></i>';return'<span class="position-relative mr-2">\n    '.concat(n,"\n    ").concat(r,"\n  </span>")},t.a=h},259:function(e,t,n){"use strict";n(24),n(49),n(56),n(26),n(78),n(40),n(69),n(145),n(18),n(68),n(36),n(27),n(41),n(90),n(30),n(65),n(46),n(55),n(91),n(67);var r=n(20),i=/\{\{(.+?)\}\}/g,a={toCamelCase:function(e){return this.camelize(e.split("-").slice(1).join(" "))},template:function(e,t){var n=Object(r.template)(e,{escape:i});return n(t)},camelize:function(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,(function(e,t){return 0===t?e.toLowerCase():e.toUpperCase()})).replace(/\s+/g,"")},closest:function(e,t){for(;e&&e.tagName!==t&&"HTML"!==e.tagName;)e=e.parentNode;return e},isDropDownParts:function(e){return!(!e||!e.hasAttribute||"HTML"===e.tagName)&&(e.hasAttribute("data-dropdown-trigger")||e.hasAttribute("data-dropdown"))}};function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentIndex=0,this.hidden=!0,this.list="string"==typeof t?document.querySelector(t):t,this.items=[],this.eventWrapper={},this.hideOnClick=!1!==n.hideOnClick,n.addActiveClassToDropdownButton&&(this.dropdownToggle=this.list.parentNode.querySelector(".js-dropdown-toggle")),this.getItems(),this.initTemplateString(),this.addEvents(),this.initialState=t.innerHTML}var t,n,r;return t=e,r=[{key:"setImagesSrc",value:function(e){o(e.querySelectorAll("img[data-src]")).forEach((function(e){var t=e;t.src=t.getAttribute("data-src"),t.removeAttribute("data-src")}))}}],(n=[{key:"getItems",value:function(){return this.items=[].slice.call(this.list.querySelectorAll("li")),this.items}},{key:"initTemplateString",value:function(){var e=this.items||this.getItems(),t="";return e.length>0&&(t=e[e.length-1].outerHTML),this.templateString=t,this.templateString}},{key:"clickEvent",value:function(e){if("UL"!==e.target.tagName&&!e.target.closest(".".concat("droplab-item-ignore"))){var t=e.target.closest("li");if(t){this.addSelectedClass(t),e.preventDefault(),this.hideOnClick&&this.hide();var n=new CustomEvent("click.dl",{detail:{list:this,selected:t,data:e.target.dataset}});this.list.dispatchEvent(n)}}}},{key:"addSelectedClass",value:function(e){this.removeSelectedClasses(),e.classList.add("droplab-item-selected")}},{key:"removeSelectedClasses",value:function(){(this.items||this.getItems()).forEach((function(e){return e.classList.remove("droplab-item-selected")}))}},{key:"addEvents",value:function(){this.eventWrapper.clickEvent=this.clickEvent.bind(this),this.eventWrapper.closeDropdown=this.closeDropdown.bind(this),this.list.addEventListener("click",this.eventWrapper.clickEvent),this.list.addEventListener("keyup",this.eventWrapper.closeDropdown)}},{key:"closeDropdown",value:function(e){return 27!==e.keyCode||(e.preventDefault(),this.toggle())}},{key:"setData",value:function(e){this.data=e,this.render(e)}},{key:"addData",value:function(e){this.data=(this.data||[]).concat(e),this.render(this.data)}},{key:"render",value:function(e){var t=e?e.map(this.renderChildren.bind(this)):[];if(!this.list.querySelector(".filter-dropdown-loading")){(this.list.querySelector("ul[data-dynamic]")||this.list).innerHTML=t.join("");var n=new CustomEvent("render.dl",{detail:{list:this}});this.list.dispatchEvent(n)}}},{key:"renderChildren",value:function(t){var n=a.template(this.templateString,t),r=document.createElement("div");return r.innerHTML=n,e.setImagesSrc(r),r.firstChild.style.display=t.droplab_hidden?"none":"block",r.firstChild.outerHTML}},{key:"show",value:function(){this.hidden&&(this.list.style.display="block",this.currentIndex=0,this.hidden=!1,this.dropdownToggle&&this.dropdownToggle.classList.add("active"))}},{key:"hide",value:function(){this.hidden||(this.list.style.display="none",this.currentIndex=0,this.hidden=!0,this.dropdownToggle&&this.dropdownToggle.classList.remove("active"))}},{key:"toggle",value:function(){return this.hidden?this.show():this.hide()}},{key:"destroy",value:function(){this.hide(),this.list.removeEventListener("click",this.eventWrapper.clickEvent),this.list.removeEventListener("keyup",this.eventWrapper.closeDropdown)}}])&&s(t.prototype,n),r&&s(t,r),e}();var c=function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.trigger=t,this.list=new l(n,i),this.type="Hook",this.event="click",this.plugins=r||[],this.config=i||{},this.id=t.id};function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=function(e){function t(e,n,r,i){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=h(this,p(t).call(this,e,n,r,i))).type="button",a.event="click",a.eventWrapper={},a.addEvents(),a.addPlugins(),a}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,e),n=t,(r=[{key:"addPlugins",value:function(){var e=this;this.plugins.forEach((function(t){return t.init(e)}))}},{key:"clicked",value:function(e){var t=new CustomEvent("click.dl",{detail:{hook:this},bubbles:!0,cancelable:!0});e.target.dispatchEvent(t),this.list.toggle()}},{key:"addEvents",value:function(){this.eventWrapper.clicked=this.clicked.bind(this),this.trigger.addEventListener("click",this.eventWrapper.clicked)}},{key:"removeEvents",value:function(){this.trigger.removeEventListener("click",this.eventWrapper.clicked)}},{key:"restoreInitialState",value:function(){this.list.list.innerHTML=this.list.initialState}},{key:"removePlugins",value:function(){this.plugins.forEach((function(e){return e.destroy()}))}},{key:"destroy",value:function(){this.restoreInitialState(),this.removeEvents(),this.removePlugins()}}])&&d(n.prototype,r),i&&d(n,i),t}(c);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var w=function(e){function t(e,n,r,i){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=b(this,y(t).call(this,e,n,r,i))).type="input",a.event="input",a.eventWrapper={},a.addEvents(),a.addPlugins(),a}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(t,e),n=t,(r=[{key:"addPlugins",value:function(){var e=this;this.plugins.forEach((function(t){return t.init(e)}))}},{key:"addEvents",value:function(){this.eventWrapper.mousedown=this.mousedown.bind(this),this.eventWrapper.input=this.input.bind(this),this.eventWrapper.keyup=this.keyup.bind(this),this.eventWrapper.keydown=this.keydown.bind(this),this.trigger.addEventListener("mousedown",this.eventWrapper.mousedown),this.trigger.addEventListener("input",this.eventWrapper.input),this.trigger.addEventListener("keyup",this.eventWrapper.keyup),this.trigger.addEventListener("keydown",this.eventWrapper.keydown)}},{key:"removeEvents",value:function(){this.hasRemovedEvents=!0,this.trigger.removeEventListener("mousedown",this.eventWrapper.mousedown),this.trigger.removeEventListener("input",this.eventWrapper.input),this.trigger.removeEventListener("keyup",this.eventWrapper.keyup),this.trigger.removeEventListener("keydown",this.eventWrapper.keydown)}},{key:"input",value:function(e){if(!this.hasRemovedEvents){this.list.show();var t=new CustomEvent("input.dl",{detail:{hook:this,text:e.target.value},bubbles:!0,cancelable:!0});e.target.dispatchEvent(t)}}},{key:"mousedown",value:function(e){if(!this.hasRemovedEvents){var t=new CustomEvent("mousedown.dl",{detail:{hook:this,text:e.target.value},bubbles:!0,cancelable:!0});e.target.dispatchEvent(t)}}},{key:"keyup",value:function(e){this.hasRemovedEvents||this.keyEvent(e,"keyup.dl")}},{key:"keydown",value:function(e){this.hasRemovedEvents||this.keyEvent(e,"keydown.dl")}},{key:"keyEvent",value:function(e,t){this.list.show();var n=new CustomEvent(t,{detail:{hook:this,text:e.target.value,which:e.which,key:e.key},bubbles:!0,cancelable:!0});e.target.dispatchEvent(n)}},{key:"restoreInitialState",value:function(){this.list.list.innerHTML=this.list.initialState}},{key:"removePlugins",value:function(){this.plugins.forEach((function(e){return e.destroy()}))}},{key:"destroy",value:function(){this.restoreInitialState(),this.removeEvents(),this.removePlugins(),this.list.destroy()}}])&&g(n.prototype,r),i&&g(n,i),t}(c),S=function(){var e,t=!1,n=!1,r=function(e){for(var t=Array.prototype.slice.call(e.list.querySelectorAll("li:not(.divider):not(.hidden)"),0),n=[],r=0;r<t.length;r++){var i=t[r];i.classList.remove("droplab-item-active"),"none"!==i.style.display&&n.push(i)}return n},i=function(e){var t=r(e)[e.currentIndex-1],n=new CustomEvent("click.dl",{detail:{list:e,selected:t,data:t.dataset}});e.list.dispatchEvent(n),e.hide()};document.addEventListener("mousedown.dl",(function(e){var i=e.detail.hook.list;r(i),i.show(),i.currentIndex=0,t=!1,n=!1})),document.addEventListener("keydown.dl",(function(a){a.target;var o=a.detail.hook.list,s=o.currentIndex;if(t=!1,n=!1,a.detail.which){if(13===(e=a.detail.which))return void i(a.detail.hook.list);38===e&&(t=!0),40===e&&(n=!0)}else if(a.detail.key){if("Enter"===(e=a.detail.key))return void i(a.detail.hook.list);"ArrowUp"===e&&(t=!0),"ArrowDown"===e&&(n=!0)}t&&s--,n&&s++,s<0&&(s=0),o.currentIndex=s,function(e){var t=r(e);if(e.currentIndex>0&&(t[e.currentIndex-1]||(e.currentIndex=e.currentIndex-1),t[e.currentIndex-1])){var n=t[e.currentIndex-1],i=n.closest(".filter-dropdown");if(n.classList.add("droplab-item-active"),i){var a=i.offsetHeight,o=n.offsetTop-30;o>a&&(i.scrollTop=o-a)}}}(a.detail.hook.list)}))};function E(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var T=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ready=!1,this.hooks=[],this.queuedData=[],this.config={},this.eventWrapper={}}var t,n,r;return t=e,(n=[{key:"loadStatic",value:function(){var e=[].slice.apply(document.querySelectorAll("[".concat("data-dropdown-trigger","]")));this.addHooks(e)}},{key:"addData",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.applyArgs(t,"processAddData")}},{key:"setData",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.applyArgs(t,"processSetData")}},{key:"destroy",value:function(){this.hooks.forEach((function(e){return e.destroy()})),this.hooks=[],this.removeEvents()}},{key:"applyArgs",value:function(e,t){return this.ready?this[t].apply(this,E(e)):(this.queuedData=this.queuedData||[],this.queuedData.push(e),this.ready)}},{key:"processAddData",value:function(e,t){this.processData(e,t,"addData")}},{key:"processSetData",value:function(e,t){this.processData(e,t,"setData")}},{key:"processData",value:function(e,t,n){this.hooks.forEach((function(r){Array.isArray(e)&&r.list[n](e),r.trigger.id===e&&r.list[n](t)}))}},{key:"addEvents",value:function(){this.eventWrapper.documentClicked=this.documentClicked.bind(this),document.addEventListener("mousedown",this.eventWrapper.documentClicked)}},{key:"documentClicked",value:function(e){var t=e.target;"UL"!==t.tagName&&(t=a.closest(t,"UL")),a.isDropDownParts(t,this.hooks)||a.isDropDownParts(e.target,this.hooks)||this.hooks.forEach((function(e){return e.list.hide()}))}},{key:"removeEvents",value:function(){document.removeEventListener("mousedown",this.eventWrapper.documentClicked)}},{key:"changeHookList",value:function(e,t,n,r){var i=this,a="string"==typeof e?document.getElementById(e):e;this.hooks.forEach((function(e,o){var s=e;s.list.list.dataset.dropdownActive=!1,s.trigger===a&&(s.destroy(),i.hooks.splice(o,1),i.addHook(a,t,n,r))}))}},{key:"addHook",value:function(e,t,n,r){var i,o="string"==typeof e?document.querySelector(e):e;(i="string"==typeof t?document.querySelector(t):t instanceof Element?t:document.querySelector(e.dataset[a.toCamelCase("data-dropdown-trigger")])).dataset.dropdownActive=!0;var s="INPUT"===o.tagName?w:v;return this.hooks.push(new s(o,i,n,r)),this}},{key:"addHooks",value:function(e,t,n){var r=this;return e.forEach((function(e){return r.addHook(e,null,t,n)})),this}},{key:"setConfig",value:function(e){this.config=e}},{key:"fireReady",value:function(){var e=new CustomEvent("ready.dl",{detail:{dropdown:this}});document.dispatchEvent(e),this.ready=!0}},{key:"init",value:function(e,t,n,r){var i=this;return e?this.addHook(e,t,n,r):this.loadStatic(),this.addEvents(),S(),this.fireReady(),this.queuedData.forEach((function(e){return i.addData(e)})),this.queuedData=[],this}}])&&O(t.prototype,n),r&&O(t,r),e}();t.a=T},273:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n(30),n(65),n(46),n(38);var r=n(0),i=n.n(r),a=n(32),o=n(110);function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$el=t,this.namespacePath=n,this.projectPath=r,this.$dropdownBack=i()(".dropdown-menu-back",this.$el.closest(".dropdown")),this.$cancelButton=i()(".js-cancel-label-btn",this.$el),this.$newLabelField=i()("#new_label_name",this.$el),this.$newColorField=i()("#new_label_color",this.$el),this.$colorPreview=i()(".js-dropdown-label-color-preview",this.$el),this.$addList=i()(".js-add-list",this.$el),this.$newLabelError=i()(".js-label-error",this.$el),this.$newLabelCreateButton=i()(".js-new-label-btn",this.$el),this.$colorSuggestions=i()(".suggest-colors-dropdown a",this.$el),this.$newLabelError.hide(),this.$newLabelCreateButton.disable(),this.addListDefault=this.$addList.is(":checked"),this.cleanBinding(),this.addBinding()}var t,n,r;return t=e,(n=[{key:"cleanBinding",value:function(){this.$colorSuggestions.off("click"),this.$newLabelField.off("keyup change"),this.$newColorField.off("keyup change"),this.$dropdownBack.off("click"),this.$cancelButton.off("click"),this.$newLabelCreateButton.off("click")}},{key:"addBinding",value:function(){var e=this;this.$colorSuggestions.on("click",(function(t){var n=i()(this);e.addColorValue(t,n)})),this.$newLabelField.on("keyup change",this.enableLabelCreateButton.bind(this)),this.$newColorField.on("keyup change",this.enableLabelCreateButton.bind(this)),this.$dropdownBack.on("click",this.resetForm.bind(this)),this.$cancelButton.on("click",(function(t){t.preventDefault(),t.stopPropagation(),e.resetForm(),e.$dropdownBack.trigger("click")})),this.$newLabelCreateButton.on("click",this.saveLabel.bind(this))}},{key:"addColorValue",value:function(e,t){e.preventDefault(),e.stopPropagation(),this.$newColorField.val(t.data("color")).trigger("change"),this.$colorPreview.css("background-color",t.data("color")).parent().addClass("is-active")}},{key:"enableLabelCreateButton",value:function(){""!==this.$newLabelField.val()&&""!==this.$newColorField.val()?(this.$newLabelError.hide(),this.$newLabelCreateButton.enable()):this.$newLabelCreateButton.disable()}},{key:"resetForm",value:function(){this.$newLabelField.val("").trigger("change"),this.$newColorField.val("").trigger("change"),this.$addList.prop("checked",this.addListDefault),this.$colorPreview.css("background-color","").parent().removeClass("is-active")}},{key:"saveLabel",value:function(e){var t=this;e.preventDefault(),e.stopPropagation(),a.a.newLabel(this.namespacePath,this.projectPath,{title:this.$newLabelField.val(),color:this.$newColorField.val()},(function(e){if(t.$newLabelCreateButton.enable(),e.message){var n;n="string"==typeof e.message?e.message:Object.keys(e.message).map((function(t){return"".concat(Object(o.i)(t)," ").concat(e.message[t].join(", "))})).join("<br/>"),t.$newLabelError.html(n).show()}else{var r=t.$addList.is(":checked");t.$dropdownBack.trigger("click"),i()(document).trigger("created.label",[e,r])}}))}}])&&s(t.prototype,n),r&&s(t,r),e}()},291:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));n(24),n(30),n(28),n(42),n(26),n(78),n(85),n(65),n(46),n(69),n(145),n(72),n(50),n(58),n(38),n(18),n(55),n(68),n(36),n(91),n(67),n(27);var r=n(0),i=n.n(r),a=n(20),o=n.n(a),s=n(1),l=n(11),c=n(176),u=n(273),d=n(14),h=n(121),p=n(52),f=n(16);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var b=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=this,a=i()(t);t||(a=i()(".js-label-select")),a.each((function(t,a){var c=i()(a),v=c.closest(".labels-filter"),m=c.data("namespacePath"),g=c.data("projectPath"),b=c.data("issueUpdate"),y=c.data("selected");null==y||c.hasClass("js-multiselect")||(y=y.split(","));var k=c.data("showNo"),w=c.data("showAny"),S=c.data("showMenuAbove"),E=c.data("defaultLabel")||Object(s.a)("Label"),O=c.data("abilityName"),T=c.closest(".selectbox"),j=T.closest(".block"),C=c.closest("form, .js-issuable-update"),_=j.find(".sidebar-collapsed-icon span"),I=j.find(".js-sidebar-labels-tooltip"),D=j.find(".value"),L=c.parent().find(".dropdown-menu"),x=j.find(".block-loading").fadeOut(),P=c.data("fieldName"),A=T.find('input[name="'.concat(c.data("fieldName"),'"]')).map((function(){return this.value})).get(),N=c.data("scopedLabels"),M=c.data("scopedLabelsDocumentationLink"),F=n.handleClick;I.tooltip(),c.closest(".dropdown").find(".dropdown-new-label").length&&new u.a(c.closest(".dropdown").find(".dropdown-new-label"),m,g);var R=function(){var t=c.closest(".selectbox").find("input[name='".concat(P,"']")).map((function(){return this.value})).get();if(!o.a.isEqual(A,t)){A=t;var n={};n[O]={},n[O].label_ids=t,t.length||(n[O].label_ids=[""]),x.removeClass("hidden").fadeIn(),c.trigger("loading.gl.dropdown"),l.a.put(b,n).then((function(t){var n,r,a=t.data;x.fadeOut(),c.trigger("loaded.gl.dropdown"),T.hide(),a.issueUpdateURL=b;var l=0;a.labels.length&&b?(r=e.getLabelTemplate({labels:o.a.sortBy(a.labels,"title"),issueUpdateURL:b,enableScopedLabels:N,scopedLabelsDocumentationLink:M}),l=a.labels.length):r='<span class="no-value">'.concat(Object(s.a)("None"),"</span>");if(D.removeAttr("style").html(r),_.text(l),a.labels.length){var u=a.labels.map((function(e){return e.title}));u.length>5&&(u=u.slice(0,5)).push(Object(s.e)(Object(s.d)("Labels|and %{count} more"),{count:a.labels.length-5})),n=u.join(", ")}else n=Object(s.a)("Labels");I.attr("title",n).tooltip("_fixTitle"),i()(".has-tooltip",D).tooltip({container:"body"})})).catch((function(){return Object(d.a)(Object(s.a)("Error saving label update."))}))}};c.glDropdown({showMenuAbove:S,data:function(e,t){var n=c.attr("data-labels");l.a.get(n).then((function(e){var n=e.data;if(c.hasClass("js-extra-options")){var r=[];k&&r.unshift({id:0,title:Object(s.a)("No Label")}),w&&r.unshift({isAny:!0,title:Object(s.a)("Any Label")}),r.length&&(r.push({type:"divider"}),n=r.concat(n))}t(n),S&&c.data("glDropdown").positionMenuAbove()})).catch((function(){return Object(d.a)(Object(s.a)("Error fetching labels."))}))},renderRow:function(e){var t,n=[],r=e.id<=0||null==e.id;if(c.hasClass("js-filter-bulk-update")){var i=c.data("indeterminate")||[],a=c.data("marked")||[];if(-1!==i.indexOf(e.id)&&n.push("is-indeterminate"),-1!==a.indexOf(e.id)){var s=n.indexOf("is-indeterminate");-1!==s&&n.splice(s,1),n.push("is-active")}}else{if(this.id(e)){var l=this.id(e).toString().replace(/'/g,"\\'");C.find("input[type='hidden'][name='".concat(this.fieldName,"'][value='").concat(l,"']")).length&&n.push("is-active")}this.multiSelect&&r&&n.push("dropdown-clear-active")}t=e.color?"<span class='dropdown-label-box' style='background: ".concat(e.color,"'></span>"):"";var u=document.createElement("a");if(u.href="#",e.id){n.push.apply(n,["label-item"].concat(["d-flex","flex-row","text-break-word"])),u.dataset.labelId=e.id}u.className=n.join(" "),u.innerHTML="".concat(t," ").concat(o.a.escape(e.title));var d=document.createElement("li");return d.appendChild(u),d},search:{fields:["title"]},selectable:!0,filterable:!0,selected:c.data("selected")||[],toggleLabel:function(e,t){var n=c.parent(),r=n.find(".dropdown-input-field"),i=null!==t&&t.hasClass("is-active"),a=e?e.title:null,o=this.selected;if(r.length&&r.val().length&&n.find(".dropdown-input-clear").trigger("click"),e&&0===e.id)return this.selected=[],Object(s.a)("No Label");if(i)this.selected.push(a);else if(!i&&a){var l=this.selected.indexOf(a);this.selected.splice(l,1)}return 1===o.length?o:o.length?Object(s.e)(Object(s.a)("%{firstLabel} +%{labelCount} more"),{firstLabel:o[0],labelCount:o.length-1}):E},fieldName:c.data("fieldName"),id:function(e){return e.id<=0?e.title:c.hasClass("js-issuable-form-dropdown")?e.id:c.hasClass("js-filter-submit")&&null==e.isAny?e.title:e.id},hidden:function(){var e=i()("body").attr("data-page"),t="projects:issues:index"===e,n="projects:merge_requests:index"===e;T.hide(),D.removeAttr("style"),c.hasClass("js-issuable-form-dropdown")||i()("html").hasClass("issue-boards-page")||c.hasClass("js-multiselect")&&(c.hasClass("js-filter-submit")&&(t||n)?Issuable.filterResults(c.closest("form")):c.hasClass("js-filter-submit")?c.closest("form").submit():c.hasClass("js-filter-bulk-update")||(R(),c.data("glDropdown").clearMenu()))},multiSelect:c.hasClass("js-multiselect"),vue:c.hasClass("js-issue-board-sidebar"),clicked:function(e){var t=e.$el,n=e.e,a=e.isMarking,s=e.selectedObj,l=function(){x.fadeOut()},u=i()("body").attr("data-page"),d="projects:issues:index"===u,v="projects:merge_requests:index"===u;if(c.parent().find(".is-active:not(.dropdown-clear-active)").length&&c.parent().find(".dropdown-clear-active").removeClass("is-active"),!c.hasClass("js-issuable-form-dropdown")){if(c.hasClass("js-filter-bulk-update"))return r.enableBulkLabelDropdown(),void r.setDropdownData(c,a,s.id);var m;if(c.closest(".add-issues-modal").length&&(m=h.a.store.filter),m)return s.isAny?m.label_name=[]:t.hasClass("is-active")&&m.label_name.push(s.title),void n.preventDefault();if(c.hasClass("js-filter-submit")&&(d||v)){if(!c.hasClass("js-multiselect"))return y=s.title,Issuable.filterResults(c.closest("form"))}else{if(c.hasClass("js-filter-submit"))return c.closest("form").submit();if(c.hasClass("js-issue-board-sidebar")){if(t.hasClass("is-active"))p.c.detail.issue.labels.push(new ListLabel({id:s.id,title:s.title,color:s.color,textColor:"#fff"}));else{var g=p.c.detail.issue.labels;g=g.filter((function(e){return e.id!==s.id})),p.c.detail.issue.labels=g}x.fadeIn();var b=p.c.detail.issue.labels;p.c.detail.issue.update(c.attr("data-issue-update")).then((function(){if(Object(f.C)(s)){var e=b.map((function(e){return e.id})),t=p.c.detail.issue.labels.map((function(e){return e.id})),n=o.a.difference(e,t);c.data("marked",t),L.find(n.map((function(e){return'[data-label-id="'.concat(e,'"]')})).join(",")).removeClass("is-active")}})).then(l).catch(l)}else if(F)n.preventDefault(),F(s);else if(!c.hasClass("js-multiselect"))return R()}}},opened:function(){if(c.hasClass("js-issue-board-sidebar")){var e=c.attr("data-selected");this.selected=e?e.split(","):[],c.data("glDropdown").updateLabel()}},preserveContext:!0}),r.setOriginalDropdownData(v,c)})),this.bindEvents()}var t,n,r;return t=e,r=[{key:"getLabelTemplate",value:function(e){var t='<a href="<%- issueUpdateURL.slice(0, issueUpdateURL.lastIndexOf("/")) %>?label_name[]=<%- encodeURIComponent(label.title) %>" class="gl-link gl-label-link has-tooltip" <%= linkAttrs %> title="<%= tooltipTitleTemplate({ label, isScopedLabel, enableScopedLabels, escapeStr }) %>">',n='<span class="gl-label-text" style="background-color: <%= escapeStr(label.color) %>; color: <%= escapeStr(label.text_color) %>;">',r=o.a.template(['<span class="gl-label">',t,n,"<%- label.title %>","</span>","</a>","</span>"].join("")),i=o.a.template(['<a href="<%= scopedLabelsDocumentationLink %>" class="gl-link gl-label-icon" target="_blank" rel="noopener">','<i class="fa fa-question-circle"></i>',"</a>"].join("")),a=o.a.template(['<span class="gl-label gl-label-scoped" style="color: <%= escapeStr(label.color) %>;">',t,n,'<%- label.title.slice(0, label.title.lastIndexOf("::")) %>',"</span>",'<span class="gl-label-text" style="color: <%= rightLabelTextColor({ label, escapeStr }) %>;">','<%- label.title.slice(label.title.lastIndexOf("::") + 2) %>',"</span>","</a>","<%= infoIconTemplate({ label, scopedLabelsDocumentationLink, escapeStr }) %>","</span>"].join("")),s=o.a.template(["<% if (isScopedLabel(label) && enableScopedLabels) { %>","<span class='font-weight-bold scoped-label-tooltip-title'>Scoped label</span>","<br />","<%= escapeStr(label.description) %>","<% } else { %>","<%= escapeStr(label.description) %>","<% } %>"].join(""));return o.a.template(["<% _.each(labels, function(label){ %>","<% if (isScopedLabel(label) && enableScopedLabels) { %>",'<span class="d-inline-block position-relative scoped-label-wrapper">',"<%= scopedLabelTemplate({ label, issueUpdateURL, isScopedLabel, enableScopedLabels, rightLabelTextColor, infoIconTemplate, scopedLabelsDocumentationLink, tooltipTitleTemplate, escapeStr, linkAttrs: 'data-html=\"true\"' }) %>","</span>","<% } else { %>",'<%= labelTemplate({ label, issueUpdateURL, isScopedLabel, enableScopedLabels, tooltipTitleTemplate, escapeStr, linkAttrs: "" }) %>',"<% } %>","<% }); %>"].join(""))(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{labelTemplate:r,rightLabelTextColor:function(e){var t=e.label;return(0,e.escapeStr)("#FFFFFF"===t.text_color?t.color:t.text_color)},infoIconTemplate:i,scopedLabelTemplate:a,tooltipTitleTemplate:s,isScopedLabel:f.C,escapeStr:o.a.escape}))}}],(n=[{key:"bindEvents",value:function(){return i()("body").on("change",".selected-issuable",this.onSelectCheckboxIssue)}},{key:"onSelectCheckboxIssue",value:function(){if(!i()(".selected-issuable:checked").length)return i()(".issues-bulk-update .labels-filter .dropdown-toggle-text").text(Object(s.a)("Label"))}},{key:"enableBulkLabelDropdown",value:function(){c.a.willUpdateLabels=!0}},{key:"setDropdownData",value:function(e,t,n){var r=e.data("marked")||[],i=e.data("unmarked")||[],a=e.data("indeterminate")||[];if(t){r.push(n);var o=a.indexOf(n);o>-1&&a.splice(o,1),(o=i.indexOf(n))>-1&&i.splice(o,1)}else{var s=r.indexOf(n);s>-1&&r.splice(s,1),c.a.getOriginalIndeterminateIds().indexOf(n)>-1&&i.push(n),c.a.getOriginalCommonIds().indexOf(n)>-1&&i.push(n)}e.data("marked",r),e.data("unmarked",i),e.data("indeterminate",a)}},{key:"setOriginalDropdownData",value:function(e,t){var n=[];e.find('[name="label_name[]"]').map((function(){return n.push(this.value)})),t.data("marked",n)}}])&&g(t.prototype,n),r&&g(t,r),e}()},292:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));n(30),n(28),n(42),n(35);var r=n(0),i=n.n(r),a=n(20),o=n.n(a),s=n(1),l=(n(321),n(11)),c=n(62),u=n(121),d=n(52);function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),null!==t&&(this.currentProject="string"==typeof t?JSON.parse(t):t),e.init(n,r)}var t,n,r;return t=e,r=[{key:"init",value:function(e,t){var n=i()(e);e||(n=i()(".js-milestone-select")),n.each((function(e,n){var r,a,h,p,f=i()(n),v=f.data("milestones"),m=f.data("issueUpdate"),g=f.data("showNo"),b=f.data("showAny"),y=f.data("showMenuAbove"),k=f.data("showUpcoming"),w=f.data("showStarted"),S=f.data("useId"),E=f.data("defaultLabel"),O=f.data("defaultNo"),T=f.data("abilityName"),j=f.closest(".selectbox"),C=j.closest(".block"),_=C.find(".sidebar-collapsed-icon"),I=C.find(".value"),D=C.find(".block-loading").fadeOut();return p=b?"":null,p=g&&O?Object(s.a)("No Milestone"):p,h=f.data("selected")||p,m&&(a=o.a.template('<a href="<%- web_url %>" class="bold has-tooltip" data-container="body" title="<%- remaining %>"><%- title %></a>'),r='<span class="no-value">'.concat(Object(s.a)("None"),"</span>")),f.glDropdown({showMenuAbove:y,data:function(e,t){return l.a.get(v).then((function(e){var n=e.data,r=[];b&&r.push({id:null,name:null,title:Object(s.a)("Any Milestone")}),g&&r.push({id:-1,name:Object(s.a)("No Milestone"),title:Object(s.a)("No Milestone")}),k&&r.push({id:-2,name:"#upcoming",title:Object(s.a)("Upcoming")}),w&&r.push({id:-3,name:"#started",title:Object(s.a)("Started")}),r.length&&r.push({type:"divider"}),t(r.concat(n)),y&&f.data("glDropdown").positionMenuAbove(),i()('[data-milestone-id="'.concat(o.a.escape(h),'"] > a')).addClass("is-active")}))},renderRow:function(e){return'\n          <li data-milestone-id="'.concat(o.a.escape(e.name),"\">\n            <a href='#' class='dropdown-menu-milestone-link'>\n              ").concat(o.a.escape(e.title),"\n            </a>\n          </li>\n        ")},filterable:!0,search:{fields:["title"]},selectable:!0,toggleLabel:function(e,t){return e&&"id"in e&&i()(t).hasClass("is-active")?e.title:E},defaultLabel:E,fieldName:f.data("fieldName"),text:function(e){return o.a.escape(e.title)},id:function(e){return S||f.is(".js-issuable-form-dropdown")?e.id:e.name},hidden:function(){return j.hide(),I.css("display","")},opened:function(e){var n=i()(e.currentTarget);(f.hasClass("js-issue-board-sidebar")||t.handleClick)&&(h=f[0].dataset.selected||p),i()("a.is-active",n).removeClass("is-active"),i()('[data-milestone-id="'.concat(o.a.escape(h),'"] > a'),n).addClass("is-active")},vue:f.hasClass("js-issue-board-sidebar"),clicked:function(e){var n,o,v=e.e,g=e.selectedObj;if(g){if(t.handleClick)return v.preventDefault(),void t.handleClick(g);var b=i()("body").attr("data-page"),y="projects:issues:index"===b,k=b==b&&"projects:merge_requests:index"===b,w=g.name!==h;if(h=w?g.name:p,f.hasClass("js-filter-bulk-update")||f.hasClass("js-issuable-form-dropdown"))v.preventDefault();else if(f.closest(".add-issues-modal").length&&(o=u.a.store.filter),o)o[f.data("fieldName")]=g.name,v.preventDefault();else{if(f.hasClass("js-filter-submit")&&(y||k))return Issuable.filterResults(f.closest("form"));if(f.hasClass("js-filter-submit"))return f.closest("form").submit();if(!f.hasClass("js-issue-board-sidebar"))return g=j.find('input[type="hidden"]').val(),(n={})[T]={},n[T].milestone_id=null!=g?g:null,D.removeClass("hidden").fadeIn(),f.trigger("loading.gl.dropdown"),l.a.put(m,n).then((function(e){var t=e.data;return f.trigger("loaded.gl.dropdown"),D.fadeOut(),j.hide(),I.css("display",""),null!=t.milestone?(t.milestone.remaining=Object(c.s)(t.milestone.due_date),t.milestone.name=t.milestone.title,I.html(a(t.milestone)),_.attr("data-original-title","".concat(t.milestone.name,"<br />").concat(t.milestone.remaining)).find("span").text(t.milestone.title)):(I.html(r),_.attr("data-original-title",Object(s.a)("Milestone")).find("span").text(Object(s.a)("None")))})).catch((function(){D.fadeOut()}));-1!==g.id&&w?Object(d.b)("milestone",new ListMilestone({id:g.id,title:g.name})):Object(d.a)("milestone"),f.trigger("loading.gl.dropdown"),D.removeClass("hidden").fadeIn(),d.c.detail.issue.update(f.attr("data-issue-update")).then((function(){f.trigger("loaded.gl.dropdown"),D.fadeOut()})).catch((function(){D.fadeOut()}))}}}})}))}}],(n=null)&&h(t.prototype,n),r&&h(t,r),e}();window.MilestoneSelect=p},297:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n(30),n(42),n(46),n(55),n(91);var r=n(1);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tokenKeys=t,this.alternativeTokenKeys=n,this.conditions=r,this.tokenKeysWithAlternative=this.tokenKeys.concat(this.alternativeTokenKeys)}var t,n,a;return t=e,(n=[{key:"get",value:function(){return this.tokenKeys}},{key:"getKeys",value:function(){return this.tokenKeys.map((function(e){return e.key}))}},{key:"getAlternatives",value:function(){return this.alternativeTokenKeys}},{key:"getConditions",value:function(){return this.conditions}},{key:"shouldUppercaseTokenName",value:function(e){var t=this.searchByKey(e.toLowerCase());return t&&t.uppercaseTokenName}},{key:"shouldCapitalizeTokenValue",value:function(e){var t=this.searchByKey(e.toLowerCase());return t&&t.capitalizeTokenValue}},{key:"searchByKey",value:function(e){return this.tokenKeys.find((function(t){return t.key===e}))||null}},{key:"searchBySymbol",value:function(e){return this.tokenKeys.find((function(t){return t.symbol===e}))||null}},{key:"searchByKeyParam",value:function(e){return this.tokenKeysWithAlternative.find((function(t){var n=t.key;return n=n.replace("-","_"),t.param&&(n+="_".concat(t.param)),e===n}))||null}},{key:"searchByConditionUrl",value:function(e){return this.conditions.find((function(t){return t.url===e}))||null}},{key:"searchByConditionKeyValue",value:function(e,t,n){return this.conditions.find((function(r){return r.tokenKey===e&&r.operator===t&&r.value.toLowerCase()===n.toLowerCase()}))||null}},{key:"addExtraTokensForIssues",value:function(){var e={formattedKey:Object(r.a)("Confidential"),key:"confidential",type:"string",param:"",symbol:"",icon:"eye-slash",tag:Object(r.a)("Yes or No"),lowercaseValueOnSubmit:!0,uppercaseTokenName:!1,capitalizeTokenValue:!0};this.tokenKeys.push(e),this.tokenKeysWithAlternative.push(e)}}])&&i(t.prototype,n),a&&i(t,a),e}()},307:function(e,t,n){"use strict";n(24),n(49),n(56),n(30),n(28),n(26),n(104),n(40),n(46),n(69),n(50),n(58),n(38),n(18),n(55),n(68),n(122),n(36),n(67),n(27),n(41);var r=n(463),i=n.n(r),a=n(297),o=n(1);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var d=[{formattedKey:Object(o.a)("Author"),key:"author",type:"string",param:"username",symbol:"@",icon:"pencil",tag:"@author"},{formattedKey:Object(o.a)("Assignee"),key:"assignee",type:"string",param:"username",symbol:"@",icon:"user",tag:"@assignee"},{formattedKey:Object(o.a)("Milestone"),key:"milestone",type:"string",param:"title",symbol:"%",icon:"clock",tag:"%milestone"},{formattedKey:Object(o.a)("Release"),key:"release",type:"string",param:"tag",symbol:"",icon:"rocket",tag:Object(o.a)("tag name")},{formattedKey:Object(o.a)("Label"),key:"label",type:"array",param:"name[]",symbol:"~",icon:"labels",tag:"~label"}];gon.current_user_id&&d.push({formattedKey:Object(o.a)("My-Reaction"),key:"my-reaction",type:"string",param:"emoji",symbol:"",icon:"thumb-up",tag:"emoji"});var h=[{formattedKey:Object(o.a)("Label"),key:"label",type:"string",param:"name",symbol:"~"}],p=i()([{url:"assignee_id=None",tokenKey:"assignee",value:Object(o.a)("None")},{url:"assignee_id=Any",tokenKey:"assignee",value:Object(o.a)("Any")},{url:"milestone_title=None",tokenKey:"milestone",value:Object(o.a)("None")},{url:"milestone_title=Any",tokenKey:"milestone",value:Object(o.a)("Any")},{url:"milestone_title=%23upcoming",tokenKey:"milestone",value:Object(o.a)("Upcoming")},{url:"milestone_title=%23started",tokenKey:"milestone",value:Object(o.a)("Started")},{url:"release_tag=None",tokenKey:"release",value:Object(o.a)("None")},{url:"release_tag=Any",tokenKey:"release",value:Object(o.a)("Any")},{url:"label_name[]=None",tokenKey:"label",value:Object(o.a)("None")},{url:"label_name[]=Any",tokenKey:"label",value:Object(o.a)("Any")},{url:"my_reaction_emoji=None",tokenKey:"my-reaction",value:Object(o.a)("None")},{url:"my_reaction_emoji=Any",tokenKey:"my-reaction",value:Object(o.a)("Any")}].map((function(e){var t=u(e.url.split("="),2),n=t[0],r=t[1],i=n.includes("[]"),a="not[".concat(i?n.slice(0,-2):n,"]").concat(i?"[]":"","=").concat(r);return[l({},e,{operator:"="}),l({},e,{operator:"!=",url:a})]}))),f=new a.a(d,h,p);t.a=f},350:function(e,t,n){"use strict";
/**!
 * Sortable 1.10.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){i(e,t,n[t])}))}return e}function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function l(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.r(t),n.d(t,"MultiDrag",(function(){return yt})),n.d(t,"Sortable",(function(){return Be})),n.d(t,"Swap",(function(){return lt}));function c(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var u=c(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),d=c(/Edge/i),h=c(/firefox/i),p=c(/safari/i)&&!c(/chrome/i)&&!c(/android/i),f=c(/iP(ad|od|hone)/i),v=c(/chrome/i)&&c(/android/i),m={capture:!1,passive:!1};function g(e,t,n){e.addEventListener(t,n,!u&&m)}function b(e,t,n){e.removeEventListener(t,n,!u&&m)}function y(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function k(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function w(e,t,n,r){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&y(e,t):y(e,t))||r&&e===n)return e;if(e===n)break}while(e=k(e))}return null}var S,E=/\s+/g;function O(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(E," ").replace(" "+t+" "," ");e.className=(r+(n?" "+t:"")).replace(E," ")}}function T(e,t,n){var r=e&&e.style;if(r){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in r||-1!==t.indexOf("webkit")||(t="-webkit-"+t),r[t]=n+("string"==typeof n?"":"px")}}function j(e,t){var n="";if("string"==typeof e)n=e;else do{var r=T(e,"transform");r&&"none"!==r&&(n=r+" "+n)}while(!t&&(e=e.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function C(e,t,n){if(e){var r=e.getElementsByTagName(t),i=0,a=r.length;if(n)for(;i<a;i++)n(r[i],i);return r}return[]}function _(){var e=document.scrollingElement;return e||document.documentElement}function I(e,t,n,r,i){if(e.getBoundingClientRect||e===window){var a,o,s,l,c,d,h;if(e!==window&&e!==_()?(o=(a=e.getBoundingClientRect()).top,s=a.left,l=a.bottom,c=a.right,d=a.height,h=a.width):(o=0,s=0,l=window.innerHeight,c=window.innerWidth,d=window.innerHeight,h=window.innerWidth),(t||n)&&e!==window&&(i=i||e.parentNode,!u))do{if(i&&i.getBoundingClientRect&&("none"!==T(i,"transform")||n&&"static"!==T(i,"position"))){var p=i.getBoundingClientRect();o-=p.top+parseInt(T(i,"border-top-width")),s-=p.left+parseInt(T(i,"border-left-width")),l=o+a.height,c=s+a.width;break}}while(i=i.parentNode);if(r&&e!==window){var f=j(i||e),v=f&&f.a,m=f&&f.d;f&&(l=(o/=m)+(d/=m),c=(s/=v)+(h/=v))}return{top:o,left:s,bottom:l,right:c,width:h,height:d}}}function D(e,t,n){for(var r=N(e,!0),i=I(e)[t];r;){var a=I(r)[n];if(!("top"===n||"left"===n?i>=a:i<=a))return r;if(r===_())break;r=N(r,!1)}return!1}function L(e,t,n){for(var r=0,i=0,a=e.children;i<a.length;){if("none"!==a[i].style.display&&a[i]!==Be.ghost&&a[i]!==Be.dragged&&w(a[i],n.draggable,e,!1)){if(r===t)return a[i];r++}i++}return null}function x(e,t){for(var n=e.lastElementChild;n&&(n===Be.ghost||"none"===T(n,"display")||t&&!y(n,t));)n=n.previousElementSibling;return n||null}function P(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===Be.clone||t&&!y(e,t)||n++;return n}function A(e){var t=0,n=0,r=_();if(e)do{var i=j(e),a=i.a,o=i.d;t+=e.scrollLeft*a,n+=e.scrollTop*o}while(e!==r&&(e=e.parentNode));return[t,n]}function N(e,t){if(!e||!e.getBoundingClientRect)return _();var n=e,r=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=T(n);if(n.clientWidth<n.scrollWidth&&("auto"==i.overflowX||"scroll"==i.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==i.overflowY||"scroll"==i.overflowY)){if(!n.getBoundingClientRect||n===document.body)return _();if(r||t)return n;r=!0}}}while(n=n.parentNode);return _()}function M(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function F(e,t){return function(){if(!S){var n=arguments,r=this;1===n.length?e.call(r,n[0]):e.apply(r,n),S=setTimeout((function(){S=void 0}),t)}}}function R(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function q(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function B(e,t){T(e,"position","absolute"),T(e,"top",t.top),T(e,"left",t.left),T(e,"width",t.width),T(e,"height",t.height)}function V(e){T(e,"position",""),T(e,"top",""),T(e,"left",""),T(e,"width",""),T(e,"height","")}var K="Sortable"+(new Date).getTime();function W(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(e){if("none"!==T(e,"display")&&e!==Be.ghost){t.push({target:e,rect:I(e)});var n=o({},t[t.length-1].rect);if(e.thisAnimationDuration){var r=j(e,!0);r&&(n.top-=r.f,n.left-=r.e)}e.fromRect=n}}))},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e[n][r])return Number(n);return-1}(t,{target:e}),1)},animateAll:function(n){var r=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof n&&n());var i=!1,a=0;t.forEach((function(e){var t=0,n=e.target,o=n.fromRect,s=I(n),l=n.prevFromRect,c=n.prevToRect,u=e.rect,d=j(n,!0);d&&(s.top-=d.f,s.left-=d.e),n.toRect=s,n.thisAnimationDuration&&M(l,s)&&!M(o,s)&&(u.top-s.top)/(u.left-s.left)==(o.top-s.top)/(o.left-s.left)&&(t=function(e,t,n,r){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*r.animation}(u,l,c,r.options)),M(s,o)||(n.prevFromRect=o,n.prevToRect=s,t||(t=r.options.animation),r.animate(n,u,s,t)),t&&(i=!0,a=Math.max(a,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),t),n.thisAnimationDuration=t)})),clearTimeout(e),i?e=setTimeout((function(){"function"==typeof n&&n()}),a):"function"==typeof n&&n(),t=[]},animate:function(e,t,n,r){if(r){T(e,"transition",""),T(e,"transform","");var i=j(this.el),a=i&&i.a,o=i&&i.d,s=(t.left-n.left)/(a||1),l=(t.top-n.top)/(o||1);e.animatingX=!!s,e.animatingY=!!l,T(e,"transform","translate3d("+s+"px,"+l+"px,0)"),function(e){e.offsetWidth}(e),T(e,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),T(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){T(e,"transition",""),T(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),r)}}}}var U=[],$={initializeByDefault:!0},H={mount:function(e){for(var t in $)!$.hasOwnProperty(t)||t in e||(e[t]=$[t]);U.push(e)},pluginEvent:function(e,t,n){var r=this;this.eventCanceled=!1,n.cancel=function(){r.eventCanceled=!0};var i=e+"Global";U.forEach((function(r){t[r.pluginName]&&(t[r.pluginName][i]&&t[r.pluginName][i](o({sortable:t},n)),t.options[r.pluginName]&&t[r.pluginName][e]&&t[r.pluginName][e](o({sortable:t},n)))}))},initializePlugins:function(e,t,n,r){for(var i in U.forEach((function(r){var i=r.pluginName;if(e.options[i]||r.initializeByDefault){var o=new r(e,t,e.options);o.sortable=e,o.options=e.options,e[i]=o,a(n,o.defaults)}})),e.options)if(e.options.hasOwnProperty(i)){var o=this.modifyOption(e,i,e.options[i]);void 0!==o&&(e.options[i]=o)}},getEventProperties:function(e,t){var n={};return U.forEach((function(r){"function"==typeof r.eventProperties&&a(n,r.eventProperties.call(t[r.pluginName],e))})),n},modifyOption:function(e,t,n){var r;return U.forEach((function(i){e[i.pluginName]&&i.optionListeners&&"function"==typeof i.optionListeners[t]&&(r=i.optionListeners[t].call(e[i.pluginName],n))})),r}};function G(e){var t=e.sortable,n=e.rootEl,r=e.name,i=e.targetEl,a=e.cloneEl,s=e.toEl,l=e.fromEl,c=e.oldIndex,h=e.newIndex,p=e.oldDraggableIndex,f=e.newDraggableIndex,v=e.originalEvent,m=e.putSortable,g=e.extraEventProperties;if(t=t||n&&n[K]){var b,y=t.options,k="on"+r.charAt(0).toUpperCase()+r.substr(1);!window.CustomEvent||u||d?(b=document.createEvent("Event")).initEvent(r,!0,!0):b=new CustomEvent(r,{bubbles:!0,cancelable:!0}),b.to=s||n,b.from=l||n,b.item=i||n,b.clone=a,b.oldIndex=c,b.newIndex=h,b.oldDraggableIndex=p,b.newDraggableIndex=f,b.originalEvent=v,b.pullMode=m?m.lastPutMode:void 0;var w=o({},g,H.getEventProperties(r,t));for(var S in w)b[S]=w[S];n&&n.dispatchEvent(b),y[k]&&y[k].call(t,b)}}var z=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.evt,i=s(n,["evt"]);H.pluginEvent.bind(Be)(e,t,o({dragEl:X,parentEl:Q,ghostEl:J,rootEl:Z,nextEl:ee,lastDownEl:te,cloneEl:ne,cloneHidden:re,dragStarted:me,putSortable:ce,activeSortable:Be.active,originalEvent:r,oldIndex:ie,oldDraggableIndex:oe,newIndex:ae,newDraggableIndex:se,hideGhostForTarget:Me,unhideGhostForTarget:Fe,cloneNowHidden:function(){re=!0},cloneNowShown:function(){re=!1},dispatchSortableEvent:function(e){Y({sortable:t,name:e,originalEvent:r})}},i))};function Y(e){G(o({putSortable:ce,cloneEl:ne,targetEl:X,rootEl:Z,oldIndex:ie,oldDraggableIndex:oe,newIndex:ae,newDraggableIndex:se},e))}var X,Q,J,Z,ee,te,ne,re,ie,ae,oe,se,le,ce,ue,de,he,pe,fe,ve,me,ge,be,ye,ke,we=!1,Se=!1,Ee=[],Oe=!1,Te=!1,je=[],Ce=!1,_e=[],Ie="undefined"!=typeof document,De=f,Le=d||u?"cssFloat":"float",xe=Ie&&!v&&!f&&"draggable"in document.createElement("div"),Pe=function(){if(Ie){if(u)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),Ae=function(e,t){var n=T(e),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=L(e,0,t),a=L(e,1,t),o=i&&T(i),s=a&&T(a),l=o&&parseInt(o.marginLeft)+parseInt(o.marginRight)+I(i).width,c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+I(a).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&o.float&&"none"!==o.float){var u="left"===o.float?"left":"right";return!a||"both"!==s.clear&&s.clear!==u?"horizontal":"vertical"}return i&&("block"===o.display||"flex"===o.display||"table"===o.display||"grid"===o.display||l>=r&&"none"===n[Le]||a&&"none"===n[Le]&&l+c>r)?"vertical":"horizontal"},Ne=function(e){function t(e,n){return function(r,i,a,o){var s=r.options.group.name&&i.options.group.name&&r.options.group.name===i.options.group.name;if(null==e&&(n||s))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"==typeof e)return t(e(r,i,a,o),n)(r,i,a,o);var l=(n?r:i).options.group.name;return!0===e||"string"==typeof e&&e===l||e.join&&e.indexOf(l)>-1}}var n={},i=e.group;i&&"object"==r(i)||(i={name:i}),n.name=i.name,n.checkPull=t(i.pull,!0),n.checkPut=t(i.put),n.revertClone=i.revertClone,e.group=n},Me=function(){!Pe&&J&&T(J,"display","none")},Fe=function(){!Pe&&J&&T(J,"display","")};Ie&&document.addEventListener("click",(function(e){if(Se)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Se=!1,!1}),!0);var Re=function(e){if(X){e=e.touches?e.touches[0]:e;var t=(i=e.clientX,a=e.clientY,Ee.some((function(e){if(!x(e)){var t=I(e),n=e[K].options.emptyInsertThreshold,r=i>=t.left-n&&i<=t.right+n,s=a>=t.top-n&&a<=t.bottom+n;return n&&r&&s?o=e:void 0}})),o);if(t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[K]._onDragOver(n)}}var i,a,o},qe=function(e){X&&X.parentNode[K]._isOutsideThisEl(e.target)};function Be(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=a({},t),e[K]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ae(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Be.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};for(var r in H.initializePlugins(this,e,n),n)!(r in t)&&(t[r]=n[r]);for(var i in Ne(t),this)"_"===i.charAt(0)&&"function"==typeof this[i]&&(this[i]=this[i].bind(this));this.nativeDraggable=!t.forceFallback&&xe,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?g(e,"pointerdown",this._onTapStart):(g(e,"mousedown",this._onTapStart),g(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(g(e,"dragover",this),g(e,"dragenter",this)),Ee.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),a(this,W())}function Ve(e,t,n,r,i,a,o,s){var l,c,h=e[K],p=h.options.onMove;return!window.CustomEvent||u||d?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=n,l.draggedRect=r,l.related=i||t,l.relatedRect=a||I(t),l.willInsertAfter=s,l.originalEvent=o,e.dispatchEvent(l),p&&(c=p.call(h,l,o)),c}function Ke(e){e.draggable=!1}function We(){Ce=!1}function Ue(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,r=0;n--;)r+=t.charCodeAt(n);return r.toString(36)}function $e(e){return setTimeout(e,0)}function He(e){return clearTimeout(e)}Be.prototype={constructor:Be,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(ge=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,X):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,r=this.options,i=r.preventOnFilter,a=e.type,o=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,s=(o||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,c=r.filter;if(function(e){_e.length=0;var t=e.getElementsByTagName("input"),n=t.length;for(;n--;){var r=t[n];r.checked&&_e.push(r)}}(n),!X&&!(/mousedown|pointerdown/.test(a)&&0!==e.button||r.disabled||l.isContentEditable||(s=w(s,r.draggable,n,!1))&&s.animated||te===s)){if(ie=P(s),oe=P(s,r.draggable),"function"==typeof c){if(c.call(this,e,s,this))return Y({sortable:t,rootEl:l,name:"filter",targetEl:s,toEl:n,fromEl:n}),z("filter",t,{evt:e}),void(i&&e.cancelable&&e.preventDefault())}else if(c&&(c=c.split(",").some((function(r){if(r=w(l,r.trim(),n,!1))return Y({sortable:t,rootEl:r,name:"filter",targetEl:s,fromEl:n,toEl:n}),z("filter",t,{evt:e}),!0}))))return void(i&&e.cancelable&&e.preventDefault());r.handle&&!w(l,r.handle,n,!1)||this._prepareDragStart(e,o,s)}}},_prepareDragStart:function(e,t,n){var r,i=this,a=i.el,o=i.options,s=a.ownerDocument;if(n&&!X&&n.parentNode===a){var l=I(n);if(Z=a,Q=(X=n).parentNode,ee=X.nextSibling,te=n,le=o.group,Be.dragged=X,ue={target:X,clientX:(t||e).clientX,clientY:(t||e).clientY},fe=ue.clientX-l.left,ve=ue.clientY-l.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,X.style["will-change"]="all",r=function(){z("delayEnded",i,{evt:e}),Be.eventCanceled?i._onDrop():(i._disableDelayedDragEvents(),!h&&i.nativeDraggable&&(X.draggable=!0),i._triggerDragStart(e,t),Y({sortable:i,name:"choose",originalEvent:e}),O(X,o.chosenClass,!0))},o.ignore.split(",").forEach((function(e){C(X,e.trim(),Ke)})),g(s,"dragover",Re),g(s,"mousemove",Re),g(s,"touchmove",Re),g(s,"mouseup",i._onDrop),g(s,"touchend",i._onDrop),g(s,"touchcancel",i._onDrop),h&&this.nativeDraggable&&(this.options.touchStartThreshold=4,X.draggable=!0),z("delayStart",this,{evt:e}),!o.delay||o.delayOnTouchOnly&&!t||this.nativeDraggable&&(d||u))r();else{if(Be.eventCanceled)return void this._onDrop();g(s,"mouseup",i._disableDelayedDrag),g(s,"touchend",i._disableDelayedDrag),g(s,"touchcancel",i._disableDelayedDrag),g(s,"mousemove",i._delayedDragTouchMoveHandler),g(s,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&g(s,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(r,o.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){X&&Ke(X),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;b(e,"mouseup",this._disableDelayedDrag),b(e,"touchend",this._disableDelayedDrag),b(e,"touchcancel",this._disableDelayedDrag),b(e,"mousemove",this._delayedDragTouchMoveHandler),b(e,"touchmove",this._delayedDragTouchMoveHandler),b(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?g(document,"pointermove",this._onTouchMove):g(document,t?"touchmove":"mousemove",this._onTouchMove):(g(X,"dragend",this),g(Z,"dragstart",this._onDragStart));try{document.selection?$e((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(e,t){if(we=!1,Z&&X){z("dragStarted",this,{evt:t}),this.nativeDraggable&&g(document,"dragover",qe);var n=this.options;!e&&O(X,n.dragClass,!1),O(X,n.ghostClass,!0),Be.active=this,e&&this._appendGhost(),Y({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(de){this._lastX=de.clientX,this._lastY=de.clientY,Me();for(var e=document.elementFromPoint(de.clientX,de.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(de.clientX,de.clientY))!==t;)t=e;if(X.parentNode[K]._isOutsideThisEl(e),t)do{if(t[K]){if(t[K]._onDragOver({clientX:de.clientX,clientY:de.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);Fe()}},_onTouchMove:function(e){if(ue){var t=this.options,n=t.fallbackTolerance,r=t.fallbackOffset,i=e.touches?e.touches[0]:e,a=J&&j(J,!0),o=J&&a&&a.a,s=J&&a&&a.d,l=De&&ke&&A(ke),c=(i.clientX-ue.clientX+r.x)/(o||1)+(l?l[0]-je[0]:0)/(o||1),u=(i.clientY-ue.clientY+r.y)/(s||1)+(l?l[1]-je[1]:0)/(s||1);if(!Be.active&&!we){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(J){a?(a.e+=c-(he||0),a.f+=u-(pe||0)):a={a:1,b:0,c:0,d:1,e:c,f:u};var d="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");T(J,"webkitTransform",d),T(J,"mozTransform",d),T(J,"msTransform",d),T(J,"transform",d),he=c,pe=u,de=i}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!J){var e=this.options.fallbackOnBody?document.body:Z,t=I(X,!0,De,!0,e),n=this.options;if(De){for(ke=e;"static"===T(ke,"position")&&"none"===T(ke,"transform")&&ke!==document;)ke=ke.parentNode;ke!==document.body&&ke!==document.documentElement?(ke===document&&(ke=_()),t.top+=ke.scrollTop,t.left+=ke.scrollLeft):ke=_(),je=A(ke)}O(J=X.cloneNode(!0),n.ghostClass,!1),O(J,n.fallbackClass,!0),O(J,n.dragClass,!0),T(J,"transition",""),T(J,"transform",""),T(J,"box-sizing","border-box"),T(J,"margin",0),T(J,"top",t.top),T(J,"left",t.left),T(J,"width",t.width),T(J,"height",t.height),T(J,"opacity","0.8"),T(J,"position",De?"absolute":"fixed"),T(J,"zIndex","100000"),T(J,"pointerEvents","none"),Be.ghost=J,e.appendChild(J),T(J,"transform-origin",fe/parseInt(J.style.width)*100+"% "+ve/parseInt(J.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,r=e.dataTransfer,i=n.options;z("dragStart",this,{evt:e}),Be.eventCanceled?this._onDrop():(z("setupClone",this),Be.eventCanceled||((ne=q(X)).draggable=!1,ne.style["will-change"]="",this._hideClone(),O(ne,this.options.chosenClass,!1),Be.clone=ne),n.cloneId=$e((function(){z("clone",n),Be.eventCanceled||(n.options.removeCloneOnHide||Z.insertBefore(ne,X),n._hideClone(),Y({sortable:n,name:"clone"}))})),!t&&O(X,i.dragClass,!0),t?(Se=!0,n._loopId=setInterval(n._emulateDragOver,50)):(b(document,"mouseup",n._onDrop),b(document,"touchend",n._onDrop),b(document,"touchcancel",n._onDrop),r&&(r.effectAllowed="move",i.setData&&i.setData.call(n,r,X)),g(document,"drop",n),T(X,"transform","translateZ(0)")),we=!0,n._dragStartId=$e(n._dragStarted.bind(n,t,e)),g(document,"selectstart",n),me=!0,p&&T(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,r,i,a=this.el,s=e.target,l=this.options,c=l.group,u=Be.active,d=le===c,h=l.sort,p=ce||u,f=this,v=!1;if(!Ce){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),s=w(s,l.draggable,a,!0),M("dragOver"),Be.eventCanceled)return v;if(X.contains(e.target)||s.animated&&s.animatingX&&s.animatingY||f._ignoreWhileAnimating===s)return q(!1);if(Se=!1,u&&!l.disabled&&(d?h||(r=!Z.contains(X)):ce===this||(this.lastPutMode=le.checkPull(this,u,X,e))&&c.checkPut(this,u,X,e))){if(i="vertical"===this._getDirection(e,s),t=I(X),M("dragOverValid"),Be.eventCanceled)return v;if(r)return Q=Z,F(),this._hideClone(),M("revert"),Be.eventCanceled||(ee?Z.insertBefore(X,ee):Z.appendChild(X)),q(!0);var m=x(a,l.draggable);if(!m||function(e,t,n){var r=I(x(n.el,n.options.draggable));return t?e.clientX>r.right+10||e.clientX<=r.right&&e.clientY>r.bottom&&e.clientX>=r.left:e.clientX>r.right&&e.clientY>r.top||e.clientX<=r.right&&e.clientY>r.bottom+10}(e,i,this)&&!m.animated){if(m===X)return q(!1);if(m&&a===e.target&&(s=m),s&&(n=I(s)),!1!==Ve(Z,a,X,t,s,n,e,!!s))return F(),a.appendChild(X),Q=a,B(),q(!0)}else if(s.parentNode===a){n=I(s);var g,b,y,k=X.parentNode!==a,S=!function(e,t,n){var r=n?e.left:e.top,i=n?e.right:e.bottom,a=n?e.width:e.height,o=n?t.left:t.top,s=n?t.right:t.bottom,l=n?t.width:t.height;return r===o||i===s||r+a/2===o+l/2}(X.animated&&X.toRect||t,s.animated&&s.toRect||n,i),E=i?"top":"left",j=D(s,"top","top")||D(X,"top","top"),C=j?j.scrollTop:void 0;if(ge!==s&&(b=n[E],Oe=!1,Te=!S&&l.invertSwap||k),0!==(g=function(e,t,n,r,i,a,o,s){var l=r?e.clientY:e.clientX,c=r?n.height:n.width,u=r?n.top:n.left,d=r?n.bottom:n.right,h=!1;if(!o)if(s&&ye<c*i){if(!Oe&&(1===be?l>u+c*a/2:l<d-c*a/2)&&(Oe=!0),Oe)h=!0;else if(1===be?l<u+ye:l>d-ye)return-be}else if(l>u+c*(1-i)/2&&l<d-c*(1-i)/2)return function(e){return P(X)<P(e)?1:-1}(t);if((h=h||o)&&(l<u+c*a/2||l>d-c*a/2))return l>u+c/2?1:-1;return 0}(e,s,n,i,S?1:l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,Te,ge===s))){var _=P(X);do{_-=g,y=Q.children[_]}while(y&&("none"===T(y,"display")||y===J))}if(0===g||y===s)return q(!1);ge=s,be=g;var L=s.nextElementSibling,A=!1,N=Ve(Z,a,X,t,s,n,e,A=1===g);if(!1!==N)return 1!==N&&-1!==N||(A=1===N),Ce=!0,setTimeout(We,30),F(),A&&!L?a.appendChild(X):s.parentNode.insertBefore(X,A?L:s),j&&R(j,0,C-j.scrollTop),Q=X.parentNode,void 0===b||Te||(ye=Math.abs(b-I(s)[E])),B(),q(!0)}if(a.contains(X))return q(!1)}return!1}function M(l,c){z(l,f,o({evt:e,isOwner:d,axis:i?"vertical":"horizontal",revert:r,dragRect:t,targetRect:n,canSort:h,fromSortable:p,target:s,completed:q,onMove:function(n,r){return Ve(Z,a,X,t,n,I(n),e,r)},changed:B},c))}function F(){M("dragOverAnimationCapture"),f.captureAnimationState(),f!==p&&p.captureAnimationState()}function q(t){return M("dragOverCompleted",{insertion:t}),t&&(d?u._hideClone():u._showClone(f),f!==p&&(O(X,ce?ce.options.ghostClass:u.options.ghostClass,!1),O(X,l.ghostClass,!0)),ce!==f&&f!==Be.active?ce=f:f===Be.active&&ce&&(ce=null),p===f&&(f._ignoreWhileAnimating=s),f.animateAll((function(){M("dragOverAnimationComplete"),f._ignoreWhileAnimating=null})),f!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(s===X&&!X.animated||s===a&&!s.animated)&&(ge=null),l.dragoverBubble||e.rootEl||s===document||(X.parentNode[K]._isOutsideThisEl(e.target),!t&&Re(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),v=!0}function B(){ae=P(X),se=P(X,l.draggable),Y({sortable:f,name:"change",toEl:a,newIndex:ae,newDraggableIndex:se,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){b(document,"mousemove",this._onTouchMove),b(document,"touchmove",this._onTouchMove),b(document,"pointermove",this._onTouchMove),b(document,"dragover",Re),b(document,"mousemove",Re),b(document,"touchmove",Re)},_offUpEvents:function(){var e=this.el.ownerDocument;b(e,"mouseup",this._onDrop),b(e,"touchend",this._onDrop),b(e,"pointerup",this._onDrop),b(e,"touchcancel",this._onDrop),b(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;ae=P(X),se=P(X,n.draggable),z("drop",this,{evt:e}),Q=X&&X.parentNode,ae=P(X),se=P(X,n.draggable),Be.eventCanceled?this._nulling():(we=!1,Te=!1,Oe=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),He(this.cloneId),He(this._dragStartId),this.nativeDraggable&&(b(document,"drop",this),b(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),p&&T(document.body,"user-select",""),T(X,"transform",""),e&&(me&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),J&&J.parentNode&&J.parentNode.removeChild(J),(Z===Q||ce&&"clone"!==ce.lastPutMode)&&ne&&ne.parentNode&&ne.parentNode.removeChild(ne),X&&(this.nativeDraggable&&b(X,"dragend",this),Ke(X),X.style["will-change"]="",me&&!we&&O(X,ce?ce.options.ghostClass:this.options.ghostClass,!1),O(X,this.options.chosenClass,!1),Y({sortable:this,name:"unchoose",toEl:Q,newIndex:null,newDraggableIndex:null,originalEvent:e}),Z!==Q?(ae>=0&&(Y({rootEl:Q,name:"add",toEl:Q,fromEl:Z,originalEvent:e}),Y({sortable:this,name:"remove",toEl:Q,originalEvent:e}),Y({rootEl:Q,name:"sort",toEl:Q,fromEl:Z,originalEvent:e}),Y({sortable:this,name:"sort",toEl:Q,originalEvent:e})),ce&&ce.save()):ae!==ie&&ae>=0&&(Y({sortable:this,name:"update",toEl:Q,originalEvent:e}),Y({sortable:this,name:"sort",toEl:Q,originalEvent:e})),Be.active&&(null!=ae&&-1!==ae||(ae=ie,se=oe),Y({sortable:this,name:"end",toEl:Q,originalEvent:e}),this.save()))),this._nulling())},_nulling:function(){z("nulling",this),Z=X=Q=J=ee=ne=te=re=ue=de=me=ae=se=ie=oe=ge=be=ce=le=Be.dragged=Be.ghost=Be.clone=Be.active=null,_e.forEach((function(e){e.checked=!0})),_e.length=he=pe=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":X&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,r=0,i=n.length,a=this.options;r<i;r++)w(e=n[r],a.draggable,this.el,!1)&&t.push(e.getAttribute(a.dataIdAttr)||Ue(e));return t},sort:function(e){var t={},n=this.el;this.toArray().forEach((function(e,r){var i=n.children[r];w(i,this.options.draggable,n,!1)&&(t[e]=i)}),this),e.forEach((function(e){t[e]&&(n.removeChild(t[e]),n.appendChild(t[e]))}))},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return w(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var r=H.modifyOption(this,e,t);n[e]=void 0!==r?r:t,"group"===e&&Ne(n)},destroy:function(){z("destroy",this);var e=this.el;e[K]=null,b(e,"mousedown",this._onTapStart),b(e,"touchstart",this._onTapStart),b(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(b(e,"dragover",this),b(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),Ee.splice(Ee.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!re){if(z("hideClone",this),Be.eventCanceled)return;T(ne,"display","none"),this.options.removeCloneOnHide&&ne.parentNode&&ne.parentNode.removeChild(ne),re=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(re){if(z("showClone",this),Be.eventCanceled)return;Z.contains(X)&&!this.options.group.revertClone?Z.insertBefore(ne,X):ee?Z.insertBefore(ne,ee):Z.appendChild(ne),this.options.group.revertClone&&this.animate(X,ne),T(ne,"display",""),re=!1}}else this._hideClone()}},Ie&&g(document,"touchmove",(function(e){(Be.active||we)&&e.cancelable&&e.preventDefault()})),Be.utils={on:g,off:b,css:T,find:C,is:function(e,t){return!!w(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},throttle:F,closest:w,toggleClass:O,clone:q,index:P,nextTick:$e,cancelNextTick:He,detectDirection:Ae,getChild:L},Be.get=function(e){return e[K]},Be.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(Be.utils=o({},Be.utils,e.utils)),H.mount(e)}))},Be.create=function(e,t){return new Be(e,t)},Be.version="1.10.2";var Ge,ze,Ye,Xe,Qe,Je,Ze=[],et=!1;function tt(){Ze.forEach((function(e){clearInterval(e.pid)})),Ze=[]}function nt(){clearInterval(Je)}var rt,it=F((function(e,t,n,r){if(t.scroll){var i,a=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,s=t.scrollSensitivity,l=t.scrollSpeed,c=_(),u=!1;ze!==n&&(ze=n,tt(),Ge=t.scroll,i=t.scrollFn,!0===Ge&&(Ge=N(n,!0)));var d=0,h=Ge;do{var p=h,f=I(p),v=f.top,m=f.bottom,g=f.left,b=f.right,y=f.width,k=f.height,w=void 0,S=void 0,E=p.scrollWidth,O=p.scrollHeight,j=T(p),C=p.scrollLeft,D=p.scrollTop;p===c?(w=y<E&&("auto"===j.overflowX||"scroll"===j.overflowX||"visible"===j.overflowX),S=k<O&&("auto"===j.overflowY||"scroll"===j.overflowY||"visible"===j.overflowY)):(w=y<E&&("auto"===j.overflowX||"scroll"===j.overflowX),S=k<O&&("auto"===j.overflowY||"scroll"===j.overflowY));var L=w&&(Math.abs(b-a)<=s&&C+y<E)-(Math.abs(g-a)<=s&&!!C),x=S&&(Math.abs(m-o)<=s&&D+k<O)-(Math.abs(v-o)<=s&&!!D);if(!Ze[d])for(var P=0;P<=d;P++)Ze[P]||(Ze[P]={});Ze[d].vx==L&&Ze[d].vy==x&&Ze[d].el===p||(Ze[d].el=p,Ze[d].vx=L,Ze[d].vy=x,clearInterval(Ze[d].pid),0==L&&0==x||(u=!0,Ze[d].pid=setInterval(function(){r&&0===this.layer&&Be.active._onTouchMove(Qe);var t=Ze[this.layer].vy?Ze[this.layer].vy*l:0,n=Ze[this.layer].vx?Ze[this.layer].vx*l:0;"function"==typeof i&&"continue"!==i.call(Be.dragged.parentNode[K],n,t,e,Qe,Ze[this.layer].el)||R(Ze[this.layer].el,n,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&h!==c&&(h=N(h,!1)));et=u}}),30),at=function(e){var t=e.originalEvent,n=e.putSortable,r=e.dragEl,i=e.activeSortable,a=e.dispatchSortableEvent,o=e.hideGhostForTarget,s=e.unhideGhostForTarget;if(t){var l=n||i;o();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,u=document.elementFromPoint(c.clientX,c.clientY);s(),l&&!l.el.contains(u)&&(a("spill"),this.onSpill({dragEl:r,putSortable:n}))}};function ot(){}function st(){}function lt(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(e){var t=e.dragEl;rt=t},dragOverValid:function(e){var t=e.completed,n=e.target,r=e.onMove,i=e.activeSortable,a=e.changed,o=e.cancel;if(i.options.swap){var s=this.sortable.el,l=this.options;if(n&&n!==s){var c=rt;!1!==r(n)?(O(n,l.swapClass,!0),rt=n):rt=null,c&&c!==rt&&O(c,l.swapClass,!1)}a(),t(!0),o()}},drop:function(e){var t=e.activeSortable,n=e.putSortable,r=e.dragEl,i=n||this.sortable,a=this.options;rt&&O(rt,a.swapClass,!1),rt&&(a.swap||n&&n.options.swap)&&r!==rt&&(i.captureAnimationState(),i!==t&&t.captureAnimationState(),function(e,t){var n,r,i=e.parentNode,a=t.parentNode;if(!i||!a||i.isEqualNode(t)||a.isEqualNode(e))return;n=P(e),r=P(t),i.isEqualNode(a)&&n<r&&r++;i.insertBefore(t,i.children[n]),a.insertBefore(e,a.children[r])}(r,rt),i.animateAll(),i!==t&&t.animateAll())},nulling:function(){rt=null}},a(e,{pluginName:"swap",eventProperties:function(){return{swapItem:rt}}})}ot.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var r=L(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(t,r):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:at},a(ot,{pluginName:"revertOnSpill"}),st.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:at},a(st,{pluginName:"removeOnSpill"});var ct,ut,dt,ht,pt,ft=[],vt=[],mt=!1,gt=!1,bt=!1;function yt(){function e(e){for(var t in this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this));e.options.supportPointer?g(document,"pointerup",this._deselectMultiDrag):(g(document,"mouseup",this._deselectMultiDrag),g(document,"touchend",this._deselectMultiDrag)),g(document,"keydown",this._checkKeyDown),g(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(t,n){var r="";ft.length&&ut===e?ft.forEach((function(e,t){r+=(t?", ":"")+e.textContent})):r=n.textContent,t.setData("Text",r)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(e){var t=e.dragEl;dt=t},delayEnded:function(){this.isMultiDrag=~ft.indexOf(dt)},setupClone:function(e){var t=e.sortable,n=e.cancel;if(this.isMultiDrag){for(var r=0;r<ft.length;r++)vt.push(q(ft[r])),vt[r].sortableIndex=ft[r].sortableIndex,vt[r].draggable=!1,vt[r].style["will-change"]="",O(vt[r],this.options.selectedClass,!1),ft[r]===dt&&O(vt[r],this.options.chosenClass,!1);t._hideClone(),n()}},clone:function(e){var t=e.sortable,n=e.rootEl,r=e.dispatchSortableEvent,i=e.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||ft.length&&ut===t&&(kt(!0,n),r("clone"),i()))},showClone:function(e){var t=e.cloneNowShown,n=e.rootEl,r=e.cancel;this.isMultiDrag&&(kt(!1,n),vt.forEach((function(e){T(e,"display","")})),t(),pt=!1,r())},hideClone:function(e){var t=this,n=(e.sortable,e.cloneNowHidden),r=e.cancel;this.isMultiDrag&&(vt.forEach((function(e){T(e,"display","none"),t.options.removeCloneOnHide&&e.parentNode&&e.parentNode.removeChild(e)})),n(),pt=!0,r())},dragStartGlobal:function(e){e.sortable;!this.isMultiDrag&&ut&&ut.multiDrag._deselectMultiDrag(),ft.forEach((function(e){e.sortableIndex=P(e)})),ft=ft.sort((function(e,t){return e.sortableIndex-t.sortableIndex})),bt=!0},dragStarted:function(e){var t=this,n=e.sortable;if(this.isMultiDrag){if(this.options.sort&&(n.captureAnimationState(),this.options.animation)){ft.forEach((function(e){e!==dt&&T(e,"position","absolute")}));var r=I(dt,!1,!0,!0);ft.forEach((function(e){e!==dt&&B(e,r)})),gt=!0,mt=!0}n.animateAll((function(){gt=!1,mt=!1,t.options.animation&&ft.forEach((function(e){V(e)})),t.options.sort&&wt()}))}},dragOver:function(e){var t=e.target,n=e.completed,r=e.cancel;gt&&~ft.indexOf(t)&&(n(!1),r())},revert:function(e){var t=e.fromSortable,n=e.rootEl,r=e.sortable,i=e.dragRect;ft.length>1&&(ft.forEach((function(e){r.addAnimationState({target:e,rect:gt?I(e):i}),V(e),e.fromRect=i,t.removeAnimationState(e)})),gt=!1,function(e,t){ft.forEach((function(n,r){var i=t.children[n.sortableIndex+(e?Number(r):0)];i?t.insertBefore(n,i):t.appendChild(n)}))}(!this.options.removeCloneOnHide,n))},dragOverCompleted:function(e){var t=e.sortable,n=e.isOwner,r=e.insertion,i=e.activeSortable,a=e.parentEl,o=e.putSortable,s=this.options;if(r){if(n&&i._hideClone(),mt=!1,s.animation&&ft.length>1&&(gt||!n&&!i.options.sort&&!o)){var l=I(dt,!1,!0,!0);ft.forEach((function(e){e!==dt&&(B(e,l),a.appendChild(e))})),gt=!0}if(!n)if(gt||wt(),ft.length>1){var c=pt;i._showClone(t),i.options.animation&&!pt&&c&&vt.forEach((function(e){i.addAnimationState({target:e,rect:ht}),e.fromRect=ht,e.thisAnimationDuration=null}))}else i._showClone(t)}},dragOverAnimationCapture:function(e){var t=e.dragRect,n=e.isOwner,r=e.activeSortable;if(ft.forEach((function(e){e.thisAnimationDuration=null})),r.options.animation&&!n&&r.multiDrag.isMultiDrag){ht=a({},t);var i=j(dt,!0);ht.top-=i.f,ht.left-=i.e}},dragOverAnimationComplete:function(){gt&&(gt=!1,wt())},drop:function(e){var t=e.originalEvent,n=e.rootEl,r=e.parentEl,i=e.sortable,a=e.dispatchSortableEvent,o=e.oldIndex,s=e.putSortable,l=s||this.sortable;if(t){var c=this.options,u=r.children;if(!bt)if(c.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),O(dt,c.selectedClass,!~ft.indexOf(dt)),~ft.indexOf(dt))ft.splice(ft.indexOf(dt),1),ct=null,G({sortable:i,rootEl:n,name:"deselect",targetEl:dt,originalEvt:t});else{if(ft.push(dt),G({sortable:i,rootEl:n,name:"select",targetEl:dt,originalEvt:t}),t.shiftKey&&ct&&i.el.contains(ct)){var d,h,p=P(ct),f=P(dt);if(~p&&~f&&p!==f)for(f>p?(h=p,d=f):(h=f,d=p+1);h<d;h++)~ft.indexOf(u[h])||(O(u[h],c.selectedClass,!0),ft.push(u[h]),G({sortable:i,rootEl:n,name:"select",targetEl:u[h],originalEvt:t}))}else ct=dt;ut=l}if(bt&&this.isMultiDrag){if((r[K].options.sort||r!==n)&&ft.length>1){var v=I(dt),m=P(dt,":not(."+this.options.selectedClass+")");if(!mt&&c.animation&&(dt.thisAnimationDuration=null),l.captureAnimationState(),!mt&&(c.animation&&(dt.fromRect=v,ft.forEach((function(e){if(e.thisAnimationDuration=null,e!==dt){var t=gt?I(e):v;e.fromRect=t,l.addAnimationState({target:e,rect:t})}}))),wt(),ft.forEach((function(e){u[m]?r.insertBefore(e,u[m]):r.appendChild(e),m++})),o===P(dt))){var g=!1;ft.forEach((function(e){e.sortableIndex===P(e)||(g=!0)})),g&&a("update")}ft.forEach((function(e){V(e)})),l.animateAll()}ut=l}(n===r||s&&"clone"!==s.lastPutMode)&&vt.forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)}))}},nullingGlobal:function(){this.isMultiDrag=bt=!1,vt.length=0},destroyGlobal:function(){this._deselectMultiDrag(),b(document,"pointerup",this._deselectMultiDrag),b(document,"mouseup",this._deselectMultiDrag),b(document,"touchend",this._deselectMultiDrag),b(document,"keydown",this._checkKeyDown),b(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(e){if(!(void 0!==bt&&bt||ut!==this.sortable||e&&w(e.target,this.options.draggable,this.sortable.el,!1)||e&&0!==e.button))for(;ft.length;){var t=ft[0];O(t,this.options.selectedClass,!1),ft.shift(),G({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:t,originalEvt:e})}},_checkKeyDown:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},a(e,{pluginName:"multiDrag",utils:{select:function(e){var t=e.parentNode[K];t&&t.options.multiDrag&&!~ft.indexOf(e)&&(ut&&ut!==t&&(ut.multiDrag._deselectMultiDrag(),ut=t),O(e,t.options.selectedClass,!0),ft.push(e))},deselect:function(e){var t=e.parentNode[K],n=ft.indexOf(e);t&&t.options.multiDrag&&~n&&(O(e,t.options.selectedClass,!1),ft.splice(n,1))}},eventProperties:function(){var e=this,t=[],n=[];return ft.forEach((function(r){var i;t.push({multiDragElement:r,index:r.sortableIndex}),i=gt&&r!==dt?-1:gt?P(r,":not(."+e.options.selectedClass+")"):P(r),n.push({multiDragElement:r,index:i})})),{items:l(ft),clones:[].concat(vt),oldIndicies:t,newIndicies:n}},optionListeners:{multiDragKey:function(e){return"ctrl"===(e=e.toLowerCase())?e="Control":e.length>1&&(e=e.charAt(0).toUpperCase()+e.substr(1)),e}}})}function kt(e,t){vt.forEach((function(n,r){var i=t.children[n.sortableIndex+(e?Number(r):0)];i?t.insertBefore(n,i):t.appendChild(n)}))}function wt(){ft.forEach((function(e){e!==dt&&e.parentNode&&e.parentNode.removeChild(e)}))}Be.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?g(document,"dragover",this._handleAutoScroll):this.options.supportPointer?g(document,"pointermove",this._handleFallbackAutoScroll):t.touches?g(document,"touchmove",this._handleFallbackAutoScroll):g(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?b(document,"dragover",this._handleAutoScroll):(b(document,"pointermove",this._handleFallbackAutoScroll),b(document,"touchmove",this._handleFallbackAutoScroll),b(document,"mousemove",this._handleFallbackAutoScroll)),nt(),tt(),clearTimeout(S),S=void 0},nulling:function(){Qe=ze=Ge=et=Je=Ye=Xe=null,Ze.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,r=(e.touches?e.touches[0]:e).clientX,i=(e.touches?e.touches[0]:e).clientY,a=document.elementFromPoint(r,i);if(Qe=e,t||d||u||p){it(e,this.options,a,t);var o=N(a,!0);!et||Je&&r===Ye&&i===Xe||(Je&&nt(),Je=setInterval((function(){var a=N(document.elementFromPoint(r,i),!0);a!==o&&(o=a,tt()),it(e,n.options,a,t)}),10),Ye=r,Xe=i)}else{if(!this.options.bubbleScroll||N(a,!0)===_())return void tt();it(e,this.options,N(a,!1),!1)}}},a(e,{pluginName:"scroll",initializeByDefault:!0})}),Be.mount(st,ot),t.default=Be},355:function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return s}));var r=38,i=40,a=13,o=27,s=8},386:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l}));n(26),n(77),n(38),n(27);var r=n(0),i=n.n(r),a={animation:200,forceFallback:!0,fallbackClass:"is-dragging",fallbackOnBody:!0,ghostClass:"is-ghost"};function o(){i()(".has-tooltip").tooltip("hide").tooltip("disable"),document.body.classList.add("is-dragging")}function s(){i()(".has-tooltip").tooltip("enable"),document.body.classList.remove("is-dragging")}function l(e){var t="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,n=Object.assign({},a,{filter:".no-drag",delay:t?100:0,scrollSensitivity:t?60:100,scrollSpeed:20,onStart:o,onEnd:s});return Object.keys(e).forEach((function(t){n[t]=e[t]})),n}},435:function(e,t,n){"use strict";n.d(t,"a",(function(){return dt}));n(24),n(49),n(56),n(30),n(26),n(104),n(85),n(40),n(65),n(46),n(69),n(35),n(18),n(311),n(55),n(68),n(695),n(122),n(36),n(283),n(91),n(246),n(67),n(89),n(27),n(41);var r=n(219),i=n.n(r),a={issues:"issue-recent-searches",merge_requests:"merge-request-recent-searches"},o=n(16),s=n(307),l=n(33),c=n(14),u=n(111),d=n(17),h=new d.default,p=(n(498),n(297));function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var v=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"processTokens",value:function(e,t){var n=new RegExp("(".concat(t.join("|"),"):(=|!=)?([~%@]?)(?:('[^']*'{0,1})|(\"[^\"]*\"{0,1})|(\\S+))"),"g"),r=[],i=[],a=null,o=e.replace(n,(function(e,t,n,a,o,s,l){var c,u=o||s||l,d=a,h=n;return"~"!==u&&"%"!==u&&"@"!==u||(d=u,u=""),"!="!==u&&"="!==u||(h=u,u=""),c="".concat(t,":").concat(u),-1===i.indexOf(c)&&(i.push(c),r.push({key:t,value:u||"",symbol:d||"",operator:h||""})),""})).replace(/\s{2,}/g," ").trim()||"";if(r.length>0){var s=r[r.length-1],l="".concat(s.key,":").concat(s.operator).concat(s.symbol).concat(s.value);a=e.lastIndexOf(l)===e.length-l.length?s:o}else a=o;return{tokens:r,lastToken:a,searchToken:o}}}],(n=null)&&f(t.prototype,n),r&&f(t,r),e}(),m={name:"RecentSearchesDropdownContent",props:{items:{type:Array,required:!0},isLocalStorageAvailable:{type:Boolean,required:!1,default:!0},allowedKeys:{type:Array,required:!0}},computed:{processedItems:function(){var e=this;return this.items.map((function(t){var n=v.processTokens(t,e.allowedKeys),r=n.tokens,i=n.searchToken;return{text:t,tokens:r.map((function(e){return{prefix:"".concat(e.key,":"),operator:e.operator,suffix:"".concat(e.symbol).concat(e.value)}})),searchToken:i}}))},hasItems:function(){return this.items.length>0}},methods:{onItemActivated:function(e){h.$emit("recentSearchesItemSelected",e)},onRequestClearRecentSearches:function(e){e.stopPropagation(),h.$emit("requestClearRecentSearches")}}},g=n(4),b=Object(g.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.isLocalStorageAvailable?e.hasItems?n("ul",[e._l(e.processedItems,(function(t,r){return n("li",{key:"processed-items-"+r,ref:"dropdownItem",refInFor:!0},[n("button",{staticClass:"filtered-search-history-dropdown-item js-dropdown-button",attrs:{type:"button"},on:{click:function(n){return e.onItemActivated(t.text)}}},[n("span",e._l(t.tokens,(function(t,r){return n("span",{key:"dropdown-token-"+r,staticClass:"filtered-search-history-dropdown-token js-dropdown-token"},[n("span",{staticClass:"name"},[e._v(e._s(t.prefix))]),e._v(" "),n("span",{staticClass:"name"},[e._v(e._s(t.operator))]),e._v(" "),n("span",{staticClass:"value"},[e._v(e._s(t.suffix))])])})),0),e._v(" "),n("span",{staticClass:"filtered-search-history-dropdown-search-token"},[e._v("\n          "+e._s(t.searchToken)+"\n        ")])])])})),e._v(" "),n("li",{staticClass:"divider"}),e._v(" "),n("li",[n("button",{ref:"clearButton",staticClass:"filtered-search-history-clear-button",attrs:{type:"button"},on:{click:function(t){return e.onRequestClearRecentSearches(t)}}},[e._v("\n        "+e._s(e.__("Clear recent searches"))+"\n      ")])])],2):n("div",{ref:"dropdownNote",staticClass:"dropdown-info-note"},[e._v("\n    "+e._s(e.__("You don't have any recent searches"))+"\n  ")]):n("div",{ref:"localStorageNote",staticClass:"dropdown-info-note"},[e._v("\n    "+e._s(e.__("This feature requires local storage to be enabled"))+"\n  ")])])}),[],!1,null,null,null).exports;function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var k=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=t,this.service=n,this.wrapperElement=r}var t,n,r;return t=e,(n=[{key:"init",value:function(){this.bindEvents(),this.render()}},{key:"bindEvents",value:function(){this.onRequestClearRecentSearchesWrapper=this.onRequestClearRecentSearches.bind(this),h.$on("requestClearRecentSearches",this.onRequestClearRecentSearchesWrapper)}},{key:"unbindEvents",value:function(){h.$off("requestClearRecentSearches",this.onRequestClearRecentSearchesWrapper)}},{key:"render",value:function(){var e=this.store.state;this.vm=new d.default({el:this.wrapperElement,components:{RecentSearchesDropdownContent:b},data:function(){return e},template:'\n        <recent-searches-dropdown-content\n          :items="recentSearches"\n          :is-local-storage-available="isLocalStorageAvailable"\n          :allowed-keys="allowedKeys"\n          />\n      '})}},{key:"onRequestClearRecentSearches",value:function(){var e=this.store.setRecentSearches([]);this.service.save(e)}},{key:"destroy",value:function(){this.unbindEvents(),this.vm&&this.vm.$destroy()}}])&&y(t.prototype,n),r&&y(t,r),e}(),w=(n(77),n(525)),S=n.n(w);function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var O=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state=Object.assign({isLocalStorageAvailable:!0,recentSearches:[],allowedKeys:n},t)}var t,n,r;return t=e,(n=[{key:"addRecentSearch",value:function(e){return this.setRecentSearches([e].concat(this.state.recentSearches)),this.state.recentSearches}},{key:"setRecentSearches",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.map((function(e){return e.trim()}));return this.state.recentSearches=S()(t).slice(0,5),this.state.recentSearches}}])&&E(t.prototype,n),r&&E(t,r),e}(),T=(n(64),n(1));var j=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name="RecentSearchesServiceError",this.message=t||Object(T.a)("Recent Searches Service is unavailable")};j.prototype=Error.prototype;var C=j,_=n(71);function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var D=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"issuable-recent-searches";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.localStorageKey=t}var t,n,r;return t=e,r=[{key:"isAvailable",value:function(){return _.a.isLocalStorageAccessSafe()}}],(n=[{key:"fetch",value:function(){if(!e.isAvailable()){var t=new C;return Promise.reject(t)}var n=window.localStorage.getItem(this.localStorageKey),r=[];if(n&&n.length>0)try{r=JSON.parse(n)}catch(e){return Promise.reject(e)}return Promise.resolve(r)}},{key:"save",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.isAvailable()&&window.localStorage.setItem(this.localStorageKey,JSON.stringify(t))}}])&&I(t.prototype,n),r&&I(t,r),e}(),L=n(324),x=(n(28),n(50),n(58),n(38),n(90),n(184),{keydown:function(e){if(!this.destroyed){var t,n=e.detail.hook.list,r=n.data,i=e.detail.hook.trigger.value.toLowerCase(),a=e.detail.hook.config.Filter,o=[];r&&(t=a&&a.filterFunction&&"function"==typeof a.filterFunction?a.filterFunction:function(e){return e.droplab_hidden=-1===e[a.template].toLowerCase().indexOf(i),e},r.filter((function(e){return!e.droplab_hidden})).length!==(o=r.map((function(e){return t(e,i)}))).filter((function(e){return!e.droplab_hidden})).length&&(n.setData(o),n.currentIndex=0))}},debounceKeydown:function(e){[13,16,17,18,20,37,38,39,40,91,92,93].indexOf(e.detail.which||e.detail.keyCode)>-1||(this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(this.keydown.bind(this,e),200))},init:function(e){var t=e.config.Filter;t&&t.template&&(this.hook=e,this.destroyed=!1,this.eventWrapper={},this.eventWrapper.debounceKeydown=this.debounceKeydown.bind(this),this.hook.trigger.addEventListener("keydown.dl",this.eventWrapper.debounceKeydown),this.hook.trigger.addEventListener("mousedown.dl",this.eventWrapper.debounceKeydown))},destroy:function(){this.timeout&&clearTimeout(this.timeout),this.destroyed=!0,this.hook.trigger.removeEventListener("keydown.dl",this.eventWrapper.debounceKeydown),this.hook.trigger.removeEventListener("mousedown.dl",this.eventWrapper.debounceKeydown)}}),P=(n(374),n(258),n(145),n(495),n(42),n(72),n(93)),A=n.n(P),N=["author","assignee"],M="hint",F="operator",R=n(200),q=n(543);function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var V=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tokenValue=t,this.tokenType=n,this.tokenOperator=r}var t,r,i;return t=e,i=[{key:"replaceEpicTitle",value:function(e,t,n){var r=e,i=r.querySelector(".value");i&&(r.dataset.originalValue=i.innerText,i.innerText='"'.concat(t,'"::&').concat(n))}},{key:"setTokenStyle",value:function(e,t,n){var r=e;return r.style.backgroundColor=t,r.style.color=n,"#FFFFFF"===n&&r.querySelector(".remove-token").classList.add("inverted"),r}}],(r=[{key:"render",value:function(e,t){var n=this.tokenType,r=this.tokenValue;["none","any"].includes(r.toLowerCase())||("label"===n?this.updateLabelTokenColor(e):N.includes(n)?this.updateUserTokenAppearance(e,t):"my-reaction"===n?this.updateEmojiTokenAppearance(e,t):"epic"===n&&this.updateEpicLabel(e,t))}},{key:"updateUserTokenAppearance",value:function(e,t){var n=this.tokenValue,r=this.tokenValue.replace(/^@/,"");return q.a.retrieve(r).then((function(r){r&&(e.dataset.originalValue=n,t.innerHTML='\n          <img class="avatar s20" src="'.concat(r.avatar_url,'" alt="">\n          ').concat(A()(r.name),"\n        "))})).catch((function(){}))}},{key:"updateLabelTokenColor",value:function(t){var n=this.tokenValue,r=u.a.container.querySelector(".filtered-search"),i=r.dataset.labelsEndpoint,a=H.getEndpointWithQueryParams("".concat(i,".json"),r.dataset.endpointQueryParams);return R.a.retrieve(a).then((function(r){var i=(r||[]).find((function(e){return"~".concat(Y.getEscapedText(e.title))===n}));i&&e.setTokenStyle(t,i.color,i.text_color)})).catch((function(){return new c.a(Object(T.a)("An error occurred while fetching label colors."))}))}},{key:"updateEpicLabel",value:function(t){var n=this.tokenValue.replace(/^&/,""),r=u.a.container.querySelector(".filtered-search"),i=r.dataset.epicsEndpoint,a=H.getEndpointWithQueryParams("".concat(i,".json"),r.dataset.endpointQueryParams);return R.a.retrieve(a).then((function(r){var i=(r||[]).find((function(e){return e.id===Number(n)}));i&&e.replaceEpicTitle(t,i.title,i.id)})).catch((function(){return new c.a(Object(T.a)("An error occurred while adding formatted title for epic"))}))}},{key:"updateEmojiTokenAppearance",value:function(e,t){var r=e,i=t,a=this.tokenValue;return Promise.resolve().then(n.bind(null,447)).then((function(e){e.isEmojiNameValid(a)&&(r.dataset.originalValue=a,i.innerHTML=e.glEmojiTag(a))})).catch((function(){}))}}])&&B(t.prototype,r),i&&B(t,i),e}();function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var W,U,$,H=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getOperatorToken",value:function(t){var n=null;return e.permissibleOperatorValues.forEach((function(e){t.startsWith(e)&&(n=e)})),n}},{key:"getValueToken",value:function(t){var n=t;return e.permissibleOperatorValues.forEach((function(e){t.startsWith(e)&&(n=t.slice(e.length))})),n}},{key:"getLastVisualTokenBeforeInput",value:function(){var e=u.a.container.querySelector(".input-token"),t=e&&e.previousElementSibling;return{lastVisualToken:t,isLastVisualTokenValid:null===t||-1!==t.className.indexOf("filtered-search-term")||t&&null!==t.querySelector(".operator")&&null!==t.querySelector(".value")}}},{key:"unselectTokens",value:function(){var e=u.a.container.querySelectorAll(".js-visual-token .selectable.selected");[].forEach.call(e,(function(e){return e.classList.remove("selected")}))}},{key:"selectToken",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.classList.contains("selected");e.unselectTokens(),r&&!n||t.classList.add("selected")}},{key:"removeSelectedToken",value:function(){var e=u.a.container.querySelector(".js-visual-token .selected");if(e){var t=e.closest(".js-visual-token");t.parentElement.removeChild(t)}}},{key:"createVisualTokenElementHTML",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.canEdit,n=void 0===t||t,r=e.hasOperator,i=void 0!==r&&r,a=e.uppercaseTokenName,o=void 0!==a&&a,s=e.capitalizeTokenValue,l=void 0!==s&&s;return'\n      <div class="'.concat(n?"selectable":"hidden",'" role="button">\n        <div class="').concat(o?"text-uppercase":"",' name"></div>\n        ').concat(i?'<div class="operator"></div>':"",'\n        <div class="value-container">\n          <div class="').concat(l?"text-capitalize":"",' value"></div>\n          <div class="remove-token" role="button">\n            <i class="fa fa-close"></i>\n          </div>\n        </div>\n      </div>\n    ')}},{key:"renderVisualTokenValue",value:function(e,t,n,r){var i=t.toLowerCase(),a=e.querySelector(".value-container"),o=a.querySelector(".value");o.innerText=n,new V(n,i,r).render(a,o)}},{key:"addVisualTokenElement",value:function(t){var n=t.name,r=t.operator,i=t.value,a=t.options,o=void 0===a?{}:a,s=o.isSearchTerm,l=void 0!==s&&s,c=o.canEdit,d=o.uppercaseTokenName,h=o.capitalizeTokenValue,p=o.tokenClass,f=void 0===p?"search-token-".concat(n.toLowerCase()):p,v=document.createElement("li");v.classList.add("js-visual-token"),v.classList.add(l?"filtered-search-term":"filtered-search-token"),l||v.classList.add(f);var m=Boolean(r);if(i)v.innerHTML=e.createVisualTokenElementHTML({canEdit:c,uppercaseTokenName:d,operator:r,hasOperator:m,capitalizeTokenValue:h}),e.renderVisualTokenValue(v,n,i,r);else{var g='<div class="'.concat(d?"text-uppercase":"",' name"></div>'),b="";m&&(b='<div class="operator"></div>'),v.innerHTML=g+b}v.querySelector(".name").innerText=n,m&&(v.querySelector(".operator").innerText=r);var y=u.a.container.querySelector(".tokens-container"),k=u.a.container.querySelector(".filtered-search");y.insertBefore(v,k.parentElement)}},{key:"addValueToPreviousVisualTokenElement",value:function(t){var n=e.getLastVisualTokenBeforeInput(),r=n.lastVisualToken;if(!n.isLastVisualTokenValid&&r.classList.contains("filtered-search-token")){var i=e.getLastTokenPartial(),a=e.getLastTokenOperator();r.innerHTML=e.createVisualTokenElementHTML({hasOperator:Boolean(a)}),r.querySelector(".name").innerText=i,r.querySelector(".operator").innerText=a,e.renderVisualTokenValue(r,i,t,a)}}},{key:"addFilterVisualToken",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=i.canEdit,o=i.uppercaseTokenName,s=void 0!==o&&o,l=i.capitalizeTokenValue,c=void 0!==l&&l,d=e.getLastVisualTokenBeforeInput(),h=d.lastVisualToken,p=d.isLastVisualTokenValid,f=e.addVisualTokenElement;if(p)f({name:t,operator:n,value:r,options:{canEdit:a,uppercaseTokenName:s,capitalizeTokenValue:c}});else if(p||!h||h.querySelector(".operator")){var v=h.querySelector(".name").innerText,m=h.querySelector(".operator").innerText,g=u.a.container.querySelector(".tokens-container");g.removeChild(h);var b=r;b||n||(b=t),f({name:v,operator:m,value:b,options:{canEdit:a,uppercaseTokenName:s,capitalizeTokenValue:c}})}else{var y=u.a.container.querySelector(".tokens-container");y.removeChild(h),f({name:t,operator:n,value:r,options:{canEdit:a,uppercaseTokenName:s,capitalizeTokenValue:c}})}}},{key:"addSearchVisualToken",value:function(t){var n=e.getLastVisualTokenBeforeInput().lastVisualToken;n&&n.classList.contains("filtered-search-term")?n.querySelector(".name").innerText+=" ".concat(t):e.addVisualTokenElement({name:t,operator:null,value:null,options:{isSearchTerm:!0}})}},{key:"getLastTokenPartial",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=e.getLastVisualTokenBeforeInput(),r=n.lastVisualToken;if(!r)return"";var i=r.querySelector(".value-container"),a=i&&i.dataset.originalValue;if(a)return a;var o=r.querySelector(".value"),s=r.querySelector(".name"),l=o?o.innerText:"",c=s?s.innerText:"";if(t){var u=r.querySelector(".operator"),d=u?u.innerText:"";return l||d||c}return l||c}},{key:"getLastTokenOperator",value:function(){var t=e.getLastVisualTokenBeforeInput().lastVisualToken,n=t&&t.querySelector(".operator");return null==n?void 0:n.innerText}},{key:"removeLastTokenPartial",value:function(){var t=e.getLastVisualTokenBeforeInput().lastVisualToken;if(t){var n=t.querySelector(".value"),r=t.querySelector(".operator");if(n){var i=t.querySelector(".selectable"),a=t.querySelector(".value-container");i.removeChild(a),t.innerHTML=i.innerHTML}else r?t.removeChild(r):t.closest(".tokens-container").removeChild(t)}}},{key:"tokenizeInput",value:function(){var t=u.a.container.querySelector(".filtered-search"),n=e.getLastVisualTokenBeforeInput().isLastVisualTokenValid;t.value&&(n?e.addSearchVisualToken(t.value):e.addValueToPreviousVisualTokenElement(t.value),t.value="")}},{key:"getEndpointWithQueryParams",value:function(e,t){if(!t)return e;var n=Object(o.E)(JSON.parse(t));return"".concat(e,"?").concat(n)}},{key:"editToken",value:function(t){var n=u.a.container.querySelector(".filtered-search");e.tokenizeInput();var r=t.parentElement,i=n.parentElement;r.replaceChild(i,t);var a,o=t.querySelector(".name"),s=t.querySelector(".operator");if(t.classList.contains("filtered-search-token")){e.addFilterVisualToken(o.innerText,s.innerText,null,{uppercaseTokenName:o.classList.contains("text-uppercase")});var l=t.querySelector(".value-container");(a=l.dataset.originalValue)||(a=l.querySelector(".value").innerText)}a||(a=o.innerText),n.value=a;var c=new Event("input");n.dispatchEvent(c),n.focus()}},{key:"moveInputToTheRight",value:function(){var t=u.a.container.querySelector(".filtered-search");if(t){var n=t.parentElement,r=u.a.container.querySelector(".tokens-container");if(e.tokenizeInput(),!r.lastElementChild.isEqualNode(n)){if(!e.getLastVisualTokenBeforeInput().isLastVisualTokenValid){var i=e.getLastTokenPartial();e.removeLastTokenPartial(),e.addSearchVisualToken(i)}r.removeChild(n),r.appendChild(n)}}}}],(n=null)&&K(t.prototype,n),r&&K(t,r),e}();function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}$=["=","!="],(U="permissibleOperatorValues")in(W=H)?Object.defineProperty(W,U,{value:$,enumerable:!0,configurable:!0,writable:!0}):W[U]=$;var Y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getEscapedText",value:function(e){var t=e,n=-1!==e.indexOf(" "),r=-1!==e.indexOf('"');return n&&(t=r?"'".concat(e,"'"):'"'.concat(e,'"')),t}},{key:"filterWithSymbol",value:function(t,n,r){var i=r,a=e.getSearchInput(n),o=i.title.toLowerCase(),s=a.toLowerCase(),l="";s[0]===t&&(l=G(s,1)[0],s=s.slice(1)),'"'!==s[0]&&"'"!==s[0]||-1===o.indexOf(" ")||(s=s.slice(1));var c=l===t&&-1!==o.indexOf(s),u=-1!==o.indexOf("".concat(l).concat(s));return i.droplab_hidden=!u&&!c,i}},{key:"filterHint",value:function(t,n){var r=t.input,a=t.allowedKeys,o=n,s=e.getSearchQuery(r),l=v.processTokens(s,a),c=l.lastToken,u=l.tokens,d=c.key||c||"",h="array"===n.type,p=u.some((function(e){return e.key===n.hint})),f="search"===o.hint;if(f&&(o.droplab_hidden=!0),!h&&p)o.droplab_hidden=!0;else if(f||d&&" "!==i()(s.split(""))){if(d){var m=d.split(":"),g=i()(m[0].split(" ")),b=f?a.some((function(e){return e.startsWith(g.toLowerCase())})):-1===o.hint.indexOf(g.toLowerCase());o.droplab_hidden=!!g&&b}}else o.droplab_hidden=!1;return o}},{key:"setDataValueIfSelected",value:function(e,t,n){var r=n.getAttribute("data-value");return r&&st.addWordToInput({tokenName:e,tokenOperator:t,tokenValue:r,clicked:!0,options:{capitalizeTokenValue:n.hasAttribute("data-capitalize")}}),null!==r}},{key:"getVisualTokenValues",value:function(e){var t=e&&e.querySelector(".name").textContent.trim(),n=e&&e.querySelector(".value")&&e.querySelector(".value").textContent.trim();"label"===t&&n&&(n=n.replace(/^~("|')?(.*)/,"$2").replace(/("|')$/,""));var r=e&&e.querySelector(".operator");return{tokenName:t,tokenOperator:r&&r.textContent.trim(),tokenValue:n}}},{key:"getSearchQuery",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=u.a.container,n=[].slice.call(t.querySelectorAll(".tokens-container li")),r=[];if(e){var i=n.findIndex((function(e){return e.classList.contains("input-token")}));n.splice(i+1)}return n.forEach((function(e){if(e.classList.contains("js-visual-token")){var t=e.querySelector(".name"),n=e.querySelector(".operator"),i=e.querySelector(".value"),a=e.querySelector(".value-container"),o=i&&i.dataset.symbol?i.dataset.symbol:"",s="",l="";n&&(l=n.textContent.trim()),a&&a.dataset.originalValue?s=a.dataset.originalValue:i&&i.innerText&&(s=i.innerText),-1!==e.className.indexOf("filtered-search-token")?r.push("".concat(t.innerText.toLowerCase(),":").concat(l).concat(o).concat(s)):r.push(t.innerText)}else if(e.classList.contains("input-token")){var c=H.getLastVisualTokenBeforeInput().isLastVisualTokenValid,d=u.a.container.querySelector(".filtered-search"),h=d&&d.value;if(c)r.push(h);else{var p=r.pop();r.push("".concat(p).concat(h))}}})),r.map((function(e){return e.trim()})).join(" ")}},{key:"getSearchInput",value:function(t){var n=t.value,r=e.getInputSelectionPosition(t).right;return n.slice(0,r)}},{key:"getInputSelectionPosition",value:function(e){var t=e.selectionStart,n=e.value,r=(n=n.replace(/(('[^']*'{0,1})|("[^"]*"{0,1})|:\s+)/g,(function(e){return e.replace(/\s/g,"_")}))).slice(t).search(/\s/);r>=0?r+=t:r<0&&(r=n.length);var i=n.slice(0,r).search(/\S+$/);return 0===t?i=0:t===n.length&&i<0?i=n.length:i<0&&(i=t),{left:i,right:r}}}],(n=null)&&z(t.prototype,n),r&&z(t,r),e}();function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Q=function(){function e(t){var n=t.droplab,r=t.dropdown,i=t.input,a=t.filter;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.droplab=n,this.hookId=i&&i.id,this.input=i,this.filter=a,this.dropdown=r,this.loadingTemplate='<div class="filter-dropdown-loading">\n      <span class="spinner"></span>\n    </div>',this.bindEvents()}var t,n,r;return t=e,(n=[{key:"bindEvents",value:function(){this.itemClickedWrapper=this.itemClicked.bind(this),this.dropdown.addEventListener("click.dl",this.itemClickedWrapper)}},{key:"unbindEvents",value:function(){this.dropdown.removeEventListener("click.dl",this.itemClickedWrapper)}},{key:"getCurrentHook",value:function(){var e=this;return this.droplab.hooks.filter((function(t){return t.id===e.hookId}))[0]||null}},{key:"itemClicked",value:function(e,t){var n=e.detail.selected;if("LI"===n.tagName&&n.innerHTML){var r=H.getLastVisualTokenBeforeInput().lastVisualToken,i=Y.getVisualTokenValues(r).tokenOperator;if(!Y.setDataValueIfSelected(this.filter,i,n)){var a=t(n);st.addWordToInput({tokenName:this.filter,tokenOperator:i,tokenValue:a,clicked:!0})}this.resetFilters(),this.dismissDropdown(),this.dispatchInputEvent()}}},{key:"setAsDropdown",value:function(){this.input.setAttribute("data-dropdown-trigger","#".concat(this.dropdown.id))}},{key:"setOffset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;window.innerWidth>480?this.dropdown.style.left="".concat(e,"px"):this.dropdown.style.left="0px"}},{key:"renderContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.getCurrentHook();e&&t&&t.list.hidden&&t.list.show()}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.setAsDropdown();var n=this.getCurrentHook(),r=null===n;r||e?this.renderContent(t):n.list.list.id!==this.dropdown.id&&this.renderContent(t)}},{key:"dismissDropdown",value:function(){this.input.focus()}},{key:"dispatchInputEvent",value:function(){this.input.dispatchEvent(new CustomEvent("input",{bubbles:!0,cancelable:!0}))}},{key:"dispatchFormSubmitEvent",value:function(){this.input.form.dispatchEvent(new Event("submit"))}},{key:"hideDropdown",value:function(){var e=this.getCurrentHook();e&&e.list.hide()}},{key:"resetFilters",value:function(){var e=this.getCurrentHook();if(e){var t=e.list.data||[];if(!t)return;var n=t.map((function(e){var t=e;return t.droplab_hidden=!1,t}));e.list.render(n)}}}])&&X(t.prototype,n),r&&X(t,r),e}();function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ee(e,t){return!t||"object"!==J(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function te(e,t,n){return(te="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ne(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ie=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=n.input,i=n.tokenKeys;return(e=ee(this,ne(t).call(this,n))).config={Filter:{template:"hint",filterFunction:Y.filterHint.bind(null,{input:r,allowedKeys:i.getKeys()})}},e.tokenKeys=i,e}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}(t,e),n=t,(r=[{key:"itemClicked",value:function(e){var t=e.detail.selected;if("LI"===t.tagName)if(t.hasAttribute("data-value"))this.dismissDropdown();else if("submit"===t.getAttribute("data-action"))this.dismissDropdown(),this.dispatchFormSubmitEvent();else{var n=t.closest(".filter-dropdown-item").dataset,r=n.hint;if(n.tag.length){var i=this.input.value.split(" "),a=[];i.forEach((function(e,t){a.push(e),t===i.length-1&&-1!==r.indexOf(e.toLowerCase())&&a.pop()})),a.length>0&&H.addSearchVisualToken(a.join(" "));var o=r.replace(":",""),s=this.tokenKeys.searchByKey(o).uppercaseTokenName;st.addWordToInput({tokenName:o,clicked:!1,options:{uppercaseTokenName:s}})}this.dismissDropdown(),this.dispatchInputEvent()}}},{key:"renderContent",value:function(){var e=[{hint:"search",tag:"search",formattedKey:Object(T.a)("Search for this text"),icon:"".concat(gon.sprite_icons,"#search")}],n=this.tokenKeys.get().map((function(e){return{icon:"".concat(gon.sprite_icons,"#").concat(e.icon),hint:e.key,tag:":".concat(e.tag),type:e.type,formattedKey:e.formattedKey}})).concat(e);this.droplab.changeHookList(this.hookId,this.dropdown,[x],this.config),this.droplab.setData(this.hookId,n),te(ne(t.prototype),"renderContent",this).call(this)}},{key:"init",value:function(){this.droplab.addHook(this.input,this.dropdown,[x],this.config).init()}}])&&Z(n.prototype,r),i&&Z(n,i),t}(Q),ae={init:function(e){this.destroyed=!1,this.hook=e,this.notLoading(),this.eventWrapper={},this.eventWrapper.debounceTrigger=this.debounceTrigger.bind(this),this.hook.trigger.addEventListener("keydown.dl",this.eventWrapper.debounceTrigger),this.hook.trigger.addEventListener("focus",this.eventWrapper.debounceTrigger),this.trigger(!0)},notLoading:function(){this.loading=!1},debounceTrigger:function(e){var t=[16,17,18,20,37,38,39,40,91,93].indexOf(e.detail.which||e.detail.keyCode)>-1,n="focus"===e.type;t||this.loading||(this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(this.trigger.bind(this,n),200))},trigger:function(e){var t=this,n=this.hook.config.AjaxFilter,r=this.trigger.value;if(n&&n.endpoint&&n.searchKey){if(n.searchValueFunction&&(r=n.searchValueFunction()),n.loadingTemplate&&void 0===this.hook.list.data||0===this.hook.list.data.length){var i=this.hook.list.list.querySelector("[data-dynamic]"),a=document.createElement("div");a.innerHTML=n.loadingTemplate,a.setAttribute("data-loading-template",!0),this.listTemplate=i.outerHTML,i.outerHTML=a.outerHTML}if(e&&(r=""),n.searchKey===r)return this.list.show();this.loading=!0;var o=n.params||{};o[n.searchKey]=r;var s=n.endpoint+this.buildParams(o);return R.a.retrieve(s).then((function(e){t._loadData(e,n),n.onLoadingFinished&&n.onLoadingFinished(e)})).catch(n.onError)}},_loadData:function(e,t){var n=this.hook.list;if(t.loadingTemplate&&void 0===n.data||0===n.data.length){var r=n.list.querySelector("[data-loading-template]");r&&(r.outerHTML=this.listTemplate)}if(!this.destroyed){var i=n.list.children;1===i.length&&i[0].hasAttribute("data-dynamic")&&0===e.length&&n.hide(),n.setData.call(n,e)}this.notLoading(),n.currentIndex=0},buildParams:function(e){return e?"?"+Object.keys(e).map((function(t){return t+"="+(e[t]||"")})).join("&"):""},destroy:function(){this.timeout&&clearTimeout(this.timeout),this.destroyed=!0,this.hook.trigger.removeEventListener("keydown.dl",this.eventWrapper.debounceTrigger),this.hook.trigger.removeEventListener("focus",this.eventWrapper.debounceTrigger)}};function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function le(e,t){return!t||"object"!==oe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ce(e,t,n){return(ce="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ue(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function ue(e){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function de(e,t){return(de=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var he=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=n.tokenKeys,i=n.endpoint,a=n.symbol;return(e=le(this,ue(t).call(this,n))).tokenKeys=r,e.endpoint=i,e.symbol=a,e.config={AjaxFilter:e.ajaxFilterConfig()},e}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&de(e,t)}(t,e),n=t,(r=[{key:"ajaxFilterConfig",value:function(){return{endpoint:"".concat(gon.relative_url_root||"").concat(this.endpoint),searchKey:"search",searchValueFunction:this.getSearchInput.bind(this),loadingTemplate:this.loadingTemplate,onError:function(){Object(c.a)(Object(T.a)("An error occurred fetching the dropdown data."))}}}},{key:"itemClicked",value:function(e){ce(ue(t.prototype),"itemClicked",this).call(this,e,(function(e){return e.querySelector(".dropdown-light-content").innerText.trim()}))}},{key:"renderContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.droplab.changeHookList(this.hookId,this.dropdown,[ae],this.config),ce(ue(t.prototype),"renderContent",this).call(this,e)}},{key:"getSearchInput",value:function(){var e=Y.getSearchInput(this.input),t=v.processTokens(e,this.tokenKeys.getKeys()).lastToken||"";return t[0]===this.symbol&&(t=t.slice(1)),'"'!==t[0]&&"'"!==t[0]||(t=t.slice(1)),t}},{key:"init",value:function(){this.droplab.addHook(this.input,this.dropdown,[ae],this.config).init()}}])&&se(n.prototype,r),i&&se(n,i),t}(Q);function pe(e){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function be(e,t){return!t||"object"!==pe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ye(e,t,n){return(ye="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ke(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function ke(e){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function we(e,t){return(we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Se=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),be(this,ke(t).call(this,ve({},e,{endpoint:"/autocomplete/users.json",symbol:"@"})))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}(t,e),n=t,(r=[{key:"ajaxFilterConfig",value:function(){var e=this;return ve({},ye(ke(t.prototype),"ajaxFilterConfig",this).call(this),{params:ve({active:!0,group_id:this.getGroupId(),project_id:this.getProjectId(),current_user:!0},this.projectOrGroupId()),onLoadingFinished:function(){e.hideCurrentUser()}})}},{key:"hideCurrentUser",value:function(){Object(L.a)(this.dropdown.querySelector(".js-current-user"),"hidden")}},{key:"getGroupId",value:function(){return this.input.getAttribute("data-group-id")}},{key:"getProjectId",value:function(){return this.input.getAttribute("data-project-id")}},{key:"projectOrGroupId",value:function(){var e=this.getProjectId(),t=this.getGroupId();return t?{group_id:t}:{project_id:e}}}])&&ge(n.prototype,r),i&&ge(n,i),t}(he),Ee={_loadData:function(e,t,n){if(t.loadingTemplate){var r=n.hook.list.list.querySelector("[data-loading-template]");r&&(r.outerHTML=n.listTemplate)}n.destroyed||n.hook.list[t.method].call(n.hook.list,e)},preprocessing:function(e,t){var n=t;return e.preprocessing&&!t.preprocessed&&(n=e.preprocessing(t),R.a.override(e.endpoint,n)),n},init:function(e){var t=this;t.destroyed=!1;var n=e.config.Ajax;if(this.hook=e,n&&n.endpoint&&n.method&&("setData"===n.method||"addData"===n.method)){if(n.loadingTemplate){var r=e.list.list.querySelector("[data-dynamic]"),i=document.createElement("div");i.innerHTML=n.loadingTemplate,i.setAttribute("data-loading-template",""),this.listTemplate=r.outerHTML,r.outerHTML=i.outerHTML}return R.a.retrieve(n.endpoint).then(t.preprocessing.bind(null,n)).then((function(e){return t._loadData(e,n,t)})).catch(n.onError)}},destroy:function(){this.destroyed=!0}};function Oe(e){return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function je(e,t){return!t||"object"!==Oe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ce(e,t,n){return(Ce="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_e(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function _e(e){return(_e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ie(e,t){return(Ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var De=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=n.input,i=n.endpoint,a=n.symbol,o=n.preprocessing;return(e=je(this,_e(t).call(this,n))).symbol=a,e.config={Ajax:{endpoint:i,method:"setData",loadingTemplate:e.loadingTemplate,preprocessing:o,onError:function(){new c.a(Object(T.a)("An error occurred fetching the dropdown data."))}},Filter:{filterFunction:Y.filterWithSymbol.bind(null,e.symbol,r),template:"title"}},e}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ie(e,t)}(t,e),n=t,(r=[{key:"itemClicked",value:function(e){var n=this;Ce(_e(t.prototype),"itemClicked",this).call(this,e,(function(e){var t=e.querySelector(".js-data-value").innerText.trim();return"".concat(n.symbol).concat(Y.getEscapedText(t))}))}},{key:"renderContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.droplab.changeHookList(this.hookId,this.dropdown,[Ee,x],this.config),Ce(_e(t.prototype),"renderContent",this).call(this,e)}},{key:"init",value:function(){this.droplab.addHook(this.input,this.dropdown,[Ee,x],this.config).init()}}])&&Te(n.prototype,r),i&&Te(n,i),t}(Q);n(78);function Le(e){return(Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xe(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ae(e,t){return!t||"object"!==Le(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ne(e,t,n){return(Ne="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Me(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Me(e){return(Me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fe(e,t){return(Fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Re=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Ae(this,Me(t).call(this,r))).config={Ajax:{endpoint:"".concat(gon.relative_url_root||"","/autocomplete/award_emojis"),method:"setData",loadingTemplate:e.loadingTemplate,onError:function(){new c.a(Object(T.a)("An error occurred fetching the dropdown data."))}},Filter:{template:"name"}},Promise.resolve().then(n.bind(null,447)).then((function(t){var n=t.glEmojiTag;e.glEmojiTag=n})).catch((function(){})),e.unbindEvents(),e.bindEvents(),e}var r,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fe(e,t)}(t,e),r=t,(i=[{key:"bindEvents",value:function(){Ne(Me(t.prototype),"bindEvents",this).call(this),this.listRenderedWrapper=this.listRendered.bind(this),this.dropdown.addEventListener("render.dl",this.listRenderedWrapper)}},{key:"unbindEvents",value:function(){this.dropdown.removeEventListener("render.dl",this.listRenderedWrapper),Ne(Me(t.prototype),"unbindEvents",this).call(this)}},{key:"listRendered",value:function(){this.replaceEmojiElement()}},{key:"itemClicked",value:function(e){Ne(Me(t.prototype),"itemClicked",this).call(this,e,(function(e){var t=e.querySelector(".js-data-value").innerText.trim();return Y.getEscapedText(t)}))}},{key:"renderContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.droplab.changeHookList(this.hookId,this.dropdown,[Ee,x],this.config),Ne(Me(t.prototype),"renderContent",this).call(this,e)}},{key:"replaceEmojiElement",value:function(){var e=this;this.glEmojiTag&&xe(this.dropdown.querySelectorAll(".filter-dropdown-item")).forEach((function(t){var n=t.querySelector(".js-data-value");if(null!==n){var r=n.innerText,i=e.glEmojiTag(r);t.querySelector("gl-emoji").outerHTML=i}}))}},{key:"init",value:function(){this.droplab.addHook(this.input,this.dropdown,[Ee,x],this.config).init()}}])&&Pe(r.prototype,i),a&&Pe(r,a),t}(Q);function qe(e){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ve(e,t){return!t||"object"!==qe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ke(e,t,n){return(Ke="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=We(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function We(e){return(We=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ue(e,t){return(Ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $e=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ve(this,We(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ue(e,t)}(t,e),n=t,(r=[{key:"renderContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.droplab.changeHookList(this.hookId,this.dropdown,[],this.config),Ke(We(t.prototype),"renderContent",this).call(this,e)}}])&&Be(n.prototype,r),i&&Be(n,i),t}(Q);function He(e){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ze(e,t){return!t||"object"!==He(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ye(e,t,n){return(Ye="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Xe(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Xe(e){return(Xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qe(e,t){return(Qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Je=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=n.input,i=n.tokenKeys;return(e=ze(this,Xe(t).call(this,n))).config={Filter:{filterFunction:Y.filterWithSymbol.bind(null,"",r),template:"title"}},e.tokenKeys=i,e}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qe(e,t)}(t,e),n=t,(r=[{key:"itemClicked",value:function(e){var t=e.detail.selected;if("LI"===t.tagName&&t.hasAttribute("data-value")){var n=t.dataset.value;H.removeLastTokenPartial(),st.addWordToInput({tokenName:this.filter,tokenOperator:n,clicked:!1})}this.dismissDropdown(),this.dispatchInputEvent()}},{key:"renderContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.filter=H.getLastTokenPartial();var n=[{tag:"equal",type:"string",title:"=",help:Object(T.a)("is")},{tag:"not-equal",type:"string",title:"!=",help:Object(T.a)("is not")}];this.droplab.changeHookList(this.hookId,this.dropdown,[x],this.config),this.droplab.setData(this.hookId,n),Ye(Xe(t.prototype),"renderContent",this).call(this,e)}},{key:"init",value:function(){this.droplab.addHook(this.input,this.dropdown,[x],this.config).init()}}])&&Ge(n.prototype,r),i&&Ge(n,i),t}(Q);function Ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function et(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var nt=function(){function e(t){var n=t.container,r=t.runnerTagsEndpoint,i=t.labelsEndpoint,a=t.milestonesEndpoint,o=t.releasesEndpoint,s=t.groupsOnly,l=t.includeAncestorGroups,c=t.includeDescendantGroups;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=n,this.runnerTagsEndpoint=r,this.labelsEndpoint=i,this.milestonesEndpoint=a,this.releasesEndpoint=o,this.groupsOnly=s,this.includeAncestorGroups=l,this.includeDescendantGroups=c,this.filteredSearchInput=this.container.querySelector(".filtered-search")}var t,n,r;return t=e,(n=[{key:"getAllowedMappings",value:function(e){return this.buildMappings(e,this.getMappings())}},{key:"buildMappings",value:function(e,t){var n={hint:{reference:null,gl:ie,element:this.container.querySelector("#js-dropdown-hint")},operator:{reference:null,gl:Je,element:this.container.querySelector("#js-dropdown-operator")}};return e.forEach((function(e){t[e]&&(n[e]=t[e])})),n}},{key:"getMappings",value:function(){return{author:{reference:null,gl:Se,element:this.container.querySelector("#js-dropdown-author")},assignee:{reference:null,gl:Se,element:this.container.querySelector("#js-dropdown-assignee")},milestone:{reference:null,gl:De,extraArguments:{endpoint:this.getMilestoneEndpoint(),symbol:"%"},element:this.container.querySelector("#js-dropdown-milestone")},release:{reference:null,gl:De,extraArguments:{endpoint:this.getReleasesEndpoint(),symbol:"",preprocessing:function(e){return e.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(n),!0).forEach((function(t){et(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{title:e.tag})}))}},element:this.container.querySelector("#js-dropdown-release")},label:{reference:null,gl:De,extraArguments:{endpoint:this.getLabelsEndpoint(),symbol:"~",preprocessing:Y.duplicateLabelPreprocessing},element:this.container.querySelector("#js-dropdown-label")},"my-reaction":{reference:null,gl:Re,element:this.container.querySelector("#js-dropdown-my-reaction")},wip:{reference:null,gl:De,element:this.container.querySelector("#js-dropdown-wip")},confidential:{reference:null,gl:De,element:this.container.querySelector("#js-dropdown-confidential")},status:{reference:null,gl:$e,element:this.container.querySelector("#js-dropdown-admin-runner-status")},type:{reference:null,gl:$e,element:this.container.querySelector("#js-dropdown-admin-runner-type")},tag:{reference:null,gl:he,extraArguments:{endpoint:this.getRunnerTagsEndpoint(),symbol:"~"},element:this.container.querySelector("#js-dropdown-runner-tag")},"target-branch":{reference:null,gl:De,extraArguments:{endpoint:this.getMergeRequestTargetBranchesEndpoint(),symbol:""},element:this.container.querySelector("#js-dropdown-target-branch")}}}},{key:"getMilestoneEndpoint",value:function(){return"".concat(this.milestonesEndpoint,".json")}},{key:"getReleasesEndpoint",value:function(){return"".concat(this.releasesEndpoint,".json")}},{key:"getLabelsEndpoint",value:function(){var e="".concat(this.labelsEndpoint,".json?");return this.groupsOnly&&(e="".concat(e,"only_group_labels=true&")),this.includeAncestorGroups&&(e="".concat(e,"include_ancestor_groups=true&")),this.includeDescendantGroups&&(e="".concat(e,"include_descendant_groups=true")),e}},{key:"getRunnerTagsEndpoint",value:function(){return"".concat(this.runnerTagsEndpoint,".json")}},{key:"getMergeRequestTargetBranchesEndpoint",value:function(){var e="".concat(gon.relative_url_root||"","/autocomplete/merge_request_target_branches.json"),t={group_id:this.getGroupId(),project_id:this.getProjectId()};return Object(l.h)(t,e)}},{key:"getGroupId",value:function(){return this.filteredSearchInput.getAttribute("data-group-id")||""}},{key:"getProjectId",value:function(){return this.filteredSearchInput.getAttribute("data-project-id")||""}}])&&tt(t.prototype,n),r&&tt(t,r),e}(),rt=n(259);function it(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function at(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var st=function(){function e(t){var n=t.runnerTagsEndpoint,r=void 0===n?"":n,i=t.labelsEndpoint,a=void 0===i?"":i,o=t.milestonesEndpoint,s=void 0===o?"":o,l=t.releasesEndpoint,c=void 0===l?"":l,d=t.epicsEndpoint,h=void 0===d?"":d,f=t.tokenizer,v=t.page,m=t.isGroup,g=t.isGroupAncestor,b=t.isGroupDecendent,y=t.filteredSearchTokenKeys;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var k=function(e){return e.replace(/\/$/,"")};this.container=u.a.container,this.runnerTagsEndpoint=k(r),this.labelsEndpoint=k(a),this.milestonesEndpoint=k(s),this.releasesEndpoint=k(c),this.epicsEndpoint=k(h),this.tokenizer=f,this.filteredSearchTokenKeys=y||p.a,this.filteredSearchInput=this.container.querySelector(".filtered-search"),this.page=v,this.groupsOnly=m,this.includeAncestorGroups=g,this.includeDescendantGroups=b,this.setupMapping(),this.cleanupWrapper=this.cleanup.bind(this),document.addEventListener("beforeunload",this.cleanupWrapper)}var t,n,r;return t=e,r=[{key:"addWordToInput",value:function(e){var t=e.tokenName,n=e.tokenOperator,r=void 0===n?"":n,i=e.tokenValue,a=void 0===i?"":i,o=e.clicked,s=void 0!==o&&o,l=e.options,c=void 0===l?{}:l,d=c.uppercaseTokenName,h=void 0!==d&&d,p=c.capitalizeTokenValue,f=void 0!==p&&p,v=u.a.container.querySelector(".filtered-search");H.addFilterVisualToken(t,r,a,{uppercaseTokenName:h,capitalizeTokenValue:f}),v.value="",s&&H.moveInputToTheRight()}}],(n=[{key:"cleanup",value:function(){this.droplab&&(this.droplab.destroy(),this.droplab=null),this.setupMapping(),document.removeEventListener("beforeunload",this.cleanupWrapper)}},{key:"setupMapping",value:function(){var e=this.filteredSearchTokenKeys.getKeys(),t=new nt(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?it(Object(n),!0).forEach((function(t){at(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):it(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this));this.mapping=t.getAllowedMappings(e)}},{key:"updateCurrentDropdownOffset",value:function(){this.updateDropdownOffset(this.currentDropdown)}},{key:"updateDropdownOffset",value:function(e){var t=this.filteredSearchInput.getBoundingClientRect().left-this.container.querySelector(".scroll-container").getBoundingClientRect().left,n=this.mapping[e].element.clientWidth||240,r=this.container.querySelector(".scroll-container").clientWidth-n;r<t&&(t=r),this.mapping[e].reference.setOffset(t)}},{key:"load",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.mapping[e],r=n.gl,i=n.element,a=!1;if(!n.reference){var o={droplab:this.droplab,dropdown:i,input:this.filteredSearchInput,tokenKeys:this.filteredSearchTokenKeys,filter:e},s=n.extraArguments||{},l=Object.assign({},o,s);n.reference=new(Function.prototype.bind.apply(r,[null,l]))}t&&n.reference.init(),this.currentDropdown!==M&&this.currentDropdown!==F||(a=!0),this.updateDropdownOffset(e),n.reference.render(t,a),this.currentDropdown=e}},{key:"loadDropdown",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=!1;if(this.droplab||(t=!0,this.droplab=new rt.a),e!==F){var n=this.filteredSearchTokenKeys.searchByKey(e.toLowerCase()),r=n&&this.currentDropdown!==n.key&&this.mapping[n.key],i=!n&&this.currentDropdown!==M;if(r||i){var a=n&&n.key?n.key:M;this.load(a,t)}}else this.load(e,t)}},{key:"setDropdown",value:function(){var e=Y.getSearchQuery(!0),t=this.tokenizer.processTokens(e,this.filteredSearchTokenKeys.getKeys()),n=t.lastToken,r=t.searchToken;if(this.currentDropdown&&this.updateCurrentDropdownOffset(),n===r&&null!==n){var a=n.split(":"),o=i()(a[0].split(" ")),s=i()(a[1]),l=H.permissibleOperatorValues.includes(s&&s.trim()),c="";if(a.length>1){var u=H.getLastTokenOperator();c=l&&u?o:F}this.loadDropdown(c)}else if(n){var d=H.getLastTokenOperator();this.loadDropdown(d?n.key:F)}else this.loadDropdown(M)}},{key:"resetDropdowns",value:function(){this.currentDropdown&&(this.mapping[this.currentDropdown].reference.hideDropdown(),this.setDropdown(),this.mapping[this.currentDropdown].reference.resetFilters(),this.updateDropdownOffset(this.currentDropdown))}},{key:"destroyDroplab",value:function(){this.droplab.destroy()}}])&&ot(t.prototype,n),r&&ot(t,r),e}(),lt=n(355);function ct(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var dt=function(){function e(t){var n=t.page,r=t.isGroup,i=void 0!==r&&r,o=t.isGroupAncestor,l=void 0===o||o,c=t.isGroupDecendent,d=void 0!==c&&c,h=t.filteredSearchTokenKeys,p=void 0===h?s.a:h,f=t.stateFiltersSelector,v=void 0===f?".issues-state-filters":f;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isGroup=i,this.isGroupAncestor=l,this.isGroupDecendent=d,this.states=["opened","closed","merged","all"],this.page=n,this.container=u.a.container,this.filteredSearchInput=this.container.querySelector(".filtered-search"),this.filteredSearchInputForm=this.filteredSearchInput.form,this.clearSearchButton=this.container.querySelector(".clear-search"),this.tokensContainer=this.container.querySelector(".tokens-container"),this.filteredSearchTokenKeys=p,this.stateFiltersSelector=v,this.filteredSearchInput.dataset.multipleAssignees&&this.filteredSearchTokenKeys.enableMultipleAssignees&&this.filteredSearchTokenKeys.enableMultipleAssignees(),!this.filteredSearchInput.dataset.epicsEndpoint&&this.filteredSearchTokenKeys.removeEpicToken&&this.filteredSearchTokenKeys.removeEpicToken(),this.recentSearchesStore=new O({isLocalStorageAvailable:D.isAvailable(),allowedKeys:this.filteredSearchTokenKeys.getKeys()}),this.searchHistoryDropdownElement=document.querySelector(".js-filtered-search-history-dropdown");var m=this.searchHistoryDropdownElement?this.searchHistoryDropdownElement.dataset.fullPath:"project",g="".concat(m,"-").concat(a[this.page]);this.recentSearchesService=new D(g)}var t,n,r;return t=e,(n=[{key:"setup",value:function(){var e=this;if(this.fetchingRecentSearchesPromise=this.recentSearchesService.fetch().catch((function(e){if("RecentSearchesServiceError"!==e.name)return new c.a(Object(T.a)("An error occurred while parsing recent searches")),[]})).then((function(t){if(t){var n=e.recentSearchesStore.setRecentSearches(e.recentSearchesStore.state.recentSearches.concat(t));e.recentSearchesService.save(n)}})),this.filteredSearchInput){this.tokenizer=v;var t=this.filteredSearchInput.dataset,n=t.runnerTagsEndpoint,r=void 0===n?"":n,i=t.labelsEndpoint,a=void 0===i?"":i,o=t.milestonesEndpoint,s=void 0===o?"":o,l=t.releasesEndpoint,u=void 0===l?"":l,d=t.epicsEndpoint,h=void 0===d?"":d;this.dropdownManager=new st({runnerTagsEndpoint:r,labelsEndpoint:a,milestonesEndpoint:s,releasesEndpoint:u,epicsEndpoint:h,tokenizer:this.tokenizer,page:this.page,isGroup:this.isGroup,isGroupAncestor:this.isGroupAncestor,isGroupDecendent:this.isGroupDecendent,filteredSearchTokenKeys:this.filteredSearchTokenKeys}),this.recentSearchesRoot=new k(this.recentSearchesStore,this.recentSearchesService,this.searchHistoryDropdownElement),this.recentSearchesRoot.init(),this.bindEvents(),this.loadSearchParamsFromURL(),this.dropdownManager.setDropdown(),this.cleanupWrapper=this.cleanup.bind(this),document.addEventListener("beforeunload",this.cleanupWrapper)}}},{key:"cleanup",value:function(){this.unbindEvents(),document.removeEventListener("beforeunload",this.cleanupWrapper),this.recentSearchesRoot&&this.recentSearchesRoot.destroy()}},{key:"bindStateEvents",value:function(){var e=this;this.stateFilters=document.querySelector(".container-fluid ".concat(this.stateFiltersSelector)),this.stateFilters&&(this.searchStateWrapper=this.searchState.bind(this),this.applyToStateFilters((function(t){t.addEventListener("click",e.searchStateWrapper)})))}},{key:"unbindStateEvents",value:function(){var e=this;this.stateFilters&&this.applyToStateFilters((function(t){t.removeEventListener("click",e.searchStateWrapper)}))}},{key:"applyToStateFilters",value:function(e){var t=this;this.stateFilters.querySelectorAll("a[data-state]").forEach((function(n){t.states.indexOf(n.dataset.state)>-1&&e(n)}))}},{key:"bindEvents",value:function(){this.handleFormSubmit=this.handleFormSubmit.bind(this),this.setDropdownWrapper=this.dropdownManager.setDropdown.bind(this.dropdownManager),this.toggleClearSearchButtonWrapper=this.toggleClearSearchButton.bind(this),this.handleInputPlaceholderWrapper=this.handleInputPlaceholder.bind(this),this.handleInputVisualTokenWrapper=this.handleInputVisualToken.bind(this),this.checkForEnterWrapper=this.checkForEnter.bind(this),this.onClearSearchWrapper=this.onClearSearch.bind(this),this.checkForBackspaceWrapper=this.checkForBackspace.call(this),this.removeSelectedTokenKeydownWrapper=this.removeSelectedTokenKeydown.bind(this),this.unselectEditTokensWrapper=this.unselectEditTokens.bind(this),this.editTokenWrapper=this.editToken.bind(this),this.tokenChange=this.tokenChange.bind(this),this.addInputContainerFocusWrapper=this.addInputContainerFocus.bind(this),this.removeInputContainerFocusWrapper=this.removeInputContainerFocus.bind(this),this.onrecentSearchesItemSelectedWrapper=this.onrecentSearchesItemSelected.bind(this),this.removeTokenWrapper=this.removeToken.bind(this),this.filteredSearchInputForm.addEventListener("submit",this.handleFormSubmit),this.filteredSearchInput.addEventListener("input",this.setDropdownWrapper),this.filteredSearchInput.addEventListener("input",this.toggleClearSearchButtonWrapper),this.filteredSearchInput.addEventListener("input",this.handleInputPlaceholderWrapper),this.filteredSearchInput.addEventListener("keyup",this.handleInputVisualTokenWrapper),this.filteredSearchInput.addEventListener("keydown",this.checkForEnterWrapper),this.filteredSearchInput.addEventListener("keyup",this.checkForBackspaceWrapper),this.filteredSearchInput.addEventListener("click",this.tokenChange),this.filteredSearchInput.addEventListener("keyup",this.tokenChange),this.filteredSearchInput.addEventListener("focus",this.addInputContainerFocusWrapper),this.tokensContainer.addEventListener("click",this.removeTokenWrapper),this.tokensContainer.addEventListener("click",this.editTokenWrapper),this.clearSearchButton.addEventListener("click",this.onClearSearchWrapper),document.addEventListener("click",this.unselectEditTokensWrapper),document.addEventListener("click",this.removeInputContainerFocusWrapper),document.addEventListener("keydown",this.removeSelectedTokenKeydownWrapper),h.$on("recentSearchesItemSelected",this.onrecentSearchesItemSelectedWrapper),this.bindStateEvents()}},{key:"unbindEvents",value:function(){this.filteredSearchInputForm.removeEventListener("submit",this.handleFormSubmit),this.filteredSearchInput.removeEventListener("input",this.setDropdownWrapper),this.filteredSearchInput.removeEventListener("input",this.toggleClearSearchButtonWrapper),this.filteredSearchInput.removeEventListener("input",this.handleInputPlaceholderWrapper),this.filteredSearchInput.removeEventListener("keyup",this.handleInputVisualTokenWrapper),this.filteredSearchInput.removeEventListener("keydown",this.checkForEnterWrapper),this.filteredSearchInput.removeEventListener("keyup",this.checkForBackspaceWrapper),this.filteredSearchInput.removeEventListener("click",this.tokenChange),this.filteredSearchInput.removeEventListener("keyup",this.tokenChange),this.filteredSearchInput.removeEventListener("focus",this.addInputContainerFocusWrapper),this.tokensContainer.removeEventListener("click",this.removeTokenWrapper),this.tokensContainer.removeEventListener("click",this.editTokenWrapper),this.clearSearchButton.removeEventListener("click",this.onClearSearchWrapper),document.removeEventListener("click",this.unselectEditTokensWrapper),document.removeEventListener("click",this.removeInputContainerFocusWrapper),document.removeEventListener("keydown",this.removeSelectedTokenKeydownWrapper),h.$off("recentSearchesItemSelected",this.onrecentSearchesItemSelectedWrapper),this.unbindStateEvents()}},{key:"checkForBackspace",value:function(){var e=this,t=0;return function(n){if(8===n.keyCode||46===n.keyCode){var r=H.getLastVisualTokenBeforeInput().lastVisualToken,i=Y.getVisualTokenValues(r),a=i.tokenName,o=i.tokenValue,s=a&&e.canEdit&&e.canEdit(a,o);""===e.filteredSearchInput.value&&r&&s&&2===(t+=1)&&(t=0,e.filteredSearchInput.value=H.getLastTokenPartial(!0),H.removeLastTokenPartial()),e.dropdownManager.updateCurrentDropdownOffset()}else t=0}}},{key:"checkForEnter",value:function(e){if(38===e.keyCode||40===e.keyCode){var t=this.filteredSearchInput.selectionStart;e.preventDefault(),this.filteredSearchInput.setSelectionRange(t,t)}if(13===e.keyCode){var n=this.dropdownManager.mapping[this.dropdownManager.currentDropdown].element.querySelectorAll(".droplab-item-active");e.preventDefault(),n.length||(this.isHandledAsync?(e.stopImmediatePropagation(),this.filteredSearchInput.blur(),this.dropdownManager.resetDropdowns()):this.dropdownManager.destroyDroplab(),this.search())}}},{key:"addInputContainerFocus",value:function(){Object(L.a)(this.filteredSearchInput.closest(".filtered-search-box"),"focus")}},{key:"removeInputContainerFocus",value:function(e){var t=this.filteredSearchInput.closest(".filtered-search-box"),n=t&&t.contains(e.target),r=null!==e.target.closest(".filter-dropdown"),i=null!==e.target.closest("ul[data-dropdown]");n||r||i||!t||t.classList.remove("focus")}},{key:"removeToken",value:function(e){if(e.target.closest(".remove-token")){e.preventDefault(),e.stopImmediatePropagation();var t=e.target.closest(".selectable");H.selectToken(t,!0),this.removeSelectedToken()}}},{key:"unselectEditTokens",value:function(e){var t=this.container.querySelector(".filtered-search-box"),n=t&&t.contains(e.target),r=null!==e.target.closest(".filter-dropdown"),i=e.target.classList.contains("tokens-container");(!n&&!r||i)&&(H.moveInputToTheRight(),this.dropdownManager.resetDropdowns())}},{key:"editToken",value:function(e){var t=e.target.closest(".js-visual-token"),n=t&&t.querySelector(".name").textContent.trim(),r=this.canEdit&&this.canEdit(n);t&&r&&(e.preventDefault(),e.stopPropagation(),H.editToken(t),this.tokenChange())}},{key:"toggleClearSearchButton",value:function(){var e=Y.getSearchQuery(),t=this.clearSearchButton.classList.contains("hidden");0!==e.length||t?e.length&&t&&this.clearSearchButton.classList.remove("hidden"):this.clearSearchButton.classList.add("hidden")}},{key:"handleInputPlaceholder",value:function(){var e=Y.getSearchQuery(),t=Object(T.a)("Search or filter results..."),n=this.filteredSearchInput.placeholder;0===e.length&&n!==t?this.filteredSearchInput.placeholder=t:e.length>0&&""!==n&&(this.filteredSearchInput.placeholder="")}},{key:"removeSelectedTokenKeydown",value:function(e){8!==e.keyCode&&46!==e.keyCode||this.removeSelectedToken()}},{key:"removeSelectedToken",value:function(){H.removeSelectedToken(),this.handleInputPlaceholder(),this.toggleClearSearchButton(),this.dropdownManager.updateCurrentDropdownOffset()}},{key:"onClearSearch",value:function(e){e.preventDefault(),this.clearSearch()}},{key:"clearSearch",value:function(){var e=this;this.filteredSearchInput.value="";var t=[];[].forEach.call(this.tokensContainer.children,(function(n){var r=n.classList.contains("js-visual-token");if(r){var i=Y.getVisualTokenValues(n),a=i.tokenName,o=i.tokenValue;r=e.canEdit&&e.canEdit(a,o)}r&&t.push(n)})),t.forEach((function(e){e.parentElement.removeChild(e)})),this.clearSearchButton.classList.add("hidden"),this.handleInputPlaceholder(),this.dropdownManager.resetDropdowns(),this.isHandledAsync&&this.search()}},{key:"handleInputVisualToken",value:function(e){var t=this;if(e.keyCode!==lt.a){var n=this.filteredSearchInput,r=this.tokenizer.processTokens(n.value,this.filteredSearchTokenKeys.getKeys()),a=r.tokens,o=r.searchToken,s=H.getLastVisualTokenBeforeInput().isLastVisualTokenValid;if(s){a.forEach((function(e){n.value=n.value.replace("".concat(e.key,":").concat(e.operator).concat(e.symbol).concat(e.value),""),H.addFilterVisualToken(e.key,e.operator,"".concat(e.symbol).concat(e.value),{uppercaseTokenName:t.filteredSearchTokenKeys.shouldUppercaseTokenName(e.key),capitalizeTokenValue:t.filteredSearchTokenKeys.shouldCapitalizeTokenValue(e.key)})}));var l=o.split(":");if(l.length>1){var c=l[0].split(" "),u=i()(c);if(c.length>1){c.pop();var d=c.join(" ");n.value=n.value.replace(d,""),H.addSearchVisualToken(d)}H.addFilterVisualToken(u,null,null,{uppercaseTokenName:this.filteredSearchTokenKeys.shouldUppercaseTokenName(u),capitalizeTokenValue:this.filteredSearchTokenKeys.shouldCapitalizeTokenValue(u)}),n.value=n.value.replace("".concat(u,":"),"")}}else if(s||H.getLastTokenOperator()){if(o.match(/([~%@]{0,1}".+")|([~%@]{0,1}'.+')|^((?![~%@]')(?![~%@]")(?!')(?!")).*/g)&&" "===n.value[n.value.length-1]){var h=H.getLastTokenPartial();H.addFilterVisualToken(o,null,null,{capitalizeTokenValue:this.filteredSearchTokenKeys.shouldCapitalizeTokenValue(h)}),n.value=n.value.replace(o,"").trim()}}else{var p=H.getLastTokenPartial(),f=o&&o.trim();H.permissibleOperatorValues.includes(f)&&(H.removeLastTokenPartial(),H.addFilterVisualToken(p,f,null,{capitalizeTokenValue:this.filteredSearchTokenKeys.shouldCapitalizeTokenValue(p)}),n.value=n.value.replace(o,"").trim())}}}},{key:"handleFormSubmit",value:function(e){e.preventDefault(),this.search()}},{key:"saveCurrentSearchQuery",value:function(){var e=this;this.fetchingRecentSearchesPromise.then((function(){var t=Y.getSearchQuery();if(t.length>0){var n=e.recentSearchesStore.addRecentSearch(t);e.recentSearchesService.save(n)}})).catch((function(){}))}},{key:"getAllParams",value:function(e){return this.modifyUrlParams?this.modifyUrlParams(e):e}},{key:"transformParams",value:function(t){var n=this,r=new RegExp(/not\[(\w+)\]\[?\]?=(.*)/);return t.map((function(t){var i=t.match(r);if(i&&3===i.length){var a=i[1];if(e.notTransformableQueryParams.includes(a)||n.filteredSearchTokenKeys.searchByConditionUrl(t))return t;var o=i[2],s=encodeURIComponent("!=");return"".concat(a,"=").concat(s).concat(o)}var l=ct(t.split("="),2),c=l[0],u=l[1];if(e.notTransformableQueryParams.includes(c)||n.filteredSearchTokenKeys.searchByConditionUrl(t))return t;var d=encodeURIComponent("=");return"".concat(c,"=").concat(d).concat(u)}))}},{key:"loadSearchParamsFromURL",value:function(){var e=this,t=Object(o.p)(),n=this.transformParams(t),r=this.getAllParams(n),i=this.getUsernameParams(),a=!1;r.forEach((function(t){var n=t.split("="),r=decodeURIComponent(n[0]),o=n[1],s=e.filteredSearchTokenKeys.searchByConditionUrl(t);if(s){a=!0;var l=e.canEdit&&e.canEdit(s.tokenKey);H.addFilterVisualToken(s.tokenKey,s.operator,s.value,{canEdit:l})}else{var c=o?decodeURIComponent(o.replace(/\+/g," ")):o,u=e.filteredSearchTokenKeys.searchByKeyParam(r);if(u){var d=u.key,h=u.symbol,p="";-1!==c.indexOf(" ")&&(p=-1===c.indexOf('"')?'"':"'"),a=!0;var f=e.canEdit&&e.canEdit(d,c),v=u.uppercaseTokenName,m=u.capitalizeTokenValue,g=H.getOperatorToken(c),b=H.getValueToken(c);H.addFilterVisualToken(d,g,"".concat(h).concat(p).concat(b).concat(p),{canEdit:f,uppercaseTokenName:v,capitalizeTokenValue:m})}else if(u||"assignee_id"!==r)if(u||"author_id"!==r)u||"search"!==r||(a=!0,e.filteredSearchInput.value=c);else{var y=parseInt(o,10);if(i[y]){a=!0;var k=e.canEdit&&e.canEdit("author"),w=H.getOperatorToken(i[y]),S=H.getValueToken(i[y]);H.addFilterVisualToken("author",w,"@".concat(S),{canEdit:k})}}else{var E=parseInt(o,10);if(i[E]){a=!0;var O=e.canEdit&&e.canEdit("assignee"),T=H.getOperatorToken(i[E]),j=H.getValueToken(i[E]);H.addFilterVisualToken("assignee",T,"@".concat(j),{canEdit:O})}}}})),this.saveCurrentSearchQuery(),a&&(this.clearSearchButton.classList.remove("hidden"),this.handleInputPlaceholder())}},{key:"searchState",value:function(e){e.preventDefault();var t=e.currentTarget;t.blur();var n=t.dataset&&t.dataset.state;n&&this.search(n)}},{key:"search",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=[],r=Y.getSearchQuery();this.saveCurrentSearchQuery();var i=this.filteredSearchTokenKeys.getKeys(),a=this.tokenizer.processTokens(r,i),s=a.tokens,c=a.searchToken,u=t||Object(o.m)("state")||"opened";if(n.push("state=".concat(u)),s.forEach((function(t){var r=e.filteredSearchTokenKeys.searchByConditionKeyValue(t.key,t.operator,t.value),i=e.filteredSearchTokenKeys.searchByKey(t.key)||{},a=i.param,o=t.key.replace("-","_"),s=a?"".concat(o,"_").concat(a):o,l="";if(r)l=r.url;else{var c=t.value;if(i.lowercaseValueOnSubmit&&(c=c.toLowerCase()),("'"===c[0]&&"'"===c[c.length-1]||'"'===c[0]&&'"'===c[c.length-1])&&(c=c.slice(1,c.length-1)),"!="===t.operator){var u=s.endsWith("[]");l="not[".concat(u?s.slice(0,-2):s,"]").concat(u?"[]":"","=").concat(encodeURIComponent(c))}else l="".concat(s,"=").concat(encodeURIComponent(c))}n.push(l)})),c){var d=c.split(" ").map((function(e){return encodeURIComponent(e)})).join("+");n.push("search=".concat(d))}var h="?scope=all&utf8=%E2%9C%93&".concat(n.join("&"));this.updateObject?this.updateObject(h):Object(l.s)(h)}},{key:"getUsernameParams",value:function(){var e={};try{var t=this.filteredSearchInput.getAttribute("data-username-params");JSON.parse(t).forEach((function(t){e[t.id]=t.username}))}catch(e){}return e}},{key:"tokenChange",value:function(){var e=this.dropdownManager.mapping[this.dropdownManager.currentDropdown];if(e){var t=e.reference;this.setDropdownWrapper(),t.dispatchInputEvent()}}},{key:"onrecentSearchesItemSelected",value:function(e){this.clearSearch(),this.filteredSearchInput.value=e,this.filteredSearchInput.dispatchEvent(new CustomEvent("input")),this.search()}},{key:"canEdit",value:function(){return!0}}])&&ut(t.prototype,n),r&&ut(t,r),e}();!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(dt,"notTransformableQueryParams",["scope","utf8","state","search"])},494:function(e,t,n){"use strict";var r=n(467),i=n(343),a=n(223),o=n(546),s=n(459),l=Math.min,c=[].lastIndexOf,u=!!c&&1/[1].lastIndexOf(1,-0)<0,d=o("lastIndexOf"),h=s("indexOf",{ACCESSORS:!0,1:0}),p=u||!d||!h;e.exports=p?function(e){if(u)return c.apply(this,arguments)||0;var t=r(this),n=a(t.length),o=n-1;for(arguments.length>1&&(o=l(o,i(arguments[1]))),o<0&&(o=n+o);o>=0;o--)if(o in t&&t[o]===e)return o||0;return-1}:c},498:function(e,t,n){var r=n(108),i=n(494);r({target:"Array",proto:!0,forced:i!==[].lastIndexOf},{lastIndexOf:i})},513:function(e,t,n){"use strict";var r=new(n(17).default);t.a=r},520:function(e,t,n){"use strict";var r=n(435);t.a=function(e){var t=e.page,n=e.filteredSearchTokenKeys,i=e.isGroup,a=e.isGroupAncestor,o=e.isGroupDecendent,s=e.stateFiltersSelector;r.a&&document.querySelector(".filtered-search")&&new r.a({page:t,isGroup:i,isGroupAncestor:a,isGroupDecendent:o,filteredSearchTokenKeys:n,stateFiltersSelector:s}).setup()}},521:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={MERGE_REQUESTS:"merge_requests",ISSUES:"issues",ADMIN_RUNNERS:"admin/runners"}},70:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n(24),n(49),n(56),n(40),n(90),n(18),n(36),n(41);var r=n(8),i=n.n(r),a=n(9);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=s(this,l(t).call(this)),i.a.bind("g p",(function(){return Object(a.a)(".shortcuts-project")})),i.a.bind("g v",(function(){return Object(a.a)(".shortcuts-project-activity")})),i.a.bind("g r",(function(){return Object(a.a)(".shortcuts-project-releases")})),i.a.bind("g f",(function(){return Object(a.a)(".shortcuts-tree")})),i.a.bind("g c",(function(){return Object(a.a)(".shortcuts-commits")})),i.a.bind("g j",(function(){return Object(a.a)(".shortcuts-builds")})),i.a.bind("g n",(function(){return Object(a.a)(".shortcuts-network")})),i.a.bind("g d",(function(){return Object(a.a)(".shortcuts-repository-charts")})),i.a.bind("g i",(function(){return Object(a.a)(".shortcuts-issues")})),i.a.bind("g b",(function(){return Object(a.a)(".shortcuts-issue-boards")})),i.a.bind("g m",(function(){return Object(a.a)(".shortcuts-merge_requests")})),i.a.bind("g w",(function(){return Object(a.a)(".shortcuts-wiki")})),i.a.bind("g s",(function(){return Object(a.a)(".shortcuts-snippets")})),i.a.bind("g k",(function(){return Object(a.a)(".shortcuts-kubernetes")})),i.a.bind("g e",(function(){return Object(a.a)(".shortcuts-environments")})),i.a.bind("g l",(function(){return Object(a.a)(".shortcuts-metrics")})),i.a.bind("i",(function(){return Object(a.a)(".shortcuts-new-issue")})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),t}(n(107).a)},73:function(e,t,n){"use strict";n(30),n(35),n(18),n(64);var r=n(0),i=n.n(r),a=n(32),o=(n(65),n(69),n(55),n(67),n(71));function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.projectSelectInput=i()(t),this.newItemBtn=i()(".new-project-item-link"),this.resourceType=this.newItemBtn.data("type"),this.resourceLabel=this.newItemBtn.data("label"),this.formattedText=this.deriveTextVariants(),this.groupId=this.projectSelectInput.data("groupId"),this.bindEvents(),this.initLocalStorage()}var t,r,a;return t=e,(r=[{key:"bindEvents",value:function(){var e=this;this.projectSelectInput.siblings(".new-project-item-select-button").on("click",(function(t){return e.openDropdown(t)})),this.newItemBtn.on("click",(function(t){e.getProjectFromLocalStorage()||(t.preventDefault(),e.openDropdown(t))})),this.projectSelectInput.on("change",(function(){return e.selectProject()}))}},{key:"initLocalStorage",value:function(){o.a.isLocalStorageAccessSafe()&&(this.localStorageKey=["group",this.groupId,this.formattedText.localStorageItemType,"recent-project"].join("-"),this.setBtnTextFromLocalStorage())}},{key:"openDropdown",value:function(e){n.e(239).then(n.t.bind(null,428,7)).then((function(){i()(e.currentTarget).siblings(".project-item-select").select2("open")})).catch((function(){}))}},{key:"selectProject",value:function(){var e=JSON.parse(this.projectSelectInput.val()),t={url:"".concat(e.url,"/").concat(this.projectSelectInput.data("relativePath")),name:e.name};this.setNewItemBtnAttributes(t),this.setProjectInLocalStorage(t)}},{key:"setBtnTextFromLocalStorage",value:function(){var e=this.getProjectFromLocalStorage();this.setNewItemBtnAttributes(e)}},{key:"setNewItemBtnAttributes",value:function(e){e?(this.newItemBtn.attr("href",e.url),this.newItemBtn.text("".concat(this.formattedText.defaultTextPrefix," in ").concat(e.name))):this.newItemBtn.text("Select project to create ".concat(this.formattedText.presetTextSuffix))}},{key:"getProjectFromLocalStorage",value:function(){var e=localStorage.getItem(this.localStorageKey);return JSON.parse(e)}},{key:"setProjectInLocalStorage",value:function(e){var t=JSON.stringify(e);localStorage.setItem(this.localStorageKey,t)}},{key:"deriveTextVariants",value:function(){var e=this.resourceLabel;return{localStorageItemType:"new-".concat(this.resourceType.split("_").join("-").slice(0,-1)),defaultTextPrefix:e,presetTextSuffix:this.resourceType.split("_").join(" ").slice(0,-1)}}}])&&s(t.prototype,r),a&&s(t,a),e}(),c=n(1),u=function(){i()(".ajax-project-select").each((function(e,t){var n,r=this,o=i()(t).data("simpleFilter")||!1,s=i()(t).data("select2");return this.groupId=i()(t).data("groupId"),this.userId=i()(t).data("userId"),this.includeGroups=i()(t).data("includeGroups"),this.allProjects=i()(t).data("allProjects")||!1,this.orderBy=i()(t).data("orderBy")||"id",this.withIssuesEnabled=i()(t).data("withIssuesEnabled"),this.withMergeRequestsEnabled=i()(t).data("withMergeRequestsEnabled"),this.withShared=void 0===i()(t).data("withShared")||i()(t).data("withShared"),this.includeProjectsInSubgroups=i()(t).data("includeProjectsInSubgroups")||!1,this.allowClear=i()(t).data("allowClear")||!1,n=Object(c.d)("ProjectSelect|Search for project"),this.includeGroups&&(n+=Object(c.d)("ProjectSelect| or group")),i()(t).select2({placeholder:n,minimumInputLength:0,query:function(e){var t,n=function(t){var n={results:t};return e.callback(n)};return t=r.includeGroups?function(t){return a.a.groups(e.term,{},(function(e){var r=e.concat(t);return n(r)}))}:n,r.groupId?a.a.groupProjects(r.groupId,e.term,{with_issues_enabled:r.withIssuesEnabled,with_merge_requests_enabled:r.withMergeRequestsEnabled,with_shared:r.withShared,include_subgroups:r.includeProjectsInSubgroups},t):r.userId?a.a.userProjects(r.userId,e.term,{with_issues_enabled:r.withIssuesEnabled,with_merge_requests_enabled:r.withMergeRequestsEnabled,with_shared:r.withShared,include_subgroups:r.includeProjectsInSubgroups},t):a.a.projects(e.term,{order_by:r.orderBy,with_issues_enabled:r.withIssuesEnabled,with_merge_requests_enabled:r.withMergeRequestsEnabled,membership:!r.allProjects},t)},id:function(e){return o?e.id:JSON.stringify({name:e.name,url:e.web_url})},text:function(e){return e.name_with_namespace||e.name},initSelection:function(e,t){return a.a.project(e.val()).then((function(e){var n=e.data;return t(n)}))},allowClear:this.allowClear,dropdownCssClass:"ajax-project-dropdown"}),s||o?t:new l(t)}))};t.a=function(){return n.e(239).then(n.t.bind(null,428,7)).then(u).catch((function(){}))}},731:function(e,t,n){"use strict";n(42),n(46);var r=n(0),i=n.n(r),a=n(20),o=n(176),s=n(292),l=n(1);var c=n(291),u=n(513);function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.vueIssuablesListFeature=Object(a.property)(["gon","features","vueIssuablesList"])(window),this.initDomElements(),this.bindEvents(),this.initDropdowns(),this.setupBulkUpdateActions()}var t,n,r;return t=e,r=[{key:"getCheckedIssueIds",value:function(){var e=i()(".selected-issuable:checked");return e.length>0?i.a.map(e,(function(e){return i()(e).data("id")})):[]}}],(n=[{key:"initDomElements",value:function(){this.$page=i()(".layout-page"),this.$sidebar=i()(".right-sidebar"),this.$sidebarInnerContainer=this.$sidebar.find(".issuable-sidebar"),this.$bulkEditCancelBtn=i()(".js-bulk-update-menu-hide"),this.$bulkEditSubmitBtn=i()(".update-selected-issues"),this.$bulkUpdateEnableBtn=i()(".js-bulk-update-toggle"),this.$otherFilters=i()(".issues-other-filters"),this.$checkAllContainer=i()(".check-all-holder"),this.$issueChecks=i()(".issue-check"),this.$issuesList=i()(".selected-issuable"),this.$issuableIdsInput=i()("#update_issuable_ids")}},{key:"bindEvents",value:function(){var e=this;this.$bulkUpdateEnableBtn.on("click",(function(t){return e.toggleBulkEdit(t,!0)})),this.$bulkEditCancelBtn.on("click",(function(t){return e.toggleBulkEdit(t,!1)})),this.$checkAllContainer.on("click",(function(t){return e.selectAll(t)})),this.$issuesList.on("change",(function(){return e.updateFormState()})),this.$bulkEditSubmitBtn.on("click",(function(){return e.prepForSubmit()})),this.$checkAllContainer.on("click",(function(){return e.updateFormState()})),this.vueIssuablesListFeature&&u.a.$on("issuables:updateBulkEdit",(function(){e.updateFormState()}))}},{key:"initDropdowns",value:function(){new c.a,new s.a,i()(".js-issue-status").each((function(e,t){var n=i()(t).data("fieldName");return i()(t).glDropdown({selectable:!0,fieldName:n,toggleLabel:function(e,t,n){var r=Object(l.a)("Author"),i=n.dropdown.find(".is-active");return i.length&&(r=i.text()),r},clicked:function(e){return e.e.preventDefault()},id:function(e,t){return i()(t).data("id")}})})),i()(".js-subscription-event").each((function(e,t){var n=i()(t).data("fieldName");return i()(t).glDropdown({selectable:!0,fieldName:n,toggleLabel:function(e,t,n){var r=Object(l.a)("Subscription"),i=n.dropdown.find(".is-active");return i.length&&(r=i.text()),r},clicked:function(e){return e.e.preventDefault()},id:function(e,t){return i()(t).data("id")}})}))}},{key:"setupBulkUpdateActions",value:function(){o.a.setOriginalDropdownData()}},{key:"updateFormState",value:function(){var e=!i()(".selected-issuable:checked").length;this.toggleSubmitButtonDisabled(e),this.updateSelectedIssuableIds(),o.a.setOriginalDropdownData()}},{key:"prepForSubmit",value:function(){var e=this;setTimeout((function(){return e.$bulkEditSubmitBtn.disable()})),this.updateSelectedIssuableIds()}},{key:"toggleBulkEdit",value:function(e,t){e.preventDefault(),u.a.$emit("issuables:toggleBulkEdit",t),this.toggleSidebarDisplay(t),this.toggleBulkEditButtonDisabled(t),this.toggleOtherFiltersDisabled(t),this.toggleCheckboxDisplay(t)}},{key:"updateSelectedIssuableIds",value:function(){this.$issuableIdsInput.val(e.getCheckedIssueIds())}},{key:"selectAll",value:function(){var e=this.$checkAllContainer.find("input").prop("checked");this.$issuesList.prop("checked",e)}},{key:"toggleSidebarDisplay",value:function(e){this.$page.toggleClass("right-sidebar-expanded issuable-bulk-update-sidebar",e),this.$page.toggleClass("right-sidebar-collapsed issuable-bulk-update-sidebar",!e),this.$sidebarInnerContainer.toggleClass("hidden",!e),this.$sidebar.toggleClass("right-sidebar-expanded issuable-bulk-update-sidebar",e),this.$sidebar.toggleClass("right-sidebar-collapsed issuable-bulk-update-sidebar",!e)}},{key:"toggleBulkEditButtonDisabled",value:function(e){e?this.$bulkUpdateEnableBtn.disable():this.$bulkUpdateEnableBtn.enable()}},{key:"toggleCheckboxDisplay",value:function(e){this.$checkAllContainer.toggleClass("hidden",!e||this.vueIssuablesListFeature),this.$issueChecks.toggleClass("hidden",!e)}},{key:"toggleOtherFiltersDisabled",value:function(e){this.$otherFilters.toggleClass("disabled-content",e)}},{key:"toggleSubmitButtonDisabled",value:function(e){e?this.$bulkEditSubmitBtn.disable():this.$bulkEditSubmitBtn.enable()}}])&&d(t.prototype,n),r&&d(t,r),e}();t.a={bulkUpdateSidebar:null,init:function(e){var t=document.querySelector(".issues-bulk-update"),n=Boolean(this.bulkUpdateSidebar);return t&&!n&&(o.a.init({prefixId:e}),this.bulkUpdateSidebar=new h),this.bulkUpdateSidebar}}},749:function(e,t,n){"use strict";var r=n(350),i=n(1),a=n(14),o=n(386),s=n(11),l=function(e,t,n){var r=n.move_before_id,o=n.move_after_id;return s.a.put("".concat(e,"/reorder"),{move_before_id:r,move_after_id:o,group_full_path:t.dataset.groupFullPath}).catch((function(){Object(a.a)(Object(i.d)("ManualOrdering|Couldn't save the order of the issues"))}))};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"li.issue",t=document.querySelector(".manual-ordering");t&&gon.current_user_id>0&&r.default.create(t,Object(o.a)({scroll:!0,fallbackTolerance:1,dataIdAttr:"data-id",fallbackOnBody:!1,group:{name:"issues"},draggable:e,onStart:function(){Object(o.c)()},onUpdate:function(e){var n=e.item,r=n.getAttribute("url")||n.dataset.url,i=n.previousElementSibling,a=n.nextElementSibling,o=i&&parseInt(i.dataset.id,10),s=a&&parseInt(a.dataset.id,10);l(r,t,{move_after_id:s,move_before_id:o})}}))}},88:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));n(42),n(89);var r=n(0),i=n.n(r),a=n(51),o=n.n(a),s=n(1),l=n(33);n(28),n(78),n(40),n(46),n(129),n(35),n(77),n(18),n(36),n(41);var c=function(e){return e.reduce((function(e,t){var n=t.name,r=t.value;return Object.assign(e,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},n,r))}),{})},u=n(11),d=n(14),h=n(73);function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t=i()("ul.clone-options-dropdown"),n=i()("#project_clone"),r=i()(".js-git-clone-holder .js-clone-dropdown-label"),a=document.querySelector(".js-mobile-git-clone .js-clone-dropdown-label"),s=r.text().trim();s.length>0&&i()("a:contains('".concat(s,"')"),t).addClass("is-active"),i()("a",t).on("click",(function(e){e.preventDefault();var r=i()(e.currentTarget),o=r.attr("href"),s=r.data("cloneType");i()(".is-active",t).removeClass("is-active"),i()('a[data-clone-type="'.concat(s,'"]')).each((function(){var e=i()(this),t=e.find(".dropdown-menu-inner-title").text(),n=e.closest(".project-clone-holder").find(".js-clone-dropdown-label");e.toggleClass("is-active"),n.text(t)})),a?a.dataset.clipboardText=o:n.val(o),i()(".js-git-empty .js-clone").text(o)})),e.initRefSwitcher(),i()(".project-refs-select").on("change",(function(){return i()(this).parents("form").submit()})),i()(".hide-no-ssh-message").on("click",(function(e){return o.a.set("hide_no_ssh_message","false"),i()(this).parents(".no-ssh-key-message").remove(),e.preventDefault()})),i()(".hide-no-password-message").on("click",(function(e){return o.a.set("hide_no_password_message","false"),i()(this).parents(".no-password-message").remove(),e.preventDefault()})),i()(".hide-auto-devops-implicitly-enabled-banner").on("click",(function(e){var t=i()(this).data("project-id"),n="hide_auto_devops_implicitly_enabled_banner_".concat(t);return o.a.set(n,"false"),i()(this).parents(".auto-devops-implicitly-enabled-banner").remove(),e.preventDefault()})),e.projectSelectDropdown()}var t,n,r;return t=e,r=[{key:"projectSelectDropdown",value:function(){Object(h.a)(),i()(".project-item-select").on("click",(function(t){return e.changeProject(i()(t.currentTarget).val())}))}},{key:"changeProject",value:function(e){return window.location=e}},{key:"initRefSwitcher",value:function(){var e=document.createElement("li"),t=document.createElement("a");return t.href="#",i()(".js-project-refs-dropdown").each((function(){var n,r,a,o=i()(this),h=o.data("selected"),p=o.data("fieldName"),f=Boolean(o.data("visit")),v=o.closest("form"),m=v.attr("action"),g=Object(l.h)((n=v[0],r=new FormData(n),a=Array.from(r.keys()).map((function(e){var t=r.getAll(e);return{name:e,value:1===(t=t.filter((function(e){return e}))).length?t[0]:t}})),c(a)),m);return o.glDropdown({data:function(e,t){u.a.get(o.data("refsUrl"),{params:{ref:o.data("ref"),search:e}}).then((function(e){var n=e.data;return t(n)})).catch((function(){return Object(d.a)(Object(s.a)("An error occurred while getting projects"))}))},selectable:!0,filterable:!0,filterRemote:!0,filterByText:!0,inputFieldName:o.data("inputFieldName"),fieldName:p,renderRow:function(n){var r,i,a,o=e.cloneNode(!1),s=t.cloneNode(!1);return n===h&&(s.className="is-active"),s.textContent=n,s.dataset.ref=n,n.length>0&&f&&(s.href=Object(l.h)((a=n,(i=p)in(r={})?Object.defineProperty(r,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[i]=a,r),g)),o.appendChild(s),o},id:function(e,t){return t.attr("data-ref")},toggleLabel:function(e,t){return t.text().trim()},clicked:function(e){var t=e.e;f||t.preventDefault()}})}))}}],(n=null)&&p(t.prototype,n),r&&p(t,r),e}()}},[[2338,1,0,2,6]]]);
//# sourceMappingURL=pages.projects.issues.index.10b160f9.chunk.js.map